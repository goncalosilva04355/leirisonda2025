var i=Object.defineProperty;var l=(r,e,t)=>e in r?i(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>l(r,typeof e!="symbol"?e+"":e,t);class c{constructor(){o(this,"defaultUsers",[{id:1,name:"Gon√ßalo Fonseca",email:"gongonsilva@gmail.com",password:"19867gsf",role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:"2024-01-01"},{id:2,name:"Jo√£o Silva",email:"manager@leirisonda.com",password:"manager123",role:"manager",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!0,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!0,edit:!0,delete:!1}},active:!0,createdAt:"2024-01-01"},{id:3,name:"Maria Santos",email:"tecnico@leirisonda.com",password:"tecnico123",role:"technician",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}},active:!0,createdAt:"2024-01-01"},{id:4,name:"Ana Costa",email:"ana@leirisonda.com",password:"ana123",role:"technician",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}},active:!0,createdAt:"2024-01-01"}]);o(this,"mockUsers",[{uid:"admin-1",email:"gongonsilva@gmail.com",password:"19867gsf",name:"Gon√ßalo Fonseca",role:"super_admin",active:!0,createdAt:new Date().toISOString()},{uid:"manager-1",email:"manager@leirisonda.com",password:"manager123",name:"Jo√£o Silva",role:"manager",active:!0,createdAt:new Date().toISOString()},{uid:"tech-1",email:"tecnico@leirisonda.com",password:"tecnico123",name:"Maria Santos",role:"technician",active:!0,createdAt:new Date().toISOString()},{uid:"tech-2",email:"ana@leirisonda.com",password:"ana123",name:"Ana Costa",role:"technician",active:!0,createdAt:new Date().toISOString()}])}async restoreDefaultUsers(){const e={success:!1,message:"",usersRestored:0,errors:[]};try{console.log("üîÑ Iniciando restaura√ß√£o de utilizadores...");const t=localStorage.getItem("app-users");(!t||JSON.parse(t).length===0)&&(localStorage.setItem("app-users",JSON.stringify(this.defaultUsers)),e.usersRestored+=this.defaultUsers.length,console.log("‚úÖ Restaurados app-users"));const a=localStorage.getItem("mock-users");(!a||JSON.parse(a).length===0)&&(localStorage.setItem("mock-users",JSON.stringify(this.mockUsers)),console.log("‚úÖ Restaurados mock-users"));const s=localStorage.getItem("users");(!s||JSON.parse(s).length===0)&&(localStorage.setItem("users",JSON.stringify(this.defaultUsers)),console.log("‚úÖ Restaurados users")),e.success=!0,e.message=`Utilizadores restaurados com sucesso! ${e.usersRestored} utilizadores dispon√≠veis.`,console.log("‚úÖ Restaura√ß√£o de utilizadores conclu√≠da"),window.dispatchEvent(new CustomEvent("usersRestored"))}catch(t){console.error("‚ùå Erro na restaura√ß√£o de utilizadores:",t),e.success=!1,e.message=`Erro na restaura√ß√£o: ${t.message}`,e.errors.push(t.message)}return e}needsRestore(){try{const e=localStorage.getItem("app-users"),t=localStorage.getItem("mock-users"),a=!e||JSON.parse(e).length===0,s=!t||JSON.parse(t).length===0;return a||s}catch(e){return console.error("Erro ao verificar se precisa restaurar:",e),!0}}async autoRestore(){if(this.needsRestore()){console.log("üîÑ Utilizadores em falta, iniciando restaura√ß√£o autom√°tica...");const e=await this.restoreDefaultUsers();e.success?console.log("‚úÖ Restaura√ß√£o autom√°tica conclu√≠da"):console.error("‚ùå Falha na restaura√ß√£o autom√°tica:",e.message)}}getUserStats(){try{const e=JSON.parse(localStorage.getItem("app-users")||"[]"),t=JSON.parse(localStorage.getItem("mock-users")||"[]"),a=new Set([...e.map(s=>s.email),...t.map(s=>s.email)]);return{appUsers:e.length,mockUsers:t.length,totalUnique:a.size}}catch(e){return console.error("Erro ao obter estat√≠sticas:",e),{appUsers:0,mockUsers:0,totalUnique:0}}}}const n=new c;export{n as default,n as userRestoreService};
//# sourceMappingURL=userRestoreService-ClV01tlB.js.map
