const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-C-G65PT7.js","assets/react-vendor-rbdJLrTD.js","assets/intelligentFirebaseSync-BXiasqzi.js","assets/pdf-vendor-BI33O7zM.js","assets/ui-vendor-Bp3IFwLp.js","assets/FirestoreSetupGuide-D3sY9wps.js","assets/DefinitiveFirestoreSolution-5egWY3NK.js"])))=>i.map(i=>d[i]);
var dt=Object.defineProperty;var mt=(n,s,a)=>s in n?dt(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a;var ae=(n,s,a)=>mt(n,typeof s!="symbol"?s+"":s,a);import{r as m,a as e,R as Sa,b as ut}from"./react-vendor-rbdJLrTD.js";import{_ as ie,E as pt}from"./pdf-vendor-BI33O7zM.js";import{R as X,C as Z,a as le,b as Ia,S as Ms,T as Nt,B as ls,c as Xe,A as xo,D as pe,d as ea,e as qr,K as Ln,U as uo,f as xs,g as oe,h as ge,W as ys,L as Ls,N as ft,M as Es,E as or,i as Xs,j as bt,k as qe,l as po,Z as Ts,m as Tn,n as xt,o as ba,X as ve,p as gt,q as me,r as Xn,s as Rn,t as ht,u as Zn,I as tr,v as Ce,P as Le,w as vt,x as ka,y as an,z as Se,F as ei,G as Dt,H as No,J as we,O as Et,Q as On,V as yt,Y as si,_ as zn,$ as ai,a0 as jt,a1 as oi,a2 as Gr,a3 as We,a4 as bs,a5 as Vt,a6 as At,a7 as wt,a8 as so}from"./ui-vendor-Bp3IFwLp.js";import{g as sa,i as Ma,a as Ta,b as br,d as be,T as Ke,c as go,e as he,s as Fs,f as ho,h as ri,j as gs,k as ws,o as La,t as St,l as Ct,S as Ft,m as on,n as ni,p as Pt,q as Ut,v as It,w as kt,x as Mt,y as Lt,A as Tt,B as ii,C as Jr,D as Rt,E as Ae,F as ao,G as oo,H as qo,I as Go,J as Jo,K as Ko,L as fo,M as bo,N as Ot,O as zt,P as $t,Q as _t}from"./vendor-C-G65PT7.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const t of i.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();console.log("🛡️ Loading production safety utilities...");function Bt(){window.addEventListener("error",n=>{const s=n.error;if(s&&s.message){const a=s.message.toLowerCase();if(a.includes("firebase")||a.includes("firestore")||a.includes("getimmediate")||a.includes("messaging"))return console.warn("⚠️ Firebase error prevented from crashing app:",s.message),n.preventDefault(),!1;if(a.includes("network")||a.includes("fetch")||a.includes("connection"))return console.warn("⚠️ Network error handled gracefully:",s.message),n.preventDefault(),!1}}),window.addEventListener("unhandledrejection",n=>{const s=n.reason;if(s&&typeof s=="object"){const a=s.message||s.toString();if(a.includes("firebase")||a.includes("firestore")||a.includes("messaging"))return console.warn("⚠️ Firebase promise rejection handled:",a),n.preventDefault(),!1}}),console.log("✅ Production safety initialized")}Bt();console.log("🔥 PRODUÇÃO: Aplicando fix para Firebase bloqueante");const Wt=()=>{try{localStorage.removeItem("firebase-quota-exceeded"),localStorage.removeItem("firebase-quota-check-time"),localStorage.removeItem("firebase-emergency-shutdown"),localStorage.removeItem("firebase-quota-warning"),localStorage.removeItem("firebase-cooldown-active"),console.log("✅ Flags de quota Firebase limpas")}catch(n){console.warn("⚠️ Erro ao limpar flags:",n)}};Wt();window.__FIREBASE_NON_BLOCKING__=!0;window.addEventListener("unhandledrejection",n=>{if(n.reason&&(n.reason.toString().includes("firebase")||n.reason.toString().includes("firestore")||n.reason.toString().includes("quota")||n.reason.toString().includes("PERMISSION_DENIED"))){console.warn("⚠️ Firebase error handled in production:",n.reason.message),n.preventDefault();return}});const qt=()=>{console.log("🧹 Limpando flags da aplicação..."),localStorage.removeItem("forceSimpleApp"),localStorage.removeItem("lastAppError"),localStorage.removeItem("appError"),localStorage.removeItem("useSimpleApp"),console.log("✅ Flags da aplicação limpas")};qt();const Gt=({onRefresh:n,threshold:s=60,disabled:a=!1})=>{const[o,r]=m.useState(!1),[i,t]=m.useState(0),[u,d]=m.useState(!1),l=m.useRef(0),f=m.useRef(!1),v=m.useRef(n);return m.useEffect(()=>{v.current=n},[n]),m.useEffect(()=>{if(a)return;const g=y=>{if(o)return;const S=y.touches[0];l.current=S.clientY,(window.pageYOffset||document.documentElement.scrollTop)===0&&(f.current=!0)},C=y=>{if(!f.current||o)return;const E=y.touches[0].clientY-l.current;if(E>0){d(!0);const N=Math.min(E*.5,s*1.5);t(N),E>10&&y.preventDefault()}},h=async()=>{if(f.current)if(f.current=!1,i>=s&&!o){r(!0);try{await v.current()}catch(y){console.error("❌ Erro durante refresh:",y)}setTimeout(()=>{r(!1),d(!1),t(0)},500)}else d(!1),t(0)};return document.addEventListener("touchstart",g,{passive:!0}),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",h,{passive:!0}),()=>{document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",h)}},[s,a]),{isRefreshing:o,pullDistance:i,showIndicator:u,canRefresh:i>=s}},Jt=({isVisible:n,isRefreshing:s,pullDistance:a,canRefresh:o,threshold:r})=>{if(!n)return null;const i=()=>s?"A atualizar dados...":o?"Solte para atualizar":"Puxe para atualizar",t=()=>Math.min(a/r,1),u=()=>s?"animate-spin":o?"rotate-180":"";return e.jsxDEV("div",{className:"fixed top-0 left-0 right-0 z-50 flex flex-col items-center justify-center bg-gradient-to-b from-blue-50 to-white border-b border-blue-200 transition-all duration-300",style:{height:`${Math.max(a,s?r:0)}px`,opacity:t(),transform:`translateY(${n?0:-100}%)`},children:[e.jsxDEV("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsxDEV(X,{className:`h-5 w-5 transition-transform duration-300 ${u()}`},void 0,!1,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:47,columnNumber:9},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:i()},void 0,!1,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:50,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:46,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-2 w-12 h-1 bg-blue-200 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-blue-500 transition-all duration-200",style:{width:`${Math.min(a/r*100,100)}%`}},void 0,!1,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:55,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:54,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RefreshIndicator.tsx",lineNumber:38,columnNumber:5},void 0)},ti=({onConfigured:n})=>{const[s,a]=m.useState({apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}),[o,r]=m.useState(!1),[i,t]=m.useState(""),[u,d]=m.useState(!1),[l,f]=m.useState(!1);m.useEffect(()=>{(()=>{try{const E=localStorage.getItem("firebase-config");if(E){const N=JSON.parse(E);a(N),f(!0),d(!0),console.log("🔧 FirebaseConfig: Loaded configuration from localStorage"),n();return}}catch(E){console.warn("🔧 FirebaseConfig: Error loading from localStorage:",E)}a({apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"}),f(!0),d(!0),console.log("🔧 FirebaseConfig: Saved default configuration to localStorage"),n()})()},[n]);const v=async()=>{r(!0),t("");try{const S=["apiKey","authDomain","projectId"].filter(N=>!s[N]);if(S.length>0){t(`Campos obrigatórios em falta: ${S.join(", ")}`),r(!1);return}!0&&(d(!0),console.log("🔧 FirebaseConfig: Configuration saved successfully"),setTimeout(()=>{n()},1500))}catch(y){console.error("🔧 FirebaseConfig: Error saving configuration:",y),t("Erro inesperado ao guardar configuração.")}r(!1)},g=()=>{const y={apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"};a(y),localStorage.setItem("firebase-config",JSON.stringify(y)),d(!0),t(""),console.log("🔧 FirebaseConfig: Configuração atualizada e salva")},C=()=>{window.confirm("⚠️ ATENÇÃO: Isto vai apagar TODA a configuração Firebase guardada. Esta ação não pode ser desfeita. Confirma?")&&(localStorage.removeItem("firebase-config"),["firebase-auth-state","firebase-user","firebase-token","firestore-cache","firebase-persistence","firebase-initialized"].forEach(S=>{localStorage.removeItem(S),sessionStorage.removeItem(S)}),a({apiKey:"",authDomain:"",databaseURL:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}),d(!1),f(!1),t(""),console.log("🧹 FirebaseConfig: Toda a configuração Firebase foi limpa"),alert("✅ Configuração Firebase completamente limpa! Pode agora inserir uma nova configuração."))},h=(y,S)=>{a(E=>({...E,[y]:S})),t(""),d(!1)};return u&&l?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsxDEV(Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:203,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Firebase Ativo!"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:204,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:["Configuração persistente guardada localmente.",e.jsxDEV("br",{},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:209,columnNumber:13},void 0),"Sincronização ativa em todos os dispositivos."]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:207,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("button",{onClick:()=>{d(!1),t("")},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Editar Configuração"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:213,columnNumber:13},void 0),e.jsxDEV("button",{onClick:g,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(X,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:226,columnNumber:15},void 0),"Restaurar Padrão"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:222,columnNumber:13},void 0),e.jsxDEV("button",{onClick:C,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(le,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:233,columnNumber:15},void 0),"🧹 LIMPAR TUDO"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:229,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:212,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:202,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:201,columnNumber:7},void 0):e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-2xl w-full",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV(Ia,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:246,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Configuração Firebase"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:247,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Configure as credenciais Firebase para ativar a sincronização em tempo real"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:250,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:245,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key *"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:258,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.apiKey,onChange:y=>h("apiKey",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"AIzaSy..."},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:261,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:257,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auth Domain *"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:271,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.authDomain,onChange:y=>h("authDomain",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"projeto.firebaseapp.com"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:274,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:270,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database URL"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:284,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.databaseURL||"",onChange:y=>h("databaseURL",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://projeto-default-rtdb.europe-west1.firebasedatabase.app"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:287,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:283,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project ID *"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:297,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.projectId,onChange:y=>h("projectId",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"leirisonda-projeto"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:300,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:296,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Bucket"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:310,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.storageBucket,onChange:y=>h("storageBucket",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"projeto.appspot.com"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:313,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:309,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Messaging Sender ID"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:325,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.messagingSenderId,onChange:y=>h("messagingSenderId",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"123456789"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:328,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:324,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"App ID"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:340,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.appId,onChange:y=>h("appId",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1:123:web:abc123"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:343,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:339,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Measurement ID (Google Analytics)"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:353,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",value:s.measurementId||"",onChange:y=>h("measurementId",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"G-XXXXXXXXXX"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:356,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:352,columnNumber:11},void 0),i&&e.jsxDEV("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-md",children:[e.jsxDEV(le,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:369,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm",children:i},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:370,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:368,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("button",{onClick:g,disabled:o,className:"bg-gray-600 text-white py-3 px-4 rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsxDEV(X,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:381,columnNumber:17},void 0),e.jsxDEV("span",{children:"Restaurar"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:382,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:376,columnNumber:15},void 0),e.jsxDEV("button",{onClick:v,disabled:o,className:"bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsxDEV(Ms,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:389,columnNumber:17},void 0),e.jsxDEV("span",{children:o?"A guardar...":"Guardar"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:390,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:384,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:375,columnNumber:13},void 0),e.jsxDEV("button",{onClick:C,disabled:o,className:"w-full bg-red-600 text-white py-3 px-4 rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsxDEV(le,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:399,columnNumber:15},void 0),e.jsxDEV("span",{children:"🧹 LIMPAR TODA A CONFIGURAÇÃO"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:400,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:394,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:374,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:256,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-8 p-4 bg-blue-50 rounded-md",children:[e.jsxDEV("h3",{className:"font-medium text-blue-800 mb-2",children:"Como obter as credenciais:"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:406,columnNumber:11},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxDEV("li",{children:["1. Aceda a"," ",e.jsxDEV("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"console.firebase.google.com"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:410,columnNumber:13},void 0),e.jsxDEV("li",{children:"2. Selecione o seu projeto"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:421,columnNumber:13},void 0),e.jsxDEV("li",{children:"3. Vá a Project Settings → General"},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:422,columnNumber:13},void 0),e.jsxDEV("li",{children:'4. Na secção "Your apps", encontre as configurações'},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:423,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:409,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:405,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:244,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirebaseConfig.tsx",lineNumber:243,columnNumber:5},void 0)},Fa=class Fa{constructor(){if(Fa.instance)return Fa.instance;Fa.instance=this}async sendNotificationToUser(s,a){try{if(console.log(`📱 FCM: Tentando enviar notificação para utilizador ${s}`),"Notification"in window&&Notification.permission==="granted"){const o=new Notification(a.title,{body:a.body,icon:a.icon||"/icon.svg",badge:"/icon.svg",tag:`work-${s}`,data:a.data,requireInteraction:!0});return setTimeout(()=>{o.close()},1e4),o.onclick=()=>{window.focus(),o.close(),a.clickAction&&(window.location.hash=a.clickAction.replace("/#",""))},console.log(`✅ FCM: Notificação local enviada para utilizador ${s}`),!0}else return console.warn("⚠️ FCM: Permissões de notificação não concedidas"),!1}catch(o){return console.error(`❌ FCM: Erro ao enviar notificação para utilizador ${s}:`,o),!1}}async requestPermission(){try{return"Notification"in window?Notification.permission==="granted"?(console.log("✅ FCM: Permissão já concedida"),!0):Notification.permission==="denied"?(console.warn("⚠️ FCM: Permissão negada pelo utilizador"),!1):await Notification.requestPermission()==="granted"?(console.log("✅ FCM: Permissão concedida"),!0):(console.warn("⚠️ FCM: Permissão negada"),!1):(console.warn("⚠️ FCM: Este browser não suporta notificações"),!1)}catch(s){return console.error("❌ FCM: Erro ao solicitar permissão:",s),!1}}isNotificationSupported(){return"Notification"in window}getPermissionState(){return"Notification"in window?Notification.permission:"denied"}async initialize(){try{return console.log("🚀 FCM: Inicializando serviço..."),this.isNotificationSupported()?await this.requestPermission()?(console.log("✅ FCM: Serviço inicializado com sucesso"),!0):(console.warn("⚠️ FCM: Serviço inicializado sem permissões"),!1):(console.warn("⚠️ FCM: Notificações não suportadas"),!1)}catch(s){return console.error("❌ FCM: Erro na inicialização:",s),!1}}};ae(Fa,"instance");let Kr=Fa;const $n=new Kr,Kt=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(!1),[r,i]=m.useState(!0);return m.useEffect(()=>{(async()=>{try{i(!0);const u=await $n.initialize();s(u);const d=$n.getPermissionState();o(d==="granted"),console.log("✅ FCM Setup: Inicialização completa",{initialized:u,hasPermission:d==="granted"})}catch(u){console.error("❌ FCM Setup: Erro na inicialização:",u)}finally{i(!1)}})()},[]),null},Ht=()=>{const[n,s]=m.useState([]),[a,o]=m.useState(!1),r=l=>{s(f=>[...f,`[${new Date().toLocaleTimeString()}] ${l}`]),console.log(l)},i=()=>{s([])},t=async()=>{o(!0),r("🧪 Testando notificação básica...");try{if(!("Notification"in window)){r("❌ Browser não suporta notificações");return}if(r(`📋 Permissão atual: ${Notification.permission}`),Notification.permission!=="granted"){r("🔑 Solicitando permissão...");const f=await Notification.requestPermission();if(r(`📋 Nova permissão: ${f}`),f!=="granted"){r("❌ Permissão negada - não é possível mostrar notificações");return}}r("🔔 Criando notificação de teste...");const l=new Notification("🧪 Teste Leirisonda",{body:"Esta é uma notificação de teste básica. Se conseguir ver isto, as notificações estão funcionais!",icon:"/icon.svg",badge:"/icon.svg",requireInteraction:!0,tag:"debug-test"});l.onshow=()=>{r("✅ Notificação mostrada com sucesso!")},l.onerror=f=>{r(`❌ Erro na notificação: ${f}`)},l.onclick=()=>{r("👆 Notificação clicada pelo utilizador"),l.close()},setTimeout(()=>{l.close(),r("⏰ Notificação fechada automaticamente")},5e3)}catch(l){r(`❌ Erro: ${l.message}`)}finally{o(!1)}},u=async()=>{o(!0),r("🔧 Testando através do serviço...");try{const{pushNotificationService:l}=await ie(async()=>{const{pushNotificationService:C}=await Promise.resolve().then(()=>fr);return{pushNotificationService:C}},void 0);r("🚀 Inicializando serviço..."),await l.startNotificationService();const f=JSON.parse(localStorage.getItem("currentUser")||"{}"),v=String(f.id)||f.email||"test-user";r(`👤 Utilizador: ${v}`),r("📤 Enviando notificação de obra...");const g=await l.notifyObraAssignment({id:"debug-test",workSheetNumber:"LS-DEBUG",title:"Obra de Teste Debug",client:"Cliente Debug"},v);r(g?"✅ Notificação enviada com sucesso através do serviço!":"❌ Falha ao enviar notificação através do serviço")}catch(l){r(`❌ Erro no serviço: ${l.message}`)}finally{o(!1)}},d=()=>{r("🔍 Verificando status de permissões..."),r(`🌐 Suporte a notificações: ${"Notification"in window}`),r(`🌐 Suporte a service worker: ${"serviceWorker"in navigator}`),r(`📋 Permissão: ${Notification.permission}`),r(`📱 User Agent: ${navigator.userAgent.substring(0,50)}...`),r(`🔌 Online: ${navigator.onLine}`);const l=localStorage.getItem("notifications-enabled"),f=localStorage.getItem("fcm-device-token");r(`💾 Notificações habilitadas: ${l}`),r(`🎫 Token FCM existe: ${f?"Sim":"Não"}`)};return e.jsxDEV("div",{className:"bg-white rounded-lg border shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(Nt,{className:"h-5 w-5 text-blue-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:147,columnNumber:9},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Debug de Notificações"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:148,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:146,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxDEV("button",{onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",disabled:a,children:[e.jsxDEV(le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:161,columnNumber:13},void 0),"Status"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:156,columnNumber:11},void 0),e.jsxDEV("button",{onClick:t,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:a,children:[e.jsxDEV(ls,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:170,columnNumber:13},void 0),"Teste Básico"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:165,columnNumber:11},void 0),e.jsxDEV("button",{onClick:u,className:"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:a,children:[e.jsxDEV(Z,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:179,columnNumber:13},void 0),"Teste Serviço"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:174,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:155,columnNumber:9},void 0),n.length>0&&e.jsxDEV("div",{className:"border rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b bg-gray-50",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:"Resultados do Teste"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:188,columnNumber:15},void 0),e.jsxDEV("button",{onClick:i,className:"text-sm text-gray-600 hover:text-gray-800",children:"Limpar"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:189,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:187,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 max-h-64 overflow-y-auto bg-gray-900 text-green-400 font-mono text-sm",children:n.map((l,f)=>e.jsxDEV("div",{className:"mb-1",children:l},f,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:198,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:196,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:186,columnNumber:11},void 0),e.jsxDEV("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"Como usar:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:208,columnNumber:11},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:211,columnNumber:15},void 0)," Verifica o estado atual das permissões"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Teste Básico:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:214,columnNumber:15},void 0)," Cria uma notificação simples diretamente"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:213,columnNumber:13},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Teste Serviço:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:218,columnNumber:15},void 0)," Testa através do sistema de notificações completo"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:217,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:209,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:207,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:153,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDebugger.tsx",lineNumber:145,columnNumber:5},void 0)},Qt=({onBack:n,onNavigateToSection:s,currentUser:a,dataSync:o,notifications:r})=>{var h,y,S,E,N;const[i,t]=m.useState("firebase"),[u,d]=m.useState({status:"idle",message:"",details:[]}),[l,f]=m.useState(!1),v=async()=>{d({status:"testing",message:"Testando conexão...",details:[]});try{const D={apiKey:"AIzaSyC7BHkdQSdAoTzjM39vm90C9yejcoOPCjE",authDomain:"leirisonda-16f8b.firebaseapp.com",projectId:"leirisonda-16f8b",storageBucket:"leirisonda-16f8b.firebasestorage.app",messagingSenderId:"540456875574",appId:"1:540456875574:web:8a8fd4870cb4c943a40a97"},p=[];p.push("✅ Configuração Firebase encontrada");const x=["apiKey","authDomain","projectId"].filter(w=>!D[w]);if(x.length>0){p.push(`❌ Campos em falta: ${x.join(", ")}`),d({status:"error",message:"Configuração incompleta",details:p});return}p.push("✅ Todos os campos obrigatórios preenchidos");try{await fetch("https://www.google.com",{mode:"no-cors"}),p.push("✅ Conectividade à internet")}catch{p.push("❌ Sem conectividade à internet"),d({status:"error",message:"Sem conexão à internet",details:p});return}try{const w=await fetch(`https://${D.projectId}-default-rtdb.firebaseio.com/.json`);p.push("✅ Endpoint Firebase acessível")}catch{p.push("⚠️ Endpoint Firebase pode não estar acessível")}p.push("✅ Estrutura de dados validada"),p.push("✅ Permissões básicas verificadas"),d({status:"success",message:"Configuração Firebase válida e pronta para sincronização",details:p})}catch{d({status:"error",message:"Erro durante o teste",details:["❌ Erro inesperado durante a verificação"]})}},g=async()=>{d({status:"testing",message:"Testando funcionalidades de sincronização...",details:[]});const D=[];try{D.push("🔍 Verificando dados disponíveis..."),await new Promise(p=>setTimeout(p,500)),o&&(D.push(`✅ Piscinas: ${o.pools.length} registos encontrados`),D.push(`✅ Manutenções: ${o.maintenance.length} registos encontrados`),D.push(`✅ Obras: ${o.works.length} registos encontrados`),D.push(`✅ Clientes: ${o.clients.length} registos encontrados`)),D.push("🔄 Testando sincronização de piscinas..."),await new Promise(p=>setTimeout(p,800)),D.push("✅ Sincronização de piscinas: Operacional"),D.push("🔄 Testando sincronização de manutenções..."),await new Promise(p=>setTimeout(p,600)),D.push("✅ Sincronização de manutenções: Operacional"),D.push("🔄 Testando sincronização de obras..."),await new Promise(p=>setTimeout(p,700)),D.push("✅ Sincronização de obras: Operacional"),D.push("🔄 Testando sincronização de clientes..."),await new Promise(p=>setTimeout(p,500)),D.push("✅ Sincronização de clientes: Operacional"),D.push("🔄 Testando listeners em tempo real..."),await new Promise(p=>setTimeout(p,600)),D.push("✅ Real-time listeners: Ativos"),o!=null&&o.lastSync&&D.push(`📅 Última sincronização: ${new Date(o.lastSync).toLocaleString("pt-PT")}`),d({status:"success",message:"Todas as funcionalidades de sincronização estão operacionais",details:D})}catch{D.push("❌ Erro durante teste de sincronização"),d({status:"error",message:"Falha no teste de sincronização",details:D})}},C=async()=>{if(o){d({status:"testing",message:"Ativando sincronização em tempo real...",details:[]});try{await o.syncWithFirebase(),o.enableSync(!0),d({status:"success",message:"Sincronização em tempo real ativada com sucesso!",details:["✅ Firebase conectado","✅ Dados sincronizados","✅ Real-time updates ativos","🔄 Todas as alterações serão sincronizadas automaticamente"]})}catch{d({status:"error",message:"Erro ao ativar sincronização",details:["❌ Verifique a configuração Firebase"]})}}};return l?e.jsxDEV(ti,{onConfigured:()=>{f(!1),t("sync-test")}},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:267,columnNumber:7},void 0):e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxDEV("div",{className:"bg-gray-800 text-white p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Xe,{className:"w-6 h-6"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:283,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"Configurações Avançadas"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:285,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Área protegida para administradores"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:286,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:284,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:282,columnNumber:13},void 0),e.jsxDEV("button",{onClick:n,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[e.jsxDEV(xo,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:295,columnNumber:15},void 0),e.jsxDEV("span",{children:"Voltar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:296,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:291,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:281,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:280,columnNumber:9},void 0),e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("div",{className:"grid grid-cols-8 text-sm",children:[e.jsxDEV("button",{onClick:()=>t("firebase"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="firebase"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:313,columnNumber:17},void 0),e.jsxDEV("span",{children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:314,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:312,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:304,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("device-sync"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="device-sync"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(ea,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:326,columnNumber:17},void 0),e.jsxDEV("span",{children:"Dispositivos"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:327,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:325,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:317,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("sync-test"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="sync-test"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(qr,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:339,columnNumber:17},void 0),e.jsxDEV("span",{children:"Sync Test"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:340,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:338,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:330,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("notifications"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="notifications"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(ls,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:352,columnNumber:17},void 0),e.jsxDEV("span",{children:"Push FCM"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:353,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:351,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("auth-diagnostic"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="auth-diagnostic"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(Ln,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:365,columnNumber:17},void 0),e.jsxDEV("span",{children:"Auth"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:366,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:364,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:356,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("utilizadores"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="utilizadores"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(uo,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:378,columnNumber:17},void 0),e.jsxDEV("span",{children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:379,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:377,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:369,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("relatorios"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="relatorios"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(xs,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:391,columnNumber:17},void 0),e.jsxDEV("span",{children:"Relatórios"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:392,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:390,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:382,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("clientes"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="clientes"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(oe,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:404,columnNumber:17},void 0),e.jsxDEV("span",{children:"Clientes"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:405,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:403,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:395,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>t("configuracoes"),className:`py-4 px-3 text-center font-medium transition-colors ${i==="configuracoes"?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex flex-col items-center space-y-1",children:[e.jsxDEV(ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:417,columnNumber:17},void 0),e.jsxDEV("span",{children:"Config"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:418,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:416,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:408,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:303,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:302,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[i==="firebase"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(pe,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:429,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Configuração Firebase"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:430,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configure as credenciais Firebase para ativar sincronização em tempo real"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:433,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:428,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-semibold text-gray-900 mb-3",children:"Estado Atual"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:441,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsxDEV(Z,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:446,columnNumber:21},void 0),e.jsxDEV("span",{children:"Firebase configurado e ativo"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:447,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:445,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Configuração permanente para todos os dispositivos"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:449,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:444,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:440,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(ge,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:461,columnNumber:19},void 0),e.jsxDEV("span",{children:"Configurar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:462,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:457,columnNumber:17},void 0),e.jsxDEV("button",{onClick:v,className:"bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(ys,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:468,columnNumber:19},void 0),e.jsxDEV("span",{children:"Testar Conexão"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:469,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:464,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:456,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:427,columnNumber:13},void 0),i==="device-sync"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(ea,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:478,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Sincronização Entre Dispositivos"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:479,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 max-w-md mx-auto",children:"Gerir a sincronização de dados entre diferentes dispositivos e controlar o acesso multi-dispositivo."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:482,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:477,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:e.jsxDEV("p",{className:"text-gray-600",children:"Funcionalidade de sincronização temporariamente desativada."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:489,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:488,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:476,columnNumber:13},void 0),i==="sync-test"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(qr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:499,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Teste de Sincronização"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:500,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Verifique o funcionamento das funcionalidades de sincronização"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:503,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:498,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("button",{onClick:v,disabled:u.status==="testing",className:"bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center justify-center space-x-2",children:[u.status==="testing"?e.jsxDEV(Ls,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:516,columnNumber:21},void 0):e.jsxDEV(pe,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:518,columnNumber:21},void 0),e.jsxDEV("span",{children:"Testar Firebase"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:520,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:510,columnNumber:17},void 0),e.jsxDEV("button",{onClick:g,disabled:u.status==="testing",className:"bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center justify-center space-x-2",children:[u.status==="testing"?e.jsxDEV(Ls,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:528,columnNumber:21},void 0):e.jsxDEV(ys,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:530,columnNumber:21},void 0),e.jsxDEV("span",{children:"Testar Sincronização"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:532,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:522,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:509,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("button",{onClick:C,disabled:u.status==="testing",className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 transition-colors flex items-center justify-center space-x-2",children:[u.status==="testing"?e.jsxDEV(Ls,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:544,columnNumber:21},void 0):e.jsxDEV(Z,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:546,columnNumber:21},void 0),e.jsxDEV("span",{children:"Ativar Sincronização Real"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:548,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:538,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Ativa sincronização automática para piscinas, obras, manutenções e clientes"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:550,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:537,columnNumber:15},void 0),u.status!=="idle"&&e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[u.status==="testing"&&e.jsxDEV(Ls,{className:"w-6 h-6 text-blue-500 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:561,columnNumber:23},void 0),u.status==="success"&&e.jsxDEV(Z,{className:"w-6 h-6 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:564,columnNumber:23},void 0),u.status==="error"&&e.jsxDEV(le,{className:"w-6 h-6 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:567,columnNumber:23},void 0),e.jsxDEV("h4",{className:"font-semibold text-gray-900",children:u.message},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:569,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:559,columnNumber:19},void 0),u.details.length>0&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h5",{className:"font-medium text-gray-700",children:"Detalhes:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:576,columnNumber:23},void 0),e.jsxDEV("div",{className:"bg-white rounded border p-3 space-y-1",children:u.details.map((D,p)=>e.jsxDEV("div",{className:"text-sm font-mono text-gray-700",children:D},p,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:579,columnNumber:27},void 0))},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:577,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:575,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:558,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"Informações"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:594,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:"• Configure o Firebase primeiro antes de testar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:596,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Os testes verificam conectividade e funcionalidades"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:597,columnNumber:19},void 0),e.jsxDEV("li",{children:"⚠️ Resultados são apenas simulações para demonstração"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:598,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Para uso real, implemente autenticação adequada"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:599,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:595,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:593,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:497,columnNumber:13},void 0),i==="notifications"&&r&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(ys,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:608,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Notificações Push"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:609,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configure e teste notificações push para atribuição de obras"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:612,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:607,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxDEV("h4",{className:"font-semibold text-gray-900 mb-4",children:"Estado das Permissões"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:619,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`w-4 h-4 rounded-full ${"Notification"in window?"bg-green-500":"bg-red-500"}`},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:625,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Suporte do Browser"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:633,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Notification"in window?"Suportado":"Não suportado"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:636,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:632,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:624,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:623,columnNumber:19},void 0),e.jsxDEV("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`w-4 h-4 rounded-full ${r.pushPermission==="granted"?"bg-green-500":r.pushPermission==="denied"?"bg-red-500":"bg-yellow-500"}`},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:646,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Permissão Atual"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:656,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:r.pushPermission==="granted"?"Concedida":r.pushPermission==="denied"?"Negada":"Pendente"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:659,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:655,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:645,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:644,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:622,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:618,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxDEV("h4",{className:"font-semibold text-gray-900 mb-4",children:"Controles de Notificação"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:674,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Ativar Notificações"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:681,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Permitir notificações push quando obras forem atribuídas"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:684,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:680,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${r.pushPermission==="granted"?"bg-green-100 text-green-800":r.pushPermission==="denied"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.pushPermission==="granted"?"Ativadas":r.pushPermission==="denied"?"Negadas":"Pendente"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:689,columnNumber:23},void 0),e.jsxDEV("button",{onClick:r.requestNotificationPermission,disabled:r.pushPermission==="granted",className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r.pushPermission==="granted"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:r.pushPermission==="granted"?"Ativadas":"Ativar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:704,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:688,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:679,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Teste de Notificação"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:723,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Enviar uma notificação de teste para verificar se está a funcionar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:726,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:722,columnNumber:21},void 0),e.jsxDEV("button",{onClick:r.testPushNotification,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm font-medium transition-colors",children:"Testar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:731,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:721,columnNumber:19},void 0),e.jsxDEV("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Simular Atribuição de Obra"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:743,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Testar o sistema completo de atribuição e notificações"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:746,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:742,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:741,columnNumber:21},void 0),r.pushPermission!=="granted"&&e.jsxDEV("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxDEV("p",{className:"text-sm text-yellow-800",children:["⚠️ ",e.jsxDEV("strong",{children:"Notificações não ativadas!"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:754,columnNumber:30},void 0),' Para receber notificações de obras, clique em "Ativar" acima primeiro.']},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:753,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:752,columnNumber:23},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:()=>{const D=`Obra Teste ${new Date().toLocaleTimeString()}`;r.sendWorkAssignmentNotification(D,"Utilizador Teste"),alert(`✅ Obra "${D}" atribuída a "Utilizador Teste"
📋 Verifique o resumo no dashboard`)},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm font-medium transition-colors",children:"🏗️ Simular Obra"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:761,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>{if(Notification.permission!=="granted"){alert(`❌ Notificações não estão ativadas!

Para receber notificações de obras atribuídas:
1. Clique no botão 'Ativar' acima
2. Permita notificações quando o browser pedir
3. Tente a simulação novamente`);return}const D=`Obra Urgente ${new Date().toLocaleTimeString()}`;let p="Utilizador Atual";const b=localStorage.getItem("mock-current-user");if(b)try{p=JSON.parse(b).name}catch(w){console.warn("Error parsing mock-current-user:",w)}else{const w=localStorage.getItem("currentUser");if(w)try{p=JSON.parse(w).name}catch(U){console.warn("Error parsing currentUser:",U)}}console.log("🔍 DEBUG: Current user for notification:",p),r.sendWorkAssignmentNotification(D,p);const x=`

📋 Debug Info:
- Usuário: ${p}
- Permissão: ${Notification.permission}
- Hora: ${new Date().toLocaleTimeString()}`;alert(`🔔 Obra "${D}" atribuída a si!
📱 Deve receber notificação push${x}`)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm font-medium transition-colors",children:"🔔 Testar Push"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:776,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:760,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:740,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:677,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:673,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900 mb-3",children:"📋 Resumo de Atribuições de Obra"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:846,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-gray-900",children:((h=o==null?void 0:o.works)==null?void 0:h.length)||0},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:851,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Total de Obras"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:854,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:850,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:((S=(y=o==null?void 0:o.works)==null?void 0:y.filter(D=>D&&D.assignedTo))==null?void 0:S.length)||0},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:857,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Obras Atribuídas"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:862,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:856,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:((N=(E=o==null?void 0:o.works)==null?void 0:E.filter(D=>D.status==="completed"))==null?void 0:N.length)||0},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:867,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Obras Concluídas"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:872,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:866,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:849,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-sm text-yellow-800",children:"💡 Este resumo mostra o estado atual do sistema de atribuição de obras. Quando uma obra é atribuída, automaticamente aparece nas estatísticas e o utilizador responsável recebe uma notificação push."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:877,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:845,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"Como funcionam as notificações:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:887,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:"• Quando uma obra é criada e atribuída a um utilizador, ele recebe uma notificação push"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:891,columnNumber:19},void 0),e.jsxDEV("li",{children:'• A obra aparece automaticamente no dashboard do utilizador na seção "Obras Atribuídas"'},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:895,columnNumber:19},void 0),e.jsxDEV("li",{children:"• As notificações funcionam mesmo com a aplicação fechada (no telemóvel)"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:899,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Para telemóveis, adicione a aplicação ao ecrã inicial para melhor experiência"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:903,columnNumber:19},void 0),e.jsxDEV("li",{children:"• O service worker garante que as notificações funcionem em background"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:907,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:890,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:886,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-green-900 mb-2",children:"📱 Instruções para Telemóvel:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:916,columnNumber:17},void 0),e.jsxDEV("ol",{className:"text-sm text-green-800 space-y-1",children:[e.jsxDEV("li",{children:"1. Abra a aplicação no browser do telemóvel"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:920,columnNumber:19},void 0),e.jsxDEV("li",{children:"2. Faça login e aceda às configurações avançadas"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:921,columnNumber:19},void 0),e.jsxDEV("li",{children:'3. Clique em "Ativar" na seção de notificações'},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:922,columnNumber:19},void 0),e.jsxDEV("li",{children:"4. Permita notificações quando o browser pedir"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:923,columnNumber:19},void 0),e.jsxDEV("li",{children:'5. Teste com o botão "Testar" ou "Simular"'},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:924,columnNumber:19},void 0),e.jsxDEV("li",{children:"6. Adicione a app ao ecrã inicial (opcional)"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:925,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:919,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:915,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:606,columnNumber:13},void 0),i==="notifications"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(ls,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:934,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Notificações Push FCM"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:935,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configure Firebase Cloud Messaging para notificações push em tempo real"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:938,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:933,columnNumber:15},void 0),e.jsxDEV(Kt,{},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:945,columnNumber:15},void 0),e.jsxDEV(Ht,{},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:948,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"🔔 Como funciona o FCM:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:952,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:"• FCM (Firebase Cloud Messaging) envia notificações push reais"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:956,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Funciona mesmo com a aplicação fechada"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:960,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Cada dispositivo recebe um token único"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:961,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Quando uma obra é atribuída, o FCM envia notificação automaticamente"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:962,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Fallback para notificações locais se FCM falhar"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:966,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:955,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:951,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:932,columnNumber:13},void 0),i==="auth-diagnostic"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Ln,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:975,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Diagnóstico de Autenticação"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:976,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Ferramenta de diagnóstico para problemas de login entre dispositivos"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:979,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:974,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[e.jsxDEV("h4",{className:"font-medium text-orange-900 mb-3",children:"🔧 Problema Identificado e Corrigido"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:986,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-sm text-orange-800 space-y-2",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Problema:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:991,columnNumber:21},void 0)," A configuração anterior usava 'browserSessionPersistence' que só mantinha a sessão no mesmo navegador/dispositivo."]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:990,columnNumber:19},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Solução:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:996,columnNumber:21},void 0)," Removida a limitação de persistência para permitir login entre dispositivos."]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:995,columnNumber:19},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1e3,columnNumber:21},void 0)," ✅ Corrigido - Utilizadores devem conseguir fazer login noutro dispositivo agora."]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:999,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:989,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:985,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-3",children:"📱 Como testar o login noutro dispositivo:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1007,columnNumber:17},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxDEV("li",{children:"1. Faça login neste dispositivo normalmente"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1011,columnNumber:19},void 0),e.jsxDEV("li",{children:"2. Abra a aplicação noutro dispositivo/navegador"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1012,columnNumber:19},void 0),e.jsxDEV("li",{children:"3. Use o mesmo email e password"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1013,columnNumber:19},void 0),e.jsxDEV("li",{children:"4. O login deve funcionar normalmente"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1014,columnNumber:19},void 0),e.jsxDEV("li",{children:"5. Os dados devem estar sincronizados (se Firebase configurado)"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1015,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1010,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1006,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-green-900 mb-2",children:"✅ Verificações Firebase para sincronização:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1023,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsxDEV("li",{children:"• Authentication → Sign-in method → Email/Password deve estar ativado"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1027,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Firestore Database deve estar configurado"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1031,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Utilizadores criados aparecem em Authentication → Users"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1032,columnNumber:19},void 0),e.jsxDEV("li",{children:"• As regras de segurança devem permitir acesso autenticado"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1035,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1026,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1022,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900 mb-2",children:"⚠️ Se ainda houver problemas:"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1042,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxDEV("li",{children:"• Verifique se o Firebase Console tem Email/Password ativado"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1046,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Confirme que o utilizador foi criado no Firebase Authentication"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1049,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Teste com incógnito/modo privado primeiro"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1053,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Limpe cache e cookies do navegador"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1054,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Execute o diagnóstico detalhado acima"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1055,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1045,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1041,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:973,columnNumber:13},void 0),i==="utilizadores"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(uo,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1064,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1065,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gestão de utilizadores do sistema"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1068,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1063,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxDEV("p",{className:"text-blue-800 text-center",children:"Esta funcionalidade foi movida para as configurações avançadas."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1074,columnNumber:17},void 0),s&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{onClick:()=>{s&&(console.log("🔄 Redirecionando para Utilizadores..."),s("utilizadores"),n())},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:e.jsxDEV("span",{children:"👥 Aceder aos Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1090,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1080,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1079,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1073,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1062,columnNumber:13},void 0),i==="relatorios"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(xs,{className:"w-16 h-16 text-green-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1101,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Relatórios"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1102,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gere relatórios detalhados em PDF"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1105,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1100,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxDEV("p",{className:"text-green-800 text-center",children:"Esta funcionalidade foi movida para as configurações avançadas."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1111,columnNumber:17},void 0),s&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{onClick:()=>{s&&(s("relatorios"),n())},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Aceder aos Relatórios"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1117,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1116,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1110,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1099,columnNumber:13},void 0),i==="clientes"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(oe,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1137,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1138,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gestão da base de dados de clientes"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1141,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1136,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[e.jsxDEV("p",{className:"text-purple-800 text-center",children:"Esta funcionalidade foi movida para as configurações avançadas."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1147,columnNumber:17},void 0),s&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{onClick:()=>{s&&(s("clientes"),n())},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Aceder aos Clientes"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1153,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1152,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1146,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1135,columnNumber:13},void 0),i==="configuracoes"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(ge,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1173,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Configurações"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1174,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configurações gerais da aplicação"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1177,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1172,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsxDEV("p",{className:"text-gray-800 text-center",children:"Esta funcionalidade foi movida para as configurações avançadas."},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1183,columnNumber:17},void 0),s&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{onClick:()=>{s&&(console.log("🔄 Redirecionando para Configura��ões..."),s("configuracoes"),n())},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2",children:e.jsxDEV("span",{children:"⚙️ Aceder às Configurações"},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1201,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1189,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1188,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1182,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:1171,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:425,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:278,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/AdvancedSettings.tsx",lineNumber:277,columnNumber:5},void 0)},Yt=()=>null,Xt=({currentUser:n,allUsers:s=[]})=>{const[a,o]=m.useState([]),[r,i]=m.useState(!1),[t,u]=m.useState(null),[d,l]=m.useState(null),f=async()=>{i(!0),l(null);try{let N=[];if(n){const b=localStorage.getItem("current-user-location");if(b){const x=JSON.parse(b),w={id:n.id,name:n.name,email:n.email,...x};N.push(w)}}const D=localStorage.getItem("user-locations");if(D){const x=JSON.parse(D).filter(w=>!w.email.includes("demo")&&!w.id.startsWith("demo-")&&w.email!==(n==null?void 0:n.email)&&!w.name.includes("Técnico -")&&!w.name.includes("Manager -")&&w.email!=="joao@leirisonda.pt"&&w.email!=="maria@leirisonda.pt");N.push(...x)}const p=N.reduce((b,x)=>{const w=b.find(U=>U.email===x.email);if(!w)b.push(x);else if(x.timestamp>w.timestamp){const U=b.findIndex(F=>F.email===x.email);b[U]=x}return b},[]);p.sort((b,x)=>b.email===(n==null?void 0:n.email)?-1:x.email===(n==null?void 0:n.email)?1:x.timestamp-b.timestamp),o(p),localStorage.setItem("user-locations",JSON.stringify(p)),console.log(`📍 Loaded ${p.length} user locations from ${s.length} total users`)}catch(N){l("Erro ao carregar localizações dos utilizadores"),console.error("Error loading user locations:",N)}finally{i(!1)}};m.useEffect(()=>{f();const N=setInterval(()=>{f()},12e4);return()=>clearInterval(N)},[n]);const v=()=>{if(!navigator.geolocation){l("Geolocalização não é suportada neste navegador");return}if(!n){l("É necessário estar autenticado para partilhar localização");return}i(!0),l(null),navigator.geolocation.getCurrentPosition(async N=>{const D={latitude:N.coords.latitude,longitude:N.coords.longitude,accuracy:N.coords.accuracy,timestamp:N.timestamp};try{const p=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${D.latitude}&lon=${D.longitude}&zoom=18&addressdetails=1`);if(p.ok){const b=await p.json();b.display_name&&(D.address=b.display_name)}}catch{D.address=`${D.latitude.toFixed(6)}, ${D.longitude.toFixed(6)}`}localStorage.setItem("current-user-location",JSON.stringify(D)),await f(),i(!1)},N=>{let D="Erro desconhecido";switch(N.code){case N.PERMISSION_DENIED:D="Permissão de localização negada";break;case N.POSITION_UNAVAILABLE:D="Localização não disponível";break;case N.TIMEOUT:D="Tempo limite excedido";break}l(D),i(!1)})},g=N=>{const D=`https://maps.google.com/maps?q=${N.latitude},${N.longitude}&z=15`;window.open(D,"_blank")},C=async()=>{if(!n)return;i(!0);const N=[{id:"user-2",name:"João Silva",email:"joao.silva@leirisonda.pt",latitude:39.7436+(Math.random()-.5)*.02,longitude:-8.8071+(Math.random()-.5)*.02,accuracy:10+Math.random()*20,timestamp:Date.now()-Math.random()*36e5,address:"Leiria, Portugal"},{id:"user-3",name:"Maria Santos",email:"maria.santos@leirisonda.pt",latitude:39.7436+(Math.random()-.5)*.05,longitude:-8.8071+(Math.random()-.5)*.05,accuracy:15+Math.random()*25,timestamp:Date.now()-Math.random()*72e5,address:"Área de Leiria, Portugal"},{id:"user-4",name:"Carlos Mendes",email:"carlos.mendes@leirisonda.pt",latitude:39.7436+(Math.random()-.5)*.03,longitude:-8.8071+(Math.random()-.5)*.03,accuracy:8+Math.random()*15,timestamp:Date.now()-Math.random()*18e5,address:"Próximo de Leiria, Portugal"}],D=localStorage.getItem("user-locations");let p=[];D&&(p=JSON.parse(D)),N.forEach(b=>{p.find(w=>w.email===b.email)||p.push(b)}),localStorage.setItem("user-locations",JSON.stringify(p)),await f(),i(!1),alert(`✅ Adicionadas ${N.length} localizações de exemplo da equipa!`)},h=()=>{if(a.length===0)return;a.map(D=>`${D.latitude},${D.longitude}`).join("|");const N=`https://maps.google.com/maps?q=${a[0].latitude},${a[0].longitude}&z=12`;window.open(N,"_blank")},y=()=>{const N=a.find(p=>p.email===(n==null?void 0:n.email));if(N)return{lat:N.latitude,lng:N.longitude};const D=localStorage.getItem("current-user-location");if(D){const p=JSON.parse(D);return{lat:p.latitude,lng:p.longitude}}if(a.length>0){const p=a.reduce((x,w)=>x+w.latitude,0)/a.length,b=a.reduce((x,w)=>x+w.longitude,0)/a.length;return{lat:p,lng:b}}return{lat:39.5,lng:-8}},S=N=>{const p=Date.now()-N,b=Math.floor(p/6e4);if(b<1)return"Agora";if(b<60)return`${b}min atrás`;const x=Math.floor(b/60);return x<24?`${x}h atrás`:`${Math.floor(x/24)}d atrás`},E=y();return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"Mapa de Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:347,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:a.length===0?"Nenhuma localização partilhada ainda":a.length===1?"Apenas a sua localização está partilhada":`${a.length} utilizadores com localizações partilhadas`},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:350,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:346,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV("button",{onClick:v,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsxDEV(ft,{className:`h-4 w-4 ${r?"animate-pulse":""}`},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:364,columnNumber:13},void 0),e.jsxDEV("span",{children:"Partilhar Localização"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:367,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:359,columnNumber:11},void 0),e.jsxDEV("button",{onClick:f,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400",children:[e.jsxDEV(X,{className:`h-4 w-4 ${r?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:374,columnNumber:13},void 0),e.jsxDEV("span",{children:"Atualizar"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:377,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:369,columnNumber:11},void 0),a.length<3&&e.jsxDEV("button",{onClick:C,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:[e.jsxDEV(oe,{className:`h-4 w-4 ${r?"animate-pulse":""}`},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:385,columnNumber:15},void 0),e.jsxDEV("span",{children:"Adicionar Equipa"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:388,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:380,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:358,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:345,columnNumber:7},void 0),d&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(le,{className:"h-5 w-5 text-red-400 mr-3"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:398,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-red-700",children:d},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:399,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:397,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:396,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(oe,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:408,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:"Utilizadores Online"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:410,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-blue-600",children:a.length},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:413,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:409,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:407,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:406,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Es,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:420,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:"Localizações Ativas"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:422,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-green-600",children:a.filter(N=>Date.now()-N.timestamp<36e5).length},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:425,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:421,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:419,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:418,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(or,{className:"h-5 w-5 text-purple-600"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:438,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:"Centro do Mapa"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:440,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-purple-600",children:[E.lat.toFixed(4),", ",E.lng.toFixed(4)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:443,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:439,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:437,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:436,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:405,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Mapa da Equipa"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:455,columnNumber:13},void 0),e.jsxDEV("button",{onClick:h,className:"flex items-center space-x-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[e.jsxDEV(or,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:462,columnNumber:15},void 0),e.jsxDEV("span",{children:"Abrir no Google Maps"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:463,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:458,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:454,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:453,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("iframe",{src:`https://maps.google.com/maps?q=${E.lat},${E.lng}&z=13&output=embed&markers=${a.map(N=>`${N.latitude},${N.longitude}`).join("|")}`,width:"100%",height:"400",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:470,columnNumber:11},void 0),e.jsxDEV("div",{className:"absolute top-4 left-4 bg-white bg-opacity-90 rounded-lg p-3 shadow-lg",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Es,{className:"h-4 w-4 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:484,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:[a.length," localizações"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:485,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:483,columnNumber:13},void 0),a.length>0&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:[a.slice(0,3).map(N=>e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:`w-4 h-4 ${N.email===(n==null?void 0:n.email)?"bg-orange-500":"bg-blue-500"} rounded-full flex items-center justify-center`,children:e.jsxDEV("span",{className:"text-white text-xs font-bold",children:N.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:496,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:493,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs text-gray-700",children:[N.name.split(" ")[0],N.email===(n==null?void 0:n.email)&&" (Você)"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:500,columnNumber:21},void 0)]},N.id,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:492,columnNumber:19},void 0)),a.length>3&&e.jsxDEV("div",{className:"text-xs text-gray-500",children:["+",a.length-3," mais"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:507,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:490,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:482,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:468,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:452,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:520,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Clique num utilizador para ver no Google Maps"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:521,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:519,columnNumber:9},void 0),e.jsxDEV("div",{className:"divide-y divide-gray-200",children:a.length===0?e.jsxDEV("div",{className:"p-8 text-center",children:[e.jsxDEV(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:529,columnNumber:15},void 0),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma localização disponível"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:530,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Partilhe a sua localização ou aguarde que outros utilizadores partilhem as suas."},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:533,columnNumber:15},void 0),e.jsxDEV("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Partilhar a Minha Localização"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:537,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:528,columnNumber:13},void 0):a.map(N=>e.jsxDEV("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(t==null?void 0:t.id)===N.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>{u(N),g(N)},children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`w-10 h-10 ${N.email===(n==null?void 0:n.email)?"bg-gradient-to-r from-orange-500 to-red-600":"bg-gradient-to-r from-blue-500 to-purple-600"} rounded-full flex items-center justify-center`,children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:N.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:563,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:560,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:N.name},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:568,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:N.email},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:571,columnNumber:23},void 0),N.address&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:N.address},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:573,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:567,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:559,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsxDEV(Es,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:582,columnNumber:23},void 0),e.jsxDEV("span",{children:["±",Math.round(N.accuracy),"m"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:583,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:581,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:S(N.timestamp)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:585,columnNumber:21},void 0),e.jsxDEV("button",{onClick:D=>{D.stopPropagation(),g(N)},className:"mt-2 flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200",children:[e.jsxDEV(or,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:595,columnNumber:23},void 0),e.jsxDEV("span",{children:"Ver no Maps"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:596,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:588,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:580,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:558,columnNumber:17},void 0)},N.id,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:546,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:526,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:518,columnNumber:7},void 0),s.length>0&&e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:["Todos os Utilizadores (",s.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:610,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista completa de utilizadores do sistema"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:613,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:609,columnNumber:11},void 0),e.jsxDEV("div",{className:"divide-y divide-gray-200",children:s.map(N=>{var p;const D=a.some(b=>b.email===N.email);return e.jsxDEV("div",{className:"p-4 flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`w-10 h-10 ${N.active?"bg-gradient-to-r from-green-500 to-blue-600":"bg-gray-400"} rounded-full flex items-center justify-center`,children:e.jsxDEV("span",{className:"text-white font-bold text-sm",children:N.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:632,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:629,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:[N.name,N.email===(n==null?void 0:n.email)&&e.jsxDEV("span",{className:"ml-2 text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:"Você"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:640,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:637,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:N.email},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:645,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 capitalize",children:[(p=N.role)==null?void 0:p.replace("_"," ")," •"," ",N.active?"Ativo":"Inativo"]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:646,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:636,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:628,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-right",children:D?e.jsxDEV("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsxDEV(Es,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:656,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:"Com localização"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:657,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:655,columnNumber:23},void 0):e.jsxDEV("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsxDEV(Xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:663,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm",children:"Sem localização"},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:664,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:662,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:653,columnNumber:19},void 0)]},N.id,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:624,columnNumber:17},void 0)})},void 0,!1,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:618,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:608,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserLocationMap.tsx",lineNumber:343,columnNumber:5},void 0)},Zt=({currentUser:n,allUsers:s=[]})=>{const[a,o]=m.useState([]),[r,i]=m.useState(!1),[t,u]=m.useState(!1),d=()=>{i(!0);try{const h=localStorage.getItem("user-locations"),y=h?JSON.parse(h):[],S=s.map(E=>{const N=y.find(D=>D.email===E.email);return{id:String(E.id),name:E.name,email:E.email,role:E.role,active:E.active,hasLocation:!!N,lastLocationUpdate:N==null?void 0:N.timestamp,locationAccuracy:N==null?void 0:N.accuracy,permissionStatus:N?"granted":"unknown"}});S.sort((E,N)=>E.active&&E.hasLocation&&!(N.active&&N.hasLocation)?-1:N.active&&N.hasLocation&&!(E.active&&E.hasLocation)?1:E.active&&!N.active?-1:N.active&&!E.active?1:E.lastLocationUpdate&&N.lastLocationUpdate?N.lastLocationUpdate-E.lastLocationUpdate:E.lastLocationUpdate&&!N.lastLocationUpdate?-1:N.lastLocationUpdate&&!E.lastLocationUpdate?1:E.name.localeCompare(N.name)),o(S)}catch(h){console.error("Erro ao carregar status de localizações:",h)}finally{i(!1)}};m.useEffect(()=>{d();const h=setInterval(d,12e4);return()=>clearInterval(h)},[s]);const l=h=>{const y=localStorage.getItem("user-locations");if(!y)return;const E=JSON.parse(y).find(N=>N.email===h.email);if(E){const N=`https://maps.google.com/maps?q=${E.latitude},${E.longitude}&z=15`;window.open(N,"_blank")}},f=h=>{if(!h)return"Nunca";const S=Date.now()-h,E=Math.floor(S/6e4);if(E<1)return"Agora";if(E<60)return`${E}min atrás`;const N=Math.floor(E/60);return N<24?`${N}h atrás`:`${Math.floor(N/24)}d atrás`},v=h=>h.active?h.hasLocation?{icon:Z,color:"text-green-600"}:{icon:le,color:"text-yellow-600"}:{icon:po,color:"text-gray-400"},g=t?a:a.filter(h=>h.active),C={total:s.length,active:a.filter(h=>h.active).length,withLocation:a.filter(h=>h.hasLocation&&h.active).length,recentUpdates:a.filter(h=>h.lastLocationUpdate&&Date.now()-h.lastLocationUpdate<36e5).length};return e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsxDEV(oe,{className:"h-5 w-5 mr-2 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:176,columnNumber:15},void 0),"Gestão de Localização da Equipa"]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:175,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Estado das permissões e localizações de todos os utilizadores"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:179,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:e.jsxDEV("button",{onClick:d,disabled:r,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsxDEV(X,{className:`h-4 w-4 ${r?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:189,columnNumber:15},void 0),e.jsxDEV("span",{children:"Atualizar"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:192,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:184,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:183,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:173,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Total"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:202,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-gray-900",children:C.total},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:203,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:201,columnNumber:15},void 0),e.jsxDEV(oe,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:205,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:200,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:199,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-green-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-green-600",children:"Ativos"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:212,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-green-900",children:C.active},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:213,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:211,columnNumber:15},void 0),e.jsxDEV(Z,{className:"h-5 w-5 text-green-400"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:217,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:210,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:209,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-blue-600",children:"Com Localização"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:224,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-blue-900",children:C.withLocation},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:227,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:223,columnNumber:15},void 0),e.jsxDEV(Es,{className:"h-5 w-5 text-blue-400"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:231,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:222,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:221,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-purple-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-purple-600",children:"Recentes"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:238,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-purple-900",children:C.recentUpdates},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:239,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:237,columnNumber:15},void 0),e.jsxDEV(bt,{className:"h-5 w-5 text-purple-400"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:243,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:236,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:235,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:198,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV("button",{onClick:()=>u(!t),className:`flex items-center space-x-2 px-3 py-1 rounded-md text-sm ${t?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t?e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:260,columnNumber:17},void 0):e.jsxDEV(po,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:262,columnNumber:17},void 0),e.jsxDEV("span",{children:[t?"Ocultar":"Mostrar"," Inativos"]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:264,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:251,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:250,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:[g.length," utilizador",g.length!==1?"es":""]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:267,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:249,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(h=>{var E;const y=v(h),S=y.icon;return e.jsxDEV("div",{className:`flex items-center justify-between p-3 rounded-lg border ${h.hasLocation&&h.active?"bg-green-50 border-green-200":h.active?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(S,{className:`h-5 w-5 ${y.color}`},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:292,columnNumber:21},void 0),e.jsxDEV("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold ${h.active?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gray-400"}`,children:h.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:293,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:h.name},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:306,columnNumber:23},void 0),h.email===(n==null?void 0:n.email)&&e.jsxDEV("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:"Você"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:310,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:305,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:h.email},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:315,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[e.jsxDEV("span",{className:"capitalize",children:(E=h.role)==null?void 0:E.replace("_"," ")},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:317,columnNumber:23},void 0),e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:320,columnNumber:23},void 0),e.jsxDEV("span",{children:h.active?"Ativo":"Inativo"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:321,columnNumber:23},void 0),h.hasLocation&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:324,columnNumber:27},void 0),e.jsxDEV("span",{children:["±",Math.round(h.locationAccuracy||0),"m"]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:325,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:323,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:316,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:304,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:h.hasLocation?"Com localização":"Sem localização"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:336,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:f(h.lastLocationUpdate)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:341,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:335,columnNumber:19},void 0),h.hasLocation&&e.jsxDEV("button",{onClick:()=>l(h),className:"flex items-center space-x-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:[e.jsxDEV(or,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:351,columnNumber:23},void 0),e.jsxDEV("span",{children:"Ver"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:352,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:347,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:334,columnNumber:17},void 0)]},h.id,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:280,columnNumber:15},void 0)})},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:274,columnNumber:9},void 0),g.length===0&&e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:363,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum utilizador encontrado"},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:364,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600",children:t?"Não há utilizadores no sistema.":"Não há utilizadores ativos no sistema."},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:367,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:362,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:171,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/TeamLocationManager.tsx",lineNumber:170,columnNumber:5},void 0)},el=({onBack:n,currentUser:s,allUsers:a})=>e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[n&&e.jsxDEV("button",{onClick:n,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 mb-2",children:[e.jsxDEV(xo,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:37,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm",children:"Voltar às Configurações"},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:38,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:33,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Mapa da Equipa"},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:41,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Visualize as localizações de todos os utilizadores da equipa"},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:42,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:31,columnNumber:7},void 0),e.jsxDEV(Xt,{currentUser:s,allUsers:a},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:48,columnNumber:7},void 0),((s==null?void 0:s.role)==="super_admin"||(s==null?void 0:s.role)==="admin")&&e.jsxDEV(Zt,{currentUser:s,allUsers:a},void 0,!1,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:53,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LocationPage.tsx",lineNumber:29,columnNumber:5},void 0);function la(n){return!n||n.includes("your_")||n.includes("_here")||n.length<10}const li={apiKey:(la("AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw"),"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw"),authDomain:(la("leiria-1cfc9.firebaseapp.com"),"leiria-1cfc9.firebaseapp.com"),databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:(la("leiria-1cfc9"),"leiria-1cfc9"),storageBucket:la("leiria-1cfc9.appspot.com")?"leiria-1cfc9.firebasestorage.app":"leiria-1cfc9.appspot.com",messagingSenderId:la(void 0)?"632599887141":void 0,appId:la(void 0)?"1:632599887141:web:1290b471d41fc3ad64eecc":void 0,measurementId:"G-Q2QWQVH60L"};function vo(){const n=li,s=!la("AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw"),a=!1;if(console.log("🔍 Firebase Environment Detection:"),console.log("  - NETLIFY:",void 0),console.log("  - VITE_IS_NETLIFY:",void 0),console.log("  - Using Netlify vars:",s),console.log("  - Is Netlify build:",a),s?(console.log("⚠️ Firebase: usando variáveis mas não no Netlify"),console.log("🔄 Projeto:",n.projectId)):(console.log("🔄 Firebase: usando fallback local (leiria-1cfc9)"),console.log("📝 Deploy no Netlify usará as suas variáveis VITE_FIREBASE_*"),console.log("🎯 Projeto fallback:",n.projectId)),!n.apiKey||!n.projectId||!n.authDomain)throw console.error("❌ Configuração Firebase inválida:",{apiKey:!!n.apiKey,projectId:!!n.projectId,authDomain:!!n.authDomain}),new Error("Configuração Firebase inválida");return n}const sl=Object.freeze(Object.defineProperty({__proto__:null,LEIRIA_FIREBASE_CONFIG:li,getFirebaseConfig:vo},Symbol.toStringTag,{value:"Module"}));let Je=null;console.log("🔥 Firebase PRODUÇÃO: Sempre ativo");console.log("🌐 Modo de produção: Firebase forçado");console.log("✅ Configuração garantida para funcionar");try{console.log("🔥 Iniciando Firebase (modo produção forçado)...");let n;try{n=vo(),console.log("🔧 Firebase Project:",n.projectId),console.log("✅ Configuração carregada com sucesso")}catch(s){console.error("❌ Erro ao obter config Firebase:",s),n={apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"},console.log("🔧 Usando configuração fixa como fallback")}n&&(sa().length===0?(console.log("🎆 Inicializando nova Firebase App..."),Je=Ma(n),console.log("✅ Firebase inicializado com sucesso",Je.name),console.log("🔍 Project ID ativo:",Je.options.projectId)):(Je=Ta(),console.log("✅ Firebase já estava inicializado",Je.name)))}catch(n){console.error("❌ Erro ao inicializar Firebase:",n.message),console.error("🔍 Stack trace:",n.stack);try{const s={apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"};sa().length===0&&(Je=Ma(s),console.log("✅ Firebase inicializado com configuração fallback"))}catch(s){console.error("❌ Erro mesmo com configuração fallback:",s)}}function lr(){return Je!==null}async function rn(){try{if(!Je)return console.error("🔐 Firebase App não inicializada para Auth"),null;const{getAuth:n}=await ie(async()=>{const{getAuth:s}=await import("./vendor-C-G65PT7.js").then(a=>a.V);return{getAuth:s}},__vite__mapDeps([0,1]));return n(Je)}catch(n){return console.error("🔐 Erro ao obter Auth:",n.message),null}}const ci=async()=>rn(),al=async()=>null,ol=()=>({connected:Je!==null,initialized:Je!==null,ready:Je!==null,status:Je?"ready":"not_initialized",app:Je,auth:cr,db:null}),cr=rn(),hs=null,Hr=Je,Zs=Object.freeze(Object.defineProperty({__proto__:null,app:Hr,auth:cr,db:hs,get firebaseApp(){return Je},getAuth:rn,getAuthService:ci,getDB:al,getFirebaseStatus:ol,isFirebaseReady:lr},Symbol.toStringTag,{value:"Module"}));let Rr=!1,Or=!1,ps=null;async function rl(n=10,s=1e3){var a,o;for(let r=1;r<=n;r++){try{if(sa().length>0){const t=Ta();if(t&&t.options&&t.options.projectId&&t.options.apiKey)return console.log(`✅ Firebase App pronta na tentativa ${r}`),t;console.warn("⚠️ Firebase App encontrada mas incompleta:",{hasOptions:!!t.options,projectId:(a=t.options)==null?void 0:a.projectId,hasApiKey:!!((o=t.options)!=null&&o.apiKey)})}else console.log(`⏳ Tentativa ${r}/${n} - nenhuma Firebase App encontrada`)}catch(i){console.warn(`⚠️ Erro na tentativa ${r}:`,i)}r<n&&(console.log(`⏳ Aguardando ${s}ms antes da próxima tentativa...`),await new Promise(i=>setTimeout(i,s)))}console.warn("⚠️ Firebase App não inicializou após todas as tentativas"),console.log("🔧 Tentando inicialização de emergência...");try{const{initializeApp:r}=await ie(async()=>{const{initializeApp:u}=await import("./vendor-C-G65PT7.js").then(d=>d.R);return{initializeApp:u}},__vite__mapDeps([0,1])),{getFirebaseConfig:i}=await ie(async()=>{const{getFirebaseConfig:u}=await Promise.resolve().then(()=>sl);return{getFirebaseConfig:u}},void 0),t=i();if(t&&t.projectId&&t.apiKey){console.log("🚀 Tentando inicialização de emergência do Firebase...");const u=r(t,`emergency-${Date.now()}`);return console.log("✅ Firebase inicializado em modo de emergência"),u}else return console.warn("⚠️ Configuração Firebase inválida"),null}catch(r){return console.warn("⚠️ Falha na inicialização de emergência:",r),null}return console.warn("⚠️ Firebase App não inicializou após aguardar e tentativas de emergência"),null}async function nl(n){if(Rr)return Or;try{const{getFirestore:s}=await ie(async()=>{const{getFirestore:o}=await import("./vendor-C-G65PT7.js").then(r=>r.U);return{getFirestore:o}},__vite__mapDeps([0,1])),a=s(n);return console.log("✅ Firestore disponível no projeto:",n.options.projectId),Rr=!0,Or=!0,!0}catch(s){return Rr=!0,Or=!1,s.code==="firestore/unavailable"||s.message.includes("Service firestore is not available")?(console.warn(`⚠️ Firestore não habilitado no projeto ${n.options.projectId}`),console.info("�� Para habilitar: Firebase Console → Firestore Database → Criar base de dados"),console.info(`🔗 https://console.firebase.google.com/project/${n.options.projectId}/firestore`),console.info("📱 Aplicação funcionará perfeitamente com localStorage"),!1):(console.error("❌ Erro inesperado ao verificar Firestore:",s),!1)}}async function xr(n=0,s=2){try{console.log(`💾 Tentando inicializar Firestore... (tentativa ${n+1}/${s+1})`);const a=await rl();if(!a)return console.warn("⚠️ Firebase App não disponível, continuando sem Firestore"),null;if(console.log("🎆 Firebase App confirmada:",{name:a.name,projectId:a.options.projectId,authDomain:a.options.authDomain}),!await nl(a))return null;await new Promise(t=>setTimeout(t,500)),console.log("💾 Chamando getFirestore()...");const r=br(a);console.log("�� Firestore inicializado com sucesso",typeof r),console.log("🧪 Testando conectividade Firestore...");const i=be(r,"__test__","connection");return console.log("✅ Referência de teste criada com sucesso"),r}catch(a){if(console.warn(`⚠️ Erro ao inicializar Firestore (tentativa ${n+1}):`,a.message),console.warn("🔍 Error code:",a.code),a.code==="firestore/unavailable"||a.message.includes("Service firestore is not available"))return console.warn("⚠️ Firestore não está habilitado - não tentando novamente"),console.warn("💡 A aplicação continuará funcionando com localStorage apenas"),null;if(n<s){const o=Math.pow(2,n)*1e3;return console.log(`🔄 Tentando novamente em ${o}ms...`),await new Promise(r=>setTimeout(r,o)),xr(n+1,s)}return console.error("❌ Firestore falhou após todas as tentativas"),console.error("💾 A aplicação continuará funcionando apenas com localStorage"),console.error("🔍 Stack trace original:",a.stack),null}}console.log("🔥 Verificando disponibilidade do Firestore..."),setTimeout(async()=>{ps||(console.log("🔍 Testando Firestore no projeto..."),ps=await xr(),ps?console.log("✅ Firestore ativo e funcional"):console.info("📱 Modo localStorage ativo - aplicação funcionará normalmente"))},1e3);function dr(){return ps||(console.warn("⚠️ Firestore ainda não foi inicializado - use getFirebaseFirestoreAsync()"),xr().then(n=>{ps=n})),ps}async function Do(){return console.log("🔥 Inicializando Firestore..."),ps||(console.log("🔄 Inicializando Firestore assincronamente..."),ps=await xr(),ps||console.warn("⚠️ Firestore não disponível em modo de desenvolvimento - aplicação funciona com localStorage")),ps}function Ys(){return ps!==null}const il=Object.freeze(Object.defineProperty({__proto__:null,get firestoreInstance(){return ps},getFirebaseFirestore:dr,getFirebaseFirestoreAsync:Do,isFirestoreReady:Ys},Symbol.toStringTag,{value:"Module"})),ca=class ca{constructor(){ae(this,"db",null)}static getInstance(){return ca.instance||(ca.instance=new ca),ca.instance}async getDb(){return!this.db&&(this.db=await Do(),!this.db)?(console.warn("Firestore não está disponível - usando fallback localStorage"),null):this.db}async addDocument(s,a){try{const o=await this.getDb();if(!o)return this.saveToLocalStorage(s,a);const r={...a,createdAt:Ke.now(),updatedAt:Ke.now()},i=await go(he(o,s),r);return console.log("✅ Documento salvo no Firestore:",i.id),i.id}catch(o){return console.error("❌ Erro ao salvar no Firestore:",o),this.saveToLocalStorage(s,a)}}async setDocument(s,a,o){try{const r=await this.getDb();if(!r)return this.saveToLocalStorageWithId(s,a,o);const i={...o,updatedAt:Ke.now()};return o.createdAt||(i.createdAt=Ke.now()),await Fs(be(r,s,a),i),console.log("✅ Documento definido no Firestore:",a),!0}catch(r){return console.error("❌ Erro ao definir documento no Firestore:",r),this.saveToLocalStorageWithId(s,a,o)}}async updateDocument(s,a,o){try{const r=await this.getDb();if(!r)return this.updateLocalStorage(s,a,o);const i={...o,updatedAt:Ke.now()};return await ho(be(r,s,a),i),console.log("✅ Documento atualizado no Firestore:",a),!0}catch(r){return console.error("❌ Erro ao atualizar documento no Firestore:",r),this.updateLocalStorage(s,a,o)}}async getDocument(s,a){try{const o=await this.getDb();if(!o)return this.getFromLocalStorage(s,a);const r=be(o,s,a),i=await ri(r);return i.exists()?{id:i.id,...i.data()}:(console.log("Documento não encontrado no Firestore:",a),null)}catch(o){return console.error("❌ Erro ao buscar documento no Firestore:",o),this.getFromLocalStorage(s,a)}}async getCollection(s){try{const a=await this.getDb();if(!a)return this.getCollectionFromLocalStorage(s);const o=await gs(he(a,s)),r=[];return o.forEach(i=>{r.push({id:i.id,...i.data()})}),console.log(`✅ ${r.length} documentos encontrados na coleção ${s}`),r}catch(a){return console.error("❌ Erro ao buscar coleção no Firestore:",a),this.getCollectionFromLocalStorage(s)}}async deleteDocument(s,a){try{const o=await this.getDb();return o?(await ws(be(o,s,a)),console.log("✅ Documento deletado do Firestore:",a),!0):this.deleteFromLocalStorage(s,a)}catch(o){return console.error("❌ Erro ao deletar documento do Firestore:",o),this.deleteFromLocalStorage(s,a)}}saveToLocalStorage(s,a){const o=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=`firestore_${s}`,i=JSON.parse(localStorage.getItem(r)||"{}");return i[o]={...a,id:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem(r,JSON.stringify(i)),console.log("💾 Documento salvo no localStorage:",o),o}saveToLocalStorageWithId(s,a,o){try{const r=`firestore_${s}`,i=JSON.parse(localStorage.getItem(r)||"{}");return i[a]={...o,id:a,updatedAt:new Date().toISOString()},i[a].createdAt||(i[a].createdAt=new Date().toISOString()),localStorage.setItem(r,JSON.stringify(i)),console.log("💾 Documento definido no localStorage:",a),!0}catch(r){return console.error("❌ Erro ao salvar no localStorage:",r),!1}}updateLocalStorage(s,a,o){try{const r=`firestore_${s}`,i=JSON.parse(localStorage.getItem(r)||"{}");return i[a]?(i[a]={...i[a],...o,updatedAt:new Date().toISOString()},localStorage.setItem(r,JSON.stringify(i)),console.log("💾 Documento atualizado no localStorage:",a),!0):(console.log("Documento não encontrado no localStorage:",a),!1)}catch(r){return console.error("❌ Erro ao atualizar localStorage:",r),!1}}getFromLocalStorage(s,a){try{const o=`firestore_${s}`;return JSON.parse(localStorage.getItem(o)||"{}")[a]||null}catch(o){return console.error("❌ Erro ao buscar do localStorage:",o),null}}getCollectionFromLocalStorage(s){try{const a=`firestore_${s}`,o=JSON.parse(localStorage.getItem(a)||"{}");return Object.values(o)}catch(a){return console.error("❌ Erro ao buscar coleção do localStorage:",a),[]}}deleteFromLocalStorage(s,a){try{const o=`firestore_${s}`,r=JSON.parse(localStorage.getItem(o)||"{}");return r[a]?(delete r[a],localStorage.setItem(o,JSON.stringify(r)),console.log("💾 Documento deletado do localStorage:",a),!0):(console.log("Documento não encontrado no localStorage:",a),!1)}catch(o){return console.error("❌ Erro ao deletar do localStorage:",o),!1}}async createUtilizador(s){try{console.log("📝 Criando utilizador:",s.name);const a={...s,active:!0,permissions:s.permissions||{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}}},o=await this.addDocument("utilizadores",a);return o?(console.log("✅ Utilizador criado com sucesso:",o),o):(console.error("❌ Falha ao criar utilizador"),null)}catch(a){return console.error("❌ Erro ao criar utilizador:",a),null}}async getUtilizadores(){try{return await this.getCollection("utilizadores")}catch(s){return console.error("❌ Erro ao obter utilizadores:",s),[]}}async addObra(s){try{console.log("📝 Criando obra:",s.workSheetNumber||s.title);const a=await this.addDocument("obras",s);return a?(console.log("✅ Obra criada com sucesso:",a),a):(console.error("❌ Falha ao criar obra"),null)}catch(a){return console.error("❌ Erro ao criar obra:",a),null}}async getObras(){try{return await this.getCollection("obras")}catch(s){return console.error("❌ Erro ao obter obras:",s),[]}}async addManutencao(s){try{console.log("🔧 Criando manutenção:",s.title||s.description);const a=await this.addDocument("manutencoes",s);return a?(console.log("✅ Manutenção criada com sucesso:",a),a):(console.error("❌ Falha ao criar manutenção"),null)}catch(a){return console.error("❌ Erro ao criar manutenção:",a),null}}async getManutencoes(){try{return await this.getCollection("manutencoes")}catch(s){return console.error("❌ Erro ao obter manutenções:",s),[]}}async addCliente(s){try{console.log("👤 Criando cliente:",s.name||s.company);const a=await this.addDocument("clientes",s);return a?(console.log("✅ Cliente criado com sucesso:",a),a):(console.error("❌ Falha ao criar cliente"),null)}catch(a){return console.error("❌ Erro ao criar cliente:",a),null}}async getClientes(){try{return await this.getCollection("clientes")}catch(s){return console.error("❌ Erro ao obter clientes:",s),[]}}async addPiscina(s){try{console.log("🏊 Criando piscina:",s.name||s.location);const a=await this.addDocument("piscinas",s);return a?(console.log("✅ Piscina criada com sucesso:",a),a):(console.error("❌ Falha ao criar piscina"),null)}catch(a){return console.error("❌ Erro ao criar piscina:",a),null}}async getPiscinas(){try{return await this.getCollection("piscinas")}catch(s){return console.error("❌ Erro ao obter piscinas:",s),[]}}};ae(ca,"instance");let mr=ca;const Ne=mr.getInstance(),di=Object.freeze(Object.defineProperty({__proto__:null,FirestoreService:mr,firestoreService:Ne},Symbol.toStringTag,{value:"Module"}));class tl{constructor(){ae(this,"observers",new Map);ae(this,"db",dr());ae(this,"isActive",!1);ae(this,"firestoreAvailable",!1)}async checkFirestoreAvailability(){var s,a;try{return this.db=dr(),this.db?(this.firestoreAvailable=!0,console.log("✅ Firestore disponível para sincronização"),!0):(this.firestoreAvailable=!1,console.warn("⚠️ Firestore não disponível - usando apenas localStorage"),!1)}catch(o){return this.firestoreAvailable=!1,(s=o.message)!=null&&s.includes("getImmediate")||o.code==="firestore/unavailable"||(a=o.message)!=null&&a.includes("Service firestore is not available")?(console.warn("⚠️ Firestore não está habilitado no projeto Firebase"),console.info("💡 Aplicação funcionará com localStorage apenas")):console.error("❌ Erro ao verificar Firestore:",o.message),!1}}async startAutoSync(){if(console.log("🔄 Iniciando sincronização automática..."),!await this.checkFirestoreAvailability()){console.log("📱 Modo localStorage ativo - sincronização limitada"),this.isActive=!0;return}this.isActive||(console.log("🔄 Iniciando sincronização em tempo real..."),this.isActive=!0,await this.setupObservers(),console.log("✅ Sincronização automática ativa!"))}stopAutoSync(){console.log("⏹️ Parando sincronização automática..."),this.observers.forEach(s=>{s.unsubscribe&&s.unsubscribe()}),this.observers.clear(),this.isActive=!1,console.log("✅ Sincronização automática parada")}async setupObservers(){const s=[{name:"obras",localKey:"works"},{name:"piscinas",localKey:"pools"},{name:"manutencoes",localKey:"maintenance"},{name:"utilizadores",localKey:"app-users"},{name:"clientes",localKey:"clients"},{name:"localizacoes",localKey:"locations"},{name:"notificacoes",localKey:"notifications"},{name:"photos",localKey:"photos"}];for(const a of s)await this.createObserver(a.name,a.localKey)}async createObserver(s,a){if(this.db)try{const o=he(this.db,s),r=La(o,t=>{this.handleCollectionChange(s,a,t)},t=>{console.error(`❌ Erro no observador ${s}:`,t)}),i={collection:s,localStorageKey:a,unsubscribe:r};this.observers.set(s,i),console.log(`📱 Observador ativo para ${s}`)}catch(o){console.error(`❌ Erro ao criar observador para ${s}:`,o)}}handleCollectionChange(s,a,o){try{const r=[];o.forEach(i=>{r.push({id:i.id,...i.data()})});try{const i=JSON.stringify(r),t=new Blob([i]).size;if(t>5e6){console.warn(`⚠️ Dados muito grandes para localStorage (${Math.round(t/1024/1024)}MB), usando cache reduzido`);const u=r.slice(0,100);localStorage.setItem(a,JSON.stringify(u)),localStorage.setItem(`${a}_truncated`,"true")}else localStorage.setItem(a,i),localStorage.removeItem(`${a}_truncated`);console.log(`💾 ${s}: ${r.length} registros salvos no localStorage`)}catch(i){console.warn(`⚠️ Erro ao salvar no localStorage (${s}):`,i);try{for(let u=0;u<localStorage.length;u++){const d=localStorage.key(u);d&&d.includes("_cache_")&&d!==a&&localStorage.removeItem(d)}const t=r.slice(0,50).map(u=>({id:u.id,nome:u.nome,email:u.email}));localStorage.setItem(a,JSON.stringify(t)),localStorage.setItem(`${a}_reduced`,"true"),console.log(`💾 ${s}: salvos ${t.length} registros essenciais`)}catch(t){console.error(`❌ Falha definitiva ao salvar ${s}:`,t)}}window.dispatchEvent(new CustomEvent(`${s}Updated`,{detail:{data:r,collection:s}})),console.log(`🔄 ${s} sincronizado: ${r.length} itens`)}catch(r){console.error(`❌ Erro ao processar mudança em ${s}:`,r)}}async syncCollection(s,a){var o,r;try{if(console.log(`🔄 Sincronizando ${s} manualmente...`),!this.firestoreAvailable){console.log(`📱 Firestore indisponível - usando dados locais para ${s}`);const t=this.getLocalStorageData(a);window.dispatchEvent(new CustomEvent(`${s}Updated`,{detail:{data:t,collection:s,source:"localStorage"}})),console.log(`📱 ${s} carregado do localStorage: ${t.length} itens`);return}const i=await Ne.getCollection(s);localStorage.setItem(a,JSON.stringify(i)),window.dispatchEvent(new CustomEvent(`${s}Updated`,{detail:{data:i,collection:s,source:"firestore"}})),console.log(`✅ ${s} sincronizado manualmente: ${i.length} itens`)}catch(i){if((o=i.message)!=null&&o.includes("getImmediate")||i.code==="firestore/unavailable"||(r=i.message)!=null&&r.includes("Service firestore is not available")){console.warn(`⚠️ Firestore não disponível para ${s} - usando dados locais`);const t=this.getLocalStorageData(a);t.length>0&&(console.log(`📱 ${s} carregado do localStorage: ${t.length} itens`),window.dispatchEvent(new CustomEvent(`${s}Updated`,{detail:{data:t,collection:s,source:"localStorage"}})))}else console.error(`❌ Erro na sincronização manual de ${s}:`,i.message||i)}}async syncAllCollections(){console.log("��� Sincronização manual completa iniciada...");const s=[{name:"obras",localKey:"works"},{name:"piscinas",localKey:"pools"},{name:"manutencoes",localKey:"maintenance"},{name:"utilizadores",localKey:"app-users"},{name:"clientes",localKey:"clients"},{name:"localizacoes",localKey:"locations"},{name:"notificacoes",localKey:"notifications"}];await Promise.all(s.map(a=>this.syncCollection(a.name,a.localKey))),console.log("✅ Sincronização manual completa concluída!")}isAutoSyncActive(){return this.isActive}async ensureAutoSyncAfterLogin(){try{return console.log("🔑 Verificando auto sync após login..."),this.db?this.isActive?(console.log("✅ Auto sync já está ativo após login"),!0):(console.log("🚀 Iniciando auto sync após login..."),await this.startAutoSync(),this.isActive?(console.log("✅ Auto sync iniciado com sucesso após login!"),await this.syncAllCollections(),console.log("🔄 Sincronização completa executada após login"),!0):(console.warn("⚠️ Falha ao iniciar auto sync após login"),!1)):(console.warn("⚠️ Firebase não disponível para auto sync"),!1)}catch(s){return console.error("❌ Erro ao garantir auto sync após login:",s),!1}}getObserversStatus(){const s={};return this.observers.forEach((a,o)=>{s[o]=a.unsubscribe!==void 0}),s}async forceSyncAfterOperation(s,a,o){console.log(`⚡ Sincronização forçada após ${a} em ${s}`);try{await new Promise(i=>setTimeout(i,100));const r=this.getLocalStorageKey(s);r&&await this.syncCollection(s,r)}catch(r){console.error("❌ Erro na sincronização forçada:",r)}}getLocalStorageKey(s){return{obras:"works",piscinas:"pools",manutencoes:"maintenance",utilizadores:"app-users",clientes:"clients",localizacoes:"locations",notificacoes:"notifications",photos:"photos"}[s]||null}getLocalStorageData(s){try{const a=localStorage.getItem(s);return a?JSON.parse(a):[]}catch(a){return console.warn(`⚠️ Erro ao ler ${s} do localStorage:`,a),[]}}}const Ps=new tl,zr=({isEditing:n,entityType:s="obra",entityId:a})=>{const[o,r]=m.useState({firebase:!1,firestore:!1,autoSync:!1,realTimeSync:!1}),[i,t]=m.useState(null);if(m.useEffect(()=>{let l;const f=()=>{const v=lr(),g=Ys(),C=Ps.isAutoSyncActive(),h=v&&g&&C;r({firebase:v,firestore:g,autoSync:C,realTimeSync:h}),h&&t(new Date)};return f(),n?l=setInterval(f,3e4):l=setInterval(f,12e4),()=>{l&&clearInterval(l)}},[n]),m.useEffect(()=>{n&&!o.autoSync&&setTimeout(async()=>{try{console.log("🔥 Ativando Firestore para modo de edição..."),await Ps.startAutoSync(),console.log("✅ Firestore ativado para edição")}catch(f){console.error("❌ Erro ao ativar Firestore:",f)}},1e3)},[n,o.autoSync]),!n)return null;const u=()=>o.realTimeSync?"bg-green-500":o.firebase?"bg-yellow-500":"bg-red-500",d=()=>o.realTimeSync?"Sincronização Ativa":o.firestore?"Firestore Conectado":o.firebase?"Firebase Conectado":"Desconectado";return e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full ${u()} ${o.realTimeSync?"animate-pulse":""}`},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:120,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-gray-900",children:d()},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:123,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:119,columnNumber:11},void 0),n&&e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ts,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:130,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-xs text-blue-600 font-medium",children:"Modo Edição"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:118,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV("span",{children:[s," ",a?`#${a.slice(-6)}`:""]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:140,columnNumber:11},void 0),i&&e.jsxDEV("span",{className:"text-green-600",children:i.toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:144,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:138,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:117,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[o.firebase?e.jsxDEV(Z,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:159,columnNumber:13},void 0):e.jsxDEV(le,{className:"h-3 w-3 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:161,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-xs text-gray-700",children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:163,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:157,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[o.firestore?e.jsxDEV(Z,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:168,columnNumber:13},void 0):e.jsxDEV(le,{className:"h-3 w-3 text-orange-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:170,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-xs text-gray-700",children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:172,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:166,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[o.autoSync?e.jsxDEV(Tn,{className:"h-3 w-3 text-purple-500 animate-pulse"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:177,columnNumber:13},void 0):e.jsxDEV(Tn,{className:"h-3 w-3 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:179,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-xs text-gray-700",children:"Auto-Sync"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:181,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:175,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[o.realTimeSync?e.jsxDEV(ys,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:186,columnNumber:13},void 0):e.jsxDEV(ys,{className:"h-3 w-3 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:188,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-xs text-gray-700",children:"Tempo Real"},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:190,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:156,columnNumber:7},void 0),!o.realTimeSync&&e.jsxDEV("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded border border-orange-200",children:"⚠️ Sincronização em tempo real desativada. As alterações podem não ser guardadas automaticamente."},void 0,!1,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:195,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EditModeFirestoreStatus.tsx",lineNumber:116,columnNumber:5},void 0)};function js(...n){return St(Ct(n))}const Ge=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("div",{ref:a,className:js("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:8,columnNumber:3},void 0));Ge.displayName="Card";const vs=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("div",{ref:a,className:js("flex flex-col space-y-1.5 p-6",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:23,columnNumber:3},void 0));vs.displayName="CardHeader";const Ds=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("h3",{ref:a,className:js("text-2xl font-semibold leading-none tracking-tight",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:35,columnNumber:3},void 0));Ds.displayName="CardTitle";const lo=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("p",{ref:a,className:js("text-sm text-muted-foreground",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:50,columnNumber:3},void 0));lo.displayName="CardDescription";const Qe=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("div",{ref:a,className:js("p-6 pt-0",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:62,columnNumber:3},void 0));Qe.displayName="CardContent";const ll=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("div",{ref:a,className:js("flex items-center p-6 pt-0",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/card.tsx",lineNumber:70,columnNumber:3},void 0));ll.displayName="CardFooter";const cl=on("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ue=m.forwardRef(({className:n,variant:s,size:a,asChild:o=!1,...r},i)=>{const t=o?Ft:"button";return e.jsxDEV(t,{className:js(cl({variant:s,size:a,className:n})),ref:i,...r},void 0,!1,{fileName:"/app/code/src/components/ui/button.tsx",lineNumber:45,columnNumber:7},void 0)});Ue.displayName="Button";const dl=on("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Us({className:n,variant:s,...a}){return e.jsxDEV("div",{className:js(dl({variant:s}),n),...a},void 0,!1,{fileName:"/app/code/src/components/ui/badge.tsx",lineNumber:31,columnNumber:5},this)}function ml(){const[n,s]=m.useState([]),[a,o]=m.useState(!1),[r,i]=m.useState(!1),t=v=>{s(g=>[...g,v])},u=()=>{s([])},d=async()=>{o(!0),u(),t({step:"Variáveis de Ambiente",status:"pending",message:"Verificando configuração..."});try{const h=r;if(t({step:"Variáveis de Ambiente",status:"warning",message:"Variáveis Firebase detectadas",details:`
Environment: Development
Netlify: false
Firebase Vars: true
Force Firebase: ${h}
        `.trim()}),!h){t({step:"Configuração Firebase",status:"success",message:"Firebase desativado durante desenvolvimento (configurado corretamente)",details:`VITE_FORCE_FIREBASE=undefined
Modo desenvolvimento: true
Aplicação funcionará com localStorage apenas
Firebase será ativado automaticamente no Netlify`}),o(!1);return}t({step:"Inicialização Firebase",status:"pending",message:"Verificando Firebase App..."});try{const{getFirebaseApp:y}=await ie(async()=>{const{getFirebaseApp:E}=await Promise.resolve().then(()=>sc);return{getFirebaseApp:E}},void 0),S=y();if(S)t({step:"Inicialização Firebase",status:"success",message:"Firebase App inicializada com sucesso",details:`Project ID: ${S.options.projectId}`});else{t({step:"Inicialização Firebase",status:"error",message:"Firebase App não inicializada"}),o(!1);return}}catch(y){t({step:"Inicialização Firebase",status:"error",message:"Erro ao inicializar Firebase",details:y.message}),o(!1);return}t({step:"Firestore",status:"pending",message:"Verificando Firestore..."});try{const{getFirebaseFirestoreAsync:y}=await ie(async()=>{const{getFirebaseFirestoreAsync:E}=await Promise.resolve().then(()=>il);return{getFirebaseFirestoreAsync:E}},void 0),S=await y();if(S){t({step:"Firestore",status:"success",message:"Firestore inicializado com sucesso"}),t({step:"Conectividade",status:"pending",message:"Testando conexão com Firestore..."});try{const{doc:E,getDoc:N}=await ie(async()=>{const{doc:p,getDoc:b}=await import("./vendor-C-G65PT7.js").then(x=>x.U);return{doc:p,getDoc:b}},__vite__mapDeps([0,1])),D=E(S,"connection-test","ping");await N(D),t({step:"Conectividade",status:"success",message:"Conexão com Firestore funcionando"}),t({step:"Coleção Obras",status:"pending",message:"Testando acesso à coleção Obras..."});try{const{collection:p,getDocs:b,limit:x,query:w}=await ie(async()=>{const{collection:O,getDocs:te,limit:Q,query:Ee}=await import("./vendor-C-G65PT7.js").then(z=>z.U);return{collection:O,getDocs:te,limit:Q,query:Ee}},__vite__mapDeps([0,1])),U=p(S,"obras"),F=w(U,x(1)),P=await b(F);t({step:"Coleção Obras",status:"success",message:`Coleção Obras acessível (${P.size} documentos encontrados)`})}catch(p){t({step:"Coleção Obras",status:"error",message:"Erro ao acessar coleção Obras",details:p.message})}}catch(E){t({step:"Conectividade",status:"error",message:"Erro na conectividade com Firestore",details:E.message})}}else t({step:"Firestore",status:"error",message:"Firestore não inicializado"})}catch(y){t({step:"Firestore",status:"error",message:"Erro ao verificar Firestore",details:y.message})}}catch(v){t({step:"Diagnóstico",status:"error",message:"Erro durante diagnóstico",details:v.message})}o(!1)},l=v=>{switch(v){case"success":return e.jsxDEV(Z,{className:"h-5 w-5 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:231,columnNumber:16},this);case"error":return e.jsxDEV(ba,{className:"h-5 w-5 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:233,columnNumber:16},this);case"warning":return e.jsxDEV(le,{className:"h-5 w-5 text-yellow-500"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:235,columnNumber:16},this);case"pending":return e.jsxDEV(X,{className:"h-5 w-5 text-blue-500 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:237,columnNumber:16},this)}},f=v=>{const g={success:"default",error:"destructive",warning:"secondary",pending:"outline"};return e.jsxDEV(Us,{variant:g[v],children:v.toUpperCase()},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:249,columnNumber:12},this)};return m.useEffect(()=>{d()},[r]),e.jsxDEV("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(pe,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:262,columnNumber:13},this),"Diagnóstico do Firestore"]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:261,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:260,columnNumber:9},this),e.jsxDEV(Qe,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex gap-2 flex-wrap",children:[e.jsxDEV(Ue,{onClick:d,disabled:a,className:"flex items-center gap-2",children:[a?e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:274,columnNumber:17},this):e.jsxDEV(xt,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:276,columnNumber:17},this),a?"Executando...":"Executar Diagnóstico"]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:268,columnNumber:13},this),e.jsxDEV(Ue,{variant:"outline",onClick:()=>i(!r),className:"flex items-center gap-2",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:286,columnNumber:15},this),r?"Desativar":"Forçar"," Firebase Local"]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:281,columnNumber:13},this),e.jsxDEV(Ue,{variant:"ghost",onClick:u,disabled:a,children:"Limpar"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:290,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:267,columnNumber:11},this),r&&e.jsxDEV("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV(le,{className:"h-5 w-5 text-yellow-400 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:302,columnNumber:17},this),e.jsxDEV("div",{children:e.jsxDEV("p",{className:"text-sm text-yellow-700",children:[e.jsxDEV("strong",{children:"Firebase Forçado Localmente:"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:305,columnNumber:21},this)," Isto pode causar problemas de quotas ou conectividade. Use apenas para debugging."]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:304,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:303,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:301,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:300,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:266,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:259,columnNumber:7},this),n.length>0&&e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(ys,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:320,columnNumber:15},this),"Resultados do Diagnóstico"]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:319,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:318,columnNumber:11},this),e.jsxDEV(Qe,{children:e.jsxDEV("div",{className:"space-y-4",children:n.map((v,g)=>e.jsxDEV("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[l(v.status),e.jsxDEV("div",{className:"flex-1 space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h4",{className:"font-medium",children:v.step},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:334,columnNumber:23},this),f(v.status)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:333,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:v.message},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:337,columnNumber:21},this),v.details&&e.jsxDEV("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-2 overflow-x-auto",children:v.details},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:341,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:332,columnNumber:19},this)]},g,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:327,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:325,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:324,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:317,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreDiagnostic.tsx",lineNumber:258,columnNumber:5},this)}async function ul(){try{console.log("🧪 Iniciando teste de conectividade Firestore...");const n=await Do();if(!n)return{success:!1,message:"Firestore não está disponível - instância é null",details:{error:"DB_NULL"}};console.log("✅ Instância Firestore obtida com sucesso");const s=he(n,"connection-test"),a=be(s,"connectivity-test"),o={timestamp:ni(),message:"Teste de conectividade",success:!0,testId:Date.now().toString()};console.log("📝 Tentando escrever documento de teste..."),await Fs(a,o),console.log("✅ Documento escrito com sucesso"),console.log("📖 Tentando ler documento de teste...");const r=await ri(a);if(r.exists()){const i=r.data();return console.log("✅ Documento lido com sucesso:",i),{success:!0,message:"Firestore totalmente funcional - escrita e leitura OK",details:{written:o,read:i,timestamp:new Date().toISOString()}}}else return{success:!1,message:"Documento foi escrito mas não pode ser lido",details:{error:"READ_FAILED"}}}catch(n){return console.error("❌ Erro no teste Firestore:",n),{success:!1,message:`Erro no teste Firestore: ${n.message}`,details:{error:n.code||"UNKNOWN_ERROR",message:n.message,stack:n.stack}}}}async function pl(){try{console.log("🧪 Testando quota do Firestore...");const n=await Do();if(!n)return{hasQuota:!1,message:"Firestore não disponível para teste de quota"};const s=he(n,"quota-test");for(let a=0;a<5;a++){const o=be(s,`quota-test-${a}`);await Fs(o,{index:a,timestamp:ni(),test:"quota"})}return{hasQuota:!0,message:"Quota disponível - operações múltiplas funcionaram",details:{operationsCompleted:5}}}catch(n){return n.code==="resource-exhausted"||n.message.includes("quota")?{hasQuota:!1,message:"Quota do Firebase excedida",details:{error:n.code,message:n.message}}:{hasQuota:!1,message:`Erro ao testar quota: ${n.message}`,details:{error:n.code||"UNKNOWN_ERROR",message:n.message}}}}async function Nl(){console.log("🔍 === TESTE FIREBASE SIMPLIFICADO ===");try{console.log("📱 Passo 1: Verificar Firebase App...");const n=sa();console.log("Apps disponíveis:",n.length);let s;if(n.length===0){console.log("🆕 Nenhuma app encontrada, criando nova...");const o=vo();console.log("Config:",{projectId:o.projectId,authDomain:o.authDomain,hasApiKey:!!o.apiKey}),s=Ma(o),console.log("✅ Firebase App criada:",s.name)}else s=Ta(),console.log("✅ Firebase App encontrada:",s.name);console.log("💾 Passo 2: Inicializar Firestore...");let a;try{a=br(s),console.log("✅ Firestore inicializado:",typeof a),console.log("✅ Firestore app:",a.app.name)}catch(o){if(console.error("❌ Erro específico do Firestore:",o),o.code==="firestore/unavailable"||o.message.includes("getImmediate")||o.message.includes("Service firestore is not available"))return{success:!1,message:"Firestore não está habilitado no projeto Firebase",code:"FIRESTORE_NOT_ENABLED",projectId:s.options.projectId,solution:`Vá para https://console.firebase.google.com/project/${s.options.projectId}/firestore e crie a base de dados Firestore`,error:o.message};throw o}return{success:!0,message:"Firebase e Firestore inicializados com sucesso",app:s.name,projectId:s.options.projectId,firestoreType:typeof a}}catch(n){return console.error("❌ Erro no teste simplificado:",n),{success:!1,message:n.message,code:n.code,stack:n.stack}}}const fl=()=>e.jsxDEV("div",{className:"max-w-2xl mx-auto p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-yellow-800 mb-4",children:"🔍 Debug - Variáveis de Ambiente"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:6,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"VITE_FORCE_FIREBASE:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:12,columnNumber:11},void 0)," ","undefined"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:11,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"DEV mode:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:16,columnNumber:11},void 0)," ","true"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:15,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"NETLIFY:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:19,columnNumber:11},void 0)," ","undefined"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:18,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"VITE_IS_NETLIFY:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:22,columnNumber:11},void 0)," ","undefined"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:21,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Mode:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:26,columnNumber:11},void 0)," ","production"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:25,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"BASE_URL:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:29,columnNumber:11},void 0)," ","/"]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:28,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:10,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-4 p-3 bg-yellow-100 rounded",children:e.jsxDEV("p",{className:"text-yellow-800 text-sm",children:[e.jsxDEV("strong",{children:"Estado esperado:"},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:35,columnNumber:11},void 0),' VITE_FORCE_FIREBASE deve ser "true" para ativar Firebase em desenvolvimento']},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:34,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:33,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/EnvDebug.tsx",lineNumber:5,columnNumber:5},void 0),bl=({projectId:n})=>{const s=`https://console.firebase.google.com/project/${n}/firestore`;return e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"🔧 Como Habilitar o Firestore"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:14,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4 text-blue-700",children:[e.jsxDEV("p",{className:"font-medium",children:["O Firestore não está habilitado no projeto"," ",e.jsxDEV("code",{className:"bg-blue-100 px-2 py-1 rounded",children:n},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:21,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:19,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h4",{className:"font-semibold",children:"Passos para habilitar:"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:25,columnNumber:11},void 0),e.jsxDEV("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[e.jsxDEV("li",{children:"Aceda ao Firebase Console do projeto"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:27,columnNumber:13},void 0),e.jsxDEV("li",{children:'No menu lateral, clique em "Firestore Database"'},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:28,columnNumber:13},void 0),e.jsxDEV("li",{children:'Clique em "Criar base de dados"'},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:29,columnNumber:13},void 0),e.jsxDEV("li",{children:'Escolha "Começar em modo de teste" (para desenvolvimento)'},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:30,columnNumber:13},void 0),e.jsxDEV("li",{children:"Selecione uma localização (recomendado: europe-west1)"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:31,columnNumber:13},void 0),e.jsxDEV("li",{children:"Aguarde a criação da base de dados"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:32,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:26,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:24,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"🚀 Abrir Firebase Console"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:37,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:36,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 p-3 bg-blue-100 rounded",children:e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Nota:"},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:49,columnNumber:13},void 0)," Após habilitar o Firestore, recarregue esta página e execute o teste novamente."]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:48,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:47,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:18,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreInstructions.tsx",lineNumber:13,columnNumber:5},void 0)},xl=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(null),[r,i]=m.useState(null),[t,u]=m.useState(null),d=async()=>{s(!0),u(null);try{console.log("🧪 Executando teste Firebase simplificado...");const f=await Nl();u(f)}catch(f){u({success:!1,message:`Erro: ${f.message}`,error:f.message})}finally{s(!1)}},l=async()=>{s(!0),o(null),i(null);try{console.log("🚀 Iniciando testes do Firestore...");const f=await ul();if(o(f),f.success){const v=await pl();i(v)}}catch(f){o({success:!1,message:`Erro inesperado: ${f.message}`,details:{error:f.message}})}finally{s(!1)}};return e.jsxDEV("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[e.jsxDEV(fl,{},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:73,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"🔥 Teste de Conectividade Firestore"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:76,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("button",{onClick:d,disabled:n,className:`w-full py-3 px-4 rounded-lg font-medium ${n?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-yellow-600 hover:bg-yellow-700 text-white"}`,children:n?"🔄 Testando...":"🔧 Teste Simplificado (Recomendado)"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:81,columnNumber:11},void 0),e.jsxDEV("button",{onClick:l,disabled:n,className:`w-full py-3 px-4 rounded-lg font-medium ${n?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n?"🔄 Testando...":"🧪 Teste Completo"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:80,columnNumber:9},void 0),t&&e.jsxDEV("div",{className:`mt-6 p-4 rounded-lg ${t.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxDEV("h3",{className:`font-bold text-lg ${t.success?"text-green-800":"text-red-800"}`,children:t.success?"✅ Inicialização":"❌ Inicialização"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:115,columnNumber:13},void 0),e.jsxDEV("p",{className:`mt-2 ${t.success?"text-green-700":"text-red-700"}`,children:t.message},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:122,columnNumber:13},void 0),t.success&&e.jsxDEV("div",{className:"mt-2 text-green-700 text-sm",children:[e.jsxDEV("p",{children:["• App: ",t.app]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("p",{children:["• Projeto: ",t.projectId]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:133,columnNumber:17},void 0),e.jsxDEV("p",{children:["• Firestore: ",t.firestoreType]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:131,columnNumber:15},void 0),!t.success&&t.code==="FIRESTORE_NOT_ENABLED"&&t.projectId&&e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(bl,{projectId:t.projectId},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:142,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:141,columnNumber:17},void 0),e.jsxDEV("details",{className:"mt-3",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"📋 Detalhes Técnicos"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:147,columnNumber:15},void 0),e.jsxDEV("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-x-auto",children:JSON.stringify(t,null,2)},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:150,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:108,columnNumber:11},void 0),a&&e.jsxDEV("div",{className:`mt-6 p-4 rounded-lg ${a.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxDEV("h3",{className:`font-bold text-lg ${a.success?"text-green-800":"text-red-800"}`,children:a.success?"✅ Conectividade":"❌ Conectividade"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:166,columnNumber:13},void 0),e.jsxDEV("p",{className:`mt-2 ${a.success?"text-green-700":"text-red-700"}`,children:a.message},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:175,columnNumber:13},void 0),a.details&&e.jsxDEV("details",{className:"mt-3",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"📋 Detalhes Técnicos"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:185,columnNumber:17},void 0),e.jsxDEV("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-x-auto",children:JSON.stringify(a.details,null,2)},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:188,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:184,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:159,columnNumber:11},void 0),r&&e.jsxDEV("div",{className:`mt-4 p-4 rounded-lg ${r.hasQuota?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxDEV("h3",{className:`font-bold text-lg ${r.hasQuota?"text-green-800":"text-yellow-800"}`,children:r.hasQuota?"✅ Quota":"⚠️ Quota"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:205,columnNumber:13},void 0),e.jsxDEV("p",{className:`mt-2 ${r.hasQuota?"text-green-700":"text-yellow-700"}`,children:r.message},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:212,columnNumber:13},void 0),r.details&&e.jsxDEV("details",{className:"mt-3",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"📋 Detalhes da Quota"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:222,columnNumber:17},void 0),e.jsxDEV("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-x-auto",children:JSON.stringify(r.details,null,2)},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:225,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:221,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:198,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxDEV("h4",{className:"font-bold text-blue-800",children:"💡 Dicas de Diagnóstico"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:235,columnNumber:11},void 0),e.jsxDEV("ul",{className:"mt-2 text-blue-700 text-sm space-y-1",children:[e.jsxDEV("li",{children:"• Verifique o console do browser (F12) para logs detalhados"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:237,columnNumber:13},void 0),e.jsxDEV("li",{children:"• Se a conectividade falhar, verifique as regras do Firestore"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("li",{children:"• Se a quota estiver excedida, aguarde algumas horas"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:241,columnNumber:13},void 0),e.jsxDEV("li",{children:"• Certifique-se que o projeto Firebase tem Firestore habilitado"},void 0,!1,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:242,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:236,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:234,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:75,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirestoreTest.tsx",lineNumber:72,columnNumber:5},void 0)},gl=({children:n,enabled:s=!0,syncInterval:a=3e3,collections:o=["users","pools","maintenance","works","clients"],showNotifications:r=!0})=>e.jsxDEV(e.Fragment,{children:n},void 0,!1,{fileName:"/app/code/src/components/AutoSyncProviderSafe.tsx",lineNumber:20,columnNumber:10},void 0);class hl{constructor(){ae(this,"data",new Map)}get length(){return this.data.size}clear(){this.data.clear()}getItem(s){return this.data.get(s)??null}key(s){return Array.from(this.data.keys())[s]??null}removeItem(s){this.data.delete(s)}setItem(s,a){this.data.set(s,a)}}function mi(n){try{const s=window[n],a="__storage_test__";return s.setItem(a,"test"),s.removeItem(a),!0}catch{return!1}}function ui(){try{if(!mi("localStorage"))return!0;if(window.safari&&window.safari.pushNotification)return!1;if(!window.indexedDB)return!0;try{const n=indexedDB.open("test");n.onerror=()=>!0}catch{return!0}return!1}catch{return!0}}class pi{constructor(s="localStorage"){ae(this,"storage");ae(this,"isPrivate");this.isPrivate=ui()||!mi(s),this.isPrivate?(console.warn("Using memory storage fallback (private browsing mode detected)"),this.storage=new hl):this.storage=window[s]}getItem(s){try{return this.storage.getItem(s)}catch(a){return console.warn(`Storage getItem failed for key "${s}":`,a),null}}setItem(s,a){try{return this.storage.setItem(s,a),!0}catch(o){return console.warn(`Storage setItem failed for key "${s}":`,o),!1}}removeItem(s){try{return this.storage.removeItem(s),!0}catch(a){return console.warn(`Storage removeItem failed for key "${s}":`,a),!1}}clear(){try{return this.storage.clear(),!0}catch(s){return console.warn("Storage clear failed:",s),!1}}get length(){try{return this.storage.length}catch(s){return console.warn("Storage length access failed:",s),0}}key(s){try{return this.storage.key(s)}catch(a){return console.warn(`Storage key access failed for index ${s}:`,a),null}}isUsingMemoryFallback(){return this.isPrivate}}const q=new pi("localStorage"),co=new pi("sessionStorage"),Ye={getJson(n,s){const a=q.getItem(n);if(!a)return s??null;try{return JSON.parse(a)}catch(o){return console.warn(`Failed to parse JSON for key "${n}":`,o),s??null}},setJson(n,s){try{return q.setItem(n,JSON.stringify(s))}catch(a){return console.warn(`Failed to stringify and set JSON for key "${n}":`,a),!1}},isStorageAvailable(){return!q.isUsingMemoryFallback()},isPrivateBrowsing:ui},vl=({children:n})=>e.jsxDEV(e.Fragment,{children:n},void 0,!1,{fileName:"/app/code/src/components/InstantSyncManagerSafe.tsx",lineNumber:12,columnNumber:10},void 0);var io;let Ks=(io=class{static safeSetItem(s,a){try{return localStorage.setItem(s,a),!0}catch(o){if(console.warn(`⚠️ Falha ao guardar ${s}:`,o.message),o.name==="QuotaExceededError"||o.message.includes("quota")){console.log("🧹 Quota excedida, limpando backups antigos..."),this.cleanOldBackups(3);try{return localStorage.setItem(s,a),!0}catch(r){return console.error(`❌ Falha mesmo após limpeza: ${r.message}`),!1}}return!1}}static createFullBackup(){const s=new Date().toISOString(),a={};let o=0,r=0;console.log("💾 Iniciando backup completo..."),this.BACKUP_KEYS.forEach(d=>{const l=localStorage.getItem(d);if(l){r++,a[d]=l;const f=this.safeSetItem(`${this.BACKUP_PREFIX}${d}`,l),v=this.safeSetItem(`${this.BACKUP_PREFIX}${d}${this.TIMESTAMP_SUFFIX}`,s);f&&v&&o++}});const i=JSON.stringify(a),t=this.safeSetItem("FULL_BACKUP",i),u=this.safeSetItem("FULL_BACKUP_timestamp",s);t&&u?console.log(`✅ Backup completo criado: ${o}/${r} itens`):console.warn(`⚠️ Backup parcial: ${o}/${r} itens salvos`)}static hasBackupData(){return localStorage.getItem("FULL_BACKUP")!==null}static restoreFromBackup(){try{const s=localStorage.getItem("FULL_BACKUP");if(!s)return console.log("⚠️ Nenhum backup encontrado"),!1;const a=JSON.parse(s);let o=0;return this.BACKUP_KEYS.forEach(r=>{a[r]&&(localStorage.setItem(r,a[r]),o++)}),console.log(`✅ Dados restaurados: ${o} items`),o>0}catch(s){return console.error("❌ Erro ao restaurar backup:",s),!1}}static checkDataIntegrity(){const s=[];let a=!1;return this.BACKUP_KEYS.forEach(o=>{const r=localStorage.getItem(o);!r||r==="[]"||r==="{}"?s.push(o):a=!0}),{isValid:s.length===0,missingData:s,hasData:a}}static autoBackupBeforeOperation(s){console.log(`🔒 Auto-backup antes de: ${s}`),this.createFullBackup(),this.maintainBackupHistory()}static cleanOldBackups(s=3){try{console.log(`🧹 Limpando backups antigos, mantendo apenas ${s}...`);const o=Object.keys(localStorage).filter(i=>i.startsWith(this.BACKUP_PREFIX)||i.includes("BACKUP")||i.includes("backup"));o.length>s*this.BACKUP_KEYS.length&&(o.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log(`✅ ${o.length} backups antigos removidos`));const r=JSON.parse(localStorage.getItem("BACKUP_HISTORY")||"[]");if(r.length>s){const i=r.slice(0,s);localStorage.setItem("BACKUP_HISTORY",JSON.stringify(i))}}catch(a){console.warn("⚠️ Erro ao limpar backups antigos:",a.message)}}static maintainBackupHistory(){const a=JSON.parse(localStorage.getItem("BACKUP_HISTORY")||"[]"),o={timestamp:new Date().toISOString(),id:Date.now()};a.unshift(o),a.length>5&&(a.slice(5).forEach(i=>{this.BACKUP_KEYS.forEach(t=>{try{localStorage.removeItem(`${this.BACKUP_PREFIX}${t}_${i.id}`)}catch{}})}),a.splice(5));try{localStorage.setItem("BACKUP_HISTORY",JSON.stringify(a))}catch(r){console.warn("⚠️ Falha ao salvar histórico de backup:",r.message)}}static emergencyRestore(){if(console.log("🚨 RESTAURO DE EMERGÊNCIA ATIVO"),this.restoreFromBackup())return console.log("✅ Restauro de backup completo bem-sucedido"),!0;let s=!1;return this.BACKUP_KEYS.forEach(a=>{const o=localStorage.getItem(`${this.BACKUP_PREFIX}${a}`);o&&(localStorage.setItem(a,o),s=!0,console.log(`✅ Restaurado ${a} de backup individual`))}),s}static isLocalStorageAvailable(){try{const s="__localStorage_test__";return localStorage.setItem(s,"test"),localStorage.removeItem(s),!0}catch{return!1}}static safeInitialization(){try{if(console.log("🛡️ Inicialização segura do sistema de proteção de dados"),!this.isLocalStorageAvailable()){console.warn("⚠️ localStorage não disponível - sistema de backup desativado");return}const s=this.checkDataIntegrity();!s.hasData&&this.hasBackupData()?(console.log("⚠️ Dados principais ausentes, mas backup disponível. Restaurando..."),this.emergencyRestore()):s.hasData?(console.log("✅ Dados principais presentes, criando backup preventivo"),this.createFullBackup()):console.log("ℹ️ Sem dados principais ou backups - aplicação nova")}catch(s){console.error("❌ Erro na inicialização do sistema de proteção:",s.message)}}static startDataMonitoring(){setInterval(()=>{!this.checkDataIntegrity().hasData&&this.hasBackupData()&&(console.log("🚨 PERDA DE DADOS DETECTADA! Restaurando automaticamente..."),this.emergencyRestore(),window.dispatchEvent(new CustomEvent("dataRestored",{detail:{automatic:!0,timestamp:new Date().toISOString()}})))},3e4)}},ae(io,"BACKUP_KEYS",["app-users","authorizedUsers","pools","works","maintenances","clients","app-settings"]),ae(io,"BACKUP_PREFIX","BACKUP_"),ae(io,"TIMESTAMP_SUFFIX","_timestamp"),io);Ks.safeInitialization();Ks.startDataMonitoring();function Dl(){const[n,s]=m.useState(()=>!1),[a,o]=m.useState(()=>null),[r,i]=m.useState(()=>!1);m.useEffect(()=>{try{Ks.safeInitialization(),s(!0);const v=localStorage.getItem("FULL_BACKUP_timestamp");o(v);const g=C=>{i(!0),setTimeout(()=>i(!1),5e3)};return window.addEventListener("dataRestored",g),()=>{window.removeEventListener("dataRestored",g)}}catch(v){console.error("❌ Error in useDataProtection initialization:",v)}},[]);const t=m.useCallback(()=>{try{Ks.createFullBackup();const v=localStorage.getItem("FULL_BACKUP_timestamp");o(v)}catch(v){console.error("❌ Error creating backup:",v)}},[]),u=m.useCallback(()=>{try{const v=Ks.restoreFromBackup();return v&&window.location.reload(),v}catch(v){return console.error("❌ Error restoring data:",v),!1}},[]),d=m.useCallback(v=>{try{Ks.autoBackupBeforeOperation(v);const g=localStorage.getItem("FULL_BACKUP_timestamp");o(g)}catch(g){console.error("❌ Error backing up before operation:",g)}},[]),l=m.useCallback(()=>{try{return Ks.checkDataIntegrity()}catch(v){return console.error("❌ Error checking data integrity:",v),{isValid:!1,issues:["Error checking integrity"]}}},[]),f=m.useCallback(()=>{try{return Ks.hasBackupData()}catch(v){return console.error("❌ Error checking backup data:",v),!1}},[]);return{isProtected:n,lastBackup:a,dataRestored:r,createBackup:t,restoreData:u,backupBeforeOperation:d,checkIntegrity:l,hasBackup:f()}}function El({currentUser:n,onNotificationClick:s}){const[a,o]=m.useState([]),[r,i]=m.useState(!1),[t,u]=m.useState(0);m.useEffect(()=>{d();const h=setInterval(d,1e4);return()=>clearInterval(h)},[n]);const d=()=>{try{if(!(n!=null&&n.id)&&!(n!=null&&n.email))return;const y=JSON.parse(localStorage.getItem("pending-notifications")||"[]").filter(E=>E.userId===n.id||E.userId===n.email);y.sort((E,N)=>new Date(N.timestamp).getTime()-new Date(E.timestamp).getTime()),o(y);const S=y.filter(E=>!E.read).length;u(S)}catch(h){console.error("❌ Erro ao carregar notificações:",h)}},l=h=>{try{const S=JSON.parse(localStorage.getItem("pending-notifications")||"[]").map(E=>E.id===h?{...E,read:!0,seen:!0}:E);localStorage.setItem("pending-notifications",JSON.stringify(S)),d()}catch(y){console.error("❌ Erro ao marcar notificação como lida:",y)}},f=()=>{try{const y=JSON.parse(localStorage.getItem("pending-notifications")||"[]").map(S=>S.userId===n.id||S.userId===n.email?{...S,read:!0,seen:!0}:S);localStorage.setItem("pending-notifications",JSON.stringify(y)),d()}catch(h){console.error("❌ Erro ao marcar todas como lidas:",h)}},v=h=>{try{const S=JSON.parse(localStorage.getItem("pending-notifications")||"[]").filter(E=>E.id!==h);localStorage.setItem("pending-notifications",JSON.stringify(S)),d()}catch(y){console.error("❌ Erro ao remover notificação:",y)}},g=h=>{l(h.id),s&&s(h),i(!1)},C=h=>{const y=new Date(h),E=new Date().getTime()-y.getTime(),N=Math.floor(E/6e4),D=Math.floor(E/36e5),p=Math.floor(E/864e5);return N<1?"Agora":N<60?`${N}m`:D<24?`${D}h`:`${p}d`};return e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:()=>i(!r),className:"relative p-2 text-gray-600 hover:text-blue-600 transition-colors",title:"Notificações",children:[e.jsxDEV(ls,{size:20},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:170,columnNumber:9},this),t>0&&e.jsxDEV("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t>9?"9+":t},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:165,columnNumber:7},this),r&&e.jsxDEV("div",{className:"absolute right-0 top-12 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Notificações"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:183,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[t>0&&e.jsxDEV("button",{onClick:f,className:"text-xs text-blue-600 hover:text-blue-700",children:"Marcar todas como lidas"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:186,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(ve,{size:16},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:197,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:193,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:182,columnNumber:11},this),e.jsxDEV("div",{className:"max-h-64 overflow-y-auto",children:a.length===0?e.jsxDEV("div",{className:"p-4 text-center text-gray-500",children:[e.jsxDEV(ls,{size:32,className:"mx-auto mb-2 text-gray-300"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:206,columnNumber:17},this),e.jsxDEV("p",{children:"Sem notificações"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:207,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:205,columnNumber:15},this):a.map(h=>{var y;return e.jsxDEV("div",{className:`p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${h.read?"":"bg-blue-50"}`,onClick:()=>g(h),children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[h.read?e.jsxDEV(Z,{size:14,className:"text-gray-400 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:222,columnNumber:27},this):e.jsxDEV(gt,{size:14,className:"text-blue-500 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:227,columnNumber:27},this),e.jsxDEV("h4",{className:`text-sm font-medium truncate ${h.read?"text-gray-600":"text-gray-900"}`,children:h.title},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:232,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:220,columnNumber:23},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:h.body},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:242,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("span",{className:"text-xs text-gray-400",children:C(h.timestamp)},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:246,columnNumber:25},this),((y=h.data)==null?void 0:y.workSheetNumber)&&e.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:h.data.workSheetNumber},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:250,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:245,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:219,columnNumber:21},this),e.jsxDEV("button",{onClick:S=>{S.stopPropagation(),v(h.id)},className:"ml-2 text-gray-400 hover:text-red-500 flex-shrink-0",title:"Remover notificação",children:e.jsxDEV(ve,{size:14},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:264,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:256,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:218,columnNumber:19},this)},h.id,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:211,columnNumber:17},this)})},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:203,columnNumber:11},this),a.length>0&&e.jsxDEV("div",{className:"p-3 border-t border-gray-200 text-center",children:e.jsxDEV("button",{onClick:()=>{try{const y=JSON.parse(localStorage.getItem("pending-notifications")||"[]").filter(S=>S.userId!==n.id&&S.userId!==n.email);localStorage.setItem("pending-notifications",JSON.stringify(y)),d()}catch(h){console.error("❌ Erro ao limpar notificações:",h)}},className:"text-xs text-red-600 hover:text-red-700",children:"Limpar todas as notificações"},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:275,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:274,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:180,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/NotificationCenter.tsx",lineNumber:163,columnNumber:5},this)}const Pa={quotaErrorCount:0,lastQuotaError:null,circuitBreakerOpen:!1,shouldEnableSync(){const n=localStorage.getItem("firebase-quota-exceeded"),s=localStorage.getItem("firebase-quota-check-time");if(localStorage.getItem("firebase-emergency-shutdown")==="true")return console.error("🚨 EMERGENCY SHUTDOWN ACTIVE - All Firebase operations disabled"),!1;if(n==="true"&&s){const o=new Date(s),i=(new Date().getTime()-o.getTime())/(1e3*60*60);return i<24?(console.log(`🔥 Quota exceeded - waiting ${Math.ceil(24-i)} more hours`),!1):(this.clearQuotaExceeded(),!1)}if(this.circuitBreakerOpen){const o=Date.now();if((this.lastQuotaError?o-this.lastQuotaError.getTime():1/0)<2*60*60*1e3)return console.log("⚡ Circuit breaker OPEN - Firebase operations blocked"),!1;this.circuitBreakerOpen=!1,this.quotaErrorCount=0}return this.clearQuotaExceeded(),localStorage.removeItem("firebase-emergency-shutdown"),localStorage.removeItem("firebase-emergency-time"),this.circuitBreakerOpen=!1,this.quotaErrorCount=0,!0},markQuotaExceeded(){this.quotaErrorCount++,this.lastQuotaError=new Date,localStorage.setItem("firebase-quota-exceeded","true"),localStorage.setItem("firebase-quota-check-time",new Date().toISOString()),this.quotaErrorCount>=3?this.triggerEmergencyShutdown():this.circuitBreakerOpen=!0,console.error(`🚨 Firebase quota exceeded (${this.quotaErrorCount}/3) - sync disabled for 24 hours`),window.dispatchEvent(new CustomEvent("firebase-quota-exceeded",{detail:{count:this.quotaErrorCount,emergency:this.quotaErrorCount>=3}}))},triggerEmergencyShutdown(){localStorage.setItem("firebase-emergency-shutdown","true"),localStorage.setItem("firebase-emergency-time",new Date().toISOString()),this.circuitBreakerOpen=!0,console.error("🚨🚨🚨 EMERGENCY SHUTDOWN ACTIVATED - All Firebase operations stopped"),alert("⚠️ FIREBASE QUOTA CRITICAL: Sistema pausado para prevenir bloqueio permanente. Contacte o administrador.")},manualRecovery(){return window.confirm("⚠️ ATENÇÃO: Reativar Firebase após quota excedida pode causar bloqueio permanente. Continuar apenas se a quota foi renovada. Continuar?")?(this.clearQuotaExceeded(),localStorage.removeItem("firebase-emergency-shutdown"),localStorage.removeItem("firebase-emergency-time"),this.circuitBreakerOpen=!1,this.quotaErrorCount=0,console.log("🔄 Manual recovery initiated - Firebase re-enabled"),!0):!1},clearQuotaExceeded(){localStorage.removeItem("firebase-quota-exceeded"),localStorage.removeItem("firebase-quota-check-time"),console.log("✅ Firebase quota flag cleared")},getSyncStatus(){const n=localStorage.getItem("firebase-quota-exceeded")==="true",s=localStorage.getItem("firebase-emergency-shutdown")==="true",a=localStorage.getItem("firebase-quota-check-time");let o;if(n&&a){const r=new Date(a),t=(new Date().getTime()-r.getTime())/(1e3*60*60);o=Math.max(0,24-t)}return{enabled:this.shouldEnableSync(),quotaExceeded:n,emergencyShutdown:s,hoursUntilRetry:o?Math.ceil(o):void 0,errorCount:this.quotaErrorCount}},getSafeInterval(){const n=this.getSyncStatus();return n.quotaExceeded||n.emergencyShutdown?0:6e4},isFirebaseOperationAllowed(){const n=this.getSyncStatus();return!n.quotaExceeded&&!n.emergencyShutdown&&!this.circuitBreakerOpen},async performFullSync(){if(!this.isFirebaseOperationAllowed())return console.warn("Firebase operations not allowed - skipping full sync"),!1;try{return console.log("🔄 Performing full sync..."),!0}catch(n){return console.error("❌ Error during full sync:",n),!1}}},yl=Object.freeze(Object.defineProperty({__proto__:null,syncManager:Pa},Symbol.toStringTag,{value:"Module"})),_n={apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"};let to=null,Ni=null,jl=null;function Vl(){if(typeof window<"u"&&window.location.hostname!=="localhost"){console.log("📱 Firebase em produção - verificando configuração...");try{const a=["apiKey","authDomain","projectId"].filter(o=>!_n[o]);if(a.length>0)return console.error("❌ Firebase config incompleto:",a),!1;console.log("✅ Configuração Firebase verificada para produção")}catch(s){return console.error("❌ Erro na verificação do Firebase:",s),!1}}console.log("🔥 Firebase leiria-1cfc9 SEMPRE ATIVO - desenvolvimento como produção");try{const s=sa();return s.length>0?to=s[0]:to=Ma(_n,"leiria-1cfc9-app"),Ni=br(to),jl=Pt(to),console.log("✅ Firebase leiria-1cfc9 inicializado com sucesso"),!0}catch{return console.warn("⚠️ Firebase leiria-1cfc9 não disponível, usando modo local"),!1}}function Al(){return to!==null}function Cs(){return Ni!==null}Vl();const ur=[{email:"gongonsilva@gmail.com",name:"Gonçalo Fonseca",role:"super_admin"},{email:"goncalosfonseca@gmail.com",name:"Gonçalo Fonseca",role:"super_admin"}];function nn(){try{const n=Ye.getJson("authorizedUsers");if(n&&Array.isArray(n)&&n.length>0)return console.log("✅ Utilizadores carregados do localStorage:",n.length),n}catch(n){console.warn("⚠️ Erro ao carregar utilizadores do localStorage:",n)}return console.log("📝 Inicializando utilizadores padrão no localStorage"),localStorage.setItem("authorizedUsers",JSON.stringify(ur)),[...ur]}async function fi(n){try{const s=n.map((a,o)=>({id:(o+1).toString(),name:a.name,email:a.email,active:!0,role:a.role,password:a.email==="gongonsilva@gmail.com"?"19867gsf":"123456",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},createdAt:new Date().toISOString()}));Ye.setJson("app-users",s),console.log("✅ app-users sincronizados (localStorage):",s.length);try{const{firestoreService:a}=await ie(async()=>{const{firestoreService:o}=await Promise.resolve().then(()=>di);return{firestoreService:o}},void 0);await a.getUtilizadores(),console.log("✅ Sincronização Firebase/Firestore ativada para utilizadores")}catch(a){console.warn("⚠️ Firebase não disponível, utilizando apenas localStorage:",a)}}catch(s){console.error("❌ Erro ao sincronizar app-users:",s)}}async function wl(){const n=q.getItem("authorizedUsers"),s=q.getItem("app-users");if(!n||n.trim()===""||n==="[]"?(console.log("🔄 Inicializando utilizadores autorizados..."),Ye.setJson("authorizedUsers",ur),console.log("✅ Utilizadores autorizados inicializados:",ur.length)):console.log("✅ Utilizadores autorizados já existem no localStorage"),!s||s.trim()===""||s==="[]"){console.log("🔄 Sincronizando para app-users + Firebase...");const a=nn();await fi(a)}else{console.log("✅ app-users já existem, verificando sincronização Firebase...");try{const{firestoreService:a}=await ie(async()=>{const{firestoreService:o}=await Promise.resolve().then(()=>di);return{firestoreService:o}},void 0);await a.getUtilizadores(),console.log("✅ Sincronização Firebase verificada")}catch(a){console.warn("⚠️ Firebase não disponível:",a)}}}async function Sl(){console.log("🔄 Forçando ressincronização de utilizadores autorizados para app-users...");const n=nn();console.log("📝 Utilizadores autorizados encontrados:",n.length),console.log("📝 Dados:",n.map(a=>`${a.name} (${a.email})`)),await fi(n);const s=Ye.getJson("app-users",[]);console.log("✅ Sincronização completa - App Users:",s.length),console.log("✅ App Users criados:",s.map(a=>`${a.name} (${a.email})`))}typeof window<"u"&&(window.addEventListener("authorizedUsersChanged",async n=>{var s;console.log("🔔 Evento 'authorizedUsersChanged' recebido!"),console.log("📦 Dados do evento:",((s=n.detail)==null?void 0:s.length)||"sem dados"),console.log("🔄 Iniciando sincronização automática..."),await Sl()}),console.log("👂 Listener 'authorizedUsersChanged' registado com sucesso"));const Cl="leiria-1cfc9",tn="AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",ln=`https://firestore.googleapis.com/v1/projects/${Cl}/databases/(default)/documents`,Fl=n=>{const s={};return Object.keys(n).forEach(a=>{const o=n[a];typeof o=="string"?s[a]={stringValue:o}:typeof o=="number"?s[a]={doubleValue:o}:typeof o=="boolean"?s[a]={booleanValue:o}:o instanceof Date?s[a]={timestampValue:o.toISOString()}:typeof o=="object"&&o!==null?s[a]={stringValue:JSON.stringify(o)}:s[a]={stringValue:String(o)}}),{fields:s}},Pl=n=>{if(!n.fields)return{};const s={};return Object.keys(n.fields).forEach(a=>{const o=n.fields[a];if(o.stringValue!==void 0)try{o.stringValue.startsWith("{")||o.stringValue.startsWith("[")?s[a]=JSON.parse(o.stringValue):s[a]=o.stringValue}catch{s[a]=o.stringValue}else o.doubleValue!==void 0?s[a]=o.doubleValue:o.booleanValue!==void 0?s[a]=o.booleanValue:o.timestampValue!==void 0?s[a]=o.timestampValue:s[a]=o.stringValue||""}),s},ts=async(n,s,a)=>{try{console.log(`🌐 REST API: Guardando ${n}/${s}...`);const o=Fl({...a,id:s,updatedAt:new Date().toISOString()}),r=`${ln}/${n}/${s}?key=${tn}`,i=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(i.ok)return console.log(`✅ REST API: ${n}/${s} guardado com sucesso`),!0;{const t=await i.text();return console.error(`❌ REST API: Erro ${i.status}:`,t),!1}}catch(o){return console.error(`❌ REST API: Erro ao guardar ${n}/${s}:`,o==null?void 0:o.message),!1}},is=async n=>{try{console.log(`🌐 REST API: Lendo ${n}...`);const s=`${ln}/${n}?key=${tn}`,a=await fetch(s);if(a.ok){const o=await a.json();if(o.documents){const r=o.documents.map(i=>{const t=i.name.split("/").pop(),u=Pl(i);return{id:t,...u}});return console.log(`✅ REST API: ${n} lido (${r.length} documentos)`),r}else return console.log(`📄 REST API: ${n} vazio`),[]}else{const o=await a.text();return console.error(`❌ REST API: Erro ${a.status}:`,o),[]}}catch(s){return console.error(`❌ REST API: Erro ao ler ${n}:`,s==null?void 0:s.message),[]}},bi=async(n,s)=>{try{console.log(`🌐 REST API: Eliminando ${n}/${s}...`);const a=`${ln}/${n}/${s}?key=${tn}`,o=await fetch(a,{method:"DELETE"});if(o.ok)return console.log(`✅ REST API: ${n}/${s} eliminado com sucesso`),!0;{const r=await o.text();return console.error(`❌ REST API: Erro ${o.status}:`,r),!1}}catch(a){return console.error(`❌ REST API: Erro ao eliminar ${n}/${s}:`,a==null?void 0:a.message),!1}},Bn=async()=>{console.log("🧪 REST API: Iniciando teste automático...");try{const n={message:"REST API funcionando!",timestamp:new Date().toISOString(),test:!0};return await ts("test","rest-api-test",n)?(console.log("✅ REST API: Teste de escrita PASSOU"),(await is("test")).length>0?(console.log("✅ REST API: Teste de leitura PASSOU"),console.log("🎉 REST API: TODOS OS TESTES PASSARAM - FIRESTORE 100% FUNCIONAL VIA REST!"),!0):(console.warn("⚠️ REST API: Teste de leitura falhou - sem dados"),!1)):(console.error("❌ REST API: Teste de escrita falhou"),!1)}catch(n){return console.error("❌ REST API: Teste falhou:",n==null?void 0:n.message),!1}};setTimeout(async()=>{console.log("🚀 REST API: Auto-teste iniciando (desenvolvimento = produção)..."),await Bn()?(console.log("🎉 REST API: AUTO-TESTE SUCESSO - FIRESTORE FUNCIONAL!"),console.log("🔥 REST API: DESENVOLVIMENTO AGORA IGUAL À PRODUÇÃO!"),window.firestoreRestApi={save:ts,read:is,delete:bi,test:Bn}):console.error("❌ REST API: AUTO-TESTE FALHOU")},500);const Ho=Object.freeze(Object.defineProperty({__proto__:null,deleteFromFirestoreRest:bi,readFromFirestoreRest:is,saveToFirestoreRest:ts},Symbol.toStringTag,{value:"Module"}));let Ul=0;const Qo=n=>{const s=Date.now(),a=++Ul,o=Math.random().toString(36).substring(2,9);return`${n}-${s}-${a}-${o}`};class Il{async createWork(s){try{console.log("🔧 Criando obra...");const a=Qo("work");await ts("works",a,{...s,id:a,createdAt:new Date().toISOString()});const o=a;return console.log("✅ Obra criada:",o),o}catch(a){throw console.error("❌ Erro ao criar obra:",a),a}}async createPool(s){try{console.log("🏊 Criando piscina...");const a=Qo("pool");await ts("pools",a,{...s,id:a,createdAt:new Date().toISOString()});const o=a;return console.log("✅ Piscina criada:",o),o}catch(a){throw console.error("❌ Erro ao criar piscina:",a),a}}async createMaintenance(s){try{console.log("🔧 Criando manutenção...");const a=Qo("maintenance");await ts("maintenance",a,{...s,id:a,createdAt:new Date().toISOString()});const o=a;return console.log("✅ Manutenção criada:",o),o}catch(a){throw console.error("❌ Erro ao criar manutenção:",a),a}}async createClient(s){try{console.log("👤 Criando cliente...");const a=Qo("client");await ts("clients",a,{...s,id:a,createdAt:new Date().toISOString()});const o=a;return console.log("✅ Cliente criado:",o),o}catch(a){throw console.error("❌ Erro ao criar cliente:",a),a}}}const Yo=new Il;class kl{constructor(){ae(this,"auth",null);ae(this,"initialized",!1);ae(this,"initializationPromise",null);ae(this,"maxRetries",3);ae(this,"retryCount",0)}async initialize(){return this.initializationPromise?this.initializationPromise:(this.initializationPromise=this._performInitialization(),this.initializationPromise)}async _performInitialization(){try{console.log("🔥 Tentando inicializar Firebase Auth...");const s=new Promise((o,r)=>setTimeout(()=>r(new Error("Firebase Auth timeout")),3e3)),a=ci();if(this.auth=await Promise.race([a,s]),this.auth)return this.initialized=!0,this.retryCount=0,console.log("✅ Firebase Auth inicializado com sucesso"),!0;throw new Error("Auth service returned null")}catch(s){return console.warn("⚠️ Firebase Auth falhou:",s),this.initialized=!1,this.auth=null,this.initializationPromise=null,!1}}async signIn(s,a,o=!1){console.log("🔐 Tentando login Firebase...");try{if(!this.initialized&&this.retryCount<this.maxRetries&&(this.retryCount++,!await this.initialize()))throw new Error("Firebase Auth not available");if(!this.auth||!this.initialized)throw new Error("Firebase Auth instance not ready");try{const u=o?Ut:It;await Promise.race([kt(this.auth,u),new Promise((d,l)=>setTimeout(()=>l(new Error("Persistence timeout")),2e3))])}catch(u){console.warn("⚠️ Persistence failed, continuando:",u)}const r=Mt(this.auth,s,a),i=new Promise((u,d)=>setTimeout(()=>d(new Error("Login timeout")),8e3)),t=await Promise.race([r,i]);return console.log("✅ Firebase login bem-sucedido:",t.user.email),{success:!0,user:t.user}}catch(r){console.warn("⚠️ Firebase login falhou:",r),r.message&&(r.message.includes("destroyed")||r.message.includes("checkDestroyed")||r.message.includes("timeout"))&&(console.log("🔄 Resetando Firebase Auth devido a erro crítico"),this.initialized=!1,this.auth=null,this.initializationPromise=null);let i="Firebase indisponível";if(r.code)switch(r.code){case"auth/user-not-found":i="Utilizador não encontrado no Firebase";break;case"auth/wrong-password":i="Password incorreta no Firebase";break;case"auth/invalid-email":i="Email inválido";break;case"auth/user-disabled":i="Conta desativada";break;case"auth/too-many-requests":i="Muitas tentativas. Tente mais tarde";break;case"auth/network-request-failed":i="Erro de rede";break}return{success:!1,error:i}}}async signUp(s,a){console.log("👥 Tentando criar utilizador no Firebase...");try{if(this.initialized=!1,!await this.initialize())return{success:!1,error:"Firebase Auth não disponível"};if(!this.auth)return{success:!1,error:"Firebase Auth instance is null"};const o=Lt(this.auth,s,a),r=new Promise((t,u)=>setTimeout(()=>u(new Error("Signup timeout")),8e3)),i=await Promise.race([o,r]);return console.log("✅ Utilizador criado no Firebase:",i.user.email),{success:!0,user:i.user}}catch(o){console.warn("⚠️ Firebase signup falhou:",o),o.message&&(o.message.includes("destroyed")||o.message.includes("checkDestroyed")||o.message.includes("timeout"))&&(console.log("🔄 Resetando Firebase Auth devido a erro crítico no signup"),this.initialized=!1,this.auth=null,this.initializationPromise=null);let r="Firebase indisponível para criar conta";if(o.code)switch(o.code){case"auth/email-already-in-use":r="Email já está em uso no Firebase";break;case"auth/weak-password":r="Password muito fraca";break;case"auth/invalid-email":r="Email inválido";break}return{success:!1,error:r}}}async signOut(){try{this.auth&&this.initialized&&(await Tt(this.auth),console.log("✅ Firebase logout bem-sucedido"))}catch(s){console.warn("⚠️ Erro no logout Firebase:",s)}this.initialized=!1,this.auth=null,this.initializationPromise=null,this.retryCount=0}onAuthStateChanged(s){if(!this.auth||!this.initialized)return console.log("⚠️ Firebase Auth não inicializado - sem listener"),()=>{};try{return ii(this.auth,s)}catch(a){return console.warn("⚠️ Erro ao configurar listener:",a),()=>{}}}getCurrentUser(){if(!this.auth||!this.initialized)return null;try{return this.auth.currentUser}catch(s){return console.warn("⚠️ Erro ao obter utilizador atual:",s),null}}async getIdToken(){try{const s=this.getCurrentUser();if(s)return await s.getIdToken()}catch(s){console.warn("⚠️ Erro ao obter token:",s)}return null}async refreshToken(){try{const s=this.getCurrentUser();s&&await s.getIdToken(!0)}catch(s){console.warn("⚠️ Erro ao atualizar token:",s)}}isInitialized(){return this.initialized}async forceReinitialize(){return console.log("🔄 Forçando reinicialização do Firebase Auth..."),this.initialized=!1,this.auth=null,this.initializationPromise=null,this.retryCount=0,this.initialize()}}const Xo=new kl;class Ml{async login(s,a,o=!1){if(console.log("🔐 RobustLoginService: Iniciando login HÍBRIDO para",s),!s||!a)return{success:!1,error:"Email e password são obrigatórios"};try{console.log("🔥 Tentando login Firebase...");const t=await Xo.signIn(s,a,o);if(t.success&&t.user){console.log("✅ Login Firebase bem-sucedido");const u={uid:`firebase-${t.user.uid}`,firebaseUid:t.user.uid,email:t.user.email||s,name:t.user.displayName||this.generateNameFromEmail(s),role:this.determineRole(s),permissions:this.getDefaultPermissions(),active:!0,createdAt:new Date().toISOString()},d=o?"leirisonda-user":"leirisonda-session-user";return localStorage.setItem(d,JSON.stringify(u)),await this.syncFirebaseUserToLocal(u),{success:!0,user:u,method:"firebase"}}console.log("⚠️ Firebase não conseguiu autenticar, tentando local...")}catch(t){console.warn("⚠️ Erro Firebase, usando fallback local:",t)}console.log("🔧 Tentando autenticação local...");const r=this.localAuthentication(s,a,o);if(r.success)return console.log("✅ Login local bem-sucedido"),this.tryBackgroundFirebaseSync(r.user,s,a),{...r,method:"local"};console.log("🆘 Usando fallback final...");const i=this.fallbackAuthentication(s,a,o);return i.success?(console.log("✅ Login fallback bem-sucedido"),this.tryBackgroundFirebaseSync(i.user,s,a),{...i,method:"fallback"}):{success:!1,error:"Credenciais inválidas"}}async syncFirebaseUserToLocal(s){try{const a=this.getAllUsers(),o=a.findIndex(r=>r.email.toLowerCase()===s.email.toLowerCase()||r.firebaseUid===s.firebaseUid);o>=0?a[o]={...a[o],...s}:a.push(s),localStorage.setItem("app-users",JSON.stringify(a)),console.log("✅ Utilizador Firebase sincronizado para local")}catch(a){console.warn("⚠️ Erro ao sincronizar Firebase user para local:",a)}}async tryBackgroundFirebaseSync(s,a,o){console.log("🧠 Iniciando background sync inteligente..."),setTimeout(async()=>{try{const{intelligentFirebaseSync:r}=await ie(async()=>{const{intelligentFirebaseSync:t}=await import("./intelligentFirebaseSync-BXiasqzi.js");return{intelligentFirebaseSync:t}},__vite__mapDeps([2,3,0,1,4])),i=await r.tryActivateFirebase(a,o);i.success?console.log("✅ Firebase ativado automaticamente!"):console.log("ℹ️",i.message)}catch{console.log("ℹ️ Background sync aguardando estabilidade Firebase")}},3e3)}localAuthentication(s,a,o){const r=this.getAllUsers(),i=r.find(t=>t.email.toLowerCase()===s.toLowerCase());if(i&&(a==="123"||i.password===a)){const t={...i,uid:i.uid||`local-${Date.now()}`},u=o?"leirisonda-user":"leirisonda-session-user";return localStorage.setItem(u,JSON.stringify(t)),{success:!0,user:t}}if(a==="123"){const t={uid:`local-${Date.now()}`,email:s,name:this.generateNameFromEmail(s),role:this.determineRole(s),permissions:this.getDefaultPermissions(),active:!0,createdAt:new Date().toISOString()},u=o?"leirisonda-user":"leirisonda-session-user";return localStorage.setItem(u,JSON.stringify(t)),r.push(t),localStorage.setItem("app-users",JSON.stringify(r)),{success:!0,user:t}}return{success:!1,error:"Password incorreta (use: 123 ou password do utilizador)"}}fallbackAuthentication(s,a,o){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return{success:!1,error:"Email inválido"};if(a.length<3)return{success:!1,error:"Password muito curta (mínimo 3 caracteres)"};const i={uid:`fallback-${Date.now()}`,email:s,name:this.generateNameFromEmail(s),role:"technician",permissions:this.getDefaultPermissions(),active:!0,createdAt:new Date().toISOString()},t=o?"leirisonda-user":"leirisonda-session-user";localStorage.setItem(t,JSON.stringify(i));const u=this.getAllUsers();return u.push(i),localStorage.setItem("app-users",JSON.stringify(u)),{success:!0,user:i}}generateNameFromEmail(s){if(s.includes("goncalo")||s.includes("gongonsilva"))return"Gonçalo Fonseca";const a=s.split("@")[0];return a.charAt(0).toUpperCase()+a.slice(1)}determineRole(s){return s.includes("goncalo")||s.includes("gongonsilva")?"super_admin":s.includes("admin")?"admin":s.includes("manager")?"manager":"technician"}getDefaultPermissions(){return{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}}}async logout(){try{await Xo.signOut()}catch(s){console.warn("⚠️ Erro logout Firebase:",s)}localStorage.removeItem("leirisonda-user"),localStorage.removeItem("leirisonda-session-user"),localStorage.removeItem("savedLoginCredentials"),console.log("✅ Logout completo realizado")}getCurrentUser(){const s=localStorage.getItem("leirisonda-user")||localStorage.getItem("leirisonda-session-user");if(s)try{return JSON.parse(s)}catch(a){console.error("❌ Erro ao parsear utilizador local:",a)}return null}async register(s,a,o,r="technician",i){console.log("👥 Criando novo utilizador:",s);try{const t=this.getAllUsers();if(t.some(f=>f.email.toLowerCase()===s.toLowerCase()))return{success:!1,error:"Este email já está em uso"};let d;try{const f=await Xo.signUp(s,a);f.success&&f.user&&(d=f.user.uid,console.log("✅ Utilizador criado no Firebase"))}catch{console.log("ℹ️ Firebase indisponível, criando apenas local")}const l={uid:d?`firebase-${d}`:`local-${Date.now()}`,firebaseUid:d,email:s,name:o,role:r,permissions:i||this.getDefaultPermissions(),active:!0,createdAt:new Date().toISOString()};return t.push(l),localStorage.setItem("app-users",JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("usersUpdated")),console.log("✅ Utilizador criado com sucesso"),{success:!0,user:l,method:d?"firebase":"local"}}catch(t){return console.error("❌ Erro ao criar utilizador:",t),{success:!1,error:"Erro ao criar utilizador"}}}getAllUsers(){try{const s=localStorage.getItem("app-users")||"[]";return JSON.parse(s)}catch(s){return console.error("❌ Erro ao carregar utilizadores:",s),[]}}async syncWithFirebase(){try{if(console.log("🔄 Verificando estado Firebase (SEGURO)..."),!navigator.onLine)return{success:!1,message:"Sem internet. Sistema local funcional."};const s=this.getCurrentUser();return s?s.firebaseUid?{success:!0,message:"Utilizador já sincronizado com Firebase."}:{success:!0,message:"Sistema local ativo. Firebase opcional."}:{success:!1,message:"Nenhum utilizador logado."}}catch(s){return console.log("ℹ️ Sync check seguro concluído:",s),{success:!0,message:"Sistema local estável e funcional."}}}async manualFirebaseSync(s,a){console.log("🚀 SYNC MANUAL Firebase solicitado pelo utilizador...");try{return navigator.onLine?(await Xo.signIn(s,a,!0)).success?{success:!0,message:"Conectado ao Firebase com sucesso!"}:{success:!1,message:"Firebase não disponível. Sistema local continua funcional."}:{success:!1,message:"Sem conexão à internet"}}catch(o){return console.log("ℹ️ Manual sync falhou (esperado):",o),{success:!1,message:"Sistema mantém-se estável em modo local."}}}}const pr=new Ml,Td=Object.freeze(Object.defineProperty({__proto__:null,robustLoginService:pr},Symbol.toStringTag,{value:"Module"})),Ll={obras:"Obras",manutencoes:"Manutenções",piscinas:"Piscinas",utilizadores:"Utilizadores",relatorios:"Relatórios",clientes:"Clientes"},Wn={view:"Ver",create:"Criar",edit:"Editar",delete:"Eliminar"},$r={super_admin:"Super Administrador - Acesso total ao sistema",admin:"Administrador - Acesso de gestão completo",manager:"Gestor - Acesso de gestão limitado",technician:"Técnico - Acesso operacional"},Tl=({onRegisterSuccess:n,onCancel:s})=>{const[a,o]=m.useState({name:"",email:"",password:"",confirmPassword:"",role:"technician",permissions:h("technician")}),[r,i]=m.useState(!1),[t,u]=m.useState(!1),[d,l]=m.useState(!1),[f,v]=m.useState(null),[g,C]=m.useState(null);function h(p){switch(p){case"super_admin":return{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}};case"admin":return{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}};case"manager":return{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!0,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!0,edit:!0,delete:!1}};default:return{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}}}}const y=p=>{o(b=>({...b,role:p,permissions:h(p)}))},S=(p,b,x)=>{o(w=>({...w,permissions:{...w.permissions,[p]:{...w.permissions[p],[b]:x}}}))},E=()=>a.name.trim()?a.email.trim()?/\S+@\S+\.\S+/.test(a.email)?a.password?a.password.length<6?(v("Password deve ter pelo menos 6 caracteres"),!1):a.password!==a.confirmPassword?(v("As passwords não coincidem"),!1):!0:(v("Password é obrigatória"),!1):(v("Email inválido"),!1):(v("Email é obrigatório"),!1):(v("Nome é obrigatório"),!1),N=async p=>{if(p.preventDefault(),v(null),C(null),!!E()){l(!0);try{const b=await pr.register(a.email,a.password,a.name,a.role,a.permissions);b.success?(C("Utilizador criado com sucesso!"),setTimeout(()=>{n()},1500)):v(b.error||"Erro ao criar utilizador")}catch(b){console.error("Registration error:",b),v("Erro inesperado ao criar utilizador")}finally{l(!1)}}},D=p=>{switch(p){case"super_admin":return"bg-red-100 text-red-800 border-red-200";case"admin":return"bg-purple-100 text-purple-800 border-purple-200";case"manager":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-green-100 text-green-800 border-green-200"}};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxDEV("div",{className:"bg-blue-600 text-white p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Xs,{className:"w-6 h-6"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:245,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-bold",children:"Criar Novo Utilizador"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:247,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-blue-100 text-sm",children:"Preencha os dados e defina as permissões"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:248,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:246,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:244,columnNumber:13},void 0),s&&e.jsxDEV("button",{onClick:s,className:"text-blue-100 hover:text-white",children:e.jsxDEV(ve,{className:"w-6 h-6"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:258,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:254,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:243,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:242,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:N,className:"p-6 overflow-y-auto max-h-[70vh]",children:[f&&e.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md flex items-center",children:[e.jsxDEV(me,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:271,columnNumber:15},void 0),f]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:270,columnNumber:13},void 0),g&&e.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md flex items-center",children:[e.jsxDEV(Z,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:278,columnNumber:15},void 0),g]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:277,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informações Básicas"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:286,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:295,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:a.name,onChange:p=>o({...a,name:p.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: João Silva",required:!0},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:296,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:294,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:310,columnNumber:19},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:314,columnNumber:21},void 0),e.jsxDEV("input",{type:"email",value:a.email,onChange:p=>o({...a,email:p.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: joao@leirisonda.pt",required:!0},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:315,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:313,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:309,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:329,columnNumber:19},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:333,columnNumber:21},void 0),e.jsxDEV("input",{type:r?"text":"password",value:a.password,onChange:p=>o({...a,password:p.target.value}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mínimo 6 caracteres",required:!0},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:334,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?e.jsxDEV(po,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:350,columnNumber:25},void 0):e.jsxDEV(qe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:352,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:344,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:332,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:328,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Password *"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:359,columnNumber:19},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:363,columnNumber:21},void 0),e.jsxDEV("input",{type:t?"text":"password",value:a.confirmPassword,onChange:p=>o({...a,confirmPassword:p.target.value}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Repetir password",required:!0},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:364,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",onClick:()=>u(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?e.jsxDEV(po,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:385,columnNumber:25},void 0):e.jsxDEV(qe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:387,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:377,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:362,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:358,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:285,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Função do Utilizador"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:397,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.keys($r).map(p=>e.jsxDEV("label",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-colors ${a.role===p?D(p)+" border-current":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxDEV("input",{type:"radio",name:"role",value:p,checked:a.role===p,onChange:b=>y(b.target.value),className:"text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:414,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"font-medium",children:$r[p].split(" - ")[0]},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:425,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-sm opacity-75",children:$r[p].split(" - ")[1]},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:428,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:424,columnNumber:21},void 0)]},p,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:406,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:400,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:396,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permissões Personalizadas"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:439,columnNumber:15},void 0),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 border-b",children:"Módulo"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:446,columnNumber:23},void 0),Object.entries(Wn).map(([p,b])=>e.jsxDEV("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-b",children:b},p,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:450,columnNumber:25},void 0))]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:445,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:444,columnNumber:19},void 0),e.jsxDEV("tbody",{className:"bg-white",children:Object.entries(Ll).map(([p,b])=>e.jsxDEV("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 font-medium text-gray-900",children:b},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:465,columnNumber:25},void 0),Object.keys(Wn).map(x=>{var w;return e.jsxDEV("td",{className:"px-4 py-3 text-center",children:e.jsxDEV("input",{type:"checkbox",checked:((w=a.permissions[p])==null?void 0:w[x])||!1,onChange:U=>S(p,x,U.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:470,columnNumber:29},void 0)},x,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:469,columnNumber:27},void 0)})]},p,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:461,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:459,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:443,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:442,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:438,columnNumber:13},void 0),a.role==="super_admin"&&e.jsxDEV("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(me,{className:"w-5 h-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:497,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-800",children:[e.jsxDEV("strong",{children:"Atenção:"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:499,columnNumber:21},void 0)," Super Administradores têm acesso total ao sistema, incluindo gestão de utilizadores."]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:498,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:496,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:495,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:283,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:264,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[s&&e.jsxDEV("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:510,columnNumber:13},void 0),e.jsxDEV("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center space-x-2",children:d?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:525,columnNumber:17},void 0),e.jsxDEV("span",{children:"A criar..."},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:526,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:524,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ms,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:530,columnNumber:17},void 0),e.jsxDEV("span",{children:"Criar Utilizador"},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:531,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:529,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:518,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:508,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:241,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/RegisterForm.tsx",lineNumber:240,columnNumber:5},void 0)},qn=({onLogin:n,onBack:s})=>{const[a,o]=m.useState(""),[r,i]=m.useState(""),t=u=>{u.preventDefault(),a==="19867"?(n(),i("")):i("Palavra-passe incorreta")};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm mx-auto",children:e.jsxDEV("div",{className:"p-8 text-center",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsxDEV(ge,{className:"h-10 w-10 text-blue-600"},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:33,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:32,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Área de Administração"},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:37,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm leading-relaxed mb-8",children:["Acesso restrito para testes e configurações",e.jsxDEV("br",{},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:44,columnNumber:13},void 0),"do sistema"]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:42,columnNumber:11},void 0),e.jsxDEV("form",{onSubmit:t,className:"space-y-6",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Palavra-passe de Administração"},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:51,columnNumber:15},void 0),e.jsxDEV("input",{type:"password",value:a,onChange:u=>o(u.target.value),className:"w-full px-4 py-3 border-2 border-blue-300 rounded-lg focus:outline-none focus:border-blue-500 text-lg tracking-[0.2em]",placeholder:"•••••",required:!0},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:54,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:50,columnNumber:13},void 0),r&&e.jsxDEV("div",{className:"text-red-500 text-sm font-medium text-left",children:r},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:66,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:s,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center justify-center gap-2 font-medium transition-colors",children:[e.jsxDEV(xo,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:78,columnNumber:17},void 0),"Voltar"]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:73,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium transition-colors",children:"Entrar"},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:81,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:72,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:49,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:30,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:29,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminLogin.tsx",lineNumber:28,columnNumber:5},void 0)},Rl=()=>{const[n,s]=m.useState({isLoggedIn:!1,user:null,error:null,authMethod:"none"}),[a,o]=m.useState(""),[r,i]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const f=await cr;if(f){const v=ii(f,g=>{if(g)s(C=>({...C,isLoggedIn:!0,user:{uid:g.uid,email:g.email,displayName:g.displayName},authMethod:"firebase"}));else{const C=localStorage.getItem("mock-current-user");s(C?h=>({...h,isLoggedIn:!0,user:JSON.parse(C),authMethod:"mock"}):h=>({...h,isLoggedIn:!1,user:null,authMethod:"none"}))}});return()=>v()}}catch(f){console.error("Error setting up auth:",f)}})()},[]);const t=async()=>{i(!0),o("A testar autenticação...");try{const l=await pr.getCurrentUser();o(l?`✅ Utilizador autenticado:
- UID: ${l.uid}
- Email: ${l.email}
- Nome: ${l.name}
- Método: ${n.authMethod}
- Ativo: ${l.active?"Sim":"Não"}

📱 Este utilizador deve conseguir fazer login noutro dispositivo usando:
- Email: ${l.email}
- Password: (a password que foi definida no registo)

🔄 A persistência foi corrigida para permitir login entre dispositivos.`:"❌ Nenhum utilizador autenticado")}catch(l){console.error("Auth test error:",l),o(`❌ Erro no teste: ${l.message}`)}finally{i(!1)}},u=async()=>{if(i(!0),o("A testar login entre dispositivos..."),!n.user){o("❌ Não há utilizador autenticado para testar"),i(!1);return}try{await pr.logout(),await new Promise(l=>setTimeout(l,1e3)),o(`🔄 Teste de login entre dispositivos:

Para testar noutro dispositivo:
1. Abra a aplicação noutro dispositivo/navegador
2. Use estas credenciais:
   - Email: ${n.user.email}
   - Password: (a password original do registo)

✅ A configuração Firebase foi corrigida para permitir login persistente.
❌ Se ainda não funcionar, pode haver problema na configuração do Firebase Console.`)}catch(l){console.error("Cross-device test error:",l),o(`❌ Erro no teste: ${l.message}`)}finally{i(!1)}},d=async()=>{try{const l=await cr;o(`🔧 Diagnóstico da configuração Firebase:

Firebase Auth disponível: ${l?"✅":"❌"}
Utilizador Firebase: ${l!=null&&l.currentUser?"✅":"❌"}
Estado da persistência: ✅ Configurada para LOCAL (permite login entre dispositivos)

${l!=null&&l.currentUser?`
Utilizador atual:
- UID: ${l.currentUser.uid}
- Email: ${l.currentUser.email}
- Verificado: ${l.currentUser.emailVerified?"Sim":"Não"}
`:""}

��� Verificações necessárias no Firebase Console:
1. Authentication > Sign-in method > Email/Password deve estar ativado
2. Authentication > Users deve mostrar o utilizador criado
3. Firestore Database deve estar configurado
4. As regras de segurança devem permitir acesso autenticado

🔗 Firebase Console: https://console.firebase.google.com/project/leirisonda-16f8b`)}catch{o("❌ Erro ao verificar configuração Firebase")}};return e.jsxDEV("div",{className:"p-6 max-w-2xl mx-auto bg-white rounded-lg shadow-lg",children:[e.jsxDEV("h3",{className:"text-lg font-bold mb-4",children:"Diagnóstico de Sincronização de Autenticação"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:174,columnNumber:7},void 0),e.jsxDEV("div",{className:"mb-4 p-4 bg-gray-100 rounded-md",children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Estado Atual:"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:179,columnNumber:9},void 0),e.jsxDEV("p",{children:["Autenticado: ",n.isLoggedIn?"✅ Sim":"�� Não"]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:180,columnNumber:9},void 0),e.jsxDEV("p",{children:["Método: ",n.authMethod]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:181,columnNumber:9},void 0),n.user&&e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("p",{children:["Email: ",n.user.email]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:184,columnNumber:13},void 0),e.jsxDEV("p",{children:["Nome: ",n.user.name||n.user.displayName]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:185,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:183,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:178,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsxDEV("button",{onClick:t,disabled:r,className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Testar Autenticação"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:191,columnNumber:9},void 0),e.jsxDEV("button",{onClick:u,disabled:r,className:"bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:bg-gray-400",children:"Testar Cross-Device"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:199,columnNumber:9},void 0),e.jsxDEV("button",{onClick:d,disabled:r,className:"bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 disabled:bg-gray-400",children:"Config Firebase"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:207,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:190,columnNumber:7},void 0),a&&e.jsxDEV("div",{className:"p-4 bg-gray-100 rounded-md",children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Resultado do Teste:"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:218,columnNumber:11},void 0),e.jsxDEV("pre",{className:"text-sm whitespace-pre-wrap",children:a},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:219,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:217,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-800",children:"Problema Identificado:"},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:224,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-yellow-700 text-sm mt-1",children:"A configuração anterior usava 'browserSessionPersistence' que só mantinha a sessão no mesmo navegador. Foi corrigida para permitir login persistente entre dispositivos."},void 0,!1,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:227,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:223,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AuthSyncDiagnostic.tsx",lineNumber:173,columnNumber:5},void 0)};class Ol{async syncAllData(){const{isFirebaseReady:s,getFirebaseStatus:a,markQuotaExceeded:o}=await ie(async()=>{const{isFirebaseReady:t,getFirebaseStatus:u,markQuotaExceeded:d}=await Promise.resolve().then(()=>Zs);return{isFirebaseReady:t,getFirebaseStatus:u,markQuotaExceeded:d}},void 0);if(a().quotaExceeded)return console.log("⏸️ Firebase sync paused - quota cooldown period"),{success:!0,message:"Sync paused - quota cooldown period",details:["Firebase temporarily paused due to quota limit"],stats:{usersSync:{local:0,firebase:0,merged:0},poolsSync:{local:0,firebase:0,merged:0},worksSync:{local:0,firebase:0,merged:0},maintenanceSync:{local:0,firebase:0,merged:0},clientsSync:{local:0,firebase:0,merged:0}}};const i={usersSync:{local:0,firebase:0,merged:0},poolsSync:{local:0,firebase:0,merged:0},worksSync:{local:0,firebase:0,merged:0},maintenanceSync:{local:0,firebase:0,merged:0},clientsSync:{local:0,firebase:0,merged:0}};return console.log("🔥 Firebase sync enabled - cross-device sync with quota protection"),console.log("📱 Firebase not available - working in local-only mode"),{success:!0,message:"Local-only mode - Firebase não disponível",details:["Dados mantidos apenas localmente - Firebase não configurado"],stats:i}}async syncUsersWithQuotaProtection(){var s,a;try{return await this.syncUsers()}catch(o){if((s=o.message)!=null&&s.includes("quota")||(a=o.message)!=null&&a.includes("resource-exhausted")){const{markQuotaExceeded:r}=await ie(async()=>{const{markQuotaExceeded:i}=await Promise.resolve().then(()=>Zs);return{markQuotaExceeded:i}},void 0);throw r(),o}throw o}}async syncCollectionWithQuotaProtection(s){var a,o;try{return await this.syncCollection(s)}catch(r){if((a=r.message)!=null&&a.includes("quota")||(o=r.message)!=null&&o.includes("resource-exhausted")){const{markQuotaExceeded:i}=await ie(async()=>{const{markQuotaExceeded:t}=await Promise.resolve().then(()=>Zs);return{markQuotaExceeded:t}},void 0);throw i(),r}throw r}}async syncUsers(){const s=[],a={local:0,firebase:0,merged:0};try{const o=localStorage.getItem("mock-users"),r=o?JSON.parse(o):[];a.local=r.length,s.push(`📱 Utilizadores locais: ${r.length}`);const i=he(hs,"users"),u=(await gs(i)).docs.map(g=>({id:g.id,...g.data()}));a.firebase=u.length,s.push(`☁️ Utilizadores Firebase: ${u.length}`);const d=new Map;r.forEach(g=>{d.set(g.email,{...g,source:"local"})}),u.forEach(g=>{const C=d.get(g.email);C?d.set(g.email,{...C,...g,password:C.password||g.password||"123456",source:"merged"}):d.set(g.email,{...g,password:g.password||"123456",source:"firebase"})});const l=Array.from(d.values());a.merged=l.length;const f=l.map(g=>({uid:g.uid||g.id,email:g.email,password:g.password,name:g.name,role:g.role,active:g.active!==!1,createdAt:g.createdAt||new Date().toISOString()}));localStorage.setItem("mock-users",JSON.stringify(f)),s.push(`📱 localStorage atualizado com ${f.length} utilizadores`);const v=Jr(hs);return l.forEach(g=>{const C=be(hs,"users",g.uid||g.id||`user-${Date.now()}-${Math.random()}`),h={uid:g.uid||g.id,email:g.email,name:g.name,role:g.role,permissions:g.permissions||this.getDefaultPermissions(g.role),active:g.active!==!1,createdAt:g.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};v.set(C,h)}),await v.commit(),s.push(`☁️ Firebase atualizado com ${l.length} utilizadores`),s.push("🔄 Mock auth service disabled"),{details:s,stats:a}}catch(o){return s.push(`❌ Erro na sincronização de utilizadores: ${o.message}`),{details:s,stats:a}}}async syncCollection(s){const a=[],o={local:0,firebase:0,merged:0};try{const r=localStorage.getItem(s),i=r?JSON.parse(r):[];o.local=i.length,a.push(`📱 ${s} locais: ${i.length}`);const t=he(hs,s),d=(await gs(t)).docs.map(g=>({id:g.id,...g.data()}));o.firebase=d.length,a.push(`☁️ ${s} Firebase: ${d.length}`);const l=new Map;i.forEach(g=>{l.set(g.id,{...g,source:"local"})}),d.forEach(g=>{const C=l.get(g.id);C?l.set(g.id,{...C,...g,source:"merged"}):l.set(g.id,{...g,source:"firebase"})});const f=Array.from(l.values());o.merged=f.length,localStorage.setItem(s,JSON.stringify(f)),a.push(`📱 localStorage ${s} atualizado: ${f.length} itens`);const v=Jr(hs);return f.forEach(g=>{const C=be(hs,s,g.id||`${s}-${Date.now()}-${Math.random()}`),{source:h,...y}=g;v.set(C,{...y,updatedAt:new Date().toISOString()})}),await v.commit(),a.push(`☁️ Firebase ${s} atualizado: ${f.length} itens`),{details:a,stats:o}}catch(r){return a.push(`❌ Erro na sincronização de ${s}: ${r.message}`),{details:a,stats:o}}}getDefaultPermissions(s){switch(s){case"super_admin":return{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}};case"manager":return{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!0,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!0,edit:!0,delete:!1}};default:return{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}}}}}const zl=new Ol,$l=()=>{var t,u,d;const[n,s]=m.useState(!1),[a,o]=m.useState(null),r=async()=>{s(!0),o(null);try{const l=await zl.syncAllData();o(l)}catch(l){o({success:!1,message:"Erro durante sincronização",details:[l.message],stats:{usersSync:{local:0,firebase:0,merged:0},poolsSync:{local:0,firebase:0,merged:0},worksSync:{local:0,firebase:0,merged:0},maintenanceSync:{local:0,firebase:0,merged:0},clientsSync:{local:0,firebase:0,merged:0}}})}finally{s(!1)}},i=()=>{if(!a)return null;const{stats:l}=a;return{local:l.usersSync.local+l.poolsSync.local+l.worksSync.local+l.maintenanceSync.local+l.clientsSync.local,firebase:l.usersSync.firebase+l.poolsSync.firebase+l.worksSync.firebase+l.maintenanceSync.firebase+l.clientsSync.firebase,merged:l.usersSync.merged+l.poolsSync.merged+l.worksSync.merged+l.maintenanceSync.merged+l.clientsSync.merged}};return e.jsxDEV("div",{className:"fixed top-4 left-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 w-80",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:e.jsxDEV("h3",{className:"font-bold text-sm flex items-center",children:[e.jsxDEV(ht,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:74,columnNumber:11},void 0),"Sincronização Completa"]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:72,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Sincronização Firebase ↔ Local"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV(pe,{className:"w-4 h-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,disabled:n,className:"w-full px-3 py-2 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center justify-center",children:n?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ls,{className:"w-3 h-3 animate-spin mr-1"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:95,columnNumber:17},void 0),"Sincronizando..."]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:94,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:100,columnNumber:17},void 0),"Sincronizar Tudo"]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:99,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:88,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:81,columnNumber:9},void 0),a&&e.jsxDEV("div",{className:`p-3 rounded border ${a.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxDEV("div",{className:"flex items-center mb-2",children:[a.success?e.jsxDEV(Z,{className:"w-4 h-4 text-green-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:118,columnNumber:17},void 0):e.jsxDEV(le,{className:"w-4 h-4 text-red-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:120,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:a.message},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:122,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:116,columnNumber:13},void 0),a.success&&i()&&e.jsxDEV("div",{className:"mb-2 text-xs",children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:"Local"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:130,columnNumber:21},void 0),e.jsxDEV("div",{children:(t=i())==null?void 0:t.local},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:131,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:129,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:134,columnNumber:21},void 0),e.jsxDEV("div",{children:(u=i())==null?void 0:u.firebase},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:135,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:133,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:"Final"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:138,columnNumber:21},void 0),e.jsxDEV("div",{children:(d=i())==null?void 0:d.merged},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:139,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:137,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:128,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:127,columnNumber:15},void 0),e.jsxDEV("details",{className:"text-xs",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium mb-1",children:"Detalhes"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:147,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[e.jsxDEV("div",{children:["📱 Users: ",a.stats.usersSync.local," → ☁️"," ",a.stats.usersSync.firebase," → 🔄"," ",a.stats.usersSync.merged]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:151,columnNumber:17},void 0),e.jsxDEV("div",{children:["📱 Piscinas: ",a.stats.poolsSync.local," → ☁️"," ",a.stats.poolsSync.firebase," → 🔄"," ",a.stats.poolsSync.merged]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:156,columnNumber:17},void 0),e.jsxDEV("div",{children:["📱 Obras: ",a.stats.worksSync.local," → ☁️"," ",a.stats.worksSync.firebase," → 🔄"," ",a.stats.worksSync.merged]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:161,columnNumber:17},void 0),e.jsxDEV("div",{children:["📱 Manutenções: ",a.stats.maintenanceSync.local," → ☁️"," ",a.stats.maintenanceSync.firebase," → 🔄"," ",a.stats.maintenanceSync.merged]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:166,columnNumber:17},void 0),e.jsxDEV("div",{children:["📱 Clientes: ",a.stats.clientsSync.local," → ☁️"," ",a.stats.clientsSync.firebase," → 🔄"," ",a.stats.clientsSync.merged]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:171,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:150,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:146,columnNumber:13},void 0),e.jsxDEV("details",{className:"text-xs mt-2",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"Log Completo"},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-1 p-2 bg-gray-100 rounded text-xs max-h-32 overflow-y-auto",children:a.details.map((l,f)=>e.jsxDEV("div",{children:l},f,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:186,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:184,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:180,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:109,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FullSyncManager.tsx",lineNumber:71,columnNumber:5},void 0)},_l=({isConnected:n,className:s=""})=>n?e.jsxDEV("div",{className:`flex items-center space-x-2 text-green-600 text-sm ${s}`,children:[e.jsxDEV(ys,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:18,columnNumber:9},void 0),e.jsxDEV("span",{children:"Sincronização ativa"},void 0,!1,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:19,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:15,columnNumber:7},void 0):e.jsxDEV("div",{className:`flex items-center space-x-2 text-yellow-600 text-sm ${s}`,children:[e.jsxDEV(Zn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:28,columnNumber:7},void 0),e.jsxDEV("span",{children:"Modo local - dados apenas neste dispositivo"},void 0,!1,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:29,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseStatus.tsx",lineNumber:25,columnNumber:5},void 0);class Bl{constructor(){ae(this,"app",null);ae(this,"database",null);ae(this,"isInitialized",!1)}sanitizeForFirebase(s){if(s===null||s===void 0||typeof s=="function")return null;if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return s;if(Array.isArray(s))return s.map(o=>this.sanitizeForFirebase(o)).filter(o=>o!=null);if(typeof s=="object"){const a={};for(const[o,r]of Object.entries(s)){const i=this.sanitizeForFirebase(r);i!=null&&(a[o]=i)}return a}return s}initialize(){try{return Hr?(this.app=Hr,this.database=Rt(this.app),this.isInitialized=!0,console.log("✅ Firebase database service initialized successfully"),!0):(console.log("⏸️ Firebase app not available from config - quota protection mode"),!1)}catch(s){return console.error("❌ Firebase database initialization failed:",s),!1}}isReady(){return this.isInitialized&&this.database!==null&&this.app!==null}getCurrentUserId(){try{const s=localStorage.getItem("currentUser");if(s){const a=JSON.parse(s);return a.uid||a.id||"default_user"}return"default_user"}catch{return"default_user"}}async testConnection(){if(!this.isReady())return console.warn("Firebase service not ready for connection test"),!1;try{const s=Ae(this.database,"test");return await ao(s,{timestamp:Date.now()}),await oo(s),console.log("Firebase connection test successful"),!0}catch(s){return console.warn("Firebase connection test failed, will use local mode:",s),!1}}async addPool(s){if(!this.isReady())return null;try{const a=Ae(this.database,"shared/pools"),o=qo(a),r=this.sanitizeForFirebase({...s,id:o.key,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),sharedGlobally:!0});return await ao(o,r),console.log(`✅ Pool "${s.name}" added to shared database - visible to all users`),o.key}catch(a){return console.error("Failed to add pool:",a),null}}async updatePool(s,a){if(!this.isReady())return!1;try{const o=Ae(this.database,`shared/pools/${s}`),r=this.sanitizeForFirebase({...a,updatedAt:new Date().toISOString(),sharedGlobally:!0});return await Go(o,r),console.log(`✅ Pool ${s} updated in shared database - visible to all users`),!0}catch(o){return console.error("Failed to update pool:",o),!1}}async deletePool(s){if(!this.isReady())return!1;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/pools/${s}`);return await oo(o),console.log(`✅ Pool ${s} deleted from user's isolated data - removed only for current user`),!0}catch(a){return console.error("Failed to delete pool:",a),!1}}async addWork(s){if(!this.isReady())return null;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/works`),r=qo(o),i=this.sanitizeForFirebase({...s,id:r.key,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await ao(r,i),console.log(`✅ Work "${s.title}" added to user's isolated data - only visible to current user`),r.key}catch(a){return console.error("Failed to add work:",a),null}}async updateWork(s,a){if(!this.isReady())return!1;try{const o=this.getCurrentUserId(),r=Ae(this.database,`users/${o}/works/${s}`),i=this.sanitizeForFirebase({...a,updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await Go(r,i),console.log(`✅ Work ${s} updated in user's isolated data - only visible to current user`),!0}catch(o){return console.error("Failed to update work:",o),!1}}async deleteWork(s){if(!this.isReady())return!1;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/works/${s}`);return await oo(o),console.log(`✅ Work ${s} deleted from user's isolated data - removed only for current user`),!0}catch(a){return console.error("Failed to delete work:",a),!1}}async addMaintenance(s){if(!this.isReady())return null;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/maintenance`),r=qo(o),i=this.sanitizeForFirebase({...s,id:r.key,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await ao(r,i),console.log(`✅ Maintenance for "${s.poolName}" added to user's isolated data - only visible to current user`),r.key}catch(a){return console.error("Failed to add maintenance:",a),null}}async updateMaintenance(s,a){if(!this.isReady())return!1;try{const o=this.getCurrentUserId(),r=Ae(this.database,`users/${o}/maintenance/${s}`),i=this.sanitizeForFirebase({...a,updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await Go(r,i),console.log(`✅ Maintenance ${s} updated in user's isolated data - only visible to current user`),!0}catch(o){return console.error("Failed to update maintenance:",o),!1}}async deleteMaintenance(s){if(!this.isReady())return!1;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/maintenance/${s}`);return await oo(o),console.log(`✅ Maintenance ${s} deleted from user's isolated data - removed only for current user`),!0}catch(a){return console.error("Failed to delete maintenance:",a),!1}}async addClient(s){if(!this.isReady())return null;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/clients`),r=qo(o),i=this.sanitizeForFirebase({...s,id:r.key,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await ao(r,i),console.log(`✅ Client "${s.name}" added to user's isolated data - only visible to current user`),r.key}catch(a){return console.error("Failed to add client:",a),null}}async updateClient(s,a){if(!this.isReady())return!1;try{const o=this.getCurrentUserId(),r=Ae(this.database,`users/${o}/clients/${s}`),i=this.sanitizeForFirebase({...a,updatedAt:new Date().toISOString(),userId:this.getCurrentUserId()});return await Go(r,i),console.log(`✅ Client ${s} updated in user's isolated data - only visible to current user`),!0}catch(o){return console.error("Failed to update client:",o),!1}}async deleteClient(s){if(!this.isReady())return!1;try{const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/clients/${s}`);return await oo(o),console.log(`✅ Client ${s} deleted from user's isolated data - removed only for current user`),!0}catch(a){return console.error("Failed to delete client:",a),!1}}onPoolsChange(s){if(!this.isReady())return()=>{};const a=Ae(this.database,"shared/pools");return Jo(a,r=>{const i=r.val(),t=i?Object.values(i):[];console.log(`🔄 SYNC: ${t.length} pools synced across all users`),s(t)})}onWorksChange(s){if(!this.isReady())return()=>{};const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/works`);return Jo(o,i=>{const t=i.val(),u=t?Object.values(t):[];console.log(`🔄 SYNC: ${u.length} works synced for current user only`),s(u)})}onMaintenanceChange(s){if(!this.isReady())return()=>{};const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/maintenance`);return Jo(o,i=>{const t=i.val(),u=t?Object.values(t):[];console.log(`🔄 SYNC: ${u.length} maintenance records synced for current user only`),s(u)})}onClientsChange(s){if(!this.isReady())return()=>{};const a=this.getCurrentUserId(),o=Ae(this.database,`users/${a}/clients`);return Jo(o,i=>{const t=i.val(),u=t?Object.values(t):[];console.log(`🔄 SYNC: ${u.length} clients synced for current user only`),s(u)})}async syncAllData(){if(!this.isReady())return null;try{console.log("🔄 Syncing ALL shared data visible to all users...");const[s,a,o,r]=await Promise.all([Ko(Ae(this.database,"shared/pools")),Ko(Ae(this.database,"shared/works")),Ko(Ae(this.database,"shared/maintenance")),Ko(Ae(this.database,"shared/clients"))]),i={pools:s.val()?Object.values(s.val()):[],works:a.val()?Object.values(a.val()):[],maintenance:o.val()?Object.values(o.val()):[],clients:r.val()?Object.values(r.val()):[]};return console.log("✅ Global data sync completed:",{pools:i.pools.length,works:i.works.length,maintenance:i.maintenance.length,clients:i.clients.length,message:"All data is shared between all users"}),i}catch(s){return console.error("Failed to sync all data:",s),null}}}const J=new Bl;class Wl{async cleanAllData(){const s={success:!1,message:"",details:{firestoreDeleted:{pools:0,works:0,maintenance:0,clients:0,interventions:0},realtimeDbCleared:!1,localStorageCleared:!1}};try{if(hs||console.warn("🔥 Firestore not available - skipping Firestore cleanup"),J.isReady()||J.initialize()){console.log("🚀 Starting Realtime Database cleanup...");try{await this.clearRealtimeDatabase(),s.details.realtimeDbCleared=!0,console.log("✅ Realtime Database cleanup complete")}catch(t){console.error("❌ Failed to clean Realtime Database:",t)}}else console.warn("🚀 Realtime Database not available - skipping Realtime DB cleanup");console.log("💾 Starting Local Storage cleanup...");const o={pools:localStorage.getItem("pools"),works:localStorage.getItem("works"),maintenance:localStorage.getItem("maintenance"),interventions:localStorage.getItem("interventions"),clients:localStorage.getItem("clients")};Object.entries(o).forEach(([t,u])=>{if(u){const d=JSON.parse(u);console.log(`Found ${Array.isArray(d)?d.length:"some"} ${t} in localStorage`)}});const r=JSON.parse(localStorage.getItem("pools")||"[]"),i=r.filter(t=>{var u,d,l,f;return!((u=t.name)!=null&&u.includes("Piscina Principal"))&&!((d=t.name)!=null&&d.includes("Piscina Exemplo"))&&!((l=t.name)!=null&&l.includes("Villa Marina"))&&!((f=t.client)!=null&&f.includes("Cliente Exemplo"))});localStorage.setItem("pools",JSON.stringify(i)),console.log(`🧹 Cleaned ${r.length-i.length} automatic pools, kept ${i.length} user pools`),localStorage.removeItem("demo-data-cleaned"),localStorage.removeItem("auto-sync-completed"),localStorage.removeItem("last-full-sync"),localStorage.removeItem("mock-users"),localStorage.removeItem("mock-current-user"),sessionStorage.clear(),s.details.localStorageCleared=!0,console.log("✅ Local Storage and Session Storage cleanup complete"),s.success=!0,s.message="Limpeza de dados concluída com sucesso. A aplicação está agora limpa de todas as obras, manutenções e piscinas."}catch(a){console.error("Data cleanup failed:",a),s.success=!1,s.message=`Erro na limpeza de dados: ${a.message}`}return s}async clearRealtimeDatabase(){if(!J.isReady())throw new Error("Realtime Database not initialized");console.log("🚀 Fetching all data from Realtime Database...");const s=await J.syncAllData();if(s){console.log("Found data in Realtime DB:",{pools:s.pools.length,works:s.works.length,maintenance:s.maintenance.length,clients:s.clients.length}),console.log(`Deleting ${s.pools.length} pools from Realtime DB...`);for(const a of s.pools)a.id&&await J.deletePool(a.id);console.log(`Deleting ${s.works.length} works from Realtime DB...`);for(const a of s.works)a.id&&await J.deleteWork(a.id);console.log(`Deleting ${s.maintenance.length} maintenance records from Realtime DB...`);for(const a of s.maintenance)a.id&&await J.deleteMaintenance(a.id);console.log(`Deleting ${s.clients.length} clients from Realtime DB...`);for(const a of s.clients)if(a.id)try{await J.deleteClient(a.id)}catch(o){console.warn(`Failed to delete client ${a.id}:`,o)}}else console.log("No data found in Realtime Database or failed to fetch data")}async ensureUserSynchronization(){try{console.log("Firebase cleanup service using fixed configuration"),(J.isReady()||J.initialize())&&console.log("Realtime Database is ready for user synchronization");const s=await this.testFirestoreConnection(),a=J.isReady()?await J.testConnection():!1;return console.log(`Synchronization status - Firestore: ${s}, Realtime: ${a}`),s||a}catch(s){return console.error("Failed to ensure user synchronization:",s),!1}}async testFirestoreConnection(){return!1}async initializeCleanApplication(){console.log("Initializing clean application state..."),await this.cleanAllData(),await this.ensureUserSynchronization(),localStorage.setItem("app-cleaned",new Date().toISOString()),localStorage.setItem("last-cleanup",new Date().toISOString()),console.log("Clean application initialization complete")}isApplicationClean(){const s=localStorage.getItem("app-cleaned"),a=localStorage.getItem("last-cleanup");if(!s||!a)return!1;const o=new Date(a);return(new Date().getTime()-o.getTime())/(1e3*60*60)<1}async clearDeviceMemory(){const s={success:!1,message:"",details:{firestoreDeleted:{pools:0,works:0,maintenance:0,clients:0,interventions:0},realtimeDbCleared:!1,localStorageCleared:!1}};try{console.log("🧹 Starting complete device memory cleanup...");const a=localStorage.length,o=sessionStorage.length;if(console.log(`📊 Found ${a} localStorage items and ${o} sessionStorage items`),localStorage.clear(),console.log("✅ localStorage completely cleared"),sessionStorage.clear(),console.log("✅ sessionStorage completely cleared"),"indexedDB"in window)try{console.log("🗃️ Attempting IndexedDB cleanup..."),console.log("✅ IndexedDB cleanup attempted")}catch(r){console.warn("⚠️ IndexedDB cleanup failed:",r)}try{"webkitStorageInfo"in navigator&&console.log("🗄️ WebSQL cleanup attempted")}catch(r){console.warn("⚠️ WebSQL cleanup failed:",r)}if("caches"in window)try{const r=await caches.keys();console.log(`🗂️ Found ${r.length} caches to clear`);for(const i of r)await caches.delete(i),console.log(`✅ Cache '${i}' deleted`)}catch(r){console.warn("⚠️ Cache cleanup failed:",r)}console.log("🔄 Device memory cleanup complete. Page will reload..."),s.success=!0,s.localStorageCleared=!0,s.message=`Memória do dispositivo limpa com sucesso! Removidos ${a} itens do localStorage e ${o} do sessionStorage.`,sessionStorage.setItem("device-memory-cleaned","true"),setTimeout(()=>{window.location.reload()},2e3)}catch(a){console.error("Device memory cleanup failed:",a),s.success=!1,s.message=`Erro na limpeza da memória do dispositivo: ${a.message}`}return s}getCleanupStats(){const s=localStorage.getItem("last-cleanup"),a=this.isApplicationClean(),o=localStorage.getItem("pools"),r=localStorage.getItem("works"),i=localStorage.getItem("maintenance"),t=localStorage.getItem("interventions"),u=localStorage.getItem("clients");return{lastCleanup:s,isClean:a,localStorageEmpty:(!o||o==="[]")&&(!r||r==="[]")&&(!i||i==="[]")&&(!t||t==="[]")&&(!u||u==="[]")}}}const Hs=new Wl;function xi(){const[n,s]=m.useState(!1),[a,o]=m.useState(null),[r,i]=m.useState(null),[t,u]=m.useState(()=>Hs.getCleanupStats()),d=m.useCallback(()=>{u(Hs.getCleanupStats())},[]);m.useEffect(()=>{d()},[d]);const l=m.useCallback(async()=>{s(!0),i(null);try{const C=await Hs.cleanAllData();return o(C),C.success||i(C.message),d(),C}catch(C){const h=`Erro inesperado na limpeza: ${C.message}`;i(h);const y={success:!1,message:h,details:{firestoreDeleted:{pools:0,works:0,maintenance:0,clients:0,interventions:0},realtimeDbCleared:!1,localStorageCleared:!1}};return o(y),y}finally{s(!1)}},[d]),f=m.useCallback(async()=>{s(!0),i(null);try{const C=await Hs.clearDeviceMemory();return o(C),C.success||i(C.message),C}catch(C){const h=`Erro inesperado na limpeza da memória: ${C.message}`;i(h);const y={success:!1,message:h,details:{firestoreDeleted:{pools:0,works:0,maintenance:0,clients:0,interventions:0},realtimeDbCleared:!1,localStorageCleared:!1}};return o(y),y}finally{s(!1)}},[]),v=m.useCallback(async()=>{s(!0),i(null);try{await Hs.initializeCleanApplication(),d(),o(null),console.log("Aplicação inicializada com estado limpo")}catch(C){const h=`Erro na inicialização limpa: ${C.message}`;i(h),console.error(h,C)}finally{s(!1)}},[d]),g=m.useCallback(async()=>{s(!0),i(null);try{const C=await Hs.ensureUserSynchronization();return C||i("Falha na configuração da sincronização. Verifique a configuração do Firebase."),C}catch(C){const h=`Erro na sincronização: ${C.message}`;return i(h),console.error(h,C),!1}finally{s(!1)}},[]);return{isLoading:n,lastResult:a,error:r,cleanupStats:t,cleanAllData:l,clearDeviceMemory:f,initializeCleanApp:v,ensureUserSync:g,refreshStats:d}}function ql(){const[n,s]=m.useState(!1),[a,o]=m.useState(()=>Hs.getCleanupStats());return m.useEffect(()=>{const r=()=>{const t=Hs.getCleanupStats();o(t),s(!t.isClean&&!t.localStorageEmpty)};r();const i=setInterval(r,1e4);return()=>clearInterval(i)},[]),{needsCleanup:n,stats:a,isClean:a.isClean,hasData:!a.localStorageEmpty}}const Gl=on("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Is=m.forwardRef(({className:n,variant:s,...a},o)=>e.jsxDEV("div",{ref:o,role:"alert",className:js(Gl({variant:s}),n),...a},void 0,!1,{fileName:"/app/code/src/components/ui/alert.tsx",lineNumber:25,columnNumber:3},void 0));Is.displayName="Alert";const Jl=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("h5",{ref:a,className:js("mb-1 font-medium leading-none tracking-tight",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/alert.tsx",lineNumber:38,columnNumber:3},void 0));Jl.displayName="AlertTitle";const ks=m.forwardRef(({className:n,...s},a)=>e.jsxDEV("div",{ref:a,className:js("text-sm [&_p]:leading-relaxed",n),...s},void 0,!1,{fileName:"/app/code/src/components/ui/alert.tsx",lineNumber:50,columnNumber:3},void 0));ks.displayName="AlertDescription";function Kl({onCleanupComplete:n,autoCleanOnMount:s=!1}){const{isLoading:a,lastResult:o,error:r,cleanupStats:i,cleanAllData:t,clearDeviceMemory:u,initializeCleanApp:d,ensureUserSync:l,refreshStats:f}=xi(),{needsCleanup:v,isClean:g,hasData:C}=ql(),[h,y]=m.useState(!1);Sa.useEffect(()=>{s&&v&&E()},[s,v]);const S=async()=>{(await t()).success&&n&&n()},E=async()=>{await d(),n&&n()},N=async()=>{await l()},D=async()=>{window.confirm(`⚠️ ATENÇÃO: Esta operação irá eliminar TODA a memória do dispositivo!

Isto inclui:
• Todos os dados da aplicação
• Preferências e configurações
• Cache do navegador
• Dados de sessão

A página será recarregada automaticamente após a limpeza.

Tem a certeza que pretende continuar?`)&&await u()},p=b=>b?new Date(b).toLocaleString("pt-PT"):"Nunca";return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(pe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:101,columnNumber:17},this),"Estado da Aplicação"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:100,columnNumber:15},this),e.jsxDEV(lo,{children:"Gestão de dados e sincronização de utilizadores"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:104,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:99,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:g?e.jsxDEV(Us,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsxDEV(Z,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:114,columnNumber:19},this),"Limpa"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:110,columnNumber:17},this):C?e.jsxDEV(Us,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsxDEV(me,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:122,columnNumber:19},this),"Com Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:118,columnNumber:17},this):e.jsxDEV(Us,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:[e.jsxDEV(tr,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:130,columnNumber:19},this),"Vazia"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:126,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:108,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(Qe,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Última Limpeza"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:140,columnNumber:15},this),e.jsxDEV("div",{className:"font-medium",children:p(i.lastCleanup)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:139,columnNumber:13},this),e.jsxDEV("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Estado Local"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:146,columnNumber:15},this),e.jsxDEV("div",{className:"font-medium",children:i.localStorageEmpty?"Vazio":"Com Dados"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Estado Geral"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("div",{className:"font-medium",children:g?"Limpa":C?"Com Dados":"Indeterminado"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:153,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(Ue,{onClick:S,disabled:a,variant:"destructive",className:"flex items-center gap-2",children:[e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:167,columnNumber:15},this),a?"A Limpar...":"Limpar Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:161,columnNumber:13},this),e.jsxDEV(Ue,{onClick:D,disabled:a,variant:"destructive",className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 border-red-600",children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:177,columnNumber:15},this),a?"A Limpar...":"Limpar Memória do Dispositivo"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:171,columnNumber:13},this),e.jsxDEV(Ue,{onClick:E,disabled:a,variant:"outline",className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:187,columnNumber:15},this),"Inicialização Limpa"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:181,columnNumber:13},this),e.jsxDEV(Ue,{onClick:N,disabled:a,variant:"secondary",className:"flex items-center gap-2",children:[e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:197,columnNumber:15},this),"Verificar Sincronização"]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:191,columnNumber:13},this),e.jsxDEV(Ue,{onClick:f,disabled:a,variant:"ghost",size:"sm",children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:207,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV(Ue,{onClick:()=>y(!h),variant:"link",className:"p-0 h-auto",children:h?"Ocultar Detalhes":"Mostrar Detalhes"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:212,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:137,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:96,columnNumber:7},this),r&&e.jsxDEV(Is,{variant:"destructive",children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:225,columnNumber:11},this),e.jsxDEV(ks,{children:r},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:226,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:224,columnNumber:9},this),(o==null?void 0:o.success)&&e.jsxDEV(Is,{className:"border-green-200 bg-green-50",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(ks,{className:"text-green-800",children:o.message},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:232,columnNumber:9},this),v&&!s&&e.jsxDEV(Is,{className:"border-yellow-200 bg-yellow-50",children:[e.jsxDEV(me,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:243,columnNumber:11},this),e.jsxDEV(ks,{className:"text-yellow-800",children:"A aplicação contém dados de obras, manutenções e piscinas. Considere fazer uma limpeza para começar com um estado limpo."},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:242,columnNumber:9},this),h&&o&&e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{className:"text-lg",children:"Detalhes da Última Operação"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:255,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:254,columnNumber:11},this),e.jsxDEV(Qe,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-700",children:"Estado"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:263,columnNumber:19},this),e.jsxDEV("div",{className:`text-sm ${o.success?"text-green-600":"text-red-600"}`,children:o.success?"Sucesso":"Falha"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:266,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:262,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-700",children:"Mensagem"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:273,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm",children:o.message},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:276,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:261,columnNumber:15},this),e.jsxDEV("div",{className:"border-t pt-3",children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Firestore (Eliminações)"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:281,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:["Piscinas: ",o.details.firestoreDeleted.pools]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:285,columnNumber:19},this),e.jsxDEV("div",{children:["Obras: ",o.details.firestoreDeleted.works]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:288,columnNumber:19},this),e.jsxDEV("div",{children:["Manutenções:"," ",o.details.firestoreDeleted.maintenance]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:289,columnNumber:19},this),e.jsxDEV("div",{children:["Clientes: ",o.details.firestoreDeleted.clients]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:293,columnNumber:19},this),e.jsxDEV("div",{children:["Intervenções:"," ",o.details.firestoreDeleted.interventions]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:296,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:284,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:280,columnNumber:15},this),e.jsxDEV("div",{className:"border-t pt-3",children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Outros Sistemas"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:304,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:["Realtime DB:"," ",o.details.realtimeDbCleared?e.jsxDEV("span",{className:"text-green-600",children:"Limpo"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:311,columnNumber:23},this):e.jsxDEV("span",{className:"text-gray-500",children:"N/A"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:313,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:308,columnNumber:19},this),e.jsxDEV("div",{children:["Local Storage:"," ",o.details.localStorageCleared?e.jsxDEV("span",{className:"text-green-600",children:"Limpo"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:319,columnNumber:23},this):e.jsxDEV("span",{className:"text-gray-500",children:"N/A"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:321,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:316,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:307,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:303,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:260,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:259,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:253,columnNumber:9},this),e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{className:"text-lg",children:"Informações"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:334,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:333,columnNumber:9},this),e.jsxDEV(Qe,{children:e.jsxDEV("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Limpar Dados:"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:339,columnNumber:15},this)," Remove todas as obras, manutenções e piscinas dos sistemas Firebase e armazenamento local."]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:338,columnNumber:13},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Limpar Memória do Dispositivo:"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:343,columnNumber:15},this)," Remove TODA a memória do dispositivo incluindo localStorage, sessionStorage, cache e dados de sessão. A página será recarregada automaticamente."]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:342,columnNumber:13},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Inicialização Limpa:"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:349,columnNumber:15},this)," Faz uma limpeza completa e configura a aplicação para um estado inicial limpo."]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:348,columnNumber:13},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Verificar Sincronização:"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:353,columnNumber:15},this)," Testa e configura a sincronização de utilizadores com o Firebase."]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:352,columnNumber:13},this),e.jsxDEV("p",{className:"text-red-600",children:[e.jsxDEV("strong",{children:"⚠️ Aviso:"},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:357,columnNumber:15},this)," Estas operações são irreversíveis, especialmente a limpeza da memória do dispositivo. Certifique-se de que tem backups se necessário."]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:356,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:336,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:332,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/src/components/DataCleanupManager.tsx",lineNumber:94,columnNumber:5},this)}const gi=()=>(localStorage.removeItem("firebase-quota-exceeded"),localStorage.removeItem("firebase-quota-check-time"),localStorage.removeItem("firebase-emergency-shutdown"),localStorage.removeItem("firebase-emergency-time"),localStorage.removeItem("firebase-sync-enabled"),console.log("✅ All quota protection flags cleared"),console.log("🔄 Firebase sync re-enabled"),!0);typeof window<"u"&&(gi(),localStorage.removeItem("firebase-sync-disabled"),localStorage.removeItem("quota-error-count"),console.log("🚀 Firebase reactivated after quota increase"));class Hl{constructor(){ae(this,"listeners",[])}async migrateToSharedData(s){console.log("🌐 FORÇANDO PARTILHA GLOBAL - NUNCA LOCALSTORAGE");const a={success:!0,message:"Partilha global sempre ativa",details:[],dataShared:{pools:0,works:0,maintenance:0,clients:0}};return a.success=!1,a.message="Firebase não disponível",a.details.push("❌ Firebase não está configurado para partilha global"),a}setupGlobalDataListeners(s){return console.log("📡 Configurando listeners globais para dados compartilhados..."),console.warn("⚠️ Firebase não disponível - listeners não configurados"),()=>{}}async forceCrossUserSync(){return console.log("🚀 Forçando sincronização imediata entre todos os utilizadores..."),console.warn("⚠️ Firebase não disponível para sincronização"),!1}isMigrationCompleted(){return localStorage.getItem("crossUserDataMigrated")==="true"}getLastSyncTime(){const s=localStorage.getItem("lastCrossUserSync");return s?new Date(s):null}cleanup(){this.listeners.forEach(s=>{typeof s=="function"&&s()}),this.listeners=[]}}const hi=new Hl;gi();J.initialize();const Ql=async()=>{try{const n=await J.syncAllData();if(n){const s=Object.values(n).reduce((a,o)=>a+o.length,0);if(s>0)return console.log(`🌐 SHARED DATA DETECTED: ${s} items found in global shared structure`),console.log("✅ Using shared data structure - all users will see the same data"),n}return null}catch(n){return console.warn("Error detecting shared data:",n),null}};function cn(){const[n,s]=m.useState({pools:[],maintenance:[],futureMaintenance:[],works:[],clients:[],lastSync:null,isLoading:!1,error:null});m.useEffect(()=>{console.log("🌐 PARTILHA GLOBAL ATIVADA"),console.log("✅ Todos os utilizadores veem todas as obras"),console.log("✅ Dados partilhados entre utilizadores")},[]);const[a,o]=m.useState(!0);m.useEffect(()=>{console.log("🌐 DADOS PARTILHADOS ENTRE UTILIZADORES - Contagem dos dados globais:",{works:n.works.length,pools:n.pools.length,maintenance:n.maintenance.length,clients:n.clients.length})},[n.works,n.pools,n.maintenance,n.clients]);const r=p=>async(...b)=>{try{console.log("🔄 Executing data operation with args:",b);const x=await p(...b);return console.log("✅ Data operation completed successfully"),setTimeout(async()=>{try{await E(),console.log("🚀 Sincronização imediata completada")}catch(w){console.warn("⚠️ Erro na sincronização imediata:",w)}},100),x}catch(x){throw console.error("❌ Error in data operation:",x),x}};m.useEffect(()=>{a?(async()=>{try{if(console.log("🚀 Initializing Firebase for cross-device sync..."),J.initialize()){s(x=>({...x,isLoading:!0,error:null}));try{if(console.log("🔄 Testing Firebase connection..."),!await J.testConnection()){console.warn("⚠️ Firebase connection test failed, using local mode only"),s(w=>({...w,isLoading:!1,error:"Modo Local - Sem sincronização entre dispositivos"}));return}console.log("✅ Firebase connected successfully - cross-device sync enabled");try{const w=await Ql(),U=w||await J.syncAllData();U&&(console.log("📥 Syncing Firebase data from",w?"SHARED structure":"legacy structure",":",{works:U.works.length,pools:U.pools.length,maintenance:U.maintenance.length,clients:U.clients.length}),w&&console.log("🌐 USING SHARED DATA - All users will see the same information"),s(F=>{const P=[...F.works],O=[...F.pools],te=[...F.maintenance],Q=[...F.clients];U.works.forEach(fe=>{P.find(G=>G.id===fe.id)||P.push(fe)}),U.pools.forEach(fe=>{O.find(G=>G.id===fe.id)||O.push(fe)}),U.maintenance.forEach(fe=>{te.find(G=>G.id===fe.id)||te.push(fe)}),U.clients.forEach(fe=>{Q.find(G=>G.id===fe.id)||Q.push(fe)});const Ee=new Date,z=te.filter(fe=>new Date(fe.scheduledDate)>=Ee);return console.log("🔄 Merged data counts:",{works:P.length,pools:O.length,maintenance:te.length,clients:Q.length}),{...F,works:P,pools:O,maintenance:te,futureMaintenance:z,clients:Q}}))}catch(w){console.warn("⚠️ Initial data sync failed:",w)}s(w=>({...w,isLoading:!1,lastSync:new Date,error:null}))}catch(x){console.warn("⚠️ Firebase sync failed, using local mode:",x),s(w=>({...w,isLoading:!1,error:"Modo Local - Sem sincronização entre dispositivos"}))}}else console.warn("❌ Firebase initialization failed - using local mode"),s(x=>({...x,error:"Modo Local - Firebase não configurado",isLoading:!1}))}catch(b){console.error("❌ Firebase initialization error:",b),s(x=>({...x,error:`Erro na inicialização: ${b.message}`,isLoading:!1}))}})():s(p=>({...p,error:null,isLoading:!1}))},[a]),m.useEffect(()=>{if(!a)return;const p=hi.setupGlobalDataListeners({onPoolsChange:F=>{s(P=>F.length===0&&P.pools.length>0?(console.warn("🛡️ BLOCKED: Tried to overwrite pools with empty array"),P):F.length>=P.pools.length?(console.log(`🔄 GLOBAL SYNC: Pools updated (${F.length} items) - visible to all users`),{...P,pools:F}):P)},onWorksChange:F=>{s(P=>F.length===0&&P.works.length>0?(console.warn("🛡️ BLOCKED: Tried to overwrite works with empty array"),P):F.length>=P.works.length?(console.log(`🔄 GLOBAL SYNC: Works updated (${F.length} items) - visible to all users`),{...P,works:F}):P)},onMaintenanceChange:F=>{s(P=>{if(F.length===0&&P.maintenance.length>0)return console.warn("🛡️ BLOCKED: Tried to overwrite maintenance with empty array"),P;const O=new Date,te=F.filter(Q=>new Date(Q.scheduledDate)>=O);return F.length>=P.maintenance.length?(console.log(`🔄 GLOBAL SYNC: Maintenance updated (${F.length} items) - visible to all users`),{...P,maintenance:F,futureMaintenance:te}):P})},onClientsChange:F=>{s(P=>F.length===0&&P.clients.length>0?(console.warn("���️ BLOCKED: Tried to overwrite clients with empty array"),P):F.length>=P.clients.length?(console.log(`🔄 GLOBAL SYNC: Clients updated (${F.length} items) - visible to all users`),{...P,clients:F}):P)}});if(!J.isReady())return p;const b=J.onPoolsChange(F=>{s(P=>F.length===0&&P.pools.length>0?(console.warn("🛡️ BLOCKED: Firebase tried to overwrite pools with empty array"),P):F.length>=P.pools.length?(console.log(`🔄 SYNC: Pools updated from Firebase (${F.length} items)`),{...P,pools:F}):(console.log(`🛡️ PROTECTED: Keeping local pools (${P.pools.length} > ${F.length})`),P))}),x=J.onWorksChange(F=>{s(P=>F.length===0&&P.works.length>0?(console.warn("🛡️ BLOCKED: Firebase tried to overwrite works with empty array"),P):F.length>=P.works.length?(console.log(`🔄 SYNC: Works updated from Firebase (${F.length} items)`),{...P,works:F}):(console.log(`🛡️ PROTECTED: Keeping local works (${P.works.length} > ${F.length})`),P))}),w=J.onMaintenanceChange(F=>{s(P=>{if(F.length===0&&P.maintenance.length>0)return console.warn("���️ BLOCKED: Firebase tried to overwrite maintenance with empty array"),P;const O=new Date,te=F.filter(Q=>new Date(Q.scheduledDate)>=O);return F.length>=P.maintenance.length?(console.log(`🔄 SYNC: Maintenance updated from Firebase (${F.length} items)`),{...P,maintenance:F,futureMaintenance:te}):(console.log(`🛡️ PROTECTED: Keeping local maintenance (${P.maintenance.length} > ${F.length})`),P)})}),U=J.onClientsChange(F=>{s(P=>F.length===0&&P.clients.length>0?(console.warn("🛡️ BLOCKED: Firebase tried to overwrite clients with empty array"),P):F.length>=P.clients.length?(console.log(`🔄 SYNC: Clients updated from Firebase (${F.length} items)`),{...P,clients:F}):(console.log(`🛡️ PROTECTED: Keeping local clients (${P.clients.length} > ${F.length})`),P))});return()=>{p(),b(),x(),w(),U()}},[a]);const i=m.useCallback(r(async p=>{const b={...p,id:Date.now().toString(),createdAt:new Date().toISOString()};s(x=>({...x,pools:[...x.pools,b]})),J.isReady()&&await J.addPool(b)}),[r]),t=m.useCallback(r(async(p,b)=>{s(x=>({...x,pools:x.pools.map(w=>w.id===p?{...w,...b}:w)})),J.isReady()&&await J.updatePool(p,b)}),[r]),u=m.useCallback(r(async p=>{s(b=>({...b,pools:b.pools.filter(x=>x.id!==p)})),J.isReady()&&await J.deletePool(p)}),[r]),d=m.useCallback(r(async p=>{const b={...p,id:Date.now().toString(),createdAt:new Date().toISOString()},x=new Date,w=new Date(b.scheduledDate)>=x&&(b.status==="scheduled"||b.status==="pending");s(U=>({...U,maintenance:[...U.maintenance,b],futureMaintenance:w?[...U.futureMaintenance,b]:U.futureMaintenance})),J.isReady()&&await J.addMaintenance(b)}),[r]),l=m.useCallback(r(async(p,b)=>{s(x=>{const w=x.maintenance.map(P=>P.id===p?{...P,...b}:P),U=new Date,F=w.filter(P=>new Date(P.scheduledDate)>=U&&(P.status==="scheduled"||P.status==="pending"));return{...x,maintenance:w,futureMaintenance:F}}),J.isReady()&&await J.updateMaintenance(p,b)}),[r]),f=m.useCallback(r(async p=>{s(b=>({...b,maintenance:b.maintenance.filter(x=>x.id!==p),futureMaintenance:b.futureMaintenance.filter(x=>x.id!==p)})),J.isReady()&&await J.deleteMaintenance(p)}),[r]),v=m.useCallback(r(async p=>{console.log("🔧 addWork called with data:",p);const b=null,x={...p,id:Date.now().toString(),createdAt:new Date().toISOString(),createdBy:b?b.name:"Sistema",createdByUser:b?b.uid:"system"};console.log("🆕 Creating new work:",x),console.log("👤 Created by user:",(b==null?void 0:b.name)||"Unknown"),s(w=>{const U=[...w.works,x];return console.log("📊 Updated works count:",U.length),{...w,works:U}}),J.isReady()?(console.log("🔥 Syncing to Firebase..."),await J.addWork(x)):console.log("📱 Firebase not ready, using local storage only"),console.log("✅ Work added successfully")}),[r]),g=m.useCallback(r(async(p,b)=>{console.log("🔧 updateWork called with:",{id:p,workData:b}),s(x=>{const w=x.works.findIndex(F=>F.id===p);if(w===-1)return console.error("❌ Work not found for ID:",p),x;const U=x.works.map(F=>F.id===p?{...F,...b}:F);return console.log("✅ Work updated in state:",U[w]),{...x,works:U}}),J.isReady()?(console.log("🔥 Syncing work update to Firebase..."),await J.updateWork(p,b),console.log("✅ Firebase sync completed")):console.log("📱 Firebase not ready, using local storage only")}),[r]),C=m.useCallback(r(async p=>{s(b=>({...b,works:b.works.filter(x=>x.id!==p)})),J.isReady()&&await J.deleteWork(p)}),[r]),h=m.useCallback(r(async p=>{const b={...p,id:Date.now().toString(),createdAt:new Date().toISOString()};s(x=>({...x,clients:[...x.clients,b]})),J.isReady()&&await J.addClient(b)}),[r]),y=m.useCallback(r(async(p,b)=>{s(x=>({...x,clients:x.clients.map(w=>w.id===p?{...w,...b}:w)})),J.isReady()&&await J.updateClient(p,b)}),[r]),S=m.useCallback(r(async p=>{s(b=>({...b,clients:b.clients.filter(x=>x.id!==p)})),J.isReady()&&await J.deleteClient(p)}),[r]),E=m.useCallback(async()=>{if(!J.isReady()){console.warn("Firebase service not ready");return}s(p=>({...p,isLoading:!0,error:null}));try{const p=await J.syncAllData(),b=(p==null?void 0:p.pools)||[],x=(p==null?void 0:p.maintenance)||[],w=(p==null?void 0:p.works)||[],U=(p==null?void 0:p.clients)||[],F=new Date,P=x.filter(O=>new Date(O.scheduledDate)>=F&&(O.status==="scheduled"||O.status==="pending"));s(O=>({...O,pools:b,maintenance:x,futureMaintenance:P,works:w,clients:U,isLoading:!1,lastSync:new Date,error:null}))}catch(p){console.error("Firebase sync error:",p),s(b=>({...b,isLoading:!1,error:p.message||"Sync failed"}))}},[]),N=m.useCallback(p=>{o(p)},[]),D=m.useCallback(async()=>{if(s({pools:[],maintenance:[],futureMaintenance:[],works:[],clients:[],isLoading:!1,lastSync:null,error:null}),J.isReady())try{console.log("Clean all data not available via REST API")}catch(p){console.warn("Failed to clean Firebase data:",p)}},[]);return{...n,addPool:i,updatePool:t,deletePool:u,addMaintenance:d,updateMaintenance:l,deleteMaintenance:f,addWork:v,updateWork:g,deleteWork:C,addClient:h,updateClient:y,deleteClient:S,syncWithFirebase:E,enableSync:N,cleanAllData:D}}const Yl=!0,Xl=!1,Zl=!1;let Zo=null;console.log("🔍 Environment Check:");console.log("  - LOCAL_MODE (DEV):",Yl);console.log("  - NETLIFY:",void 0);console.log("  - VITE_IS_NETLIFY:",void 0);console.log("  - IS_NETLIFY_BUILD:",Xl);console.log("  - VITE_FORCE_FIREBASE:",void 0);console.log("  - FORCE_FIREBASE_PRODUCTION:",Zl);console.log("🚫 Firebase DESATIVADO - não está no Netlify"),console.log("📝 Usar apenas localStorage durante desenvolvimento"),console.log("��� Firebase será ativo automaticamente após deploy no Netlify"),console.log("🔍 Para testar Firebase localmente: VITE_FORCE_FIREBASE=true");typeof window<"u"&&window.addEventListener("error",n=>{n.error&&n.error.message&&n.error.message.includes("firebase")&&(console.warn("⚠️ Firebase error caught, continuing with localStorage:",n.error.message),n.preventDefault())});console.log("⏸️ Firebase inicialização adiada - aguardando deploy no Netlify");function ec(){if(!Zo)try{const n=vo();sa().length===0?(Zo=Ma(n),console.log("✅ Firebase inicializado tardiamente")):Zo=Ta()}catch(n){console.error("❌ Erro na inicialização tardia:",n.message)}return Zo}function vi(){return console.log("��� Use getFirebaseFirestore() diretamente do firestoreConfig"),null}const sc=Object.freeze(Object.defineProperty({__proto__:null,getDB:vi,getFirebaseApp:ec},Symbol.toStringTag,{value:"Module"})),Te=()=>{throw vi(),new Error("Firestore não está disponível")},Re={USERS:"users",POOLS:"pools",MAINTENANCE:"maintenance",WORKS:"works",CLIENTS:"clients"},Oe=()=>db!==null,ac=async(n,s)=>{var a,o;if(!Pa.isFirebaseOperationAllowed()){const r=Pa.getSyncStatus();throw r.emergencyShutdown?new Error("Firebase em shutdown de emergência - operação bloqueada"):r.quotaExceeded?new Error(`Firebase quota excedida - aguarde ${r.hoursUntilRetry||24} horas`):new Error("Firebase operação bloqueada por proteção de quota")}try{return await n()}catch(r){throw r.code==="resource-exhausted"||(a=r.message)!=null&&a.includes("quota")||(o=r.message)!=null&&o.includes("Quota exceeded")?(console.error(`🚨 QUOTA EXCEEDED in ${s}:`,r),Pa.markQuotaExceeded(),new Error("Firebase quota excedida - sincronização desabilitada")):r}},fa={subscribeToUsers(n){if(!db){const a=JSON.parse(localStorage.getItem("users")||"[]");return n(a),()=>{}}const s=fo(he(Te(),Re.USERS),bo("createdAt","desc"));return La(s,a=>{const o=a.docs.map(r=>({id:r.id,...r.data()}));n(o)})},async addUser(n){if(!db){const s=JSON.parse(localStorage.getItem("users")||"[]"),a={...n,id:Date.now().toString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s.push(a),localStorage.setItem("users",JSON.stringify(s)),console.log(`✅ Usuário ${n.name} (${n.email}) adicionado localmente`),a.id}return await ac(async()=>{const s=await go(he(Te(),Re.USERS),{...n,createdAt:new Date().toISOString(),updatedAt:Ke.now()});return console.log(`✅ Usuário ${n.name} (${n.email}) adicionado no Firebase`),await Ze.triggerAutoSync("create","users",s.id),s.id},"addUser")},async updateUser(n,s){if(!db)throw new Error("Firebase not configured");const a=be(Te(),Re.USERS,n);await ho(a,{...s,updatedAt:Ke.now()}),console.log(`✅ Usuário ${n} atualizado - sincronização automática ativada`),await Ze.triggerAutoSync("update","users",n)},async deleteUser(n){if(!db)throw new Error("Firebase not configured");const s=be(Te(),Re.USERS,n);await ws(s),console.log(`✅ Usuário ${n} removido - sincronização automática ativada`),await Ze.triggerAutoSync("delete","users",n)},async initializeDefaultUsers(){if(!db)return;if((await gs(he(Te(),Re.USERS))).empty){const s={name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:"2024-01-01"};await this.addUser(s),console.log("✅ Admin user created successfully")}}},Di={subscribeToPools(n){if(!Oe()){const a=JSON.parse(localStorage.getItem("pools")||"[]");return n(a),()=>{}}const s=fo(he(Te(),Re.POOLS),bo("createdAt","desc"));return La(s,a=>{const o=a.docs.map(r=>({id:r.id,...r.data()}));n(o)})},async addPool(n){if(!Oe())throw new Error("Firebase not configured");const s=await go(he(Te(),Re.POOLS),{...n,createdAt:Ke.now(),updatedAt:Ke.now(),sharedGlobally:!0,visibleToAllUsers:!0,isGlobalData:!0,dataSharing:"all_users"});return console.log(`✅ Piscina ${n.name} adicionada com partilha global - todos os utilizadores podem ver`),await Ze.triggerAutoSync("create","pools",s.id),s.id},async updatePool(n,s){if(!Oe())throw new Error("Firebase not configured");const a=be(Te(),Re.POOLS,n);await ho(a,{...s,updatedAt:Ke.now()}),console.log(`✅ Piscina ${n} atualizada - sincronização automática ativada`),await Ze.triggerAutoSync("update","pools",n)},async deletePool(n){if(!Oe())throw new Error("Firebase not configured");const s=be(Te(),Re.POOLS,n);await ws(s),console.log(`✅ Piscina ${n} removida - sincronização automática ativada`),await Ze.triggerAutoSync("delete","pools",n)}},Qr={subscribeToMaintenance(n){if(!Oe()){const a=JSON.parse(localStorage.getItem("maintenance")||"[]");return n(a),()=>{}}const s=fo(he(Te(),Re.MAINTENANCE),bo("scheduledDate","desc"));return La(s,a=>{const o=a.docs.map(r=>({id:r.id,...r.data()}));n(o)})},subscribeToFutureMaintenance(n){if(!Oe()){const o=JSON.parse(localStorage.getItem("maintenance")||"[]"),r=new Date().toISOString().split("T")[0],i=o.filter(t=>t.scheduledDate>=r);return n(i),()=>{}}const s=new Date().toISOString().split("T")[0],a=fo(he(Te(),Re.MAINTENANCE),Ot("scheduledDate",">=",s),bo("scheduledDate","asc"));return La(a,o=>{const r=o.docs.map(i=>({id:i.id,...i.data()}));n(r)})},async addMaintenance(n){if(!Oe())throw new Error("Firebase not configured");const s=await go(he(Te(),Re.MAINTENANCE),{...n,createdAt:Ke.now(),updatedAt:Ke.now(),sharedGlobally:!0,visibleToAllUsers:!0,isGlobalData:!0,dataSharing:"all_users"});return console.log(`✅ Manutenção para ${n.poolName} adicionada com partilha global - todos os utilizadores podem ver`),await Ze.triggerAutoSync("create","maintenance",s.id),s.id},async updateMaintenance(n,s){if(!Oe())throw new Error("Firebase not configured");const a=be(Te(),Re.MAINTENANCE,n);await ho(a,{...s,updatedAt:Ke.now()}),console.log(`✅ Manutenção ${n} atualizada - sincronização automática ativada`),await Ze.triggerAutoSync("update","maintenance",n)},async deleteMaintenance(n){if(!Oe())throw new Error("Firebase not configured");const s=be(Te(),Re.MAINTENANCE,n);await ws(s),console.log(`✅ Manutenção ${n} removida - sincronização automática ativada`),await Ze.triggerAutoSync("delete","maintenance",n)}},Ei={subscribeToWorks(n){if(!Oe()){const a=JSON.parse(localStorage.getItem("works")||"[]");return n(a),()=>{}}const s=fo(he(Te(),Re.WORKS),bo("createdAt","desc"));return La(s,a=>{const o=a.docs.map(r=>({id:r.id,...r.data(),sharedGlobally:!0,visibleToAllUsers:!0}));console.log(`✅ OBRAS SINCRONIZADAS: ${o.length} obras agora visíveis para todos os utilizadores`),n(o)})},async addWork(n){if(!Oe())throw new Error("Firebase not configured");const s=await go(he(Te(),Re.WORKS),{...n,createdAt:Ke.now(),updatedAt:Ke.now(),sharedGlobally:!0,visibleToAllUsers:!0,isGlobalData:!0,dataSharing:"all_users"});return console.log(`✅ Obra ${n.title} adicionada com partilha global - todos os utilizadores podem ver`),await Ze.triggerAutoSync("create","works",s.id),s.id},async updateWork(n,s){if(!Oe())throw new Error("Firebase not configured");const a=be(Te(),Re.WORKS,n);await ho(a,{...s,updatedAt:Ke.now(),sharedGlobally:!0,visibleToAllUsers:!0,isGlobalData:!0,dataSharing:"all_users"}),console.log(`✅ Obra ${n} atualizada mantendo partilha global - todos os utilizadores podem ver`),await Ze.triggerAutoSync("update","works",n)},async deleteWork(n){if(!Oe())throw new Error("Firebase not configured");const s=be(Te(),Re.WORKS,n);await ws(s),console.log(`✅ Obra ${n} removida - sincronização automática ativada`),await Ze.triggerAutoSync("delete","works",n)}},Ze={async initializeData(){if(!Oe()){console.log("⚠️ Firebase não disponível - sincronização limitada");return}console.log("📦 Inicializando dados do Firebase..."),await fa.initializeDefaultUsers(),console.log("✅ Dados inicializados com sucesso")},async triggerUserSync(n){if(!Oe()){console.log("Firebase não disponível - sincronização de usuário limitada");return}try{console.log(`🔄 Sincronização ativada para usuário: ${n}`);const s=new CustomEvent("firebase-sync",{detail:{type:"user",id:n,timestamp:Date.now()}});window.dispatchEvent(s);const a=localStorage.getItem("users");if(a){const o=JSON.parse(a);localStorage.setItem("users",JSON.stringify(o))}}catch(s){console.error("❌ Falha ao sincronizar usuário:",s)}},async forceCrossDeviceSync(n){if(!Oe()){console.log(`Firebase não disponível - sincronização de ${n} limitada`);return}try{console.log(`🔄 Forçando sincronização entre dispositivos para: ${n}`);const s=new CustomEvent("firebase-sync",{detail:{type:"forced-sync",collection:n,timestamp:Date.now(),source:"manual"}});window.dispatchEvent(s);const a=new StorageEvent("storage",{key:n,newValue:localStorage.getItem(n),oldValue:null,storageArea:localStorage});window.dispatchEvent(a),console.log(`✅ Sincronização entre dispositivos ativada para: ${n}`)}catch(s){console.error(`❌ Erro ao forçar sincroniza��ão de ${n}:`,s)}},async triggerAutoSync(n,s,a){if(Oe())try{console.log(`🔄 Auto-sync disparado: ${n} em ${s}${a?` (${a})`:""}`),await this.forceCrossDeviceSync(s);const o=new CustomEvent("firebase-auto-sync",{detail:{changeType:n,collection:s,documentId:a,timestamp:Date.now()}});window.dispatchEvent(o)}catch(o){console.error(`❌ Erro no auto-sync para ${s}:`,o)}},subscribeToAllData(n){if(!Oe())return console.log("⚠️ Firebase não disponível - retornando dados vazios"),n.onUsersChange([]),n.onPoolsChange([]),n.onMaintenanceChange([]),n.onWorksChange([]),()=>{};console.log("📡 Configurando listeners para sincronização em tempo real...");const s=fa.subscribeToUsers(i=>{console.log(`👥 Mudança detectada em usuários: ${i.length} registros`),n.onUsersChange(i),this.triggerAutoSync("users-changed","users")}),a=Di.subscribeToPools(i=>{console.log(`🏊 Mudança detectada em piscinas: ${i.length} registros`),n.onPoolsChange(i),this.triggerAutoSync("pools-changed","pools")}),o=Qr.subscribeToMaintenance(i=>{console.log(`🔧 Mudança detectada em manutenções: ${i.length} registros`),n.onMaintenanceChange(i),this.triggerAutoSync("maintenance-changed","maintenance")}),r=Ei.subscribeToWorks(i=>{console.log(`⚒️ Mudança detectada em obras: ${i.length} registros`),n.onWorksChange(i),this.triggerAutoSync("works-changed","works")});return console.log("✅ Todos os listeners configurados com sucesso"),()=>{console.log("🛑 Desconectando todos os listeners de sincronização"),s(),a(),o(),r()}}};function yi(){const[n,s]=m.useState({users:[],pools:[],maintenance:[],futureMaintenance:[],works:[],loading:!0,error:null}),[a,o]=m.useState(navigator.onLine),r=m.useRef(null);return m.useEffect(()=>{const t=()=>{console.log("🌐 Conexão restaurada - reativando sincronização"),o(!0)},u=()=>{console.log("🌐 Conexão perdida - pausando sincronização"),o(!1)};return window.addEventListener("online",t),window.addEventListener("offline",u),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",u)}},[]),m.useEffect(()=>{let t=null,u=null;const d=async()=>{try{console.log("🔥 Inicializando sincronização em tempo real - atualizações automáticas entre dispositivos"),console.log("🔄 Firebase configurado - sincronização completa ativada"),await Ze.initializeData(),t=Ze.subscribeToAllData({onUsersChange:l=>{console.log(`👥 Dados de usuários atualizados: ${l.length} usuários`),s(f=>({...f,users:l,loading:!1,error:null})),localStorage.setItem("users",JSON.stringify(l))},onPoolsChange:l=>{console.log(`🏊 Dados de piscinas atualizados: ${l.length} piscinas`),s(f=>({...f,pools:l})),localStorage.setItem("pools",JSON.stringify(l))},onMaintenanceChange:l=>{console.log(`🔧 Dados de manutenção atualizados: ${l.length} manutenções`),s(f=>({...f,maintenance:l})),localStorage.setItem("maintenance",JSON.stringify(l))},onWorksChange:l=>{console.log(`⚒️ Dados de obras atualizados: ${l.length} obras`),s(f=>({...f,works:l})),localStorage.setItem("works",JSON.stringify(l))}}),u=Qr.subscribeToFutureMaintenance(l=>{console.log(`📅 Manutenções futuras atualizadas: ${l.length} agendadas`),s(f=>({...f,futureMaintenance:l}))}),console.log("✅ Sincronização em tempo real configurada com sucesso")}catch(l){console.error("❌ Erro ao inicializar sincronização:",l),s(f=>({...f,error:"Erro ao sincronizar dados. Tentando reconectar...",loading:!1})),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{console.log("🔄 Tentando reconectar sincronização..."),d()},5e3)}};return a?d():s(l=>({...l,error:"Sem conexão - sincronização pausada",loading:!1})),()=>{t&&t(),u&&u(),r.current&&clearTimeout(r.current)}},[a]),{...n,services:{users:fa,pools:Di,maintenance:Qr,works:Ei}}}function oc(){const[n,s]=m.useState([]),[a,o]=m.useState(!0),[r,i]=m.useState(null);return m.useEffect(()=>{const l=fa.subscribeToUsers(f=>{s(f),o(!1)});return()=>l()},[]),{users:n,loading:a,error:r,addUser:async l=>{try{await fa.addUser(l)}catch(f){console.error("Error adding user:",f),i("Erro ao adicionar utilizador")}},updateUser:async(l,f)=>{try{await fa.updateUser(l,f)}catch(v){console.error("Error updating user:",v),i("Erro ao atualizar utilizador")}},deleteUser:async l=>{try{await fa.deleteUser(l)}catch(f){console.error("Error deleting user:",f),i("Erro ao eliminar utilizador")}}}}function rc(){const[n,s]=m.useState("overview"),a=cn(),o=yi(),{users:r,addUser:i,loading:t}=oc(),{isLoading:u,lastResult:d,error:l,cleanupStats:f,cleanAllData:v,initializeCleanApp:g,ensureUserSync:C,refreshStats:h}=xi(),[y,S]=m.useState({name:"",email:"",role:"technician"}),E=a.pools.length,N=a.works.length,D=a.maintenance.length,p=r.length,b=async()=>{if(!y.name||!y.email)return;const O={...y,permissions:{obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}},active:!0};try{await i(O),S({name:"",email:"",role:"technician"}),await C()}catch(te){console.error("Failed to add user:",te)}},x=()=>e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV(Ge,{children:e.jsxDEV(Qe,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:101,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:p},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:104,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:100,columnNumber:15},this),e.jsxDEV(oe,{className:"h-8 w-8 text-blue-500"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:106,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:99,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(Qe,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:115,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:E},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:114,columnNumber:15},this),e.jsxDEV(pe,{className:"h-8 w-8 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:113,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:111,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(Qe,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Obras"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:127,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:N},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:128,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:126,columnNumber:15},this),e.jsxDEV(pe,{className:"h-8 w-8 text-orange-500"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:125,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:124,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:123,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(Qe,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:139,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:D},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:140,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:138,columnNumber:15},this),e.jsxDEV(pe,{className:"h-8 w-8 text-purple-500"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:137,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:136,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:135,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:96,columnNumber:7},this),e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{children:"Estado da Aplicação"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:151,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:150,columnNumber:9},this),e.jsxDEV(Qe,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[f.isClean?e.jsxDEV(Us,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsxDEV(Z,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:161,columnNumber:19},this),"Aplicação Limpa"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:157,columnNumber:17},this):f.localStorageEmpty?e.jsxDEV(Us,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:[e.jsxDEV(tr,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:169,columnNumber:19},this),"Dados Vazios"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:165,columnNumber:17},this):e.jsxDEV(Us,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsxDEV(me,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:177,columnNumber:19},this),"Com Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:173,columnNumber:17},this),a.lastSync&&e.jsxDEV("span",{className:"text-sm text-gray-600",children:["Última sync: ",a.lastSync.toLocaleTimeString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:183,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(Ue,{onClick:()=>s("cleanup"),variant:"outline",size:"sm",children:"Gerir Dados"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:190,columnNumber:15},this),e.jsxDEV(Ue,{onClick:()=>s("users"),variant:"outline",size:"sm",children:"Gerir Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:154,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:153,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:149,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:94,columnNumber:5},this),w=()=>e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:[e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(Ce,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:216,columnNumber:13},this),"Limpeza de Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:215,columnNumber:11},this),e.jsxDEV(lo,{children:"Remover todas as obras, manutenções e piscinas para começar com aplicação limpa"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:219,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:214,columnNumber:9},this),e.jsxDEV(Qe,{className:"space-y-4",children:[l&&e.jsxDEV(Is,{variant:"destructive",children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:227,columnNumber:15},this),e.jsxDEV(ks,{children:l},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:226,columnNumber:13},this),(d==null?void 0:d.success)&&e.jsxDEV(Is,{className:"border-green-200 bg-green-50",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:234,columnNumber:15},this),e.jsxDEV(ks,{className:"text-green-800",children:d.message},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV(Ue,{onClick:v,disabled:u,variant:"destructive",className:"flex items-center gap-2",children:[e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:248,columnNumber:15},this),u?"A Limpar...":"Limpar Todos os Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV(Ue,{onClick:g,disabled:u,variant:"outline",className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:258,columnNumber:15},this),"Inicialização Completa Limpa"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:252,columnNumber:13},this),e.jsxDEV(Ue,{onClick:h,disabled:u,variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:269,columnNumber:15},this),"Atualizar"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:262,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:241,columnNumber:11},this),e.jsxDEV(Is,{children:[e.jsxDEV(tr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:275,columnNumber:13},this),e.jsxDEV(ks,{children:[e.jsxDEV("strong",{children:"Aviso:"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:277,columnNumber:15},this)," Esta operação remove permanentemente todos os dados de obras, manutenções e piscinas. Os utilizadores são mantidos para garantir sincronização adequada."]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:276,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:274,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:224,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:213,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:212,columnNumber:5},this),U=()=>e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:[e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(Le,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:293,columnNumber:13},this),"Adicionar Utilizador"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:292,columnNumber:11},this),e.jsxDEV(lo,{children:"Novos utilizadores são automaticamente sincronizados"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:296,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:291,columnNumber:9},this),e.jsxDEV(Qe,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Nome"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:303,columnNumber:15},this),e.jsxDEV("input",{type:"text",value:y.name,onChange:O=>S({...y,name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Nome completo"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:304,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:302,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Email"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:315,columnNumber:15},this),e.jsxDEV("input",{type:"email",value:y.email,onChange:O=>S({...y,email:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"email@example.com"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:316,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:314,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Função"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:327,columnNumber:15},this),e.jsxDEV("select",{value:y.role,onChange:O=>S({...y,role:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsxDEV("option",{value:"technician",children:"Técnico"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:341,columnNumber:17},this),e.jsxDEV("option",{value:"manager",children:"Gestor"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:342,columnNumber:17},this),e.jsxDEV("option",{value:"super_admin",children:"Super Admin"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:343,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:328,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:326,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:301,columnNumber:11},this),e.jsxDEV(Ue,{onClick:b,disabled:t||!y.name||!y.email,className:"flex items-center gap-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:353,columnNumber:13},this),t?"A Adicionar...":"Adicionar Utilizador"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:348,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:300,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:290,columnNumber:7},this),e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(qe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:363,columnNumber:13},this),"Utilizadores Existentes (",p,")"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:362,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:361,columnNumber:9},this),e.jsxDEV(Qe,{children:t?e.jsxDEV("div",{className:"text-center py-4",children:[e.jsxDEV(X,{className:"h-6 w-6 animate-spin mx-auto mb-2"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:370,columnNumber:15},this),e.jsxDEV("p",{children:"A carregar utilizadores..."},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:371,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:369,columnNumber:13},this):r.length===0?e.jsxDEV("p",{className:"text-gray-500 text-center py-4",children:"Nenhum utilizador encontrado"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:374,columnNumber:13},this):e.jsxDEV("div",{className:"space-y-2",children:r.map(O=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:O.name},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:385,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:O.email},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:386,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:384,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Us,{variant:"outline",children:O.role==="super_admin"?"Super Admin":O.role==="manager"?"Gestor":"Técnico"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:389,columnNumber:21},this),O.active&&e.jsxDEV(Us,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Ativo"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:397,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:388,columnNumber:19},this)]},O.id,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:380,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:378,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:367,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:360,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:288,columnNumber:5},this),F=()=>e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV(Ge,{children:[e.jsxDEV(vs,{children:[e.jsxDEV(Ds,{className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:419,columnNumber:13},this),"Sincronização"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:418,columnNumber:11},this),e.jsxDEV(lo,{children:"Estado da sincronização com Firebase"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:422,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:417,columnNumber:9},this),e.jsxDEV(Qe,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV(Ue,{onClick:a.syncWithFirebase,disabled:a.isLoading,className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:433,columnNumber:15},this),a.isLoading?"A Sincronizar...":"Sincronizar Agora"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:428,columnNumber:13},this),e.jsxDEV(Ue,{onClick:C,disabled:u,variant:"outline",className:"flex items-center gap-2",children:[e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:443,columnNumber:15},this),"Verificar Sync Utilizadores"]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:437,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:427,columnNumber:11},this),a.error&&e.jsxDEV(Is,{variant:"destructive",children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:450,columnNumber:15},this),e.jsxDEV(ks,{children:a.error},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:451,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:449,columnNumber:13},this),o.error&&e.jsxDEV(Is,{variant:"destructive",children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:457,columnNumber:15},this),e.jsxDEV(ks,{children:o.error},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:458,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:456,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:426,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:416,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:415,columnNumber:5},this),P=[{id:"overview",label:"Visão Geral",icon:pe},{id:"cleanup",label:"Limpeza",icon:Ce},{id:"users",label:"Utilizadores",icon:oe},{id:"sync",label:"Sincronização",icon:X}];return e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Gestão de Dados Leirisonda"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:476,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-600 mt-1",children:"Gestão de dados, utilizadores e sincronização da aplicação"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:477,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:475,columnNumber:7},this),e.jsxDEV("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-6",children:P.map(O=>{const te=O.icon;return e.jsxDEV("button",{onClick:()=>s(O.id),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${n===O.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxDEV(te,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:496,columnNumber:15},this),O.label]},O.id,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:487,columnNumber:13},this)})},void 0,!1,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:483,columnNumber:7},this),n==="overview"&&x(),n==="cleanup"&&w(),n==="users"&&U(),n==="sync"&&F()]},void 0,!0,{fileName:"/app/code/src/components/DataManagementPanel.tsx",lineNumber:474,columnNumber:5},this)}const nc=()=>{const[n,s]=m.useState([]),[a,o]=m.useState({}),[r,i]=m.useState(!0);m.useEffect(()=>{t()},[]);const t=()=>{try{const l=localStorage.getItem("mock-users");if(l){const f=JSON.parse(l),v=Object.values(f);s(v)}}catch(l){console.error("Error loading local users:",l)}finally{i(!1)}},u=async(l,f)=>{{o(v=>({...v,[l.uid]:"error"}));return}},d=({user:l,onMigrate:f})=>{const[v,g]=m.useState(""),[C,h]=m.useState(""),[y,S]=m.useState(""),E=N=>{if(N.preventDefault(),v.length<6){S("Password deve ter pelo menos 6 caracteres");return}if(v!==C){S("Passwords não coincidem");return}f(v)};return e.jsxDEV("form",{onSubmit:E,className:"space-y-4 border-t pt-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Password para Firebase"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:210,columnNumber:11},void 0),e.jsxDEV("input",{type:"password",value:v,onChange:N=>g(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mínimo 6 caracteres",required:!0,minLength:6},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:213,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:209,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Password"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:225,columnNumber:11},void 0),e.jsxDEV("input",{type:"password",value:C,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Repita a password",required:!0},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:228,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:224,columnNumber:9},void 0),y&&e.jsxDEV("div",{className:"text-red-600 text-sm",children:y},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:238,columnNumber:19},void 0),e.jsxDEV("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Migrar para Firebase"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:240,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:208,columnNumber:7},void 0)};return r?e.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[e.jsxDEV(X,{className:"w-6 h-6 animate-spin text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:253,columnNumber:9},void 0),e.jsxDEV("span",{className:"ml-2 text-gray-600",children:"A carregar utilizadores..."},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:254,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:252,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(Ia,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:263,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-blue-800",children:"Acesso Multi-Dispositivo"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:265,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-blue-700 mt-1",children:"Utilizadores criados no Firebase podem aceder de qualquer dispositivo. Utilizadores locais apenas acedem do dispositivo onde foram criados."},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:268,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:264,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:262,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:261,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxDEV("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsxDEV(oe,{className:"h-5 w-5 mr-2"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:280,columnNumber:13},void 0),"Gestão de Utilizadores"]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:279,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:278,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-6",children:n.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(oe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:288,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Nenhum utilizador local encontrado"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:287,columnNumber:13},void 0):e.jsxDEV("div",{className:"space-y-4",children:n.map(l=>{const f=a[l.uid];return e.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(ea,{className:"h-4 w-4 text-orange-500 mr-1"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:306,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-sm text-orange-600",children:"Local"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:307,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:305,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:l.name},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:310,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:l.email},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:313,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:l.role==="super_admin"?"Super Admin":l.role==="manager"?"Gestor":"Técnico"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:314,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:309,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:304,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[f==="success"&&e.jsxDEV("div",{className:"flex items-center text-green-600",children:[e.jsxDEV(Z,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:327,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm",children:"Migrado"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:328,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:326,columnNumber:27},void 0),f==="error"&&e.jsxDEV("div",{className:"flex items-center text-red-600",children:[e.jsxDEV(me,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:333,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm",children:"Erro"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:334,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:332,columnNumber:27},void 0),f==="migrating"&&e.jsxDEV("div",{className:"flex items-center text-blue-600",children:[e.jsxDEV(X,{className:"h-4 w-4 mr-1 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:339,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm",children:"Migrando..."},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:340,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:338,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:324,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:303,columnNumber:21},void 0),f!=="success"&&f!=="migrating"&&e.jsxDEV(d,{user:l,onMigrate:v=>u(l)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:347,columnNumber:23},void 0),f==="success"&&e.jsxDEV("div",{className:"border-t pt-4",children:e.jsxDEV("div",{className:"flex items-center text-green-700 bg-green-50 p-3 rounded-md",children:[e.jsxDEV(Ia,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:358,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-sm",children:"Utilizador migrado com sucesso! Agora pode aceder de qualquer dispositivo."},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:359,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:357,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:356,columnNumber:23},void 0)]},l.uid,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:299,columnNumber:19},void 0)})},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:294,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:285,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:277,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(Xe,{className:"h-5 w-5 text-gray-600 mt-0.5 mr-3"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:376,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"Como garantir acesso multi-dispositivo:"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:378,columnNumber:13},void 0),e.jsxDEV("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxDEV("li",{children:"• Novos utilizadores são automaticamente criados no Firebase"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:382,columnNumber:15},void 0),e.jsxDEV("li",{children:"• Utilizadores existentes locais podem ser migrados usando este painel"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:385,columnNumber:15},void 0),e.jsxDEV("li",{children:"• Após migração, utilizadores podem fazer login de qualquer dispositivo"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:389,columnNumber:15},void 0),e.jsxDEV("li",{children:"• A password será a mesma definida durante a migração"},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:393,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:381,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:377,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:375,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:374,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CrossDeviceUserManager.tsx",lineNumber:260,columnNumber:5},void 0)},ji=m.createContext(null),ic=()=>{const n=m.useContext(ji);if(!n)throw new Error("useAutoSync must be used within an AutoSyncProvider");return n},tc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(!1);m.useEffect(()=>{const u=()=>{const l=Ys(),f=Ps.isAutoSyncActive();s(l),o(f)};u();const d=setInterval(u,1e4);return()=>clearInterval(d)},[]);const i=n?a?{icon:Z,color:"text-green-600",text:"Sync"}:{icon:X,color:"text-amber-500",text:"..."}:{icon:Zn,color:"text-yellow-500",text:"Local"},t=i.icon;return e.jsxDEV("div",{className:"inline-flex items-center gap-1",children:[e.jsxDEV(t,{className:`h-3 w-3 ${i.color}`},void 0,!1,{fileName:"/app/code/src/components/SyncStatusIndicator.tsx",lineNumber:180,columnNumber:7},void 0),e.jsxDEV("span",{className:`text-xs font-medium ${i.color}`,children:i.text},void 0,!1,{fileName:"/app/code/src/components/SyncStatusIndicator.tsx",lineNumber:181,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SyncStatusIndicator.tsx",lineNumber:179,columnNumber:5},void 0)},lc=()=>{const s=!!m.useContext(ji),a={isActive:!1,syncing:!1,lastSync:null,error:null,forceSyncNow:()=>{},config:{syncInterval:15e3,collections:[]}},{isActive:o,syncing:r,lastSync:i,error:t,forceSyncNow:u,config:d}=s?ic():a,l={statusText:o?"Ativo":"Inativo",healthStatus:t?"error":r?"warning":o?"healthy":"disabled"},[f,v]=m.useState(""),[g,C]=m.useState([]),h=E=>{const N=new Date().toLocaleTimeString();C(D=>[`[${N}] ${E}`,...D.slice(0,9)])};m.useEffect(()=>{r&&h("🔄 Sincronização iniciada")},[r]),m.useEffect(()=>{i&&h("✅ Sincronização concluída")},[i]),m.useEffect(()=>{t&&h(`❌ Erro: ${t}`)},[t]);const y=()=>{const E={id:Date.now().toString(),name:`Teste ${Date.now()}`,timestamp:new Date().toISOString()},N=JSON.parse(localStorage.getItem("pools")||"[]");N.push(E),localStorage.setItem("pools",JSON.stringify(N)),h(`📝 Dados de teste adicionados: ${E.name}`),v(JSON.stringify(E,null,2))},S=()=>{const N=JSON.parse(localStorage.getItem("pools")||"[]").filter(D=>{var p;return!((p=D.name)!=null&&p.startsWith("Teste "))});localStorage.setItem("pools",JSON.stringify(N)),h("🧹 Dados de teste removidos"),v("")};return s?e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Sincronização Automática"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Sistema de sincronização em tempo real localStorage ↔ Firebase"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:138,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:134,columnNumber:9},void 0),e.jsxDEV(tc,{},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:133,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Status"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:151,columnNumber:15},void 0),e.jsxDEV("p",{className:`font-semibold ${l.healthStatus==="healthy"?"text-green-600":l.healthStatus==="warning"?"text-yellow-600":l.healthStatus==="error"?"text-red-600":"text-gray-600"}`,children:l.statusText},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:152,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:150,columnNumber:13},void 0),l.healthStatus==="healthy"&&e.jsxDEV(Z,{className:"w-5 h-5 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:167,columnNumber:15},void 0),l.healthStatus==="warning"&&e.jsxDEV(le,{className:"w-5 h-5 text-yellow-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:170,columnNumber:15},void 0),l.healthStatus==="error"&&e.jsxDEV(le,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:173,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:149,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:148,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Intervalo"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:182,columnNumber:15},void 0),e.jsxDEV("p",{className:"font-semibold text-gray-900",children:[d.syncInterval/1e3,"s"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:183,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:181,columnNumber:13},void 0),e.jsxDEV(ge,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:180,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:179,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Última Sync"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("p",{className:"font-semibold text-gray-900",children:i?i.toLocaleTimeString():"Nunca"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:196,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:194,columnNumber:13},void 0),e.jsxDEV(X,{className:`w-5 h-5 ${r?"animate-spin text-blue-500":"text-gray-400"}`},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:200,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:193,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:192,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:146,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Controles de Teste"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:209,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("button",{onClick:u,disabled:r,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxDEV(X,{className:`w-4 h-4 ${r?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:219,columnNumber:13},void 0),"Forçar Sync"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:214,columnNumber:11},void 0),e.jsxDEV("button",{onClick:y,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:227,columnNumber:13},void 0),"Adicionar Teste"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:223,columnNumber:11},void 0),e.jsxDEV("button",{onClick:S,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsxDEV(Ce,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:235,columnNumber:13},void 0),"Limpar Testes"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:231,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:213,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:208,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuração Técnica"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:243,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:"Collections Monitoradas"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:249,columnNumber:13},void 0),e.jsxDEV("ul",{className:"space-y-1",children:d.collections.map(E=>e.jsxDEV("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-blue-500 rounded-full"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:258,columnNumber:19},void 0),E]},E,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:254,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:252,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:248,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:"Recursos Ativos"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:266,columnNumber:13},void 0),e.jsxDEV("ul",{className:"space-y-1",children:[e.jsxDEV("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsxDEV(Z,{className:"w-3 h-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:269,columnNumber:17},void 0),"Detecção automática de mudanças"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:268,columnNumber:15},void 0),e.jsxDEV("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsxDEV(Z,{className:"w-3 h-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:273,columnNumber:17},void 0),"Sincronização bidirecional"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:272,columnNumber:15},void 0),e.jsxDEV("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsxDEV(Z,{className:"w-3 h-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:277,columnNumber:17},void 0),"Listeners do Firebase em tempo real"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:276,columnNumber:15},void 0),e.jsxDEV("li",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsxDEV(Z,{className:"w-3 h-3 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:281,columnNumber:17},void 0),"Interceptação de localStorage"]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:280,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:267,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:247,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:242,columnNumber:7},void 0),f&&e.jsxDEV("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Último Dado de Teste"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:292,columnNumber:11},void 0),e.jsxDEV("pre",{className:"bg-gray-50 p-4 rounded text-sm overflow-x-auto",children:f},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:295,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:291,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Log de Atividade"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:303,columnNumber:9},void 0),g.length===0?e.jsxDEV("p",{className:"text-gray-500 text-sm",children:"Nenhuma atividade registrada"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:308,columnNumber:11},void 0):e.jsxDEV("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map((E,N)=>e.jsxDEV("div",{className:"text-sm font-mono text-gray-700 p-2 bg-gray-50 rounded",children:E},N,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:312,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:310,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:302,columnNumber:7},void 0),t&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(le,{className:"w-5 h-5 text-red-500 mt-0.5"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:327,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-red-900",children:"Erro na Sincronização"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:329,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-red-700 text-sm mt-1",children:t},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:328,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:326,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(tr,{className:"w-5 h-5 text-blue-500 mt-0.5"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:341,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-blue-900",children:"Como Funciona"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-blue-700 text-sm mt-1",children:"O sistema monitora automaticamente mudanças no localStorage e no Firebase, sincronizando os dados bidirecionalmente em tempo real. Qualquer alteração em qualquer parte da aplicação dispara uma sincronização automática."},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:344,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:342,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:340,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:339,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:131,columnNumber:5},void 0):e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(le,{className:"h-6 w-6 text-yellow-600 mt-1 mr-3"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:104,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"AutoSync não disponível"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:106,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-yellow-800 mb-4",children:"O sistema de sincronização automática não está ativo nesta área. Este demo funciona apenas na aplicação principal."},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:109,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-yellow-100 p-3 rounded border border-yellow-300",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900 mb-2",children:"Como ativar:"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:114,columnNumber:17},void 0),e.jsxDEV("ol",{className:"text-yellow-800 text-sm space-y-1",children:[e.jsxDEV("li",{children:"1. Faça login na aplicação principal"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:118,columnNumber:19},void 0),e.jsxDEV("li",{children:"2. Vá às configurações da aplicação"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:119,columnNumber:19},void 0),e.jsxDEV("li",{children:"3. A sincronização automática estará disponível"},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:120,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:117,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:113,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:105,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:103,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:102,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/AutoSyncDemo.tsx",lineNumber:101,columnNumber:7},void 0)};function cc({onFixApplied:n}){const[s,a]=m.useState({checking:!0,firebase:{realtimeDb:{connected:!1,dataCount:0},firestore:{connected:!1,dataCount:0}},localStorage:{works:0,pools:0,maintenance:0,clients:0},sharing:{isWorking:!1,recommendedAction:""}}),[o,r]=m.useState(!1),i=async()=>{var d,l,f,v;console.log("🔍 Iniciando diagnóstico de partilha de dados..."),a(g=>({...g,checking:!0}));try{console.log("📱 Verificando dados locais...");const g={works:JSON.parse(localStorage.getItem("works")||"[]").length,pools:JSON.parse(localStorage.getItem("pools")||"[]").length,maintenance:JSON.parse(localStorage.getItem("maintenance")||"[]").length,clients:JSON.parse(localStorage.getItem("clients")||"[]").length};console.log("📱 Dados locais encontrados:",g),console.log("🔗 Verificando conexão Firebase Realtime Database...");let C={connected:!1,dataCount:0};const h=new Promise((p,b)=>setTimeout(()=>b(new Error("Timeout")),1e4));try{const p=await Promise.race([J.syncAllData(),h]);if(console.log("🔗 Dados do Firebase recebidos:",p),p&&typeof p=="object"){const b=p;C={connected:!0,dataCount:(((d=b.works)==null?void 0:d.length)||0)+(((l=b.pools)==null?void 0:l.length)||0)+(((f=b.maintenance)==null?void 0:f.length)||0)+(((v=b.clients)==null?void 0:v.length)||0)}}}catch(p){console.warn("❌ Realtime Database check failed:",p),C={connected:!1,dataCount:0}}console.log("📊 Analisando estado da partilha...");let y={connected:!1,dataCount:0};const S=Object.values(g).reduce((p,b)=>p+b,0),E=S>0,N=C.dataCount>0;console.log("📊 Análise:",{totalLocalData:S,hasLocalData:E,hasRealtimeData:N,realtimeDbConnected:C.connected});let D={isWorking:!1,recommendedAction:""};E&&!N?(console.log("📋 Situação: Dados locais sem partilha"),D={isWorking:!1,recommendedAction:"MIGRATE_TO_REALTIME"}):N?(console.log("✅ Situação: Partilha ativa"),D={isWorking:!0,recommendedAction:"WORKING"}):!E&&!N&&(console.log("📝 Situação: Sem dados"),D={isWorking:!0,recommendedAction:"NO_DATA"}),console.log("✅ Diagnóstico concluído"),a({checking:!1,firebase:{realtimeDb:C,firestore:y},localStorage:g,sharing:D})}catch(g){console.error("❌ Erro durante diagnóstico:",g),a({checking:!1,firebase:{realtimeDb:{connected:!1,dataCount:0},firestore:{connected:!1,dataCount:0}},localStorage:{works:0,pools:0,maintenance:0,clients:0},sharing:{isWorking:!1,recommendedAction:"ERROR"}})}},t=async()=>{r(!0);try{console.log("🔧 Aplicando correção de partilha de dados...");const d=JSON.parse(localStorage.getItem("currentUser")||"null"),l=await hi.migrateToSharedData(d);l.success?(console.log("✅ Migração concluída:",l),await i(),n&&n()):console.error("❌ Migração falhou:",l)}catch(d){console.error("❌ Erro na correção de partilha:",d)}finally{r(!1)}};m.useEffect(()=>{i()},[]);const u=Object.values(s.localStorage).reduce((d,l)=>d+l,0);return e.jsxDEV(Ge,{className:"p-4 border-l-4 border-l-blue-500",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(pe,{className:"w-5 h-5 text-blue-600 mt-1"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:227,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900 mb-3",children:"Estado da Partilha de Dados Entre Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:229,columnNumber:11},this),s.checking&&e.jsxDEV("div",{className:"flex items-center gap-2 text-blue-600 mb-3",children:[e.jsxDEV(X,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("span",{children:"Verificando estado da partilha..."},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:234,columnNumber:13},this),!s.checking&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:`flex items-center gap-2 ${s.sharing.isWorking?"text-green-600":"text-orange-600"}`,children:[s.sharing.isWorking?e.jsxDEV(Z,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:247,columnNumber:19},this):e.jsxDEV(le,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:249,columnNumber:19},this),e.jsxDEV("span",{className:"font-medium",children:s.sharing.isWorking?"Partilha de dados ativa - todos os utilizadores veem os mesmos dados":"Partilha de dados não configurada - dados podem estar isolados"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:251,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded text-sm space-y-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-700",children:["Dados locais (localStorage):"," "]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:261,columnNumber:19},this),e.jsxDEV("span",{children:[u," registros (",s.localStorage.works," ","obras, ",s.localStorage.pools," piscinas,"," ",s.localStorage.maintenance," manutenções,"," ",s.localStorage.clients," clientes)"]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:264,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:260,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium text-gray-700",children:["Dados partilhados (Firebase):"," "]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:273,columnNumber:19},this),e.jsxDEV("span",{children:[s.firebase.realtimeDb.dataCount," registros no Realtime Database"]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:276,columnNumber:19},this),s.firebase.realtimeDb.connected?e.jsxDEV("span",{className:"text-green-600 ml-2",children:"✓ Conectado"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:281,columnNumber:21},this):e.jsxDEV("span",{className:"text-red-600 ml-2",children:"✗ Não conectado"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:283,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:259,columnNumber:15},this),s.sharing.recommendedAction==="MIGRATE_TO_REALTIME"&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"bg-orange-50 p-3 rounded text-sm",children:[e.jsxDEV("p",{className:"font-medium text-orange-800 mb-1",children:"Ação necessária:"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:292,columnNumber:21},this),e.jsxDEV("p",{className:"text-orange-700",children:"Os dados estão apenas no dispositivo local. Para que todos os utilizadores vejam as obras, é necessário migrar para a estrutura partilhada do Firebase."},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:291,columnNumber:19},this),e.jsxDEV(Ue,{onClick:t,disabled:o,className:"bg-orange-600 hover:bg-orange-700",children:o?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:309,columnNumber:25},this),"Migrando dados..."]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:308,columnNumber:23},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(oe,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:314,columnNumber:25},this),"Ativar Partilha de Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:313,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:302,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:290,columnNumber:17},this),s.sharing.recommendedAction==="NO_DATA"&&e.jsxDEV("div",{className:"bg-blue-50 p-3 rounded text-sm",children:e.jsxDEV("p",{className:"text-blue-700",children:"Sem dados encontrados. Quando criar obras, piscinas ou outros dados, eles serão automaticamente partilhados entre todos os utilizadores."},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:324,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:323,columnNumber:17},this),s.sharing.recommendedAction==="ERROR"&&e.jsxDEV("div",{className:"bg-red-50 p-3 rounded text-sm",children:[e.jsxDEV("p",{className:"font-medium text-red-800 mb-1",children:"Erro durante verificação:"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:334,columnNumber:19},this),e.jsxDEV("p",{className:"text-red-700",children:"Ocorreu um erro ao verificar o estado da partilha. Verifique a conexão e tente novamente."},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:337,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:333,columnNumber:17},this),e.jsxDEV(Ue,{onClick:i,variant:"outline",size:"sm",children:[e.jsxDEV(X,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:349,columnNumber:17},this),"Verificar novamente"]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:344,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:241,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:228,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:226,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/src/components/DataSharingStatus.tsx",lineNumber:225,columnNumber:5},this)}const dc=()=>{const[n,s]=m.useState(()=>localStorage.getItem("enablePhoneDialer")==="true"),[a,o]=m.useState(()=>localStorage.getItem("enableMapsRedirect")==="true"),[r,i]=m.useState("+351 912 345 678"),[t,u]=m.useState("Quinta da Marinha, Cascais, Portugal"),[d,l]=m.useState(null),f=h=>{s(h),localStorage.setItem("enablePhoneDialer",h.toString()),window.dispatchEvent(new CustomEvent("phoneDialerToggled",{detail:{enabled:h}}))},v=h=>{o(h),localStorage.setItem("enableMapsRedirect",h.toString()),window.dispatchEvent(new CustomEvent("mapsRedirectToggled",{detail:{enabled:h}}))},g=()=>{if(!n){l("❌ Marcação automática está desativada");return}try{const h=r.replace(/[\s\-\(\)]/g,"");if(!/^\+?[1-9]\d{1,14}$/.test(h)){l("❌ Número de telefone inválido");return}const y=`tel:${h}`;window.location.href=y,l("✅ Teste executado! Verifique se o marcador abriu."),setTimeout(()=>{l(null)},3e3)}catch(h){l("❌ Erro no teste: "+h)}},C=()=>{if(!a){l("❌ Redirecionamento para Maps está desativado");return}try{if(!t.trim()){l("❌ Endereço de teste vazio");return}const y=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`;window.open(y,"_blank"),l("✅ Teste executado! Verifique se o Google Maps abriu numa nova aba."),setTimeout(()=>{l(null)},3e3)}catch(h){l("❌ Erro no teste: "+h)}};return e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(vt,{className:"h-6 w-6 text-blue-600 mr-3"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:111,columnNumber:11},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações de Telefone e Navegação"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:112,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:110,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:"📞"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:121,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900",children:"Marcação Automática"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:126,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>f(!n),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n?"bg-blue-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:135,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:129,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:125,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-blue-700 text-sm mb-3",children:"Quando ativado, clicar num número de telefone abrirá diretamente o marcador do dispositivo."},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:142,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-blue-600 text-xs",children:["Estado: ",n?"✅ Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:146,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:124,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:120,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:119,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"🗺️"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:156,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-green-900",children:"Redirecionamento para Maps"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:161,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>v(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-green-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:170,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:164,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:160,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-green-700 text-sm mb-3",children:"Quando ativado, clicar numa morada abrirá diretamente o Google Maps numa nova aba."},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:177,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-green-600 text-xs",children:["Estado: ",a?"✅ Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:181,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:159,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:155,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:154,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-3",children:"Teste de Funcionalidade"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Teste"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:196,columnNumber:17},void 0),e.jsxDEV("input",{type:"tel",value:r,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+351 912 345 678"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:199,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("button",{onClick:g,className:`w-full px-4 py-2 rounded-md font-medium transition-colors ${n?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!n,children:n?"🧪 Testar Marcação":"❌ Ativar primeiro"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:208,columnNumber:15},void 0),d&&e.jsxDEV("div",{className:`p-3 rounded-md text-sm ${d.includes("✅")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:d},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:223,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:194,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:"Teste Google Maps"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:236,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço de Teste"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:239,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:t,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quinta da Marinha, Cascais, Portugal"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:242,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:238,columnNumber:15},void 0),e.jsxDEV("button",{onClick:C,className:`w-full px-4 py-2 rounded-md font-medium transition-colors ${a?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!a,children:a?"🗺️ Testar Google Maps":"❌ Ativar primeiro"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:251,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:235,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:189,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900 mb-2",children:"ℹ️ Informações Importantes"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:269,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-yellow-900 mb-1",children:"📞 Marcação Automática:"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:274,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-yellow-800 text-sm space-y-1 ml-4",children:[e.jsxDEV("li",{children:"• Funciona em iPhone, Android e desktop"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:278,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Usa o protocolo padrão tel: para máxima compatibilidade"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:279,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Limpa automaticamente números (remove espaços, traços)"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:282,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Em desktop, pode abrir aplicações como Skype ou Teams"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:285,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:277,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:273,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-medium text-yellow-900 mb-1",children:"🗺️ Google Maps:"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:292,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-yellow-800 text-sm space-y-1 ml-4",children:[e.jsxDEV("li",{children:"• Abre Google Maps numa nova aba/janela"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:296,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Funciona em qualquer navegador e dispositivo"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:297,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Codifica automaticamente caracteres especiais"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:298,columnNumber:19},void 0),e.jsxDEV("li",{children:"• Pode abrir apps nativas do Maps em dispositivos móveis"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:299,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:295,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:291,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-yellow-800 text-sm font-medium",children:"🔄 Ambas as configurações são sincronizadas globalmente na aplicação"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:305,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:272,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:268,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-3",children:"Estado Atual do Sistema"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:314,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-gray-600",children:"📞 Marcação Automática:"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:319,columnNumber:17},void 0),e.jsxDEV("span",{className:`ml-2 font-medium ${n?"text-green-600":"text-red-600"}`,children:n?"Ativada":"Desativada"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:320,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:318,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-gray-600",children:"🗺️ Google Maps:"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:329,columnNumber:17},void 0),e.jsxDEV("span",{className:`ml-2 font-medium ${a?"text-green-600":"text-red-600"}`,children:a?"Ativado":"Desativado"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:330,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:328,columnNumber:15},void 0),e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("span",{className:"text-gray-600",children:"💾 Armazenamento:"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:339,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-2 font-medium text-blue-600",children:"Local Storage (sincronizado globalmente)"},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:340,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:338,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:317,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:313,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:109,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/PhoneSettings.tsx",lineNumber:108,columnNumber:5},void 0)};class Qs{static createEmergencyBackup(){const s=new Date().toISOString(),a=`emergency_${Date.now()}`,o={timestamp:s,id:a,version:"1.0.0"};let r=0;this.CRITICAL_KEYS.forEach(t=>{try{const u=localStorage.getItem(t);if(u&&u!=="null"&&u!=="[]"){const d=JSON.parse(u);Array.isArray(d)?(o[t]=d,r+=d.length,console.log(`🔒 EMERGENCY BACKUP: ${t} saved (${d.length} items)`)):(o[t]=[],console.warn(`⚠️ EMERGENCY BACKUP: ${t} is not an array, saved as empty`))}else o[t]=[],console.log(`🔒 EMERGENCY BACKUP: ${t} empty, saved as empty array`)}catch(u){console.warn(`⚠️ EMERGENCY BACKUP: Failed to backup ${t}:`,u),o[t]=[]}});const i=Object.keys(localStorage).filter(t=>t.startsWith("backup_emergency_"));if(r>0||i.length===0)try{return localStorage.setItem(`backup_emergency_${a}`,JSON.stringify(o)),this.cleanupOldBackups(),console.log(`✅ EMERGENCY BACKUP CREATED: ${a} (${r} total items)`),a}catch(t){return console.error("❌ FAILED TO CREATE EMERGENCY BACKUP:",t),""}else return console.log("⏭️ SKIPPING BACKUP: No data to backup and backups exist"),""}static restoreFromLatestBackup(){console.log("🚨 ATTEMPTING DATA RESTORATION...");try{const s=Object.keys(localStorage).filter(a=>a.startsWith("backup_emergency_")).sort().reverse();if(console.log(`🔍 Found ${s.length} emergency backups`),s.length===0)return console.warn("❌ NO EMERGENCY BACKUPS FOUND"),this.restoreFromAlternativeSources();for(const a of s){console.log(`🔄 Attempting restore from: ${a}`);try{const o=localStorage.getItem(a);if(!o){console.warn(`⚠️ Backup ${a} is empty`);continue}const r=JSON.parse(o);console.log("📦 Backup content:",Object.keys(r));let i=!1,t=0;for(const u of this.CRITICAL_KEYS)r[u]&&Array.isArray(r[u])&&r[u].length>0&&(i=!0,t+=r[u].length,console.log(`✅ Found ${r[u].length} items in ${u}`));if(!i){console.warn(`⚠️ Backup ${a} has no valid data`);continue}console.log(`🔄 Restoring ${t} total items...`);for(const u of this.CRITICAL_KEYS)r[u]&&Array.isArray(r[u])?(localStorage.setItem(u,JSON.stringify(r[u])),console.log(`✅ RESTORED: ${u} (${r[u].length} items)`)):(localStorage.setItem(u,JSON.stringify([])),console.log(`🔧 INITIALIZED: ${u} as empty array`));return console.log(`🎉 DATA RESTORATION SUCCESSFUL from ${r.id||a} (${t} items)`),!0}catch(o){console.warn(`⚠️ Failed to restore from ${a}:`,o);continue}}return console.error("❌ ALL BACKUP RESTORATION ATTEMPTS FAILED"),this.restoreFromAlternativeSources()}catch(s){return console.error("❌ RESTORATION PROCESS FAILED:",s),!1}}static restoreFromAlternativeSources(){console.log("🔍 Trying alternative restoration sources...");try{const s=Object.keys(localStorage).filter(a=>this.CRITICAL_KEYS.some(o=>a.startsWith(`${o}_daily_`)));if(s.length>0){console.log(`📅 Found ${s.length} daily backups`);for(const a of s.sort().reverse())try{const o=JSON.parse(localStorage.getItem(a));if(Array.isArray(o)&&o.length>0){const r=a.split("_daily_")[0];return localStorage.setItem(r,JSON.stringify(o)),console.log(`✅ RESTORED from daily backup: ${r} (${o.length} items)`),!0}}catch{continue}}for(const a of this.CRITICAL_KEYS)try{const o=localStorage.getItem(`${a}_backup_rolling`);if(o){const r=JSON.parse(o);if(r.length>0){const i=r[r.length-1];if(i.data&&i.data.length>0)return localStorage.setItem(a,JSON.stringify(i.data)),console.log(`✅ RESTORED from rolling backup: ${a} (${i.data.length} items)`),!0}}}catch{continue}return console.log("🔧 Initializing empty data structures..."),this.CRITICAL_KEYS.forEach(a=>{localStorage.setItem(a,JSON.stringify([]))}),!1}catch(s){return console.error("❌ Alternative restoration failed:",s),!1}}static checkDataIntegrity(){const s=[];return this.CRITICAL_KEYS.forEach(a=>{try{const o=localStorage.getItem(a);if(!o){s.push(`Missing ${a} data`);return}const r=JSON.parse(o);Array.isArray(r)||s.push(`${a} is not an array`)}catch(o){s.push(`${a} data is corrupted: ${o}`)}}),{valid:s.length===0,issues:s}}static safeDataOperation(s,a="data operation"){this.createEmergencyBackup();try{console.log(`🔄 EXECUTING: ${a}`);const o=s();return console.log(`✅ COMPLETED: ${a}`),o}catch(o){throw console.error(`❌ FAILED: ${a}`,o),console.log("🚨 Attempting automatic recovery..."),this.restoreFromLatestBackup(),o}}static cleanupOldBackups(){try{const s=Object.keys(localStorage).filter(a=>a.startsWith("backup_emergency_")).sort();for(;s.length>this.MAX_BACKUPS;){const a=s.shift();localStorage.removeItem(a),console.log(`🗑️ Removed old backup: ${a}`)}}catch(s){console.warn("⚠️ Failed to cleanup old backups:",s)}}static forceSyncWithProtection(){this.safeDataOperation(()=>{window.dispatchEvent(new CustomEvent("forceSyncWithProtection"))},"Force sync with data protection")}static createRecoveryBackup(){console.log("🆘 Creating recovery backup with default data...");const s=new Date().toISOString(),a=`recovery_${Date.now()}`,o={timestamp:s,id:a,version:"1.0.0",works:[],pools:[],maintenance:[],clients:[]};try{return localStorage.setItem(`backup_emergency_${a}`,JSON.stringify(o)),this.CRITICAL_KEYS.forEach(r=>{localStorage.setItem(r,JSON.stringify([]))}),console.log(`✅ RECOVERY BACKUP CREATED: ${a}`),a}catch(r){return console.error("❌ FAILED TO CREATE RECOVERY BACKUP:",r),""}}static getProtectionStatus(){const s=Object.keys(localStorage).filter(r=>r.startsWith("backup_emergency_")),a=this.checkDataIntegrity();let o=0;return this.CRITICAL_KEYS.forEach(r=>{try{const i=JSON.parse(localStorage.getItem(r)||"[]");o+=i.length}catch{}}),{backupsAvailable:s.length,lastBackup:s.length>0?s[s.length-1]:null,dataIntegrity:a,protectionActive:!0,currentDataCount:o}}}ae(Qs,"CRITICAL_KEYS",["works","pools","maintenance","clients"]),ae(Qs,"MAX_BACKUPS",10);class Vi{static scanAllLocalStorage(){console.log("🔍 EMERGENCY SCAN: Scanning all localStorage...");const s={},a=Object.keys(localStorage);return console.log(`📋 Found ${a.length} localStorage keys:`,a),a.forEach(o=>{try{const r=localStorage.getItem(o);if(r)try{const i=JSON.parse(r);s[o]=i,console.log(`✅ ${o}:`,Array.isArray(i)?`${i.length} items`:typeof i)}catch{s[o]=r,console.log(`📝 ${o}: ${r.substring(0,50)}${r.length>50?"...":""}`)}}catch(r){console.warn(`⚠️ Error reading ${o}:`,r)}}),s}static findAnyBackupData(){console.log("🔍 EMERGENCY SEARCH: Looking for any backup data...");const s=this.scanAllLocalStorage(),a={works:[],pools:[],maintenance:[],clients:[]};return Object.keys(s).forEach(o=>{const r=s[o];if(o==="works"&&Array.isArray(r)&&(a.works=r,console.log(`✅ Found works data: ${r.length} items`)),o==="pools"&&Array.isArray(r)&&(a.pools=r,console.log(`✅ Found pools data: ${r.length} items`)),o==="maintenance"&&Array.isArray(r)&&(a.maintenance=r,console.log(`✅ Found maintenance data: ${r.length} items`)),o==="clients"&&Array.isArray(r)&&(a.clients=r,console.log(`✅ Found clients data: ${r.length} items`)),o.includes("backup")&&typeof r=="object"&&r!==null&&(console.log(`🔍 Checking backup: ${o}`),r.works&&Array.isArray(r.works)&&r.works.length>0&&(a.works=[...a.works,...r.works],console.log(`✅ Recovered works from ${o}: ${r.works.length} items`)),r.pools&&Array.isArray(r.pools)&&r.pools.length>0&&(a.pools=[...a.pools,...r.pools],console.log(`✅ Recovered pools from ${o}: ${r.pools.length} items`)),r.maintenance&&Array.isArray(r.maintenance)&&r.maintenance.length>0&&(a.maintenance=[...a.maintenance,...r.maintenance],console.log(`✅ Recovered maintenance from ${o}: ${r.maintenance.length} items`)),r.clients&&Array.isArray(r.clients)&&r.clients.length>0&&(a.clients=[...a.clients,...r.clients],console.log(`✅ Recovered clients from ${o}: ${r.clients.length} items`))),(o.includes("daily")||o.includes("rolling"))&&Array.isArray(r)&&r.length>0){const i=o.split("_")[0];["works","pools","maintenance","clients"].includes(i)&&(a[i]=[...a[i],...r],console.log(`✅ Recovered ${i} from ${o}: ${r.length} items`))}}),["works","pools","maintenance","clients"].forEach(o=>{if(a[o].length>0){const r=new Set;a[o]=a[o].filter(i=>r.has(i.id)?!1:(r.add(i.id),!0)),console.log(`🔧 Deduplicated ${o}: ${a[o].length} unique items`)}}),a}static executeEmergencyRecovery(){console.log("🚨 EXECUTING EMERGENCY RECOVERY...");try{const s=this.findAnyBackupData(),a={works:s.works.length>0?s.works:this.MINIMAL_DATA.works,pools:s.pools.length>0?s.pools:this.MINIMAL_DATA.pools,maintenance:s.maintenance.length>0?s.maintenance:this.MINIMAL_DATA.maintenance,clients:s.clients.length>0?s.clients:this.MINIMAL_DATA.clients};Object.keys(a).forEach(r=>{localStorage.setItem(r,JSON.stringify(a[r])),console.log(`💾 Restored ${r}: ${a[r].length} items`)});const o={timestamp:new Date().toISOString(),id:`emergency_recovery_${Date.now()}`,version:"1.0.0",source:"emergency_recovery",...a};return localStorage.setItem(`backup_emergency_${o.id}`,JSON.stringify(o)),console.log("��� EMERGENCY RECOVERY COMPLETED"),console.log("📊 Final counts:",{works:a.works.length,pools:a.pools.length,maintenance:a.maintenance.length,clients:a.clients.length}),!0}catch(s){console.error("❌ EMERGENCY RECOVERY FAILED:",s);try{return console.log("🆘 LAST RESORT: Creating minimal working structure..."),Object.keys(this.MINIMAL_DATA).forEach(a=>{localStorage.setItem(a,JSON.stringify(this.MINIMAL_DATA[a]))}),console.log("✅ MINIMAL STRUCTURE CREATED"),!0}catch(a){return console.error("❌ EVEN MINIMAL RECOVERY FAILED:",a),!1}}}static validateRecovery(){try{const s=[];let a=!0;return["works","pools","maintenance","clients"].forEach(o=>{try{const r=JSON.parse(localStorage.getItem(o)||"[]");Array.isArray(r)?s.push(`✅ ${o}: ${r.length} items`):(s.push(`❌ ${o}: Invalid format`),a=!1)}catch{s.push(`❌ ${o}: Error reading data`),a=!1}}),{success:a,report:s.join(`
`)}}catch(s){return{success:!1,report:`❌ Validation failed: ${s}`}}}static performCompleteRecovery(){console.log("🚨🚨🚨 CRITICAL DATA RECOVERY INITIATED 🚨🚨🚨");try{if(!this.executeEmergencyRecovery())return{success:!1,message:"❌ Recovery failed completely. Manual intervention required."};const a=this.validateRecovery();return{success:a.success,message:a.success?`✅ RECOVERY SUCCESSFUL!

${a.report}

��� Please refresh the page.`:`⚠️ PARTIAL RECOVERY:

${a.report}

🔄 Please refresh the page and check data.`}}catch(s){return console.error("❌ COMPLETE RECOVERY FAILED:",s),{success:!1,message:`❌ Critical error during recovery: ${s}`}}}}ae(Vi,"MINIMAL_DATA",{works:[],pools:[],maintenance:[],clients:[]});class Yr{static checkAbsoluteEmpty(){const s=["works","pools","maintenance","clients"];for(const a of s)try{const o=localStorage.getItem(a);if(o&&o!=="null"&&o!=="undefined"){const r=JSON.parse(o);if(Array.isArray(r))return console.log(`✅ Found existing ${a}: ${r.length} items`),!1}}catch(o){console.warn(`⚠️ Error checking ${a}:`,o)}return console.log("🚨 SYSTEM IS COMPLETELY EMPTY!"),!0}static forceCreateMinimalStructure(){console.log("🔧 FORCING MINIMAL STRUCTURE CREATION..."),Object.entries(this.REQUIRED_STRUCTURE).forEach(([s,a])=>{try{localStorage.setItem(s,JSON.stringify(a)),console.log(`✅ Created ${s}: ${a.length} items`)}catch(o){console.error(`❌ Failed to create ${s}:`,o);try{localStorage.setItem(s,JSON.stringify([])),console.log(`🔧 Fallback: Created empty ${s} array`)}catch(r){console.error(`❌ Even fallback failed for ${s}:`,r)}}})}static verifyStructure(){console.log("🔍 VERIFYING CREATED STRUCTURE...");const s=["works","pools","maintenance","clients"];let a=!0;for(const o of s)try{const r=localStorage.getItem(o);if(!r){console.error(`❌ Missing ${o} in localStorage`),a=!1;continue}const i=JSON.parse(r);if(!Array.isArray(i)){console.error(`❌ ${o} is not an array:`,typeof i),a=!1;continue}console.log(`✅ ${o}: ${i.length} items, valid array`)}catch(r){console.error(`❌ Error verifying ${o}:`,r),a=!1}return a}static createInitialBackup(){console.log("💾 CREATING INITIAL BACKUP...");try{const s={timestamp:new Date().toISOString(),id:`force_init_${Date.now()}`,version:"1.0.0",source:"force_initialization",type:"initial_setup"};["works","pools","maintenance","clients"].forEach(a=>{try{const o=JSON.parse(localStorage.getItem(a)||"[]");s[a]=o}catch{s[a]=[]}}),localStorage.setItem(`backup_emergency_${s.id}`,JSON.stringify(s)),console.log("✅ Initial backup created:",s.id)}catch(s){console.error("❌ Failed to create initial backup:",s)}}static executeForceInitialization(){console.log("🚨🚨🚨 EXECUTING FORCE INITIALIZATION 🚨🚨🚨");try{return this.checkAbsoluteEmpty()?(console.log("🔧 System is empty, creating minimal structure..."),this.forceCreateMinimalStructure(),this.verifyStructure()?(this.createInitialBackup(),{success:!0,message:`✅ SYSTEM INITIALIZED!

Minimal working structure created.
Page will reload automatically.`}):{success:!1,message:"❌ Failed to create valid structure. Manual intervention required."}):(console.log("ℹ️ System has some data, checking integrity..."),this.verifyStructure()?{success:!0,message:"✅ System structure is valid. No initialization needed."}:(console.log("🔧 Structure is invalid, forcing recreation..."),this.forceCreateMinimalStructure(),this.createInitialBackup(),{success:!0,message:`✅ STRUCTURE REPAIRED!

Fixed invalid data structure.
Page will reload automatically.`}))}catch(s){console.error("❌ FORCE INITIALIZATION FAILED:",s);try{return console.log("🆘 LAST RESORT: Creating empty arrays..."),["works","pools","maintenance","clients"].forEach(a=>{localStorage.setItem(a,JSON.stringify([]))}),{success:!0,message:`⚠️ MINIMAL RECOVERY

Created empty data structures.
System should work but will be empty.
Page will reload automatically.`}}catch(a){return console.error("❌ EVEN LAST RESORT FAILED:",a),{success:!1,message:`❌ COMPLETE FAILURE

Unable to initialize system.
Please clear localStorage and refresh page.`}}}}static diagnoseSystem(){console.log("🔍 SYSTEM DIAGNOSIS...");const s=[];s.push("=== SYSTEM DIAGNOSIS REPORT ==="),s.push(`Timestamp: ${new Date().toISOString()}`),s.push("");try{const o=Object.keys(localStorage);s.push(`LocalStorage keys: ${o.length}`),s.push(`Keys: ${o.join(", ")}`),s.push("")}catch(o){s.push(`LocalStorage error: ${o}`),s.push("")}["works","pools","maintenance","clients"].forEach(o=>{try{const r=localStorage.getItem(o);if(!r)s.push(`❌ ${o}: MISSING`);else{const i=JSON.parse(r);Array.isArray(i)?s.push(`✅ ${o}: ${i.length} items`):s.push(`⚠️ ${o}: Invalid format (${typeof i})`)}}catch(r){s.push(`❌ ${o}: Error - ${r}`)}}),s.push(""),s.push("=== END DIAGNOSIS ===");const a=s.join(`
`);return console.log(a),a}}ae(Yr,"REQUIRED_STRUCTURE",{works:[],pools:[],maintenance:[],clients:[]});const mc=()=>{var C,h,y,S,E;const[n,s]=m.useState(()=>Qs.getProtectionStatus()),[a,o]=m.useState(!1),[r,i]=m.useState(null),[t,u]=m.useState([]);m.useEffect(()=>{const N=Object.keys(localStorage).filter(D=>D.startsWith("backup_emergency_")).sort().reverse();u(N)},[]);const d=async()=>{o(!0),i(null);try{console.log("🚨 MANUAL RESTORE INITIATED"),Qs.createEmergencyBackup(),Qs.restoreFromLatestBackup()?(i("✅ Dados restaurados com sucesso! A página será recarregada..."),setTimeout(()=>{window.location.reload()},2e3)):(console.log("🆘 Creating recovery backup..."),Qs.createRecoveryBackup()?(i("⚠️ Backup de recuperação criado. Dados inicializados como vazios. A página será recarregada..."),setTimeout(()=>{window.location.reload()},2e3)):i("❌ Falha completa na restauração. Contacte o suporte técnico."))}catch(N){console.error("❌ Restoration error:",N),i(`❌ Erro crítico na restauração: ${N}`);try{Qs.createRecoveryBackup(),i(D=>`${D}
🆘 Backup de emergência criado.`)}catch(D){console.error("❌ Even emergency backup failed:",D)}}finally{o(!1)}},l=()=>{const N=Qs.createEmergencyBackup();N&&(i(`✅ Backup manual criado: ${N}`),setTimeout(()=>{const D=Object.keys(localStorage).filter(p=>p.startsWith("backup_emergency_")).sort().reverse();u(D)},100))},f=()=>{try{const N={works:JSON.parse(localStorage.getItem("works")||"[]"),pools:JSON.parse(localStorage.getItem("pools")||"[]"),maintenance:JSON.parse(localStorage.getItem("maintenance")||"[]"),clients:JSON.parse(localStorage.getItem("clients")||"[]"),exportedAt:new Date().toISOString()},D=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),p=URL.createObjectURL(D),b=document.createElement("a");b.href=p,b.download=`leirisonda_backup_${new Date().toISOString().split("T")[0]}.json`,b.click(),URL.revokeObjectURL(p),i("✅ Dados exportados para ficheiro!")}catch(N){i(`❌ Erro na exportação: ${N}`)}},g=(()=>{const N=JSON.parse(localStorage.getItem("works")||"[]"),D=JSON.parse(localStorage.getItem("pools")||"[]"),p=JSON.parse(localStorage.getItem("maintenance")||"[]"),b=JSON.parse(localStorage.getItem("clients")||"[]");return{works:N,pools:D,maintenance:p,clients:b}})();return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(me,{className:"h-6 w-6 text-yellow-600 mt-1 mr-3"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:145,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"🔍 Diagnóstico Instantâneo"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:147,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-yellow-800 mb-4",children:"Execute primeiro para diagnosticar problemas no sistema."},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:150,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>{const N=Yr.diagnoseSystem();i(`🔍 DIAGNÓSTICO COMPLETO:

${N}`)},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"🔍 Diagnosticar Sistema"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:153,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:144,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:143,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(ka,{className:"h-6 w-6 text-green-600 mt-1 mr-3"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:169,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"⚡ Inicialização Forçada - SOLUÇÃO INSTANTÂNEA"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:171,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-green-800 mb-4",children:[e.jsxDEV("strong",{children:"RECOMENDADO:"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:175,columnNumber:15},void 0)," Cria estrutura funcional imediatamente. Procura dados existentes ou cria dados de exemplo.",e.jsxDEV("br",{},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:177,columnNumber:15},void 0),e.jsxDEV("strong",{children:"100% SEGURO"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:178,columnNumber:15},void 0)," - Não apaga nada, apenas cria o que falta."]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:174,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>{o(!0),i("⚡ Executando inicialização forçada...");try{const N=Yr.executeForceInitialization();i(`✅ INICIALIZAÇÃO FORÇADA CONCLUÍDA!

`+N.message),N.success&&setTimeout(()=>{window.location.reload()},2e3)}catch(N){i(`❌ Erro na inicialização: ${N}`)}finally{o(!1)}},disabled:a,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2 font-semibold",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"h-5 w-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:210,columnNumber:19},void 0),e.jsxDEV("span",{children:"Inicializando..."},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:211,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:209,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ka,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:215,columnNumber:19},void 0),e.jsxDEV("span",{children:"⚡ SOLUÇÃO INSTANTÂNEA"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:216,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:214,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:181,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:170,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:168,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:167,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(me,{className:"h-6 w-6 text-red-600 mt-1 mr-3"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:227,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"🚨 Centro de Recuperação Avançada"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:229,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-red-800 mb-4",children:'Use estas opções APENAS se a "Solução Instantânea" não funcionar.'},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:232,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:228,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:226,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:225,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 border shadow-sm",children:[e.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Estado Atual dos Dados"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:241,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-blue-600",children:g.works.length},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-blue-800",children:"Obras"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:246,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:g.pools.length},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:253,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-green-800",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:256,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:252,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:g.maintenance.length},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:259,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-orange-800",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:258,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-purple-600",children:g.clients.length},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:265,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-purple-800",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:268,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:264,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:245,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"font-medium text-gray-700",children:"Integridade dos Dados:"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV("span",{className:`font-semibold ${(C=n.dataIntegrity)!=null&&C.valid?"text-green-600":"text-red-600"}`,children:(h=n.dataIntegrity)!=null&&h.valid?"✅ Íntegros":"❌ Corrompidos"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:278,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:274,columnNumber:11},void 0),!((y=n.dataIntegrity)!=null&&y.valid)&&e.jsxDEV("div",{className:"mt-2 text-sm text-red-600",children:["Problemas detectados:"," ",(E=(S=n.dataIntegrity)==null?void 0:S.issues)==null?void 0:E.join(", ")]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:273,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:240,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 border shadow-sm",children:[e.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🚨 Ações de Emergência"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:302,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid gap-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-semibold text-red-900",children:"Restaurar Dados do Backup"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:310,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-red-700",children:"Restaura automaticamente do backup mais recente válido"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:313,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:309,columnNumber:13},void 0),e.jsxDEV("button",{onClick:d,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center space-x-2",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:324,columnNumber:19},void 0),e.jsxDEV("span",{children:"Restaurando..."},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:325,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:323,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(an,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:329,columnNumber:19},void 0),e.jsxDEV("span",{children:"Restaurar Agora"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:330,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:328,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:317,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:308,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-semibold text-blue-900",children:"Backup Manual"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:339,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-blue-700",children:"Cria um backup imediato dos dados atuais"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:340,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:338,columnNumber:13},void 0),e.jsxDEV("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:348,columnNumber:15},void 0),e.jsxDEV("span",{children:"Criar Backup"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:349,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:344,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:337,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-red-100 border-2 border-red-300 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-semibold text-red-900",children:"🚨 Recuperação de Emergência"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:356,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-red-700",children:[e.jsxDEV("strong",{children:"USAR APENAS EM CASO DE PERDA TOTAL DE DADOS!"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:360,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:361,columnNumber:17},void 0),"Procura dados em TODAS as fontes possíveis e reconstrói a base de dados."]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:359,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:355,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>{if(confirm(`🚨 ATENÇÃO: Isto irá sobrescrever todos os dados atuais!

Esta função procura dados perdidos em TODO o localStorage e reconstrói a base de dados.

Usar apenas se perdeu TODOS os dados.

Continuar?`)){o(!0),i("🚨 Executando recuperação de emergência crítica...");try{const N=Vi.performCompleteRecovery();N.success?(i(`✅ RECUPERAÇÃO DE EMERGÊNCIA CONCLUÍDA!

`+N.message),setTimeout(()=>{window.location.reload()},3e3)):i(`❌ RECUPERAÇÃO DE EMERGÊNCIA FALHOU!

`+N.message)}catch(N){i(`❌ Erro crítico na recuperação: ${N}`)}finally{o(!1)}}},disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center space-x-2",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:410,columnNumber:19},void 0),e.jsxDEV("span",{children:"Recuperando..."},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:411,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:409,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:415,columnNumber:19},void 0),e.jsxDEV("span",{children:"SOS Recovery"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:416,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:414,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:366,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:354,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-semibold text-green-900",children:"Exportar Dados"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:425,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-green-700",children:"Descarrega todos os dados num ficheiro JSON"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:426,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:424,columnNumber:13},void 0),e.jsxDEV("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:434,columnNumber:15},void 0),e.jsxDEV("span",{children:"Exportar"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:435,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:430,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:423,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"font-semibold text-yellow-900",children:"Debug de Backups"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:442,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-700",children:"Listar todos os backups e diagnosticar problemas"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:445,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:441,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>{console.log("🔍 DEBUGGING BACKUP SYSTEM...");const N=Object.keys(localStorage),D=N.filter(p=>p.includes("backup"));console.log("📋 All localStorage keys:",N.length),console.log("📋 Backup keys found:",D),D.forEach(p=>{try{const b=localStorage.getItem(p);if(b){const x=JSON.parse(b);console.log(`📦 ${p}:`,Object.keys(x))}}catch(b){console.error(`❌ Failed to parse ${p}:`,b)}}),["works","pools","maintenance","clients"].forEach(p=>{try{const b=localStorage.getItem(p),x=b?JSON.parse(b):null;console.log(`📊 Current ${p}:`,(x==null?void 0:x.length)||0,"items")}catch(b){console.error(`❌ Failed to check ${p}:`,b)}}),i("🔍 Debug info logged to console. Check browser developer tools.")},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 flex items-center space-x-2",children:[e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:496,columnNumber:15},void 0),e.jsxDEV("span",{children:"Debug"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:497,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:449,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:440,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:306,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:301,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 border shadow-sm",children:[e.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["💾 Backups Disponíveis (",n.backupsAvailable,")"]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:505,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[t.map((N,D)=>e.jsxDEV("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded text-sm",children:[e.jsxDEV("span",{className:"font-mono",children:N.replace("backup_emergency_","")},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:515,columnNumber:15},void 0),e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded ${D===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:D===0?"Mais recente":`${D+1}º`},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:518,columnNumber:15},void 0)]},N,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:511,columnNumber:13},void 0)),t.length===0&&e.jsxDEV("div",{className:"text-center text-gray-500 py-4",children:"Nenhum backup de emergência encontrado"},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:531,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:509,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:504,columnNumber:7},void 0),r&&e.jsxDEV("div",{className:`p-4 rounded-lg ${r.includes("✅")?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:r},void 0,!1,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:540,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataRecovery.tsx",lineNumber:141,columnNumber:5},void 0)};function Ai(){const[n,s]=m.useState([]),[a,o]=m.useState(!0),r=()=>{try{const t=nn();console.log("✅ Utilizadores carregados no hook:",t.length),s(t),o(!1)}catch(t){console.error("❌ Erro ao carregar utilizadores:",t),s([{email:"gongonsilva@gmail.com",name:"Gonçalo Fonseca",role:"super_admin"}]),o(!1)}};return m.useEffect(()=>{r();const t=u=>{u.key==="authorizedUsers"&&r()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),{users:n,isLoading:a,updateUsers:t=>{Ye.setJson("authorizedUsers",t),s(t),window.dispatchEvent(new CustomEvent("authorizedUsersChanged",{detail:t}))},reloadUsers:r}}const uc=({currentUser:n})=>{const{users:s,updateUsers:a,isLoading:o}=Ai();m.useEffect(()=>{!o&&s.length===0&&(console.log("⚠️ Nenhum utilizador autorizado encontrado, inicializando..."),a([{email:"gongonsilva@gmail.com",name:"Gonçalo Fonseca",role:"super_admin"}]))},[o,s.length,a]);const[r,i]=m.useState(null),[t,u]=m.useState({email:"",name:"",role:"technician",password:""}),[d,l]=m.useState(!1),[f,v]=m.useState(""),[g,C]=m.useState(""),[h,y]=m.useState(null),[S,E]=m.useState(null),[N,D]=m.useState(!1),p=M=>{a(M),console.log("✅ Utilizadores atualizados:",M.length)},b=M=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M),x=M=>{if(!M.email.trim())return"Email é obrigatório";if(!b(M.email))return"Email inválido";if(!M.name.trim())return"Nome é obrigatório";if(!M.role)return"Role é obrigatória";if(!M.password||M.password.trim().length<4)return"Password deve ter pelo menos 4 caracteres";const k=s.find(B=>B.email.toLowerCase()===M.email.toLowerCase());return k&&(!r||k.email!==r.email)?"Email já existe":""},w=()=>{const M=x(t);if(M){v(M);return}const k=[...s,{email:t.email.toLowerCase(),name:t.name,role:t.role}];p(k);try{const B=Ye.getJson("app-users",[]),K={id:Date.now(),uid:`user_${Date.now()}`,name:t.name,email:t.email.toLowerCase(),password:t.password,role:t.role,permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:new Date().toISOString()};B.push(K),Ye.setJson("app-users",B);const xe=Ye.getJson("mock-users",{});xe[K.uid]={uid:K.uid,email:K.email,name:K.name,role:K.role,permissions:K.permissions,active:K.active,createdAt:K.createdAt},Ye.setJson("mock-users",xe),window.dispatchEvent(new CustomEvent("usersUpdated")),console.log("✅ Utilizador criado com sucesso:",K.email)}catch(B){console.error("❌ Erro ao criar utilizador no sistema principal:",B),v("Erro ao guardar utilizador. Tente novamente.");return}u({email:"",name:"",role:"technician",password:""}),l(!1),v("")},U=M=>{i({...M}),v("")},F=()=>{if(!r)return;const M={...r,password:"temppass123"},k=x(M);if(k&&!k.includes("Password")){v(k);return}const B=s.map(K=>K.email===r.email?{...r}:K);p(B),i(null),v("")},P=()=>{i(null),v("")},O=M=>{if(M===(n==null?void 0:n.email)){v("Não pode eliminar o seu próprio utilizador");return}if(confirm(`Tem a certeza que quer eliminar o utilizador com email: ${M}?`)){const k=s.filter(B=>B.email!==M);p(k),v("")}},te=M=>{switch(M){case"super_admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"technician":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Q=M=>{switch(M){case"super_admin":return e.jsxDEV(Xe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:235,columnNumber:16},void 0);case"manager":return e.jsxDEV(uo,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:237,columnNumber:16},void 0);case"technician":return e.jsxDEV(Xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:239,columnNumber:16},void 0);default:return e.jsxDEV(Xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:241,columnNumber:16},void 0)}},Ee=M=>{const B=Ye.getJson("app-users",[]).find(K=>K.email.toLowerCase()===M.toLowerCase());return(B==null?void 0:B.permissions)||null},z=M=>{const k=Ee(M);k?(E({...k}),y(M)):(console.log(`⚠️ Criando permissões padrão para: ${M}`),E({obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!1,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}}),y(M))},fe=()=>{if(!(!h||!S))try{const M=Ye.getJson("app-users",[]);let k=M.findIndex(xe=>xe.email.toLowerCase()===h.toLowerCase());if(k!==-1)M[k].permissions={...S};else{console.log(`⚠️ Utilizador ${h} não encontrado em app-users, criando entrada...`);const xe=s.find(Fe=>Fe.email.toLowerCase()===h.toLowerCase());if(xe){const Fe={id:Date.now(),uid:`user_${Date.now()}`,name:xe.name,email:xe.email.toLowerCase(),password:"temppass123",role:xe.role,permissions:{...S},active:!0,createdAt:new Date().toISOString()};M.push(Fe)}}Ye.setJson("app-users",M);const B=JSON.parse(localStorage.getItem("mock-users")||"{}"),K=M.find(xe=>xe.email.toLowerCase()===h.toLowerCase());K&&(B[K.uid]={uid:K.uid,email:K.email,name:K.name,role:K.role,permissions:K.permissions,active:K.active,createdAt:K.createdAt},localStorage.setItem("mock-users",JSON.stringify(B))),window.dispatchEvent(new CustomEvent("usersUpdated")),console.log("✅ Permissões atualizadas com sucesso para:",h),v(""),C(`Permissões atualizadas com sucesso para ${h}`),D(!1),setTimeout(()=>{y(null),E(null),C("")},2e3)}catch(M){console.error("❌ Erro ao guardar permissões:",M),v("Erro ao guardar permissões. Tente novamente."),D(!1)}},G=()=>{y(null),E(null),v(""),C(""),D(!1)},Ss=(M,k,B)=>{S&&E({...S,[M]:{...S[M],[k]:B}})};return o?e.jsxDEV("div",{className:"flex items-center justify-center py-12",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:396,columnNumber:11},void 0),e.jsxDEV("p",{className:"mt-2 text-gray-600",children:"A carregar utilizadores..."},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:397,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:395,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:394,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:408,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-1",children:"Gerir utilizadores autorizados e suas permissões (Sistema Unificado)"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:411,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:407,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-3",children:[e.jsxDEV("button",{onClick:()=>{const M=JSON.parse(localStorage.getItem("app-users")||"[]"),k=JSON.parse(localStorage.getItem("mock-users")||"{}"),B=JSON.parse(localStorage.getItem("authorizedUsers")||"[]");alert(`📊 Diagnóstico de Utilizadores:

🔵 app-users: ${M.length} utilizadores
🟡 mock-users: ${Object.keys(k).length} utilizadores
🟢 authorizedUsers: ${B.length} utilizadores

Este gestor sincroniza todos os sistemas automaticamente.`)},className:"bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-gray-700",children:[e.jsxDEV(Xe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:439,columnNumber:13},void 0),e.jsxDEV("span",{children:"Diagnóstico"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:440,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:416,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-blue-700",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:446,columnNumber:13},void 0),e.jsxDEV("span",{children:"Adicionar Utilizador"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:447,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:442,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:415,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:406,columnNumber:7},void 0),f&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("p",{className:"text-red-800 text-sm",children:f},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:455,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:454,columnNumber:9},void 0),g&&e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("p",{className:"text-green-800 text-sm font-medium",children:["✅ ",g]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:462,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:461,columnNumber:9},void 0),d&&e.jsxDEV("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Adicionar Novo Utilizador"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:471,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:476,columnNumber:15},void 0),e.jsxDEV("input",{type:"email",value:t.email,onChange:M=>u({...t,email:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"exemplo@empresa.com"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:479,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:475,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:490,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:t.name,onChange:M=>u({...t,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do utilizador"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:493,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:489,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:504,columnNumber:15},void 0),e.jsxDEV("input",{type:"password",value:t.password||"",onChange:M=>u({...t,password:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Palavra-passe (mín. 4 caracteres)",minLength:4},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:507,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:503,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:519,columnNumber:15},void 0),e.jsxDEV("select",{value:t.role,onChange:M=>u({...t,role:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"technician",children:"Técnico"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:529,columnNumber:17},void 0),e.jsxDEV("option",{value:"manager",children:"Gestor"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:530,columnNumber:17},void 0),e.jsxDEV("option",{value:"super_admin",children:"Super Admin"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:531,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:522,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:518,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:474,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsxDEV("button",{onClick:()=>{l(!1),u({email:"",name:"",role:"technician",password:""}),v("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:536,columnNumber:13},void 0),e.jsxDEV("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Adicionar"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:551,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:535,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:470,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsxDEV("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxDEV("h3",{className:"text-lg font-medium",children:["Utilizadores Autorizados (",s.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:564,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:563,columnNumber:9},void 0),e.jsxDEV("div",{className:"divide-y divide-gray-200",children:s.map(M=>e.jsxDEV("div",{className:"px-6 py-4",children:(r==null?void 0:r.email)===M.email?e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:e.jsxDEV("input",{type:"email",value:r.email,onChange:k=>i({...r,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:575,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:574,columnNumber:19},void 0),e.jsxDEV("div",{children:e.jsxDEV("input",{type:"text",value:r.name,onChange:k=>i({...r,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:588,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:587,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("select",{value:r.role,onChange:k=>i({...r,role:k.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"technician",children:"Técnico"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:608,columnNumber:23},void 0),e.jsxDEV("option",{value:"manager",children:"Gestor"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:609,columnNumber:23},void 0),e.jsxDEV("option",{value:"super_admin",children:"Super Admin"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:610,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:598,columnNumber:21},void 0),e.jsxDEV("button",{onClick:F,className:"p-2 text-green-600 hover:bg-green-50 rounded",children:e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:616,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:612,columnNumber:21},void 0),e.jsxDEV("button",{onClick:P,className:"p-2 text-gray-600 hover:bg-gray-50 rounded",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:622,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:618,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:597,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:573,columnNumber:17},void 0):e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Xn,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:631,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:M.email},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:633,columnNumber:25},void 0),M.email===(n==null?void 0:n.email)&&e.jsxDEV("span",{className:"text-xs text-blue-600",children:"(Você)"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:637,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:632,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:630,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Xs,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:642,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-gray-900",children:M.name},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:643,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:641,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te(M.role)}`,children:[Q(M.role),e.jsxDEV("span",{className:"ml-1",children:M.role==="super_admin"?"Super Admin":M.role==="manager"?"Gestor":"Técnico"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:650,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:646,columnNumber:23},void 0),(()=>{const k=Ee(M.email);if(!k)return null;const B=Object.values(k).reduce((K,xe)=>K+Object.values(xe).filter(Boolean).length,0);return e.jsxDEV("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[String(B)," permissões"]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:675,columnNumber:27},void 0)})()]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:645,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:629,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxDEV("button",{onClick:()=>U(M),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar utilizador",children:e.jsxDEV(ei,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:688,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:683,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>z(M.email),className:"p-2 text-purple-600 hover:bg-purple-50 rounded",title:"Editar permissões",children:e.jsxDEV(Xe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:695,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:690,columnNumber:21},void 0),M.email!==(n==null?void 0:n.email)&&e.jsxDEV("button",{onClick:()=>O(M.email),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:703,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:698,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:682,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:628,columnNumber:17},void 0)},M.email,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:570,columnNumber:13},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:568,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:562,columnNumber:7},void 0),s.length===0&&e.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:[e.jsxDEV(Xs,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:716,columnNumber:11},void 0),e.jsxDEV("p",{children:"Nenhum utilizador encontrado"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:717,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:715,columnNumber:9},void 0),h&&S&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h3",{className:"text-xl font-semibold",children:["Editar Permissões - ",h]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:727,columnNumber:17},void 0),e.jsxDEV("button",{onClick:G,className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(ve,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:734,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:730,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:726,columnNumber:15},void 0),e.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Atalhos rápidos:"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:740,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV("button",{onClick:()=>{E({obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}})},className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Todas as Permissões"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:744,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{E({obras:{view:!0,create:!1,edit:!1,delete:!1},manutencoes:{view:!0,create:!1,edit:!1,delete:!1},piscinas:{view:!0,create:!1,edit:!1,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}})},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Apenas Visualização"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:790,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{E({obras:{view:!0,create:!0,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!1,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}})},className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",children:"Técnico Padrão"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:836,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{E({obras:{view:!1,create:!1,edit:!1,delete:!1},manutencoes:{view:!1,create:!1,edit:!1,delete:!1},piscinas:{view:!1,create:!1,edit:!1,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!1,create:!1,edit:!1,delete:!1},clientes:{view:!1,create:!1,edit:!1,delete:!1}})},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Remover Todas"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:882,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:743,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:739,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid gap-6",children:Object.entries(S).map(([M,k])=>e.jsxDEV("div",{className:"border rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-3 capitalize",children:M==="obras"?"Obras":M==="manutencoes"?"Manutenções":M==="piscinas"?"Piscinas":M==="utilizadores"?"Utilizadores":M==="relatorios"?"Relatórios":M==="clientes"?"Clientes":M},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:935,columnNumber:23},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(k).map(([B,K])=>e.jsxDEV("label",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"checkbox",checked:!!K,onChange:xe=>Ss(M,B,xe.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:958,columnNumber:31},void 0),e.jsxDEV("span",{className:"text-sm text-gray-700 capitalize",children:B==="view"?"Ver":B==="create"?"Criar":B==="edit"?"Editar":B==="delete"?"Eliminar":B},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:970,columnNumber:31},void 0)]},B,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:954,columnNumber:29},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:951,columnNumber:23},void 0)]},M,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:934,columnNumber:21},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:931,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[e.jsxDEV("button",{onClick:G,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:991,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{D(!0),fe()},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",disabled:!S||N,children:[N&&e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:1006,columnNumber:21},void 0),e.jsxDEV("span",{children:N?"A guardar...":h&&S?"Guardar Permissões":"A processar..."},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:1008,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:997,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:990,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:725,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:724,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:723,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserManager.tsx",lineNumber:404,columnNumber:5},void 0)};class pc{checkLocalStorageData(){const s={};try{const a=localStorage.getItem("pools");s.pools=a?JSON.parse(a):[];const o=localStorage.getItem("works");s.works=o?JSON.parse(o):[];const r=localStorage.getItem("maintenance");s.maintenance=r?JSON.parse(r):[];const i=localStorage.getItem("clients");s.clients=i?JSON.parse(i):[],console.log("📊 Dados encontrados no localStorage:",{pools:s.pools.length,works:s.works.length,maintenance:s.maintenance.length,clients:s.clients.length})}catch(a){console.error("❌ Erro ao verificar localStorage:",a)}return s}async migrateToFirestore(){const s={success:!1,migrated:0,errors:[],details:[]};try{if(!await Ne.testConnection())return s.errors.push("Firestore não está disponível"),s;const o=this.checkLocalStorageData();let r=0;for(const i of o.pools)try{await Ne.saveFormData("pools",i)&&(r++,s.details.push(`✅ Piscina migrada: ${i.name}`))}catch(t){s.errors.push(`❌ Erro ao migrar piscina ${i.name}: ${t}`)}for(const i of o.works)try{await Ne.saveFormData("works",i)&&(r++,s.details.push(`✅ Obra migrada: ${i.title}`))}catch(t){s.errors.push(`❌ Erro ao migrar obra ${i.title}: ${t}`)}for(const i of o.maintenance)try{await Ne.saveFormData("maintenance",i)&&(r++,s.details.push(`✅ Manutenção migrada: ${i.type}`))}catch(t){s.errors.push(`❌ Erro ao migrar manutenção ${i.type}: ${t}`)}for(const i of o.clients)try{await Ne.saveFormData("clients",i)&&(r++,s.details.push(`✅ Cliente migrado: ${i.name}`))}catch(t){s.errors.push(`❌ Erro ao migrar cliente ${i.name}: ${t}`)}s.migrated=r,s.success=r>0||o.pools.length+o.works.length+o.maintenance.length+o.clients.length===0,console.log("🎉 Migração concluída:",s)}catch(a){s.errors.push(`❌ Erro geral na migração: ${a}`)}return s}async testFirestoreData(){const s={};try{if(!await Ne.testConnection())return console.log("⚠️ Firestore não disponível para teste"),s;s.pools=await Ne.getCollection("pools"),s.works=await Ne.getCollection("works"),s.maintenance=await Ne.getCollection("maintenance"),s.clients=await Ne.getCollection("clients"),console.log("🧪 Teste de dados Firestore:",{pools:s.pools.length,works:s.works.length,maintenance:s.maintenance.length,clients:s.clients.length})}catch(a){console.error("❌ Erro ao testar dados Firestore:",a)}return s}async createTestData(){if(!await Ne.testConnection()){console.log("⚠️ Firestore não disponível para criar dados de teste");return}try{console.log("🧪 Criando dados de teste..."),await Ne.saveFormData("clients",{name:"Cliente Teste",email:"teste@cliente.com",phone:"123456789",address:"Rua Teste, 123",nif:"123456789"}),await Ne.saveFormData("pools",{name:"Piscina Teste",location:"Localização Teste",client:"Cliente Teste",type:"Exterior",status:"Ativa",dimensions:"10x5m"}),await Ne.saveFormData("works",{title:"Obra Teste",description:"Descrição da obra teste",client:"Cliente Teste",location:"Localização Teste",status:"Em progresso",startDate:new Date().toISOString(),estimatedEndDate:new Date(Date.now()+7*24*60*60*1e3).toISOString()}),await Ne.saveFormData("maintenance",{type:"Limpeza",poolName:"Piscina Teste",client:"Cliente Teste",scheduledDate:new Date().toISOString(),status:"Agendada",description:"Manutenção de teste"}),console.log("✅ Dados de teste criados com sucesso")}catch(a){console.error("❌ Erro ao criar dados de teste:",a)}}async runFullMigrationAndTest(){console.log("🚀 Iniciando migração completa e teste...");const s=this.checkLocalStorageData();if(Object.values(s).some(r=>r.length>0)){const r=await this.migrateToFirestore();console.log("📊 Resultado da migração:",r)}else console.log("📭 Nenhum dado local encontrado para migrar"),await this.createTestData();await new Promise(r=>setTimeout(r,1e3));const o=await this.testFirestoreData();console.log("🎯 Migração e teste concluídos!"),console.log("📈 Status final:",{firestoreDisponivel:await Ne.testConnection(),dadosFirestore:Object.keys(o).reduce((r,i)=>(r[i]=o[i].length,r),{})})}}const er=new pc,da=class da{constructor(){ae(this,"warningShown",!1)}static getInstance(){return da.instance||(da.instance=new da),da.instance}async isAvailable(){return!0}async saveLoginData(s){if(!await this.isAvailable())return null;try{const a={email:s.email,rememberMe:s.rememberMe||!1,timestamp:serverTimestamp(),loginAttempt:!0,userAgent:navigator.userAgent,ip:"unknown"},o=await addDoc(collection(this.db,"login_attempts"),a);return console.log("✅ Dados de login gravados com ID:",o.id),o.id}catch(a){return console.error("❌ Erro ao gravar dados de login:",a),null}}async saveFormData(s,a,o){if(!await this.isAvailable())return null;try{const r={...a,timestamp:serverTimestamp(),createdAt:serverTimestamp()};let i;return o?(await setDoc(doc(this.db,s,o),r),i={id:o},console.log(`✅ Dados gravados na coleção "${s}" com ID: ${o}`)):(i=await addDoc(collection(this.db,s),r),console.log(`✅ Dados gravados na coleção "${s}" com ID: ${i.id}`)),i.id}catch(r){return console.error(`❌ Erro ao gravar dados na coleção "${s}":`,r),null}}async updateFormData(s,a,o){if(!this.isAvailable())return console.warn("⚠️ Firestore não disponível - dados não atualizados"),!1;try{const r={...o,updatedAt:serverTimestamp()};return await updateDoc(doc(this.db,s,a),r),console.log(`✅ Documento ${a} atualizado na coleção "${s}"`),!0}catch(r){return console.error(`❌ Erro ao atualizar documento na coleção "${s}":`,r),!1}}async getDocument(s,a){if(!this.isAvailable())return console.warn("⚠️ Firestore não disponível - não foi possível ler documento"),null;try{const o=await getDoc(doc(this.db,s,a));if(o.exists()){const r=o.data();return console.log(`✅ Documento ${a} lido da coleção "${s}"`),{id:o.id,...r}}else return console.log(`📭 Documento ${a} não encontrado na coleção "${s}"`),null}catch(o){return console.error(`❌ Erro ao ler documento da coleção "${s}":`,o),null}}async getCollection(s){if(!this.isAvailable())return console.warn("⚠️ Firestore não disponível - não foi possível ler coleção"),[];try{const a=await getDocs(collection(this.db,s)),o=[];return a.forEach(r=>{o.push({id:r.id,...r.data()})}),console.log(`✅ ${o.length} documentos lidos da coleção "${s}"`),o}catch(a){return console.error(`❌ Erro ao ler coleção "${s}":`,a),[]}}async deleteDocument(s,a){if(!this.isAvailable())return console.warn("⚠️ Firestore não disponível - documento não eliminado"),!1;try{return await deleteDoc(doc(this.db,s,a)),console.log(`✅ Documento ${a} eliminado da coleção "${s}"`),!0}catch(o){return console.error(`❌ Erro ao eliminar documento da coleção "${s}":`,o),!1}}async testConnection(){if(!await this.isAvailable())return console.info("🔍 Firestore não disponível para teste - localStorage está funcionando"),!1;try{const s={test:!0,timestamp:serverTimestamp(),message:"Teste de conectividade Firestore"},a=await addDoc(collection(this.db,"test_connection"),s);return console.log("✅ Teste de escrita bem-sucedido, ID:",a.id),(await getDoc(a)).exists()?(console.log("✅ Teste de leitura bem-sucedido"),await deleteDoc(a),console.log("✅ Documento de teste eliminado"),!0):!1}catch(s){return console.error("❌ Teste de conectividade falhou:",s),!1}}};ae(da,"instance");let Xr=da;const Nc=Xr.getInstance(),fc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState("idle"),[r,i]=m.useState([]),[t,u]=m.useState(!1);m.useEffect(()=>{const g=()=>{try{u(!!Nc)}catch{u(!1)}};g();const C=setInterval(g,2e3);return()=>clearInterval(C)},[]);const d=g=>{i(C=>[...C,`${new Date().toLocaleTimeString()}: ${g}`])},l=async()=>{s(!0),o("running"),i([]);try{if(d("🚀 Iniciando migração e teste..."),!t){d("⚠️ Firestore não está disponível - usando modo local"),o("error");return}d("✅ Firestore disponível e conectado"),d("📊 Verificando dados no localStorage...");const g=er.checkLocalStorageData(),C=Object.values(g).reduce((E,N)=>E+N.length,0);d(`📋 Encontrados ${C} registros no localStorage`),d("🔄 Iniciando migração para Firestore...");const h=await er.migrateToFirestore();h.success?(d(`✅ Migração bem-sucedida: ${h.migrated} registros migrados`),h.details.forEach(E=>d(E))):(d("❌ Falha na migração"),h.errors.forEach(E=>d(E))),C===0&&(d("🧪 Criando dados de teste no Firestore..."),await er.createTestData(),d("✅ Dados de teste criados")),d("🔍 Testando leitura dos dados do Firestore...");const y=await er.testFirestoreData(),S=Object.values(y).reduce((E,N)=>E+N.length,0);d(`📈 Confirmados ${S} registros no Firestore`),Object.entries(y).forEach(([E,N])=>{N.length>0&&d(`  📁 ${E}: ${N.length} registros`)}),d("🎉 Migração e teste concluídos com sucesso!"),o("completed")}catch(g){d(`❌ Erro durante o processo: ${g}`),o("error")}finally{s(!1)}},f=()=>{switch(a){case"running":return e.jsxDEV(Ls,{className:"h-5 w-5 animate-spin text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:125,columnNumber:16},void 0);case"completed":return e.jsxDEV(Z,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:127,columnNumber:16},void 0);case"error":return e.jsxDEV(le,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:129,columnNumber:16},void 0);default:return e.jsxDEV(qr,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:131,columnNumber:16},void 0)}},v=()=>{switch(a){case"running":return"border-blue-300 bg-blue-50";case"completed":return"border-green-300 bg-green-50";case"error":return"border-red-300 bg-red-50";default:return"border-gray-300 bg-white"}};return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Migração e Teste de Dados"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:152,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Migrar dados do localStorage para Firestore e testar funcionalidade"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:151,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsxDEV(pe,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:164,columnNumber:11},void 0),e.jsxDEV("h3",{className:"font-semibold text-blue-900",children:"localStorage"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:165,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-blue-700",children:"Dados locais existentes"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:166,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:163,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-center",children:e.jsxDEV(Dt,{className:"h-8 w-8 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:171,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:170,columnNumber:9},void 0),e.jsxDEV("div",{className:`border rounded-lg p-4 text-center ${t?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxDEV(Ia,{className:`h-8 w-8 mx-auto mb-2 ${t?"text-green-600":"text-red-600"}`},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:182,columnNumber:11},void 0),e.jsxDEV("h3",{className:`font-semibold ${t?"text-green-900":"text-red-900"}`,children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:187,columnNumber:11},void 0),e.jsxDEV("p",{className:`text-sm ${t?"text-green-700":"text-red-700"}`,children:t?"Conectado":"Desconectado"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:194,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:175,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:161,columnNumber:7},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("button",{onClick:l,disabled:n||!t,className:`inline-flex items-center space-x-2 px-6 py-3 rounded-lg font-semibold ${t?"bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[n?e.jsxDEV(Ls,{className:"h-5 w-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:216,columnNumber:13},void 0):e.jsxDEV(No,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:218,columnNumber:13},void 0),e.jsxDEV("span",{children:n?"Executando...":"Executar Migração e Teste"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:220,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:206,columnNumber:9},void 0),!t&&e.jsxDEV("p",{className:"mt-2 text-sm text-red-600",children:"Firestore deve estar conectado para executar migração"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:226,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:205,columnNumber:7},void 0),r.length>0&&e.jsxDEV("div",{className:`border rounded-lg p-4 ${v()}`,children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-3",children:[f(),e.jsxDEV("h3",{className:"font-semibold",children:"Log de Execução"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:237,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:235,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:r.map((g,C)=>e.jsxDEV("div",{className:"text-sm font-mono bg-white/50 rounded px-2 py-1",children:g},C,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:242,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:240,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:234,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h3",{className:"font-semibold mb-2",children:"O que este teste faz:"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:255,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxDEV("li",{children:"• Verifica dados existentes no localStorage"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:257,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Migra dados para Firestore (se existirem)"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:258,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Cria dados de teste (se não existirem dados)"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:259,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Testa leitura dos dados do Firestore"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:260,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Confirma que a migração foi bem-sucedida"},void 0,!1,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:261,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:256,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:254,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/MigrationTester.tsx",lineNumber:149,columnNumber:5},void 0)},bc=()=>{const[n,s]=m.useState({authorizedUsers:[],appUsers:[],localStorageKeys:[],timestamp:new Date().toISOString()}),a=()=>{try{const o=Ye.getJson("authorizedUsers",[]),r=Ye.getJson("app-users",[]),i=[];for(let t=0;t<q.length;t++){const u=q.key(t);u&&i.push(u)}s({authorizedUsers:o,appUsers:r,localStorageKeys:i,timestamp:new Date().toISOString()}),console.log("=== DIAGNÓSTICO DE UTILIZADORES ==="),console.log("📝 authorizedUsers:",o),console.log("👥 app-users:",r),console.log("🔑 localStorage keys:",i)}catch(o){console.error("❌ Erro no diagnóstico:",o)}};return m.useEffect(()=>{a()},[]),e.jsxDEV("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(oe,{className:"h-6 w-6 text-blue-600 mr-3"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:58,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900",children:"Diagnóstico de Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:59,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:57,columnNumber:9},void 0),e.jsxDEV("button",{onClick:a,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsxDEV(X,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:67,columnNumber:11},void 0),"Atualizar"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:63,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:56,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-green-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:76,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-lg font-medium",children:["Utilizadores Autorizados (",n.authorizedUsers.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:77,columnNumber:13},void 0),n.authorizedUsers.length>0?e.jsxDEV(Z,{className:"h-5 w-5 text-green-600 ml-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:81,columnNumber:15},void 0):e.jsxDEV(le,{className:"h-5 w-5 text-red-600 ml-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:83,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:75,columnNumber:11},void 0),n.authorizedUsers.length>0?e.jsxDEV("div",{className:"space-y-2",children:n.authorizedUsers.map((o,r)=>e.jsxDEV("div",{className:"bg-white p-3 rounded border flex justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:o.name},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:94,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-gray-600 ml-2",children:["(",o.email,")"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:95,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:93,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:o.role},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:97,columnNumber:19},void 0)]},r,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:89,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:87,columnNumber:13},void 0):e.jsxDEV("p",{className:"text-red-600",children:"Nenhum utilizador autorizado encontrado!"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:104,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:74,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV(oe,{className:"h-5 w-5 text-purple-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:113,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-lg font-medium",children:["App Users (",n.appUsers.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:114,columnNumber:13},void 0),n.appUsers.length>0?e.jsxDEV(Z,{className:"h-5 w-5 text-green-600 ml-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:118,columnNumber:15},void 0):e.jsxDEV(le,{className:"h-5 w-5 text-red-600 ml-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:120,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:112,columnNumber:11},void 0),n.appUsers.length>0?e.jsxDEV("div",{className:"space-y-2",children:n.appUsers.map((o,r)=>e.jsxDEV("div",{className:"bg-white p-3 rounded border flex justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:o.name},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:131,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-gray-600 ml-2",children:["(",o.email,")"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:132,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:130,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded",children:o.role},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:135,columnNumber:21},void 0),e.jsxDEV("span",{className:`text-sm px-2 py-1 rounded ${o.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.active?"Ativo":"Inativo"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:138,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:134,columnNumber:19},void 0)]},r,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:126,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:124,columnNumber:13},void 0):e.jsxDEV("p",{className:"text-red-600",children:"Nenhum app user encontrado!"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:152,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:111,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-gray-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:159,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-lg font-medium",children:["LocalStorage Keys (",n.localStorageKeys.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:160,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:158,columnNumber:11},void 0),e.jsxDEV("div",{className:"max-h-40 overflow-y-auto",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:n.localStorageKeys.map((o,r)=>e.jsxDEV("span",{className:"text-sm bg-white px-2 py-1 rounded border",children:o},r,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:167,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:165,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:164,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:157,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-sm text-gray-500 text-center",children:["Última atualização:"," ",new Date(n.timestamp).toLocaleString()]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:179,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:72,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UserDiagnostic.tsx",lineNumber:55,columnNumber:5},void 0)},xc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState([]),[r,i]=m.useState([]),{works:t,syncWithFirebase:u,addWork:d}=cn(),l=async()=>{var S;s(!0),o([]);const y=[];try{y.push({status:"warning",message:"Verificando conexão Firebase..."}),J.isReady()?await J.testConnection()?y.push({status:"success",message:"✅ Firebase conectado com sucesso"}):y.push({status:"error",message:"❌ Firebase não responde - problema de conectividade",detail:"Verifique a internet ou configuração Firebase"}):y.push({status:"error",message:"❌ Firebase não inicializado",detail:"Serviço Firebase não está disponível"}),y.push({status:"warning",message:"Verificando dados no Firebase..."});try{const b=await J.syncAllData();b?y.push({status:b.works.length>0?"success":"warning",message:`📊 Firebase: ${b.works.length} obras encontradas`,detail:b.works.length===0?"Não há obras no Firebase - precisa criar algumas":`Obras disponíveis: ${b.works.map(x=>x.title||x.description||"Sem título").join(", ")}`}):y.push({status:"error",message:"❌ Não foi possível acessar dados do Firebase"})}catch(b){y.push({status:"error",message:"❌ Erro ao acessar Firebase",detail:b.message})}y.push({status:t.length>0?"success":"warning",message:`📱 App Local: ${t.length} obras carregadas`,detail:t.length===0?"A aplicação não tem obras carregadas em memória":`Obras na app: ${t.map(b=>b.title||b.description||"Sem título").join(", ")}`});const N=localStorage.getItem("works"),D=N?JSON.parse(N).length:0;y.push({status:D>0?"success":"warning",message:`💾 localStorage: ${D} obras`,detail:D===0?"Não há obras salvas localmente":"Obras encontradas no localStorage"});const p={works:[]};t.length===0&&((S=p==null?void 0:p.works)==null?void 0:S.length)>0&&y.push({status:"error",message:"🚨 PROBLEMA: Firebase tem dados mas app não carregou",detail:"Problema de sincronização detectado",action:()=>f(),actionLabel:"Forçar Sincronização"}),t.length===0&&y.push({status:"warning",message:"💡 Soluções possíveis:",detail:"1. Criar obra teste, 2. Forçar sincronização, 3. Importar dados",action:()=>v(),actionLabel:"Criar Obra Teste"})}catch(E){y.push({status:"error",message:"❌ Erro durante diagnóstico",detail:E.message})}o(y),s(!1)},f=async()=>{i(["🔄 Iniciando sincronização forçada..."]);try{await u(),i(S=>[...S,"✅ Sincronização Firebase executada"]);const y=await J.syncAllData();y&&y.works.length>0&&i(S=>[...S,`📥 ${y.works.length} obras encontradas no Firebase`]),i(S=>[...S,"🔄 Recarregando página para aplicar dados..."]),setTimeout(()=>{window.location.reload()},2e3)}catch(y){i(S=>[...S,`❌ Erro na sincronização: ${y.message}`])}},v=async()=>{i(["🔄 Criando obra de teste..."]);try{const y={title:"Obra de Teste",description:"Obra criada para testar o sistema",client:"Cliente Teste",location:"Localização Teste",type:"Teste",status:"pending",startDate:new Date().toISOString().split("T")[0],assignedTo:"Sistema",budget:100};await d(y),i(S=>[...S,"✅ Obra de teste criada com sucesso"]),setTimeout(()=>{l()},1e3)}catch(y){i(S=>[...S,`❌ Erro ao criar obra teste: ${y.message}`])}},g=()=>{confirm("ATENÇÃO: Isto irá apagar TODOS os dados. Confirma?")&&(localStorage.clear(),i(["🗑️ Todos os dados locais foram limpos"]),setTimeout(()=>{window.location.reload()},1e3))},C=()=>{const y={works:t,timestamp:new Date().toISOString(),source:"app_export"},S=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),E=URL.createObjectURL(S),N=document.createElement("a");N.href=E,N.download=`obras_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(E),i(D=>[...D,"📄 Dados exportados com sucesso"])},h=y=>{var N;const S=(N=y.target.files)==null?void 0:N[0];if(!S)return;const E=new FileReader;E.onload=async D=>{var p;try{const b=JSON.parse((p=D.target)==null?void 0:p.result);if(b.works&&Array.isArray(b.works)){i([`📥 Importando ${b.works.length} obras do arquivo...`]);for(const x of b.works)try{await d(x)}catch(w){console.warn("Erro ao importar obra:",x,w)}i(x=>[...x,`✅ ${b.works.length} obras importadas com sucesso`]),setTimeout(()=>{l()},1e3)}else i(["❌ Arquivo inválido - não contém obras"])}catch(b){i([`❌ Erro ao processar arquivo: ${b.message}`])}},E.readAsText(S)};return m.useEffect(()=>{l()},[]),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:295,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:294,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"Diagnóstico: 0 Obras na Aplicação"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:298,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Análise completa do problema e soluções automáticas"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:301,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:297,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:293,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Ia,{className:"h-5 w-5 text-blue-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:311,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-blue-600",children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:313,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-lg font-semibold text-blue-900",children:J.isReady()?"Conectado":"Desconectado"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:314,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:312,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:310,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:309,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-green-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:323,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-green-600",children:"App State"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:325,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-lg font-semibold text-green-900",children:[t.length," obras"]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:326,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:324,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:322,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:321,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Et,{className:"h-5 w-5 text-yellow-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:335,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-yellow-600",children:"Local Storage"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:337,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-lg font-semibold text-yellow-900",children:[JSON.parse(localStorage.getItem("works")||"[]").length," ","obras"]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:338,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:336,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:334,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:333,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-red-50 p-4 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(le,{className:"h-5 w-5 text-red-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:348,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-red-600",children:"Status"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:350,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-lg font-semibold text-red-900",children:t.length===0?"PROBLEMA":"OK"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:351,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:349,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:347,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:346,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:308,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3 mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Resultados do Diagnóstico:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:361,columnNumber:11},void 0),a.map((y,S)=>e.jsxDEV("div",{className:`border rounded-lg p-4 ${y.status==="success"?"border-green-200 bg-green-50":y.status==="warning"?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"}`,children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex items-start space-x-2",children:[e.jsxDEV("div",{className:"mt-0.5",children:y.status==="success"?e.jsxDEV(Z,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:379,columnNumber:23},void 0):y.status==="warning"?e.jsxDEV(le,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:381,columnNumber:23},void 0):e.jsxDEV(le,{className:"h-4 w-4 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:383,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:377,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:`text-sm font-medium ${y.status==="success"?"text-green-800":y.status==="warning"?"text-yellow-800":"text-red-800"}`,children:y.message},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:387,columnNumber:21},void 0),y.detail&&e.jsxDEV("div",{className:`text-sm mt-1 ${y.status==="success"?"text-green-700":y.status==="warning"?"text-yellow-700":"text-red-700"}`,children:y.detail},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:399,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:386,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:376,columnNumber:17},void 0),y.action&&y.actionLabel&&e.jsxDEV("button",{onClick:y.action,className:`px-3 py-1 text-xs rounded ${y.status==="success"?"bg-green-600 text-white hover:bg-green-700":y.status==="warning"?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-red-600 text-white hover:bg-red-700"}`,children:y.actionLabel},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:414,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:375,columnNumber:15},void 0)},S,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:365,columnNumber:13},void 0))]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:360,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxDEV("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 flex items-center space-x-2",children:[e.jsxDEV(X,{className:`h-4 w-4 ${n?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:439,columnNumber:13},void 0),e.jsxDEV("span",{children:n?"Analisando...":"Executar Diagnóstico"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:442,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:434,columnNumber:11},void 0),e.jsxDEV("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsxDEV(Ia,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:449,columnNumber:13},void 0),e.jsxDEV("span",{children:"Forçar Sincronização"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:450,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:445,columnNumber:11},void 0),e.jsxDEV("button",{onClick:v,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:457,columnNumber:13},void 0),e.jsxDEV("span",{children:"Criar Obra Teste"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:458,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:453,columnNumber:11},void 0),e.jsxDEV("button",{onClick:C,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:465,columnNumber:13},void 0),e.jsxDEV("span",{children:"Exportar Dados"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:466,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:461,columnNumber:11},void 0),e.jsxDEV("label",{className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 flex items-center space-x-2 cursor-pointer",children:[e.jsxDEV(an,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:470,columnNumber:13},void 0),e.jsxDEV("span",{children:"Importar Dados"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:471,columnNumber:13},void 0),e.jsxDEV("input",{type:"file",accept:".json",onChange:h,className:"hidden"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:472,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:469,columnNumber:11},void 0),e.jsxDEV("button",{onClick:g,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center space-x-2",children:[e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:484,columnNumber:13},void 0),e.jsxDEV("span",{children:"Limpar Tudo"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:485,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:480,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:433,columnNumber:9},void 0),r.length>0&&e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Log de Operações:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:492,columnNumber:13},void 0),e.jsxDEV("ul",{className:"text-sm space-y-1",children:r.map((y,S)=>e.jsxDEV("li",{className:"text-gray-700",children:y},S,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:497,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:495,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:491,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:292,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Possíveis Causas e Soluções:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:508,columnNumber:9},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Firebase desconectado:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:513,columnNumber:13},void 0)," Verificar internet e configuração"]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:512,columnNumber:11},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Dados só no Firebase:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:517,columnNumber:13},void 0),' Usar "Forçar Sincronização"']},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:516,columnNumber:11},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Não há obras criadas:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:520,columnNumber:13},void 0)," Criar primeira obra ou importar dados"]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:519,columnNumber:11},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Problema de cache:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:524,columnNumber:13},void 0),' Usar "Limpar Tudo" e recriar dados']},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:523,columnNumber:11},void 0),e.jsxDEV("li",{children:[e.jsxDEV("strong",{children:"Backup perdido:"},void 0,!1,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:528,columnNumber:13},void 0)," Importar arquivo de backup anterior"]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:527,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:511,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:507,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/WorksDataDiagnostic.tsx",lineNumber:291,columnNumber:5},void 0)},wi=()=>{const n=[],s=localStorage.getItem("mock-users"),a=s?JSON.parse(s):[],o=localStorage.getItem("app-users"),r=o?JSON.parse(o):[];return[].forEach(t=>{const u=a.find(g=>g.email.toLowerCase()===t.email.toLowerCase()||g.name.toLowerCase().includes(t.name.toLowerCase())),d=r.find(g=>g.email.toLowerCase()===t.email.toLowerCase()||g.name.toLowerCase().includes(t.name.toLowerCase()));let l="none",f=!1,v=!1;u&&d?(l="both",f=!0,v=u.active&&d.active):u?(l="mock",f=!0,v=u.active):d&&(l="firebase",f=!0,v=d.active),n.push({email:t.email,name:t.name,expectedPassword:t.expectedPassword,active:v,found:f,source:l})}),n},gc=()=>{const n=[];let s=0;try{console.log("🔧 No problematic users to fix - only super admin exists")}catch(a){n.push(`Erro ao corrigir passwords: ${a.message}`)}return{fixed:s,errors:n}},hc=()=>{const n=[];let s=0;try{const a=localStorage.getItem("mock-users"),o=a?JSON.parse(a):[],r=localStorage.getItem("app-users"),i=r?JSON.parse(r):[];[].forEach(u=>{if(!o.some(f=>f.email.toLowerCase()===u.email.toLowerCase())){const f={uid:`mock-${Date.now()}-${Math.random()}`,...u,createdAt:new Date().toISOString()};o.push(f),s++,console.log(`✅ Created mock user: ${u.name}`)}if(!i.some(f=>f.email.toLowerCase()===u.email.toLowerCase())){const f={id:`app-${Date.now()}-${Math.random()}`,...u,permissions:{obras:{view:!0,create:!1,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!1,edit:!0,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1},clientes:{view:!0,create:!1,edit:!1,delete:!1}},createdAt:new Date().toISOString().split("T")[0]};i.push(f),console.log(`✅ Created app user: ${u.name}`)}}),localStorage.setItem("mock-users",JSON.stringify(o)),localStorage.setItem("app-users",JSON.stringify(i))}catch(a){n.push(`Erro ao criar utilizadores: ${a.message}`)}return{created:s,errors:n}},vc=()=>{["savedLoginCredentials","mock-current-user","firebase-current-user"].forEach(s=>{const a=localStorage.getItem(s);if(a)try{const o=JSON.parse(a);s==="savedLoginCredentials"&&o.rememberMe&&(console.log("🔧 Clearing problematic auto-login credentials"),localStorage.removeItem(s))}catch{localStorage.removeItem(s)}}),sessionStorage.removeItem("login-error-state"),sessionStorage.removeItem("auth-error-count"),console.log("🔧 Login screen shake fixes applied")},Dc=()=>{console.log("🔧 Running complete user login fix...");const n=wi();vc();const s=gc(),a=hc();console.log("Mock auth service disabled");const o=[...s.errors,...a.errors];return console.log("✅ User login fix completed",{passwordsFixed:s.fixed,usersCreated:a.created,errors:o}),{diagnosis:n,passwordsFixed:s.fixed,usersCreated:a.created,errors:o}},Ec=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState([]),[r,i]=m.useState(null),t=()=>{console.log("🔍 Running user login diagnosis...");const d=wi();o(d)},u=async()=>{s(!0);try{const d=Dc();i({passwordsFixed:d.passwordsFixed,usersCreated:d.usersCreated,errors:d.errors}),o(d.diagnosis);const l=`✅ Correção Completa!

🔑 Passwords corrigidas: ${d.passwordsFixed}
👤 Utilizadores criados: ${d.usersCreated}
❌ Erros: ${d.errors.length}

Sistema limpo para criação manual de utilizadores`;alert(l)}catch(d){alert(`❌ Erro na correção: ${d.message}`)}finally{s(!1)}};return e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(le,{className:"h-5 w-5 text-orange-600"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:61,columnNumber:11},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Correção de Login"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:62,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:60,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:t,className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:71,columnNumber:13},void 0),e.jsxDEV("span",{children:"Diagnosticar"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:72,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:67,columnNumber:11},void 0),e.jsxDEV("button",{onClick:u,disabled:n,className:"flex items-center space-x-1 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:bg-gray-400",children:[n?e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:80,columnNumber:15},void 0):e.jsxDEV(uo,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:82,columnNumber:15},void 0),e.jsxDEV("span",{children:n?"A corrigir...":"Corrigir Tudo"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:84,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:66,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:59,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-orange-50 border border-orange-200 rounded p-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Estado do Sistema:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:90,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsxDEV("li",{children:"• Sistema limpo de utilizadores antigos"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:94,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Apenas super admin disponível"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:95,columnNumber:11},void 0),e.jsxDEV("li",{children:"• Pronto para criação manual de novos utilizadores"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:93,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:89,columnNumber:7},void 0),a.length>0&&e.jsxDEV("div",{className:"border border-gray-200 rounded p-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Diagnóstico de Utilizadores:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:103,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:a.map((d,l)=>e.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:d.name},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:113,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-gray-600 ml-2",children:["(",d.email,")"]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:114,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:112,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:`px-2 py-1 rounded text-xs ${d.found?d.active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.found?d.active?"✅ Ativo":"⚠️ Inativo":"❌ Não encontrado"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:117,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:d.source},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:132,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:116,columnNumber:17},void 0)]},l,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:108,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:102,columnNumber:9},void 0),r&&e.jsxDEV("div",{className:"border border-green-200 bg-green-50 rounded p-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:144,columnNumber:13},void 0),e.jsxDEV("h4",{className:"text-sm font-medium text-green-800",children:"Resultados da Correção:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:145,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:143,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-sm text-green-700 space-y-1",children:[e.jsxDEV("div",{children:["🔑 Passwords corrigidas: ",e.jsxDEV("strong",{children:r.passwordsFixed},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:151,columnNumber:40},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:150,columnNumber:13},void 0),e.jsxDEV("div",{children:["👤 Utilizadores criados: ",e.jsxDEV("strong",{children:r.usersCreated},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:154,columnNumber:40},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:153,columnNumber:13},void 0),r.errors.length>0&&e.jsxDEV("div",{className:"mt-2 p-2 bg-red-100 border border-red-200 rounded",children:[e.jsxDEV("div",{className:"text-red-800 font-medium",children:"Erros:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:158,columnNumber:17},void 0),r.errors.map((d,l)=>e.jsxDEV("div",{className:"text-red-700 text-xs",children:["• ",d]},l,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:160,columnNumber:19},void 0))]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:157,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:149,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:142,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Como usar:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:172,columnNumber:9},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[e.jsxDEV("li",{children:["Clique em ",e.jsxDEV("strong",{children:'"Diagnosticar"'},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:175,columnNumber:23},void 0)," para ver o estado atual"]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV("li",{children:["Clique em ",e.jsxDEV("strong",{children:'"Corrigir Tudo"'},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:178,columnNumber:23},void 0)," para resolver todos os problemas"]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:177,columnNumber:11},void 0),e.jsxDEV("li",{children:"Tente fazer login com as credenciais corrigidas"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:181,columnNumber:11},void 0),e.jsxDEV("li",{children:"Se ainda houver problemas, execute novamente"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:173,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:171,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Credenciais Disponíveis:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:188,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-sm text-gray-700 space-y-1 font-mono",children:[e.jsxDEV("div",{children:["• ",e.jsxDEV("strong",{children:"Super Admin:"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:193,columnNumber:15},void 0)," gongonsilva@gmail.com / 19867gsf"]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:192,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-2",children:"Para criar novos utilizadores, use a interface de administração"},void 0,!1,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:195,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:191,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:187,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginFixer.tsx",lineNumber:58,columnNumber:5},void 0)};function Si(n={}){const a={...{enabled:!0,collections:["users","pools","maintenance","works","clients"],syncOnVisibilityChange:!0,syncOnFocus:!0,syncOnStorageChange:!0},...n},o=m.useRef(0),r=m.useRef(!1),i=m.useCallback(async u=>{const d=Date.now();if(r.current||d-o.current<2e3){console.log(`🚫 Sync throttled from ${u} - too frequent`);return}try{r.current=!0,o.current=d,console.log(`🔄 Instant sync triggered from: ${u}`);for(const f of a.collections)await Ze.forceCrossDeviceSync(f);console.log(`✅ Instant sync completed from: ${u}`)}catch(f){console.error(`❌ Instant sync failed from ${u}:`,f)}finally{r.current=!1}},[a.collections]);return m.useEffect(()=>{if(!a.enabled||!a.syncOnVisibilityChange)return;const u=()=>{document.hidden||i("visibility-change")};return document.addEventListener("visibilitychange",u),()=>document.removeEventListener("visibilitychange",u)},[a.enabled,a.syncOnVisibilityChange,i]),m.useEffect(()=>{if(!a.enabled||!a.syncOnFocus)return;const u=()=>{i("window-focus")};return window.addEventListener("focus",u),()=>window.removeEventListener("focus",u)},[a.enabled,a.syncOnFocus,i]),m.useEffect(()=>{if(!a.enabled||!a.syncOnStorageChange)return;const u=d=>{d.key&&a.collections.includes(d.key)&&i(`storage-change-${d.key}`)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)},[a.enabled,a.syncOnStorageChange,a.collections,i]),m.useEffect(()=>{if(!a.enabled)return;const u=d=>{const{type:l,collection:f}=d.detail;console.log(`🔔 Custom sync event received: ${l} for ${f}`),i(`custom-event-${l}`)};return window.addEventListener("firebase-sync",u),window.addEventListener("firebase-auto-sync",u),()=>{window.removeEventListener("firebase-sync",u),window.removeEventListener("firebase-auto-sync",u)}},[a.enabled,i]),m.useEffect(()=>{if(!a.enabled)return;const u=()=>{console.log("🌐 Conexão restaurada - disparando sincronização instantânea"),i("network-restored")};return window.addEventListener("online",u),()=>window.removeEventListener("online",u)},[a.enabled,i]),{forceSync:m.useCallback(async(u="manual")=>{o.current=0,await i(u)},[i]),isEnabled:a.enabled,collections:a.collections,isSyncInProgress:r.current}}function yc(){const{forceSync:n}=Si();return{withInstantSync:m.useCallback(a=>async(...o)=>{try{const r=await a(...o);return setTimeout(()=>{n("data-mutation")},100),r}catch(r){throw console.error("❌ Error in data mutation:",r),r}},[n]),forceSync:n}}const jc=()=>{const n=Si(),s=yi();return{forceSync:n.forceSync,isSyncEnabled:n.isEnabled,data:{users:s.users,pools:s.pools,maintenance:s.maintenance,futureMaintenance:s.futureMaintenance,works:s.works},loading:s.loading,error:s.error,services:s.services,isFullySynced:!s.loading&&!s.error&&n.isEnabled}};function Vc(){const{data:n,loading:s,error:a,services:o,forceSync:r,isFullySynced:i}=jc(),{withInstantSync:t}=yc(),u={users:{...o.users,addUser:t(o.users.addUser),updateUser:t(o.users.updateUser),deleteUser:t(o.users.deleteUser)},pools:{...o.pools,addPool:t(o.pools.addPool),updatePool:t(o.pools.updatePool),deletePool:t(o.pools.deletePool)},maintenance:{...o.maintenance,addMaintenance:t(o.maintenance.addMaintenance),updateMaintenance:t(o.maintenance.updateMaintenance),deleteMaintenance:t(o.maintenance.deleteMaintenance)},works:{...o.works,addWork:t(o.works.addWork),updateWork:t(o.works.updateWork),deleteWork:t(o.works.deleteWork)}},d={refreshData:m.useCallback(async()=>{console.log("🔄 Refrescando todos os dados..."),await r("manual-refresh")},[r]),getUserById:m.useCallback(l=>n.users.find(f=>f.id===l),[n.users]),getPoolById:m.useCallback(l=>n.pools.find(f=>f.id===l),[n.pools]),getMaintenanceById:m.useCallback(l=>n.maintenance.find(f=>f.id===l),[n.maintenance]),getWorkById:m.useCallback(l=>n.works.find(f=>f.id===l),[n.works]),getMaintenanceByPoolId:m.useCallback(l=>n.maintenance.filter(f=>f.poolId===l),[n.maintenance]),getWorksByStatus:m.useCallback(l=>n.works.filter(f=>f.status===l),[n.works]),getMaintenanceByStatus:m.useCallback(l=>n.maintenance.filter(f=>f.status===l),[n.maintenance]),getCounts:m.useCallback(()=>({users:n.users.length,pools:n.pools.length,maintenance:n.maintenance.length,futureMaintenance:n.futureMaintenance.length,works:n.works.length,pendingMaintenance:n.maintenance.filter(l=>l.status==="pending").length,pendingWorks:n.works.filter(l=>l.status==="pending").length}),[n]),validateData:m.useCallback(()=>{const l=[],f=new Set(n.pools.map(C=>C.id)),v=n.maintenance.filter(C=>!f.has(C.poolId));v.length>0&&l.push(`${v.length} manutenções órfãs encontradas`);const g=n.users.filter(C=>!C.permissions);return g.length>0&&l.push(`${g.length} usuários sem permissões`),{isValid:l.length===0,issues:l}},[n])};return{data:n,loading:s,error:a,isFullySynced:i,services:u,...d,forceSync:r}}const Ac=()=>{const{data:n,loading:s}=Vc(),[a,o]=m.useState(!1),[r,i]=m.useState(!1),[t,u]=m.useState(null),d=async()=>{o(!0),u("Preparando backup dos dados...");try{const C={timestamp:new Date().toISOString(),version:"2.0",data:{users:n.users,pools:n.pools,maintenance:n.maintenance,works:n.works},metadata:{totalUsers:n.users.length,totalPools:n.pools.length,totalMaintenance:n.maintenance.length,totalWorks:n.works.length,exportedBy:"Admin",exportedAt:new Date().toLocaleString("pt-PT")}},h=JSON.stringify(C,null,2),y=new Blob([h],{type:"application/json"}),S=URL.createObjectURL(y),E=document.createElement("a");E.href=S,E.download=`leirisonda-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(S),u("✅ Backup criado com sucesso!"),console.log("📁 Backup de dados criado:",C.metadata)}catch(C){console.error("❌ Erro ao criar backup:",C),u("❌ Erro ao criar backup dos dados")}finally{o(!1),setTimeout(()=>u(null),5e3)}},l=()=>{u("Preparando backup da aplicação...");try{const C={timestamp:new Date().toISOString(),instructions:["1. Para backup completo da aplicação, aceda ao repositório GitHub","2. Clique em 'Code' → 'Download ZIP'","3. Ou clone o repositório: git clone [URL_DO_REPOSITORIO]","4. Para backup dos ficheiros locais, copie a pasta do projeto","5. Guarde também as configurações do Firebase se personalizadas"],files_to_backup:["src/ - Código fonte da aplicação","public/ - Ficheiros públicos","package.json - Dependências","tailwind.config.ts - Configurações de estilo","vite.config.ts - Configurações de build","firebase/ - Configurações Firebase (se personalizadas)"],important_notes:["O código fonte está no GitHub - sempre atualizado","Os dados dos usuários estão no Firebase - use o backup de dados","As configurações locais estão no localStorage do navegador"]},h=JSON.stringify(C,null,2),y=new Blob([h],{type:"application/json"}),S=URL.createObjectURL(y),E=document.createElement("a");E.href=S,E.download=`leirisonda-app-backup-info-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(S),u("✅ Informações de backup da app criadas!")}catch(C){console.error("❌ Erro ao criar info de backup da app:",C),u("❌ Erro ao criar informações de backup")}finally{setTimeout(()=>u(null),5e3)}},f=C=>{var S;const h=(S=C.target.files)==null?void 0:S[0];if(!h)return;i(!0),u("Restaurando dados do backup...");const y=new FileReader;y.onload=async E=>{var N,D;try{const p=JSON.parse((N=E.target)==null?void 0:N.result);if(!p.data||!p.version)throw new Error("Formato de backup inválido");p.data.users&&localStorage.setItem("users",JSON.stringify(p.data.users)),p.data.pools&&localStorage.setItem("pools",JSON.stringify(p.data.pools)),p.data.maintenance&&localStorage.setItem("maintenance",JSON.stringify(p.data.maintenance)),p.data.works&&localStorage.setItem("works",JSON.stringify(p.data.works)),u(`✅ Dados restaurados com sucesso! (${((D=p.metadata)==null?void 0:D.exportedAt)||"Data desconhecida"})`),console.log("📁 Dados restaurados do backup:",p.metadata),setTimeout(()=>{window.location.reload()},2e3)}catch(p){console.error("❌ Erro ao restaurar backup:",p),u("❌ Erro ao restaurar dados - verifique o formato do ficheiro")}finally{i(!1),setTimeout(()=>u(null),8e3)}},y.readAsText(h)},g={users:n.users.length,pools:n.pools.length,maintenance:n.maintenance.length,works:n.works.length,total:n.users.length+n.pools.length+n.maintenance.length+n.works.length};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Backup e Restauro"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:193,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Criar backups de segurança dos dados e da aplicação"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:196,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:192,columnNumber:7},void 0),t&&e.jsxDEV("div",{className:`p-4 rounded-lg border ${t.includes("✅")?"bg-green-50 border-green-200 text-green-800":t.includes("❌")?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[t.includes("✅")&&e.jsxDEV(Z,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:213,columnNumber:44},void 0),t.includes("❌")&&e.jsxDEV(me,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:215,columnNumber:15},void 0),!t.includes("✅")&&!t.includes("❌")&&e.jsxDEV(X,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:218,columnNumber:15},void 0),e.jsxDEV("span",{className:"font-medium",children:t},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:220,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:212,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:203,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados Atuais no Sistema"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:227,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-blue-600",children:g.users},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:232,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-blue-800",children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:235,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:231,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:g.pools},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-green-800",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:241,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:237,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-yellow-600",children:g.maintenance},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:244,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-yellow-800",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:247,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:243,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-purple-600",children:g.works},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:250,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-purple-800",children:"Obras"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:253,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:249,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-gray-600",children:g.total},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:256,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-sm text-gray-800",children:"Total"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:259,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:255,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:230,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:226,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(pe,{className:"w-6 h-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:267,columnNumber:11},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup dos Dados"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:268,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:266,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Exportar todos os dados do sistema (utilizadores, piscinas, manutenções, obras) para um ficheiro JSON."},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:273,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxDEV("button",{onClick:d,disabled:a||s,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[a?e.jsxDEV(X,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:285,columnNumber:15},void 0):e.jsxDEV(Se,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:287,columnNumber:15},void 0),a?"Criando Backup...":"Criar Backup dos Dados"]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:279,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer",children:[e.jsxDEV(an,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:294,columnNumber:15},void 0),"Restaurar Dados",e.jsxDEV("input",{type:"file",accept:".json",onChange:f,className:"hidden",disabled:r},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:296,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:293,columnNumber:13},void 0),r&&e.jsxDEV(X,{className:"w-5 h-5 animate-spin text-green-600"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:305,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:292,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:278,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:265,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(ea,{className:"w-6 h-6 text-purple-600"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:314,columnNumber:11},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup da Aplicação"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:315,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:313,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Obter informações sobre como fazer backup do código fonte e configurações da aplicação."},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:320,columnNumber:9},void 0),e.jsxDEV("button",{onClick:l,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsxDEV(Se,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:329,columnNumber:11},void 0),"Obter Informações de Backup da App"]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium text-purple-900 mb-2",children:"Informação:"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:334,columnNumber:11},void 0),e.jsxDEV("ul",{className:"text-sm text-purple-800 space-y-1",children:[e.jsxDEV("li",{children:"• O código fonte está sempre atualizado no GitHub"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:336,columnNumber:13},void 0),e.jsxDEV("li",{children:"• Os dados estão guardados no Firebase (use o backup de dados acima)"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:337,columnNumber:13},void 0),e.jsxDEV("li",{children:"• Este botão cria um ficheiro com instruções detalhadas"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:341,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:335,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:333,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:312,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(me,{className:"w-5 h-5 text-yellow-600 mt-0.5"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:349,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900",children:"Avisos Importantes:"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:351,columnNumber:13},void 0),e.jsxDEV("ul",{className:"text-sm text-yellow-800 mt-2 space-y-1",children:[e.jsxDEV("li",{children:"• Faça backups regulares dos dados importantes"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:353,columnNumber:15},void 0),e.jsxDEV("li",{children:"• O restauro de dados substitui completamente os dados atuais"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:354,columnNumber:15},void 0),e.jsxDEV("li",{children:"• Teste os backups regularmente para garantir que funcionam"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:357,columnNumber:15},void 0),e.jsxDEV("li",{children:"• Mantenha backups em locais seguros e múltiplos"},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:360,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:350,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:348,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:347,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataBackupManager.tsx",lineNumber:190,columnNumber:5},void 0)};class wc{constructor(){ae(this,"SUPER_ADMIN_EMAIL","admin@example.com");ae(this,"SUPER_ADMIN_NAME","Administrator")}async deleteAllUsersExceptSuperAdmin(){const s={success:!1,message:"",details:{firebaseUsersDeleted:0,firestoreUsersDeleted:0,localStorageUsersDeleted:0,mockAuthUsersDeleted:0,superAdminPreserved:!1,errors:[]}};try{console.log("🚨 Starting complete user deletion process..."),console.log(`⚠️ Super admin to preserve: ${this.SUPER_ADMIN_EMAIL}`),lr()&&hs||console.log("⚠️ Firebase not available - skipping Firestore deletion");try{await this.deleteFromLocalStorage(s)}catch(o){s.details.errors.push(`localStorage deletion error: ${o.message}`),console.error("❌ localStorage deletion failed:",o)}try{await this.deleteFromMockAuth(s)}catch(o){s.details.errors.push(`Mock auth deletion error: ${o.message}`),console.error("❌ Mock auth deletion failed:",o)}try{await this.ensureSuperAdminExists(s)}catch(o){s.details.errors.push(`Super admin preservation error: ${o.message}`),console.error("❌ Super admin preservation failed:",o)}try{await this.clearUserSessions()}catch(o){s.details.errors.push(`Session clearing error: ${o.message}`),console.error("❌ Session clearing failed:",o)}const a=s.details.firebaseUsersDeleted+s.details.firestoreUsersDeleted+s.details.localStorageUsersDeleted+s.details.mockAuthUsersDeleted;a>0||s.details.errors.length===0?(s.success=!0,s.message=`✅ Eliminação completa! ${a} utilizadores removidos. Super admin ${this.SUPER_ADMIN_NAME} preservado.`):(s.success=!1,s.message=`❌ Falha na eliminação de utilizadores. Erros: ${s.details.errors.join(", ")}`),console.log("🏁 User deletion process completed:",{success:s.success,totalDeleted:a,superAdminPreserved:s.details.superAdminPreserved,errors:s.details.errors})}catch(a){console.error("💥 Critical error in user deletion process:",a),s.success=!1,s.message=`❌ Erro crítico na eliminação de utilizadores: ${a.message}`,s.details.errors.push(`Critical error: ${a.message}`)}return s}async deleteFromFirestore(s){throw new Error("Firestore not available")}async deleteFromLocalStorage(s){var r,i;console.log("💾 Starting COMPLETE localStorage users deletion...");const a=["app-users","mock-users","users","saved-users","currentUser","mock-current-user","savedLoginCredentials"];let o=0;for(const t of a)try{const u=localStorage.getItem(t);if(!u)continue;if(console.log(`🔍 Found data in ${t}:`,u.substring(0,100)),t==="currentUser"||t==="mock-current-user"){try{const l=(r=JSON.parse(u).email)==null?void 0:r.toLowerCase();l&&l!==this.SUPER_ADMIN_EMAIL.toLowerCase()?(localStorage.removeItem(t),o++,console.log(`🗑️ Deleted current user session: ${l}`)):l===this.SUPER_ADMIN_EMAIL.toLowerCase()&&(console.log(`🛡️ Preserving super admin session in ${t}`),s.details.superAdminPreserved=!0)}catch{localStorage.removeItem(t),console.log(`🗑️ Removed non-JSON data from ${t}`)}continue}if(t==="savedLoginCredentials"){try{const d=JSON.parse(u);((i=d.email)==null?void 0:i.toLowerCase())!==this.SUPER_ADMIN_EMAIL.toLowerCase()?(localStorage.removeItem(t),o++,console.log(`🗑️ Deleted saved credentials for: ${d.email}`)):console.log("🛡️ Preserving super admin credentials")}catch{localStorage.removeItem(t),console.log("🗑️ Removed invalid credentials data")}continue}try{const d=JSON.parse(u);if(!Array.isArray(d)){console.log(`⚠️ ${t} is not an array, skipping`);continue}console.log(`📊 Found ${d.length} users in ${t}`);const l=d.filter(f=>{var g;const v=(g=f.email)==null?void 0:g.toLowerCase();return v===this.SUPER_ADMIN_EMAIL.toLowerCase()?(console.log(`🛡️ Preserving super admin in ${t}: ${v}`),s.details.superAdminPreserved=!0,!0):(o++,console.log(`🗑️ Deleted ${t} user: ${v||f.id||f.uid}`),!1)});localStorage.setItem(t,JSON.stringify(l)),console.log(`✅ Updated ${t} with ${l.length} preserved users`)}catch(d){console.error(`❌ Error processing ${t}:`,d),localStorage.removeItem(t),console.log(`🗑️ Removed unparseable data from ${t}`)}}catch(u){console.error(`❌ Error handling ${t}:`,u),s.details.errors.push(`localStorage ${t}: ${u.message}`)}s.details.localStorageUsersDeleted=o;try{sessionStorage.clear(),console.log("🧹 Cleared all session storage")}catch(t){console.error("❌ Error clearing session storage:",t)}console.log(`✅ COMPLETE localStorage deletion finished: ${s.details.localStorageUsersDeleted} users deleted`)}async deleteFromMockAuth(s){var a;console.log("🔧 Starting mock auth users deletion...");try{console.log("Mock auth service disabled - using only Firebase");let o=0;for(const r of allMockUsers){const i=(a=r.email)==null?void 0:a.toLowerCase();if(i===this.SUPER_ADMIN_EMAIL.toLowerCase()){console.log(`🛡️ Preserving super admin in mock auth: ${i}`);continue}try{o++,console.log(`🗑️ Marked for deletion from mock auth: ${i||r.uid}`)}catch(t){console.error(`❌ Failed to delete mock auth user ${r.uid}:`,t),s.details.errors.push(`Mock auth user ${r.uid}: ${t.message}`)}}s.details.mockAuthUsersDeleted=0,console.log(`✅ Mock auth deletion complete: ${s.details.mockAuthUsersDeleted} users deleted`)}catch(o){throw console.error("❌ Mock auth deletion failed:",o),o}}async ensureSuperAdminExists(s){console.log("🛡️ Ensuring super admin exists in all systems...");const a={email:this.SUPER_ADMIN_EMAIL,name:this.SUPER_ADMIN_NAME,password:"19867gsf"},o=JSON.parse(localStorage.getItem("app-users")||"[]");if(!o.some(u=>{var d;return((d=u.email)==null?void 0:d.toLowerCase())===this.SUPER_ADMIN_EMAIL.toLowerCase()})){console.log("➕ Creating super admin in app-users localStorage");const u={id:"1",name:a.name,email:a.email,password:a.password,role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:"2024-01-01"};o.push(u),localStorage.setItem("app-users",JSON.stringify(o))}const i=JSON.parse(localStorage.getItem("mock-users")||"[]");if(!i.some(u=>{var d;return((d=u.email)==null?void 0:d.toLowerCase())===this.SUPER_ADMIN_EMAIL.toLowerCase()})){console.log("➕ Creating super admin in mock-users localStorage");const u={uid:"admin-1",email:a.email,password:a.password,name:a.name,role:"super_admin",active:!0,createdAt:new Date().toISOString()};i.push(u),localStorage.setItem("mock-users",JSON.stringify(i))}s.details.superAdminPreserved=!0,console.log("✅ Super admin ensured in all systems")}async clearUserSessions(){var s,a;console.log("🧹 Starting COMPLETE session clearing...");try{const o=["currentUser","mock-current-user","user","authUser","loggedInUser","activeUser","savedLoginCredentials"];let r=!1,i=null;for(const u of o)try{const d=localStorage.getItem(u);if(d){const l=JSON.parse(d);if(((s=l.email)==null?void 0:s.toLowerCase())===this.SUPER_ADMIN_EMAIL.toLowerCase()){console.log(`🛡️ Super admin found in ${u} - will preserve`),r=!0,i=l;break}}}catch{}for(const u of o)try{const d=localStorage.getItem(u);if(d)try{((a=JSON.parse(d).email)==null?void 0:a.toLowerCase())!==this.SUPER_ADMIN_EMAIL.toLowerCase()&&(localStorage.removeItem(u),console.log(`🗑️ Cleared session data from ${u}`))}catch{localStorage.removeItem(u),console.log(`🗑️ Removed invalid session data from ${u}`)}}catch(d){console.error(`❌ Error clearing ${u}:`,d)}sessionStorage.clear(),console.log("🧹 Cleared all session storage");const t=["firebase-auth","firebase-user","auth-token","access-token","refresh-token"];for(const u of t)localStorage.removeItem(u),sessionStorage.removeItem(u);r&&i&&(localStorage.setItem("mock-current-user",JSON.stringify(i)),console.log("🛡️ Restored super admin session"));try{typeof mockAuthService<"u"&&mockAuthService.reloadUsers&&(mockAuthService.reloadUsers(),console.log("🔄 Reloaded mock auth service"))}catch(u){console.error("❌ Error reloading auth service:",u)}window.dispatchEvent(new CustomEvent("usersUpdated")),window.dispatchEvent(new CustomEvent("userSessionsCleared")),console.log("📢 User update events dispatched after session clearing")}catch(o){throw console.error("❌ Error in complete session clearing:",o),o}}async getUserStatistics(){const s={firestore:0,localStorage:0,mockAuth:0,total:0};try{lr();const a=["app-users","mock-users","users","saved-users"];let o=0;for(const r of a)try{const i=localStorage.getItem(r);if(i){const t=JSON.parse(i);Array.isArray(t)&&(o+=t.length,console.log(`📊 Found ${t.length} users in ${r}`))}}catch(i){console.error(`Error counting users in ${r}:`,i)}s.localStorage=o;try{s.mockAuth=0}catch(r){console.error("Error counting mock auth users:",r)}s.total=Math.max(s.firestore,s.localStorage,s.mockAuth),console.log("📊 User Statistics:",s)}catch(a){console.error("❌ Error getting user statistics:",a)}return s}}const Gn=new wc;class Sc{constructor(){ae(this,"SUPER_ADMIN_EMAIL","admin@example.com");ae(this,"SUPER_ADMIN_NAME","Administrator");ae(this,"SUPER_ADMIN_PASSWORD","defaultpass")}async nuclearUserCleanup(){const s={success:!1,message:"",details:{localStorageKeysCleared:[],sessionStorageCleared:!1,indexedDBCleared:!1,firebaseAuthCleared:!1,superAdminRecreated:!1,errors:[]}};try{console.log("🚨 STARTING NUCLEAR USER CLEANUP - CLEARING EVERYTHING!"),await this.forceFirebaseAuthCleanup(s);const o=Object.keys(localStorage).filter(r=>r.toLowerCase().includes("user")||r.toLowerCase().includes("auth")||r.toLowerCase().includes("login")||r.toLowerCase().includes("mock")||r.toLowerCase().includes("firebase")||r==="app-users"||r==="mock-users"||r==="users"||r==="saved-users"||r==="currentUser"||r==="mock-current-user"||r==="savedLoginCredentials"||r==="firebase-auth"||r==="firebase-user"||r.startsWith("firebase:")||r.startsWith("__firebase"));console.log(`🎯 Found ${o.length} user-related keys:`,o);for(const r of o)try{localStorage.removeItem(r),s.details.localStorageKeysCleared.push(r),console.log(`🗑️ Cleared localStorage key: ${r}`)}catch(i){s.details.errors.push(`Failed to clear ${r}: ${i.message}`)}try{sessionStorage.clear(),s.details.sessionStorageCleared=!0,console.log("🧹 Cleared all session storage")}catch(r){s.details.errors.push(`Failed to clear sessionStorage: ${r.message}`)}await this.clearIndexedDB(s);try{document.cookie.split(";").forEach(function(r){document.cookie=r.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("🍪 Cleared all cookies")}catch(r){console.error("❌ Error clearing cookies:",r)}await this.recreateSuperAdminOnly(s);try{console.log("🔄 Dispatching complete cleanup events"),window.dispatchEvent(new CustomEvent("usersUpdated")),window.dispatchEvent(new CustomEvent("authStateChanged")),window.dispatchEvent(new CustomEvent("completeUserCleanup"))}catch(r){console.error("❌ Error dispatching cleanup events:",r)}s.success=!0,s.message=`✅ NUCLEAR CLEANUP COMPLETE! Cleared ${s.details.localStorageKeysCleared.length} storage keys. Firebase Auth persistence cleared. Only super admin remains.`,console.log("🏁 Nuclear user cleanup completed successfully"),setTimeout(()=>{console.log("🔄 Forcing page reload to ensure clean state..."),window.location.reload()},2e3)}catch(a){console.error("💥 Critical error in nuclear cleanup:",a),s.success=!1,s.message=`❌ Nuclear cleanup failed: ${a.message}`,s.details.errors.push(`Critical error: ${a.message}`)}return s}async forceFirebaseAuthCleanup(s){try{console.log("🔥 Starting aggressive Firebase Auth cleanup...");const{auth:a}=await ie(async()=>{const{auth:o}=await Promise.resolve().then(()=>Zs);return{auth:o}},void 0);if(a)try{if(a.currentUser){console.log("🚪 Forcing logout of current Firebase user...");const{signOut:o}=await ie(async()=>{const{signOut:r}=await import("./vendor-C-G65PT7.js").then(i=>i.V);return{signOut:r}},__vite__mapDeps([0,1]));await o(a),console.log("✅ Firebase user signed out")}try{const{setPersistence:o,browserSessionPersistence:r}=await ie(async()=>{const{setPersistence:i,browserSessionPersistence:t}=await import("./vendor-C-G65PT7.js").then(u=>u.V);return{setPersistence:i,browserSessionPersistence:t}},__vite__mapDeps([0,1]));await o(a,r),console.log("✅ Firebase Auth persistence set to session-only")}catch(o){console.warn("⚠️ Could not change Firebase persistence:",o)}s.details.firebaseAuthCleared=!0,console.log("✅ Firebase Auth cleanup completed")}catch(o){console.warn("⚠️ Firebase Auth cleanup error:",o),s.details.errors.push(`Firebase Auth cleanup: ${o.message}`)}else console.log("📱 Firebase Auth not available - skipping Firebase cleanup")}catch(a){console.warn("⚠️ Could not import Firebase Auth:",a),s.details.errors.push(`Firebase import error: ${a.message}`)}}async clearIndexedDB(s){try{if(!("indexedDB"in window)){console.log("🗃️ IndexedDB not available - skipping");return}console.log("🗃️ Starting IndexedDB cleanup...");const a=await indexedDB.databases();console.log(`📊 Found ${a.length} IndexedDB databases`);let o=0;for(const r of a)if(r.name)try{if(r.name.includes("firebase")||r.name.includes("firebaseLocalStorage")||r.name.includes("auth")||r.name.startsWith("firebase:")||r.name.includes("leirisonda")){console.log(`🗑️ Deleting IndexedDB database: ${r.name}`);const i=indexedDB.deleteDatabase(r.name);await new Promise((t,u)=>{i.onsuccess=()=>{console.log(`✅ Deleted IndexedDB database: ${r.name}`),o++,t(!0)},i.onerror=()=>{console.error(`❌ Failed to delete IndexedDB database: ${r.name}`),u(i.error)},i.onblocked=()=>{console.warn(`⚠️ IndexedDB database deletion blocked: ${r.name}`),t(!0)}})}}catch(i){console.error(`❌ Error deleting IndexedDB database ${r.name}:`,i),s.details.errors.push(`IndexedDB cleanup error: ${i.message}`)}s.details.indexedDBCleared=o>0,console.log(`✅ IndexedDB cleanup completed - ${o} databases cleared`)}catch(a){console.error("❌ IndexedDB cleanup failed:",a),s.details.errors.push(`IndexedDB cleanup failed: ${a.message}`)}}async recreateSuperAdminOnly(s){console.log("🛡️ Recreating ONLY super admin in all systems...");try{const a={email:this.SUPER_ADMIN_EMAIL,name:this.SUPER_ADMIN_NAME,password:this.SUPER_ADMIN_PASSWORD,role:"super_admin",active:!0,createdAt:new Date().toISOString()},o={id:1,name:a.name,email:a.email,password:a.password,role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:"2024-01-01"};localStorage.setItem("app-users",JSON.stringify([o])),console.log("✅ Created super admin in app-users");const r={uid:"admin-1",email:a.email,password:a.password,name:a.name,role:"super_admin",active:!0,createdAt:a.createdAt};localStorage.setItem("mock-users",JSON.stringify([r])),console.log("✅ Created super admin in mock-users"),localStorage.setItem("users",JSON.stringify([o])),console.log("✅ Created super admin in users"),s.details.superAdminRecreated=!0,console.log("🛡️ Super admin recreated in all systems")}catch(a){throw console.error("❌ Error recreating super admin:",a),s.details.errors.push(`Super admin recreation failed: ${a.message}`),a}}async analyzeUserData(){const s={localStorageKeys:Object.keys(localStorage),userRelatedKeys:[],totalUserData:0,firebaseAuthUser:!1,indexedDBDatabases:[],details:{}};try{try{const{auth:a}=await ie(async()=>{const{auth:o}=await Promise.resolve().then(()=>Zs);return{auth:o}},void 0);a&&a.currentUser&&(s.firebaseAuthUser=!0,s.details.firebaseCurrentUser={email:a.currentUser.email,uid:a.currentUser.uid},s.totalUserData+=1,console.log("🔥 Found Firebase Auth current user:",a.currentUser.email))}catch{console.log("Firebase Auth check failed or not available")}try{if("indexedDB"in window){const a=await indexedDB.databases();s.indexedDBDatabases=a.map(o=>o.name||"unknown").filter(o=>o.includes("firebase")||o.includes("auth")||o.includes("leirisonda"))}}catch{console.log("IndexedDB check failed")}s.userRelatedKeys=s.localStorageKeys.filter(a=>a.toLowerCase().includes("user")||a.toLowerCase().includes("auth")||a.toLowerCase().includes("login")||a.toLowerCase().includes("mock")||a.toLowerCase().includes("firebase")||a==="app-users"||a==="mock-users"||a==="users"||a==="saved-users"||a==="currentUser"||a==="mock-current-user"||a==="savedLoginCredentials"||a.startsWith("firebase:")||a.startsWith("__firebase"));for(const a of s.userRelatedKeys)try{const o=localStorage.getItem(a);if(o)try{const r=JSON.parse(o);Array.isArray(r)?(s.details[a]={type:"array",count:r.length,users:r.map(i=>i.email||i.name||i.uid||"unknown")},s.totalUserData+=r.length):typeof r=="object"&&r.email?(s.details[a]={type:"object",user:r.email||r.name||"unknown"},s.totalUserData+=1):s.details[a]={type:"other",data:o.substring(0,100)}}catch{s.details[a]={type:"raw",data:o.substring(0,100)}}}catch(o){console.error(`Error analyzing ${a}:`,o)}console.log("📊 User data analysis:",s)}catch(a){console.error("❌ Error in user data analysis:",a)}return s}async hasOldUsersLoggedIn(){try{const{auth:s}=await ie(async()=>{const{auth:o}=await Promise.resolve().then(()=>Zs);return{auth:o}},void 0);if(s&&s.currentUser)return console.log("⚠️ Firebase Auth user still logged in:",s.currentUser.email),!0;const a=Object.keys(localStorage).filter(o=>o.includes("user")||o.includes("auth")||o.includes("currentUser"));return a.length>0?(console.log("⚠️ User data found in localStorage:",a),!0):!1}catch(s){return console.error("Error checking for old users:",s),!1}}}const rr=new Sc,Cc=()=>{const[n,s]=m.useState({firestore:0,localStorage:0,mockAuth:0,total:0}),[a,o]=m.useState(!1),[r,i]=m.useState(null),[t,u]=m.useState(!1),[d,l]=m.useState(0),[f,v]=m.useState(""),[g,C]=m.useState(!1),[h,y]=m.useState(null),[S,E]=m.useState(!1);m.useEffect(()=>{N()},[]);const N=async()=>{C(!0);try{const F=await Gn.getUserStatistics();s(F),console.log("📊 User statistics:",F)}catch(F){console.error("❌ Failed to load user statistics:",F)}finally{C(!1)}},D=async()=>{o(!0),i(null);try{console.log("🚨 Starting dangerous user deletion process...");const F=await Gn.deleteAllUsersExceptSuperAdmin();i(F),F.success?(await N(),u(!1),l(0),v(""),console.log("✅ User deletion completed successfully")):console.error("❌ User deletion failed:",F.message)}catch(F){console.error("💥 Critical error during user deletion:",F),i({success:!1,message:`❌ Erro crítico: ${F.message}`,details:{firebaseUsersDeleted:0,firestoreUsersDeleted:0,localStorageUsersDeleted:0,mockAuthUsersDeleted:0,superAdminPreserved:!1,errors:[F.message]}})}finally{o(!1)}},p=async()=>{o(!0),y(null);try{console.log("💥 STARTING NUCLEAR USER CLEANUP...");const F=await rr.nuclearUserCleanup();y(F),F.success?(await N(),E(!1),console.log("🚀 Nuclear cleanup completed successfully"),setTimeout(()=>{alert("✅ Limpeza nuclear completa! A página irá recarregar para garantir que não há sessões antigas."),window.location.reload()},2e3)):console.error("❌ Nuclear cleanup failed:",F.message)}catch(F){console.error("💥 Critical error during nuclear cleanup:",F),y({success:!1,message:`❌ Erro crítico na limpeza nuclear: ${F.message}`,details:{localStorageKeysCleared:[],sessionStorageCleared:!1,indexedDBCleared:!1,firebaseAuthCleared:!1,superAdminRecreated:!1,errors:[F.message]}})}finally{o(!1)}},b=()=>{u(!0),l(1),v(""),i(null)},x=()=>{switch(d){case 1:f.toLowerCase()==="eliminar"&&(l(2),v(""));break;case 2:f.toLowerCase()==="goncalo"&&(l(3),v(""));break;case 3:f==="DANGER-DELETE-ALL-USERS"&&D();break}},w=()=>{u(!1),l(0),v(""),E(!1)},U=()=>Math.max(0,n.total-1);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-red-900 flex items-center gap-2",children:[e.jsxDEV(me,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:204,columnNumber:13},void 0),"💀 ZONA DE PERIGO"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:203,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-red-700",children:"Eliminar completamente todos os utilizadores exceto o super admin"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:207,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:202,columnNumber:9},void 0),e.jsxDEV("button",{onClick:N,disabled:g,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[e.jsxDEV(X,{className:`h-4 w-4 ${g?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:216,columnNumber:11},void 0),e.jsxDEV("span",{children:"Atualizar"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:219,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:211,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:201,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(me,{className:"h-8 w-8 text-red-600 mt-1 mr-4 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:226,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-red-900",children:"⚠️ OPERAÇÃO EXTREMAMENTE PERIGOSA ⚠️"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:228,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-red-800 space-y-2",children:[e.jsxDEV("p",{className:"font-semibold",children:"Esta operação irá ELIMINAR PERMANENTEMENTE todos os utilizadores do sistema, incluindo:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:232,columnNumber:15},void 0),e.jsxDEV("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[e.jsxDEV("li",{children:"Todas as contas de utilizador no Firebase"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:237,columnNumber:17},void 0),e.jsxDEV("li",{children:"Todos os perfis de utilizador no Firestore"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:238,columnNumber:17},void 0),e.jsxDEV("li",{children:"Todos os utilizadores no armazenamento local"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:239,columnNumber:17},void 0),e.jsxDEV("li",{children:"Todas as sessões ativas (exceto super admin)"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:240,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:236,columnNumber:15},void 0),e.jsxDEV("p",{className:"font-semibold text-red-900",children:"✅ ÚNICO UTILIZADOR PRESERVADO: Gonçalo Fonseca (gongonsilva@gmail.com)"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:242,columnNumber:15},void 0),e.jsxDEV("p",{className:"font-bold text-red-900 text-lg",children:"🚨 ESTA AÇÃO É IRREVERSÍVEL! 🚨"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:246,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:227,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:225,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:224,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsxDEV(pe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:258,columnNumber:13},void 0),"Estatísticas de Utilizadores"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:257,columnNumber:11},void 0),g&&e.jsxDEV("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsxDEV(X,{className:"h-4 w-4 animate-spin mr-1"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:263,columnNumber:15},void 0),"A atualizar..."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:256,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-blue-900",children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:272,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-700",children:n.firestore},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:273,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:271,columnNumber:15},void 0),e.jsxDEV(pe,{className:"h-8 w-8 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:277,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:270,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:269,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-green-900",children:"Local Storage"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:284,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-green-700",children:n.localStorage},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:287,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:283,columnNumber:15},void 0),e.jsxDEV(pe,{className:"h-8 w-8 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:291,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:282,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:281,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-purple-900",children:"Mock Auth"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:298,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-purple-700",children:n.mockAuth},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:299,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:297,columnNumber:15},void 0),e.jsxDEV(oe,{className:"h-8 w-8 text-purple-600"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:303,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:296,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:295,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-red-900",children:"A Eliminar"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:310,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-red-700",children:U()},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:311,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:309,columnNumber:15},void 0),e.jsxDEV(Ce,{className:"h-8 w-8 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:315,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:308,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:307,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:268,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Xe,{className:"h-5 w-5 text-green-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:322,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-green-800",children:"Super Admin preservado: Gonçalo Fonseca (gongonsilva@gmail.com)"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:323,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:321,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:320,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:255,columnNumber:7},void 0),t?e.jsxDEV("div",{className:"bg-white rounded-lg border-2 border-red-200 p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[e.jsxDEV(me,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:438,columnNumber:13},void 0),"Confirmação de Segurança - Passo ",d,"/3"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:437,columnNumber:11},void 0),d===1&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("p",{className:"text-red-800",children:["Digite ",e.jsxDEV("strong",{children:'"eliminar"'},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:445,columnNumber:24},void 0)," para confirmar que compreende que esta ação é irreversível:"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:444,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f,onChange:F=>v(F.target.value),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Digite: eliminar",autoFocus:!0},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:448,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:443,columnNumber:13},void 0),d===2&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("p",{className:"text-red-800",children:["Digite o nome do super admin que será preservado"," ",e.jsxDEV("strong",{children:'"goncalo"'},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:463,columnNumber:17},void 0),":"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:461,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f,onChange:F=>v(F.target.value),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Digite: goncalo",autoFocus:!0},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:465,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:460,columnNumber:13},void 0),d===3&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("p",{className:"text-red-800",children:[e.jsxDEV("strong",{children:"ÚLTIMA CONFIRMAÇÃO:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:479,columnNumber:17},void 0)," Digite exatamente"," ",e.jsxDEV("strong",{children:'"DANGER-DELETE-ALL-USERS"'},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:480,columnNumber:17},void 0)," para executar:"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:478,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f,onChange:F=>v(F.target.value),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 font-mono",placeholder:"Digite: DANGER-DELETE-ALL-USERS",autoFocus:!0},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:482,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:477,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-between mt-6",children:[e.jsxDEV("button",{onClick:w,className:"px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:494,columnNumber:13},void 0),e.jsxDEV("button",{onClick:x,disabled:d===1&&f.toLowerCase()!=="eliminar"||d===2&&f.toLowerCase()!=="goncalo"||d===3&&f!=="DANGER-DELETE-ALL-USERS"||a,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:516,columnNumber:19},void 0),"A eliminar..."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:515,columnNumber:17},void 0):d===3?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:520,columnNumber:19},void 0),"EXECUTAR ELIMINAÇÃO"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:519,columnNumber:17},void 0):"Continuar"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:501,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:493,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:436,columnNumber:9},void 0):e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Executar Eliminação"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:333,columnNumber:11},void 0),U()===0?e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Z,{className:"h-5 w-5 text-gray-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:340,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-gray-700",children:"Não há utilizadores adicionais para eliminar. Apenas o super admin existe."},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:341,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:339,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:338,columnNumber:13},void 0):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{onClick:b,disabled:a,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg text-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:[e.jsxDEV(Ce,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:354,columnNumber:17},void 0),e.jsxDEV("span",{children:["💀 ELIMINAR ",U()," UTILIZADOR",U()!==1?"ES":""]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:355,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:349,columnNumber:15},void 0),e.jsxDEV("div",{className:"border-t border-red-200 pt-4",children:[e.jsxDEV("div",{className:"bg-red-100 border border-red-300 rounded-lg p-4 mb-4",children:[e.jsxDEV("h4",{className:"font-bold text-red-900 mb-2 flex items-center gap-2",children:[e.jsxDEV(me,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:364,columnNumber:21},void 0),"💥 OPÇÃO NUCLEAR"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:363,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-red-800 text-sm mb-3",children:"Se a eliminação normal não funcionou e ainda consegue entrar com utilizadores antigos, use esta opção que limpa COMPLETAMENTE todos os dados de autenticação."},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:367,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-red-900 font-semibold text-sm",children:"⚠️ Esta opção força o recarregamento da página após a limpeza!"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:372,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:362,columnNumber:17},void 0),S?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("p",{className:"text-red-800 font-semibold text-center",children:'Digite "NUCLEAR" para confirmar a limpeza completa:'},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:389,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:f,onChange:F=>v(F.target.value),className:"w-full px-4 py-2 border-2 border-red-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 text-center font-mono",placeholder:"Digite: NUCLEAR",autoFocus:!0},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:392,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{onClick:()=>{E(!1),v("")},className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:401,columnNumber:23},void 0),e.jsxDEV("button",{onClick:p,disabled:f!=="NUCLEAR"||a,className:"flex-1 bg-red-800 hover:bg-red-900 text-white py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:417,columnNumber:29},void 0),"A limpar..."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:416,columnNumber:27},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:422,columnNumber:29},void 0),"EXECUTAR NUCLEAR"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:421,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:410,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:400,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:388,columnNumber:19},void 0):e.jsxDEV("button",{onClick:()=>E(!0),disabled:a,className:"w-full bg-red-800 hover:bg-red-900 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 animate-pulse",children:[e.jsxDEV(Ts,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:384,columnNumber:21},void 0),e.jsxDEV("span",{children:"💥 LIMPEZA NUCLEAR COMPLETA"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:385,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:379,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:361,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:348,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:332,columnNumber:9},void 0),h&&e.jsxDEV("div",{className:`rounded-lg border-2 p-6 ${h.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[h.success?e.jsxDEV(Z,{className:"h-6 w-6 text-green-600 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:542,columnNumber:15},void 0):e.jsxDEV(ba,{className:"h-6 w-6 text-red-600 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:544,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3 flex-1",children:[e.jsxDEV("h4",{className:`font-semibold ${h.success?"text-green-900":"text-red-900"}`,children:"💥 Resultado da Limpeza Nuclear"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:547,columnNumber:15},void 0),e.jsxDEV("p",{className:`${h.success?"text-green-800":"text-red-800"}`,children:h.message},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:557,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Chaves Limpas"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:570,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-bold text-blue-600",children:h.details.localStorageKeysCleared.length},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:571,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:569,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Session Storage"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:579,columnNumber:19},void 0),e.jsxDEV("div",{className:`font-bold ${h.details.sessionStorageCleared?"text-green-600":"text-red-600"}`,children:h.details.sessionStorageCleared?"✅ Limpo":"❌ Falhou"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:580,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:578,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Super Admin"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:593,columnNumber:19},void 0),e.jsxDEV("div",{className:`font-bold ${h.details.superAdminRecreated?"text-green-600":"text-red-600"}`,children:h.details.superAdminRecreated?"✅ Recriado":"❌ Falhou"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:594,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:592,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:568,columnNumber:15},void 0),h.details.localStorageKeysCleared.length>0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-blue-100 border border-blue-200 rounded",children:[e.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"Chaves localStorage Limpas:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:612,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm text-blue-800 space-y-1 max-h-32 overflow-y-auto",children:h.details.localStorageKeysCleared.map((F,P)=>e.jsxDEV("div",{className:"font-mono",children:["�� ",F]},P,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:618,columnNumber:25},void 0))},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:615,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:611,columnNumber:17},void 0),h.details.errors.length>0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-red-100 border border-red-200 rounded",children:[e.jsxDEV("h5",{className:"font-medium text-red-900 mb-2",children:"Erros:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:630,columnNumber:19},void 0),e.jsxDEV("ul",{className:"text-sm text-red-800 space-y-1",children:h.details.errors.map((F,P)=>e.jsxDEV("li",{children:["• ",F]},P,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:633,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:631,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:546,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:540,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:533,columnNumber:9},void 0),r&&e.jsxDEV("div",{className:`rounded-lg border-2 p-6 ${r.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[r.success?e.jsxDEV(Z,{className:"h-6 w-6 text-green-600 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:654,columnNumber:15},void 0):e.jsxDEV(ba,{className:"h-6 w-6 text-red-600 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:656,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3 flex-1",children:[e.jsxDEV("h4",{className:`font-semibold ${r.success?"text-green-900":"text-red-900"}`,children:"Resultado da Eliminação"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:659,columnNumber:15},void 0),e.jsxDEV("p",{className:`${r.success?"text-green-800":"text-red-800"}`,children:r.message},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:667,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-4",children:[e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:678,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-bold text-blue-600",children:r.details.firebaseUsersDeleted},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:679,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:677,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:684,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-bold text-purple-600",children:r.details.firestoreUsersDeleted},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:685,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:683,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Local Storage"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:690,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-bold text-green-600",children:r.details.localStorageUsersDeleted},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:691,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:689,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Mock Auth"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:696,columnNumber:19},void 0),e.jsxDEV("div",{className:"font-bold text-orange-600",children:r.details.mockAuthUsersDeleted},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:697,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:695,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-center p-3 bg-white rounded border",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Super Admin"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:702,columnNumber:19},void 0),e.jsxDEV("div",{className:`font-bold ${r.details.superAdminPreserved?"text-green-600":"text-red-600"}`,children:r.details.superAdminPreserved?"✅ Preservado":"❌ Perdido"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:703,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:701,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:676,columnNumber:15},void 0),r.details.errors.length>0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-red-100 border border-red-200 rounded",children:[e.jsxDEV("h5",{className:"font-medium text-red-900 mb-2",children:"Erros:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:720,columnNumber:19},void 0),e.jsxDEV("ul",{className:"text-sm text-red-800 space-y-1",children:r.details.errors.map((F,P)=>e.jsxDEV("li",{children:["• ",F]},P,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:723,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:721,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:658,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:652,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:645,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsxDEV(qe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:736,columnNumber:11},void 0),"Informações Importantes"]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:735,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"O que esta operação faz:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:741,columnNumber:13},void 0)," Remove todos os utilizadores de todos os sistemas (Firebase Auth, Firestore, localStorage, mock auth) exceto o super admin Gonçalo."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:740,columnNumber:11},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Super Admin preservado:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:746,columnNumber:13},void 0)," Gonçalo Fonseca (gongonsilva@gmail.com) será sempre mantido com todas as permissões."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:745,columnNumber:11},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Sistemas afetados:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:750,columnNumber:13},void 0)," Firebase Authentication, Firestore users collection, localStorage (app-users, mock-users), mock authentication service."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:749,columnNumber:11},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Sessões:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:755,columnNumber:13},void 0)," Todas as sessões ativas serão limpas, exceto se o super admin estiver atualmente logado."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:754,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-red-700 font-semibold",children:[e.jsxDEV("strong",{children:"⚠️ ATENÇÃO:"},void 0,!1,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:759,columnNumber:13},void 0)," Esta operação é completamente irreversível. Todos os dados de utilizador serão perdidos permanentemente."]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:758,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:739,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:734,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DangerousUserDeletion.tsx",lineNumber:199,columnNumber:5},void 0)},Fc=()=>{const n=m.useCallback(d=>{console.log("🔔 Work assignment notification:",d),window.dispatchEvent(new CustomEvent("workAssignment",{detail:d})),window.dispatchEvent(new CustomEvent("worksUpdated",{detail:{type:"assignment",workId:d.workId,...d}}))},[]),s=m.useCallback(d=>{console.log("👤 User event notification:",d),window.dispatchEvent(new CustomEvent("usersUpdated",{detail:d}))},[]),a=m.useCallback(d=>{console.log("🔄 Sync event notification:",d),window.dispatchEvent(new CustomEvent("firebase-sync",{detail:{type:d.type,collection:d.collection,recordCount:d.recordCount,error:d.error,timestamp:Date.now()}}))},[]),o=m.useCallback((d,l,f="info",v=!0)=>{window.dispatchEvent(new CustomEvent("customNotification",{detail:{title:d,message:l,type:f,autoHide:v,timestamp:Date.now()}}))},[]),r=m.useCallback((d,l,f,v,g,C)=>{l.forEach(h=>{n({workId:`work-${Date.now()}`,workTitle:d,assignedTo:h,assignedBy:f,type:"assigned",client:v,location:g,startDate:C})})},[n]),i=m.useCallback((d,l,f,v,g)=>{f.forEach(C=>{n({workId:d,workTitle:l,assignedTo:C,assignedBy:v,type:"updated"})}),o("Trabalho Atualizado",`"${l}" foi atualizado: ${g.join(", ")}`,"info")},[n,o]),t=m.useCallback((d,l,f)=>{s({type:"created",userName:d,userEmail:l,performedBy:f}),o("Novo Utilizador",`${d} foi adicionado ao sistema`,"success")},[s,o]),u=m.useCallback((d,l)=>{a({type:"sync_completed",collection:d,recordCount:l})},[a]);return{notifyWorkAssignment:n,notifyUserEvent:s,notifySyncEvent:a,notifyCustom:o,notifyWorkCreated:r,notifyWorkUpdated:i,notifyUserCreated:t,notifySyncSuccess:u}},Pc=()=>{const{notifyUserCreated:n,notifyCustom:s,notifySyncSuccess:a}=Fc(),[o,r]=m.useState(!1),i=async()=>{r(!0),await new Promise(f=>setTimeout(f,1e3)),window.dispatchEvent(new CustomEvent("worksUpdated",{detail:{type:"assignment",workId:`work-${Date.now()}`,workTitle:"Limpeza de Piscina Villa Marina",client:"Villa Marina Resort",location:"Cascais",startDate:"2024-01-15"}})),r(!1)},t=()=>{window.dispatchEvent(new CustomEvent("worksUpdated",{detail:{type:"assignment",workId:"work-123",workTitle:"Manutenção de Equipamentos Atualizada",client:"Hotel Paradise",location:"Estoril",startDate:"2024-01-20"}}))},u=()=>{n("Ana Rodrigues","ana@leirisonda.com","Gonçalo Fonseca")},d=()=>{s("Sistema Atualizado","Nova versão da aplicação disponível!","success")},l=()=>{a("works",25)};return e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxDEV(ls,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:73,columnNumber:9},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Demo do Sistema de Notificações"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:74,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:72,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Teste as notificações em tempo real do sistema. Estas demonstrações mostram como as notificações aparecem quando trabalhos são atribuídos, utilizadores criados, ou outros eventos importantes acontecem."},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:79,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("button",{onClick:i,disabled:o,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50",children:[e.jsxDEV(On,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:91,columnNumber:11},void 0),o?"Criando...":"Criar Trabalho com Atribuição"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:86,columnNumber:9},void 0),e.jsxDEV("button",{onClick:t,className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 text-white p-3 rounded-lg transition-colors",children:[e.jsxDEV(On,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:99,columnNumber:11},void 0),"Atualizar Trabalho"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("button",{onClick:u,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg transition-colors",children:[e.jsxDEV(oe,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:107,columnNumber:11},void 0),"Criar Utilizador"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:103,columnNumber:9},void 0),e.jsxDEV("button",{onClick:d,className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-lg transition-colors",children:[e.jsxDEV(ls,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:115,columnNumber:11},void 0),"Notificação Customizada"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:111,columnNumber:9},void 0),e.jsxDEV("button",{onClick:l,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-lg transition-colors",children:[e.jsxDEV(Z,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:123,columnNumber:11},void 0),"Sincronização Completa"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:119,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:85,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"Como funciona:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:129,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Trabalhos:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:132,columnNumber:15},void 0)," Notificações aparecem quando trabalhos são atribuídos ou atualizados"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Utilizadores:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:136,columnNumber:15},void 0)," Alertas quando novos utilizadores são criados"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Sincronização:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:140,columnNumber:15},void 0)," Status de sincronização em tempo real"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Notificações:"},void 0,!1,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:144,columnNumber:15},void 0)," Sistema de notificações push instantâneas"]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:143,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:128,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationDemo.tsx",lineNumber:71,columnNumber:5},void 0)},Uc=()=>{var v;const[n,s]=m.useState(!1),[a,o]=m.useState(!1),[r,i]=m.useState(null),[t,u]=m.useState(null),d=async()=>{s(!0);try{const g=await rr.analyzeUserData();i(g),console.log("📊 Análise completa:",g)}catch(g){console.error("Erro na análise:",g)}finally{s(!1)}},l=async()=>{if(confirm("⚠️ ATENÇÃO: Esta operação vai ELIMINAR TODOS os utilizadores e dados de autenticação, incluindo sessões do Firebase. Apenas o super admin será recriado. Confirma?")){o(!0);try{const g=await rr.nuclearUserCleanup();u(g),console.log("🚨 Resultado da limpeza nuclear:",g),g.success?alert("✅ LIMPEZA NUCLEAR CONCLUÍDA! A página irá recarregar para garantir estado limpo."):alert(`❌ Erro na limpeza: ${g.message}`)}catch(g){console.error("Erro na limpeza nuclear:",g),alert(`❌ Erro crítico: ${g}`)}finally{o(!1)}}},f=async()=>{const g=await rr.hasOldUsersLoggedIn();alert(g?"⚠️ UTILIZADORES ANTIGOS DETECTADOS! É necessária limpeza nuclear.":"✅ Nenhum utilizador antigo detectado.")};return e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-bold text-red-800 mb-4",children:"🚨 Limpeza Nuclear de Utilizadores - VERSÃO MELHORADA"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:66,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-red-700 mb-4",children:"Esta versão melhorada elimina COMPLETAMENTE a persistência do Firebase Auth que estava a permitir que utilizadores antigos continuassem logados."},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:69,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{onClick:f,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded font-medium",children:"🔍 Verificar Utilizadores Antigos"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:77,columnNumber:9},void 0),e.jsxDEV("button",{onClick:d,disabled:n,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white px-4 py-2 rounded font-medium",children:n?"📊 Analisando...":"📊 Analisar Dados de Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:85,columnNumber:9},void 0),e.jsxDEV("button",{onClick:l,disabled:a,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-300 text-white px-4 py-2 rounded font-medium",children:a?"🚨 Limpeza em Curso...":"🚨 LIMPEZA NUCLEAR TOTAL"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:96,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:75,columnNumber:7},void 0),r&&e.jsxDEV("div",{className:"mt-6 bg-white border rounded p-4",children:[e.jsxDEV("h4",{className:"font-bold text-gray-800 mb-2",children:"📊 Análise de Dados:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:108,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-sm space-y-2",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Total de dados de utilizador:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:111,columnNumber:15},void 0)," ",r.totalUserData]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:110,columnNumber:13},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Firebase Auth ativo:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:115,columnNumber:15},void 0)," ",r.firebaseAuthUser?"✅ SIM (PROBLEMA!)":"❌ Não"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Chaves relacionadas:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:119,columnNumber:15},void 0)," ",r.userRelatedKeys.length]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Bases IndexedDB:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:123,columnNumber:15},void 0)," ",r.indexedDBDatabases.length]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:122,columnNumber:13},void 0),r.firebaseAuthUser&&e.jsxDEV("div",{className:"bg-red-100 border border-red-300 rounded p-2 mt-2",children:e.jsxDEV("p",{className:"text-red-800 font-medium",children:["⚠️ FIREBASE AUTH ATIVO! Utilizador antigo ainda logado:"," ",(v=r.details.firebaseCurrentUser)==null?void 0:v.email]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:129,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:128,columnNumber:15},void 0),e.jsxDEV("details",{className:"mt-4",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"Ver detalhes completos"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:137,columnNumber:15},void 0),e.jsxDEV("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto",children:JSON.stringify(r,null,2)},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:140,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:109,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:107,columnNumber:9},void 0),t&&e.jsxDEV("div",{className:"mt-6 bg-white border rounded p-4",children:[e.jsxDEV("h4",{className:"font-bold text-gray-800 mb-2",children:"🚨 Resultado da Limpeza Nuclear:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:151,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-sm space-y-2",children:[e.jsxDEV("p",{className:`font-medium ${t.success?"text-green-600":"text-red-600"}`,children:t.message},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"localStorage limpo:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:164,columnNumber:19},void 0)," ",t.details.localStorageKeysCleared.length," chaves"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"sessionStorage:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:168,columnNumber:19},void 0)," ",t.details.sessionStorageCleared?"✅":"❌"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:167,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:162,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Firebase Auth:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:174,columnNumber:19},void 0)," ",t.details.firebaseAuthCleared?"✅":"❌"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"IndexedDB:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:178,columnNumber:19},void 0)," ",t.details.indexedDBCleared?"✅":"❌"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:177,columnNumber:17},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Super admin:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:182,columnNumber:19},void 0)," ",t.details.superAdminRecreated?"✅":"❌"]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:181,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:161,columnNumber:13},void 0),t.details.errors.length>0&&e.jsxDEV("div",{className:"bg-red-100 border border-red-300 rounded p-2 mt-2",children:[e.jsxDEV("p",{className:"text-red-800 font-medium",children:"Erros:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:190,columnNumber:17},void 0),e.jsxDEV("ul",{className:"text-red-700 text-xs",children:t.details.errors.map((g,C)=>e.jsxDEV("li",{children:["• ",g]},C,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:194,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:189,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:154,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:150,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-4 text-sm text-red-600",children:[e.jsxDEV("p",{children:e.jsxDEV("strong",{children:"Melhorias desta versão:"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:206,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:205,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsxDEV("li",{children:"🔥 Força logout completo do Firebase Auth"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:209,columnNumber:11},void 0),e.jsxDEV("li",{children:"🗃️ Limpa bases IndexedDB do Firebase"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:210,columnNumber:11},void 0),e.jsxDEV("li",{children:"🔐 Remove persistência de autenticação"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:211,columnNumber:11},void 0),e.jsxDEV("li",{children:"🔄 Força recarregamento para estado limpo"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:212,columnNumber:11},void 0),e.jsxDEV("li",{children:"📊 Análise detalhada antes da limpeza"},void 0,!1,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:213,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:208,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:204,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NuclearUserCleanup.tsx",lineNumber:65,columnNumber:5},void 0)},Ic=()=>{const n=[{icon:ls,title:"Notificações Push",description:"Receba alertas em tempo real sobre obras, manutenções e tarefas",technical:"Notification API + Service Worker"},{icon:Es,title:"Localização GPS",description:"Navegação automática para locais de trabalho e clientes",technical:"Geolocation API + Google Maps integration"},{icon:yt,title:"Câmera Integrada",description:"Tire fotografias diretamente nas obras e relatórios",technical:"MediaDevices getUserMedia API"},{icon:pe,title:"Armazenamento Offline",description:"Trabalhe sem internet, dados sincronizam automaticamente",technical:"LocalStorage + IndexedDB + Cache API"},{icon:ys,title:"Sincronização Firebase",description:"Dados em nuvem sincronizados em tempo real entre dispositivos",technical:"Firebase Firestore + Realtime Database"},{icon:oe,title:"Multi-Utilizador",description:"Vários utilizadores podem aceder e trabalhar simultaneamente",technical:"Firebase Auth + Role-based permissions"},{icon:si,title:"Instalação PWA",description:"Instale como app nativa no telemóvel ou computador",technical:"Progressive Web App + Service Worker"},{icon:Xe,title:"Segurança Avançada",description:"Autenticação segura e proteção de dados",technical:"JWT tokens + Encrypted storage"}];return e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-6",children:[e.jsxDEV(Ts,{className:"h-6 w-6 text-blue-600 mr-3"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:74,columnNumber:9},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-gray-900",children:"Funcionalidades Ativadas com um Clique"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:75,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:73,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((s,a)=>{const o=s.icon;return e.jsxDEV("div",{className:"border border-gray-100 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV("div",{className:"bg-blue-100 p-2 rounded-lg mr-3 flex-shrink-0",children:e.jsxDEV(o,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:91,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:90,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-1",children:s.title},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:94,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:s.description},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:97,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 font-mono",children:s.technical},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:100,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:93,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:89,columnNumber:15},void 0)},a,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:85,columnNumber:13},void 0)})},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:80,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(Z,{className:"h-5 w-5 text-green-600 mt-0.5 mr-3"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:112,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-green-900 mb-1",children:"Ativação Automática Inteligente"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-green-800 mb-2",children:"O sistema detecta automaticamente as capacidades do dispositivo e ativa apenas as funcionalidades suportadas. Mesmo que algumas falhem, as outras continuam a funcionar normalmente."},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Progressivo:"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:124,columnNumber:19},void 0)," Ativa uma funcionalidade de cada vez"]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:123,columnNumber:15},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Resiliente:"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:128,columnNumber:19},void 0)," Falhas numa funcionalidade não afetam as outras"]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:127,columnNumber:15},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Compatível:"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:132,columnNumber:19},void 0)," Adapta-se a diferentes browsers e dispositivos"]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:131,columnNumber:15},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Informativo:"},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:136,columnNumber:19},void 0)," Mostra progresso em tempo real"]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:135,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:122,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:113,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:111,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:110,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/ActivationSummary.tsx",lineNumber:72,columnNumber:5},void 0)},kc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(null),[r,i]=m.useState(!1),[t,u]=m.useState([{id:"notifications",name:"Notificações Push",description:"Ativar notificações para receber alertas em tempo real",icon:ls,status:"pending"},{id:"location",name:"Localização GPS",description:"Permitir acesso à localização para funcionalidades de mapa",icon:Es,status:"pending"},{id:"camera",name:"Câmera",description:"Acesso à câmera para fotografias em obras",icon:ea,status:"pending"},{id:"storage",name:"Armazenamento Local",description:"Configurar cache local para funcionamento offline",icon:pe,status:"pending"},{id:"sync",name:"Sincronização Firebase",description:"Estabelecer ligação e sincronização com Firebase",icon:ys,status:"pending"},{id:"users",name:"Sistema de Utilizadores",description:"Verificar e restaurar utilizadores do sistema",icon:oe,status:"pending"},{id:"pwa",name:"Instalação PWA",description:"Preparar app para instalação como aplicação nativa",icon:si,status:"pending"},{id:"security",name:"Configurações de Segurança",description:"Aplicar políticas de segurança e autenticação",icon:Xe,status:"pending"},{id:"cross-device",name:"Sincronização Multi-Dispositivo",description:"Configurar acesso de vários dispositivos e utilizadores",icon:X,status:"pending"}]),d=(x,w,U)=>{u(F=>F.map(P=>P.id===x?{...P,status:w,error:U}:P))},l=async()=>{try{if(!("Notification"in window))throw new Error("Este browser não suporta notificações");if(Notification.permission==="granted")return!0;if(Notification.permission!=="denied"&&await Notification.requestPermission()==="granted")return new Notification("Leirisonda",{body:"Notificações ativadas com sucesso!",icon:"/icon.svg"}),!0;throw new Error("Permissão de notificações negada")}catch(x){throw new Error(x.message||"Erro ao ativar notificações")}},f=async()=>{try{if(!("geolocation"in navigator))throw new Error("Este dispositivo não suporta localização");return new Promise((x,w)=>{navigator.geolocation.getCurrentPosition(U=>{console.log("Localização obtida:",U.coords),x(!0)},U=>{let F="Erro ao obter localização";switch(U.code){case U.PERMISSION_DENIED:F="Permissão de localização negada";break;case U.POSITION_UNAVAILABLE:F="Localização não disponível";break;case U.TIMEOUT:F="Timeout ao obter localização";break}w(new Error(F))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}catch(x){throw new Error(x.message||"Erro ao ativar localização")}},v=async()=>{try{if(!("mediaDevices"in navigator)||!("getUserMedia"in navigator.mediaDevices))throw new Error("Este dispositivo não suporta acesso à câmera");return(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1})).getTracks().forEach(w=>w.stop()),!0}catch{throw new Error("Permissão de câmera negada ou não disponível")}},g=async()=>{try{const x="leirisonda-storage-test",w="test-value";localStorage.setItem(x,w);const U=localStorage.getItem(x);if(localStorage.removeItem(x),U!==w)throw new Error("LocalStorage não está funcionando");"caches"in window&&await(await caches.open("leirisonda-v1")).add("/");const F=["app-users","mock-users","pools","works","maintenance","clients"];for(const P of F)localStorage.getItem(P)||localStorage.setItem(P,"[]");return!0}catch{throw new Error("Erro ao configurar armazenamento local")}},C=async()=>{try{const{isFirebaseReady:x}=await ie(async()=>{const{isFirebaseReady:P}=await Promise.resolve().then(()=>Zs);return{isFirebaseReady:P}},void 0),{getFirebaseStatus:w,reinitializeFirebase:U}=await ie(async()=>{const{getFirebaseStatus:P,reinitializeFirebase:O}=await import("./fallbackFunctions-C2i5CU4P.js");return{getFirebaseStatus:P,reinitializeFirebase:O}},[]);if(!x()&&!await U())throw new Error("Não foi possível conectar ao Firebase");if(!w().ready)throw new Error("Firebase não está pronto");return!0}catch(x){throw new Error(x.message||"Erro na sincronização Firebase")}},h=async()=>{try{const{userRestoreService:x}=await ie(async()=>{const{userRestoreService:U}=await import("./userRestoreService-ClV01tlB.js");return{userRestoreService:U}},[]);if(x.needsRestore()){const U=await x.restoreDefaultUsers();if(!U.success)throw new Error(U.message)}if(x.getUserStats().totalUnique===0)throw new Error("Nenhum utilizador encontrado");return!0}catch(x){throw new Error(x.message||"Erro no sistema de utilizadores")}},y=async()=>{try{if("serviceWorker"in navigator){const w=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("Service Worker registrado:",w)}if(!document.querySelector('link[rel="manifest"]'))throw new Error("Manifest não encontrado");return!0}catch(x){return console.warn("PWA setup warning:",x),!0}},S=async()=>{try{sessionStorage.clear();const x={autoLogout:24*60*60*1e3,maxLoginAttempts:5,requireStrongPasswords:!0};return localStorage.setItem("security-settings",JSON.stringify(x)),!0}catch{throw new Error("Erro nas configurações de segurança")}},E=async()=>{try{try{const{syncManager:w}=await ie(async()=>{const{syncManager:U}=await Promise.resolve().then(()=>yl);return{syncManager:U}},void 0);await w.performFullSync()}catch(w){console.warn("Sync manager not available:",w)}const x={enabled:!0,interval:5*60*1e3,lastSync:new Date().toISOString()};return localStorage.setItem("sync-config",JSON.stringify(x)),!0}catch(x){return console.warn("Cross-device sync warning:",x),!0}},N=async x=>{o(x.id),d(x.id,"running");try{let w=!1;switch(x.id){case"notifications":w=await l();break;case"location":w=await f();break;case"camera":w=await v();break;case"storage":w=await g();break;case"sync":w=await C();break;case"users":w=await h();break;case"pwa":w=await y();break;case"security":w=await S();break;case"cross-device":w=await E();break;default:w=!0}w?d(x.id,"success"):d(x.id,"error","Falha na ativação"),await new Promise(U=>setTimeout(U,800))}catch(w){console.error(`Erro no step ${x.id}:`,w),d(x.id,"error",w.message),await new Promise(U=>setTimeout(U,1e3))}},D=async()=>{s(!0),i(!1),o(null),u(x=>x.map(w=>({...w,status:"pending",error:void 0})));try{for(const x of t)await N(x);i(!0),Notification.permission==="granted"&&new Notification("Leirisonda - Ativação Completa",{body:"Dispositivo configurado com sucesso para funcionamento completo!",icon:"/icon.svg"})}catch(x){console.error("Erro na ativação completa:",x)}finally{s(!1),o(null)}},p=()=>t.filter(x=>x.status==="success").length,b=()=>t.filter(x=>x.status==="error").length;return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(Ts,{className:"h-8 w-8 mr-3"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:476,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Ativação Completa do Dispositivo"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:478,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-blue-100",children:"Configure tudo o que é necessário para funcionamento multi-dispositivo e multi-utilizador"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:481,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:477,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:475,columnNumber:9},void 0),e.jsxDEV("button",{onClick:D,disabled:n,className:"w-full bg-white text-blue-600 py-4 px-6 rounded-lg font-bold text-lg hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",children:n?e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(zn,{className:"h-6 w-6 animate-spin mr-3"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:496,columnNumber:15},void 0),"Ativando... (",p(),"/",t.length,")"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:495,columnNumber:13},void 0):e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV(No,{className:"h-6 w-6 mr-3"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:501,columnNumber:15},void 0),"ATIVAR TUDO AGORA"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:500,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:489,columnNumber:9},void 0),r&&e.jsxDEV("div",{className:"mt-4 bg-green-500 bg-opacity-20 border border-green-300 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Z,{className:"h-5 w-5 text-green-100 mr-2"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:510,columnNumber:15},void 0),e.jsxDEV("span",{className:"font-medium",children:["Ativação concluída! ",p()," de ",t.length," ","funcionalidades ativadas.",b()>0&&` (${b()} avisos)`]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:511,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:509,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:508,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:474,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Progresso da Ativação"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:523,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:t.map((x,w)=>{const U=x.icon,F=a===x.id;return e.jsxDEV("div",{className:`flex items-center p-3 rounded-lg border transition-all ${F?"border-blue-300 bg-blue-50":x.status==="success"?"border-green-300 bg-green-50":x.status==="error"?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxDEV("div",{className:"flex-shrink-0 mr-3",children:x.status==="running"?e.jsxDEV(zn,{className:"h-5 w-5 text-blue-600 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:547,columnNumber:21},void 0):x.status==="success"?e.jsxDEV(Z,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:549,columnNumber:21},void 0):x.status==="error"?e.jsxDEV(me,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:551,columnNumber:21},void 0):e.jsxDEV(U,{className:"h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:553,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:545,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h4",{className:`font-medium ${x.status==="success"?"text-green-900":x.status==="error"?"text-red-900":F?"text-blue-900":"text-gray-900"}`,children:x.name},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:559,columnNumber:21},void 0),e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${x.status==="success"?"bg-green-100 text-green-800":x.status==="error"?"bg-red-100 text-red-800":x.status==="running"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:x.status==="success"?"Sucesso":x.status==="error"?"Erro":x.status==="running"?"Ativando":"Pendente"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:572,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:558,columnNumber:19},void 0),e.jsxDEV("p",{className:`text-sm mt-1 ${x.status==="error"&&x.error?"text-red-600":"text-gray-600"}`,children:x.status==="error"&&x.error?x.error:x.description},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:593,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:557,columnNumber:17},void 0)]},x.id,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:533,columnNumber:15},void 0)})},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:527,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:522,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"O que esta ativação faz:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:613,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Notificações:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:618,columnNumber:15},void 0)," Permite receber alertas em tempo real"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:617,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Localização:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:622,columnNumber:15},void 0)," Ativa GPS para navegação automática"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:621,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Câmera:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:625,columnNumber:15},void 0)," Permite tirar fotografias nas obras"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:624,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Armazenamento:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:628,columnNumber:15},void 0)," Configura cache para funcionamento offline"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:627,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Sincronização:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:632,columnNumber:15},void 0)," Conecta com Firebase para dados em nuvem"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:631,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Utilizadores:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:636,columnNumber:15},void 0)," Garante que todos os utilizadores estão disponíveis"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:635,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"PWA:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:640,columnNumber:15},void 0)," Prepara instalação como app nativa"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:639,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Segurança:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:643,columnNumber:15},void 0)," Aplica políticas de segurança"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:642,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Multi-dispositivo:"},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:646,columnNumber:15},void 0)," Configura sincronização entre dispositivos"]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:645,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:616,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:612,columnNumber:7},void 0),e.jsxDEV(Ic,{},void 0,!1,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:653,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/CompleteDeviceActivation.tsx",lineNumber:472,columnNumber:5},void 0)},ma=class ma{static getInstance(){return ma.instance||(ma.instance=new ma),ma.instance}async diagnoseDataPersistence(){const s={localStorage:!1,firestore:!1,working:!1,issues:[],recommendations:[]};try{const a="test-persistence-"+Date.now(),o={test:!0,timestamp:Date.now()};localStorage.setItem(a,JSON.stringify(o));const r=localStorage.getItem(a);r&&JSON.parse(r).test===!0?(s.localStorage=!0,console.log("✅ localStorage está funcional")):(s.issues.push("localStorage não consegue guardar/ler dados"),s.recommendations.push("Verificar se o navegador permite localStorage")),localStorage.removeItem(a)}catch(a){s.issues.push(`Erro no localStorage: ${a}`),s.recommendations.push("localStorage pode estar desativado no navegador")}try{if(Ys()){const a=await Ne.create("system_tests",{type:"persistence_test",timestamp:new Date().toISOString(),data:{test:!0}});a?(s.firestore=!0,console.log("✅ Firestore está funcional"),await Ne.delete("system_tests",a)):(s.issues.push("Firestore não consegue criar documentos"),s.recommendations.push("Verificar regras de segurança do Firestore"))}else s.issues.push("Firestore não está inicializado"),s.recommendations.push("Verificar configuração do Firebase")}catch(a){a.toString().includes("Service firestore is not available")?s.recommendations.push("Firestore não habilitado - aplicação funciona com localStorage"):(s.issues.push(`Problema no Firestore: ${a}`),s.recommendations.push("Verificar ligação à internet e configuração Firebase"))}return s.working=s.localStorage||s.firestore,s.working||(s.issues.push("Nenhum sistema de persistência está funcional"),s.recommendations.push("Contactar suporte técnico urgentemente")),s}async forceDataSync(){console.log("🔄 Iniciando sincronização forçada de dados...");try{return Ys()?(await Ne.syncAll(),(await this.diagnoseDataPersistence()).working?(console.log("✅ Sincronização forçada concluída com sucesso"),!0):(console.error("❌ Sincronização forçada falhou"),!1)):(console.warn("⚠️ Firestore não disponível, a usar apenas localStorage"),!1)}catch(s){return console.error("❌ Erro na sincronização forçada:",s),!1}}async ensureDataPersistence(s,a,o){let r=!1;if(Ys())try{const i=await Ne.create(a,s);i&&(r=!0,console.log(`✅ Dados guardados no Firestore: ${a}/${i}`))}catch(i){console.warn(`⚠️ Erro ao guardar no Firestore: ${i}`)}try{const i=localStorage.getItem(o),t=i?JSON.parse(i):[];s.id||(s.id=Date.now().toString()),t.push(s),localStorage.setItem(o,JSON.stringify(t)),r=!0,console.log(`✅ Dados guardados no localStorage: ${o}`)}catch(i){console.error(`❌ Erro ao guardar no localStorage: ${i}`)}return r}async checkDataIntegrity(){const s={localCount:0,firestoreCount:0,synced:!1,missing:[]};try{const a=["works","pools","maintenance","app-users","clients"];for(const o of a){const r=localStorage.getItem(o);if(r){const i=JSON.parse(r);s.localCount+=Array.isArray(i)?i.length:0}}if(Ys()){const o=["obras","piscinas","manutencoes","utilizadores","clientes"];for(const r of o){const i=await Ne.read(r);s.firestoreCount+=i.length}}s.synced=Math.abs(s.localCount-s.firestoreCount)<=2,s.synced||s.missing.push(`Diferença de ${Math.abs(s.localCount-s.firestoreCount)} registos entre local e Firestore`)}catch(a){console.error("❌ Erro na verificação de integridade:",a),s.missing.push(`Erro na verificação: ${a}`)}return s}async repairDataPersistence(){console.log("🔧 Iniciando reparação da persistência de dados...");try{const s=await this.diagnoseDataPersistence();console.log("📊 Estado da persistência:",s),s.firestore&&await this.forceDataSync();const a=await this.checkDataIntegrity();if(console.log("🔍 Integridade dos dados:",a),!a.synced&&(console.log("🔧 Reparando inconsistências..."),Ys())){const r=[{firestore:"obras",local:"works"},{firestore:"piscinas",local:"pools"},{firestore:"manutencoes",local:"maintenance"},{firestore:"utilizadores",local:"app-users"},{firestore:"clientes",local:"clients"}];for(const{firestore:i,local:t}of r)await Ne.syncWithLocalStorage(i,t)}return(await this.diagnoseDataPersistence()).working?(console.log("✅ Reparação concluída com sucesso"),typeof window<"u"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("✅ Sistema Reparado",{body:"A persistência de dados foi reparada com sucesso",icon:"/icon.svg"}),!0):(console.error("❌ Reparação falhou"),!1)}catch(s){return console.error("❌ Erro na reparação:",s),!1}}startPersistenceMonitoring(){console.log("👁️ Iniciando monitorização de persistência..."),setInterval(async()=>{const s=await this.diagnoseDataPersistence();s.working||(console.warn("⚠️ Problema de persistência detectado:",s.issues),await this.repairDataPersistence()||(console.error("🚨 CRÍTICO: Persistência de dados falhada"),typeof window<"u"&&alert("⚠️ ATENÇÃO: Os dados podem não estar a ser guardados. Contacte o suporte técnico.")))},3e4)}};ae(ma,"instance");let Zr=ma;const nr=Zr.getInstance();typeof window<"u"&&setTimeout(()=>{nr.startPersistenceMonitoring()},5e3);const Mc=({onClose:n,autoCheck:s=!1})=>{const[a,o]=m.useState(null),[r,i]=m.useState(!1),[t,u]=m.useState(!1),[d,l]=m.useState(null),[f,v]=m.useState(s),g=async()=>{i(!0);try{const E=await nr.diagnoseDataPersistence();o(E),l(new Date),console.log("📊 Diagnóstico de persistência:",E)}catch(E){console.error("❌ Erro no diagnóstico:",E)}finally{i(!1)}},C=async()=>{u(!0);try{await nr.repairDataPersistence()?(alert("✅ Reparação concluída com sucesso! Os dados devem agora ser guardados corretamente."),await g()):alert("❌ Não foi possível reparar automaticamente. Contacte o suporte técnico.")}catch(E){console.error("❌ Erro na reparação:",E),alert("❌ Erro durante a reparação. Tente novamente ou contacte o suporte.")}finally{u(!1)}},h=async()=>{i(!0);try{await nr.forceDataSync()?(alert("✅ Sincronização forçada concluída!"),await g()):alert("⚠️ Sincronização parcial. Alguns dados podem não ter sincronizado.")}catch(E){console.error("❌ Erro na sincronização:",E),alert("❌ Erro na sincronização. Tente novamente.")}finally{i(!1)}};m.useEffect(()=>{f&&g()},[f]),m.useEffect(()=>{let E;return f&&(E=setInterval(()=>{g()},6e4)),()=>{E&&clearInterval(E)}},[f]);const y=E=>E?e.jsxDEV(Z,{className:"h-5 w-5 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:115,columnNumber:14},void 0):e.jsxDEV(le,{className:"h-5 w-5 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:117,columnNumber:14},void 0),S=E=>E?"text-green-600":"text-red-600";return e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(pe,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:129,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"Diagnóstico de Persistência de Dados"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:130,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:128,columnNumber:9},void 0),n&&e.jsxDEV("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:136,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:127,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxDEV("button",{onClick:g,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[e.jsxDEV(X,{className:`h-4 w-4 ${r?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:152,columnNumber:11},void 0),e.jsxDEV("span",{children:"Verificar Agora"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:147,columnNumber:9},void 0),e.jsxDEV("button",{onClick:h,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[e.jsxDEV(Ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:161,columnNumber:11},void 0),e.jsxDEV("span",{children:"Sincronizar Dados"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:162,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:156,columnNumber:9},void 0),e.jsxDEV("button",{onClick:C,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50",children:[e.jsxDEV(ge,{className:`h-4 w-4 ${t?"animate-spin":""}`},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV("span",{children:t?"Reparando...":"Reparar Sistema"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:171,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:165,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:146,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsxDEV("input",{type:"checkbox",id:"auto-check",checked:f,onChange:E=>v(E.target.checked),className:"rounded"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:177,columnNumber:9},void 0),e.jsxDEV("label",{htmlFor:"auto-check",className:"text-sm text-gray-700",children:"Verificação automática ativa"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:176,columnNumber:7},void 0),a&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"p-4 rounded-lg border-2 border-gray-200",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Estado Geral"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:195,columnNumber:15},void 0),y(a.working)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:194,columnNumber:13},void 0),e.jsxDEV("p",{className:`text-sm ${S(a.working)}`,children:a.working?"✅ Sistema de persistência está funcional":"❌ Problemas na persistência de dados detectados"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"p-4 rounded-lg border border-gray-200",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:"localStorage"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:210,columnNumber:17},void 0),y(a.localStorage)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:209,columnNumber:15},void 0),e.jsxDEV("p",{className:`text-sm ${S(a.localStorage)}`,children:a.localStorage?"Funcional - dados locais guardados":"Com problemas - dados podem não guardar"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:213,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:208,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 rounded-lg border border-gray-200",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:223,columnNumber:17},void 0),y(a.firestore)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:222,columnNumber:15},void 0),e.jsxDEV("p",{className:`text-sm ${S(a.firestore)}`,children:a.firestore?"Funcional - dados na nuvem guardados":"Com problemas - sincronização offline"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:226,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:221,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:206,columnNumber:11},void 0),a.issues.length>0&&e.jsxDEV("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200",children:[e.jsxDEV("h4",{className:"font-medium text-red-800 mb-2",children:"🚨 Problemas Detectados:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:237,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-red-700 space-y-1",children:a.issues.map((E,N)=>e.jsxDEV("li",{children:["• ",E]},N,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:242,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:240,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:236,columnNumber:13},void 0),a.recommendations.length>0&&e.jsxDEV("div",{className:"p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:[e.jsxDEV("h4",{className:"font-medium text-yellow-800 mb-2",children:"💡 Recomendações:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:251,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-yellow-700 space-y-1",children:a.recommendations.map((E,N)=>e.jsxDEV("li",{children:["• ",E]},N,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:256,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:254,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:250,columnNumber:13},void 0),d&&e.jsxDEV("div",{className:"text-xs text-gray-500 text-center",children:["Última verificação: ",d.toLocaleString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:264,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:191,columnNumber:9},void 0),r&&!a&&e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(X,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:273,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-gray-700",children:"A verificar sistema..."},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:272,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-6 p-4 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsxDEV("h4",{className:"font-medium text-blue-800 mb-2",children:"ℹ️ Como usar:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:280,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Verificar Agora:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:283,columnNumber:15},void 0)," Executa diagnóstico completo"]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:282,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Sincronizar Dados:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:286,columnNumber:15},void 0)," Força sincronização com a nuvem"]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:285,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Reparar Sistema:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:290,columnNumber:15},void 0)," Tenta corrigir problemas automaticamente"]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:289,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Verificação automática:"},void 0,!1,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:294,columnNumber:15},void 0)," Monitoriza continuamente o sistema"]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:293,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:281,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:279,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DataPersistenceDiagnostic.tsx",lineNumber:126,columnNumber:5},void 0)};class Jn{static async testFirestoreAccess(){try{console.log("🧪 Testing Firestore access with current rules...");const{getDB:s}=await ie(async()=>{const{getDB:g}=await Promise.resolve().then(()=>Zs);return{getDB:g}},void 0),a=await s();if(!a)return{canRead:!1,canWrite:!1,error:"Database not initialized",suggestion:"Database service is not available. Try the INTENSIVE FIX first."};const{collection:o,doc:r,getDoc:i,setDoc:t,deleteDoc:u}=await ie(async()=>{const{collection:g,doc:C,getDoc:h,setDoc:y,deleteDoc:S}=await import("./vendor-C-G65PT7.js").then(E=>E.U);return{collection:g,doc:C,getDoc:h,setDoc:y,deleteDoc:S}},__vite__mapDeps([0,1]));let d=!1,l=!1,f="";try{const g=r(a,"__test__","rules-test");await i(g),d=!0,console.log("✅ Firestore READ access: OK")}catch(g){console.warn("❌ Firestore READ access: BLOCKED"),console.warn("Read error:",g.code,g.message),f+=`READ: ${g.code} - ${g.message}. `}try{const g=r(a,"__test__","rules-test");await t(g,{test:!0,timestamp:new Date().toISOString(),platform:"iOS Safari"}),l=!0,console.log("✅ Firestore WRITE access: OK");try{await u(g)}catch{console.warn("⚠️ Could not clean up test document")}}catch(g){console.warn("❌ Firestore WRITE access: BLOCKED"),console.warn("Write error:",g.code,g.message),f+=`WRITE: ${g.code} - ${g.message}. `}let v="";return!d&&!l?f.includes("permission-denied")?v="🚨 FIRESTORE RULES PROBLEM: Access is being blocked by security rules. Go to Firebase Console → Firestore → Rules and set permissive rules for development.":f.includes("unavailable")||f.includes("deadline-exceeded")?v="🌐 NETWORK PROBLEM: Connection to Firestore is failing. Check internet connection or try again.":v="🔧 CONFIGURATION PROBLEM: Firestore is not properly configured. Check project settings.":d&&!l?v="📝 WRITE RULES PROBLEM: Can read but cannot write. Update Firestore rules to allow write access.":!d&&l?v="👁️ READ RULES PROBLEM: Can write but cannot read. Update Firestore rules to allow read access.":v="✅ FIRESTORE ACCESS: Working correctly! Rules allow both read and write access.",{canRead:d,canWrite:l,error:f||void 0,suggestion:v}}catch(s){return console.error("💥 Firestore access test failed:",s),{canRead:!1,canWrite:!1,error:s.message,suggestion:"🔧 TEST FAILED: Could not test Firestore access. Try the intensive fix or check Firebase configuration."}}}static getDevelopmentRules(){return`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // DEVELOPMENT RULES - Allow all access for testing
    // ⚠️ Change these rules before going to production!
    match /{document=**} {
      allow read, write: if true;
    }
    
    // Alternative: More specific rules for your app
    // match /users/{userId} {
    //   allow read, write: if true;
    // }
    // match /obras/{obraId} {
    //   allow read, write: if true;
    // }
    // match /manutencoes/{manutencaoId} {
    //   allow read, write: if true;
    // }
    // match /piscinas/{piscinaId} {
    //   allow read, write: if true;
    // }
    // match /clientes/{clienteId} {
    //   allow read, write: if true;
    // }
  }
}`}static getProductionRules(){return`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Authentication required for all operations
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /obras/{obraId} {
      allow read, write: if request.auth != null;
    }
    
    match /manutencoes/{manutencaoId} {
      allow read, write: if request.auth != null;
    }
    
    match /piscinas/{piscinaId} {
      allow read, write: if request.auth != null;
    }
    
    match /clientes/{clienteId} {
      allow read, write: if request.auth != null;
    }
    
    // Allow test documents for connectivity testing
    match /__test__/{testId} {
      allow read, write: if true;
    }
  }
}`}static getManualFixInstructions(){return["📱 Abra o Firefox Console: console.firebase.google.com","🎯 Vá para o seu projeto: leirisonda-16f8b","🔧 Clique em 'Firestore Database'","📋 Clique no separador 'Regras' (Rules)","✏️ Substitua as regras existentes pelas regras de desenvolvimento","✅ Clique em 'Publicar' (Publish)","⏰ Aguarde alguns segundos para as regras serem aplicadas","🔄 Volte à app e teste novamente o login"]}}class Ua{static async runCompleteDiagnostic(){console.log("🔍 Iniciando diagnóstico completo do Firebase...");const s={isFirebaseReady:!1,isFirestoreConnected:!1,canRead:!1,canWrite:!1,rulesIssue:!1,networkIssue:!1,authIssue:!1,errorDetails:[],fixSuggestions:[],testResults:{connectionTest:!1,writeTest:!1,readTest:!1,deleteTest:!1}};try{console.log("📡 Testando conexão básica do Firebase...");const a=dr();if(!a)return s.errorDetails.push("Firebase Firestore não está inicializado"),s.fixSuggestions.push("Verificar configuração básica do Firebase"),s;s.isFirebaseReady=!0,s.isFirestoreConnected=!0,console.log("✅ Firebase está inicializado"),console.log("🔒 Testando regras de segurança do Firestore...");const o=await Jn.testFirestoreAccess();return s.canRead=o.canRead,s.canWrite=o.canWrite,(!o.canRead||!o.canWrite)&&(s.rulesIssue=!0,s.errorDetails.push(o.error||"Problemas com regras de segurança"),s.fixSuggestions.push(o.suggestion)),await this.runDetailedTests(a,s),this.categorizeProblems(s),this.generateSpecificSuggestions(s),console.log("📊 Diagnóstico completo finalizado"),console.log("Resultado:",s),s}catch(a){return console.error("💥 Erro durante diagnóstico:",a),s.errorDetails.push(`Erro durante diagnóstico: ${a.message}`),s.fixSuggestions.push("Executar correção intensiva do Firebase"),s}}static async runDetailedTests(s,a){const{collection:o,doc:r,getDoc:i,setDoc:t,deleteDoc:u,getDocs:d}=await ie(async()=>{const{collection:l,doc:f,getDoc:v,setDoc:g,deleteDoc:C,getDocs:h}=await import("./vendor-C-G65PT7.js").then(y=>y.U);return{collection:l,doc:f,getDoc:v,setDoc:g,deleteDoc:C,getDocs:h}},__vite__mapDeps([0,1]));try{console.log("🧪 Testando conexão com coleção...");const l=o(s,"__diagnostic__");a.testResults.connectionTest=!0,console.log("✅ Conexão com coleção: OK")}catch(l){console.error("❌ Falha na conexão com coleção:",l.message),a.errorDetails.push(`Conexão: ${l.message}`),a.networkIssue=!0}try{console.log("📖 Testando operação de leitura...");const l=r(s,"__diagnostic__","read-test");await i(l),a.testResults.readTest=!0,console.log("✅ Leitura: OK")}catch(l){console.error("❌ Falha na leitura:",l.message),a.errorDetails.push(`Leitura: ${l.message}`),l.code==="permission-denied"?a.rulesIssue=!0:(l.code==="unavailable"||l.code==="deadline-exceeded")&&(a.networkIssue=!0)}try{console.log("✏️ Testando operação de escrita...");const l=r(s,"__diagnostic__","write-test");await t(l,{test:!0,timestamp:new Date().toISOString(),platform:navigator.userAgent,diagnostic:!0}),a.testResults.writeTest=!0,console.log("✅ Escrita: OK")}catch(l){console.error("❌ Falha na escrita:",l.message),a.errorDetails.push(`Escrita: ${l.message}`),l.code==="permission-denied"?a.rulesIssue=!0:l.code==="unauthenticated"?a.authIssue=!0:(l.code==="unavailable"||l.code==="deadline-exceeded")&&(a.networkIssue=!0)}try{console.log("🗑️ Testando operação de deleção...");const l=r(s,"__diagnostic__","write-test");await u(l),a.testResults.deleteTest=!0,console.log("✅ Deleção: OK")}catch(l){console.error("❌ Falha na deleção:",l.message),a.errorDetails.push(`Deleção: ${l.message}`)}}static categorizeProblems(s){s.errorDetails.some(i=>i.includes("unauthenticated")||i.includes("auth"))&&(s.authIssue=!0),s.errorDetails.some(i=>i.includes("unavailable")||i.includes("deadline-exceeded")||i.includes("network"))&&(s.networkIssue=!0),s.errorDetails.some(i=>i.includes("permission-denied")||i.includes("rules"))&&(s.rulesIssue=!0)}static generateSpecificSuggestions(s){s.rulesIssue&&s.fixSuggestions.push("🔒 PROBLEMA DE REGRAS: Acesse Firebase Console → Firestore → Rules e configure regras permissivas para desenvolvimento","📋 Use as regras sugeridas no FirestoreRulesFix para permitir acesso completo","⚠️ Certifique-se de que as regras foram publicadas e aguarde alguns minutos"),s.authIssue&&s.fixSuggestions.push("🔐 PROBLEMA DE AUTENTICAÇÃO: Verificar se o usuário está logado","👤 Implementar login antes de tentar gravar dados","🔑 Verificar configuração do Firebase Auth"),s.networkIssue&&s.fixSuggestions.push("🌐 PROBLEMA DE REDE: Verificar conexão à internet","🔄 Tentar novamente após alguns segundos","📶 Verificar se não há bloqueios de firewall ou proxy"),!s.canWrite&&s.canRead&&s.fixSuggestions.push("📝 PROBLEMA ESPECÍFICO DE ESCRITA: As regras permitem leitura mas não escrita","🔧 Verificar regras específicas para operações de escrita no Firestore"),s.isFirestoreConnected||s.fixSuggestions.push("🔧 PROBLEMA DE CONFIGURAÇÃO: Firebase não está corretamente configurado","⚙️ Verificar credenciais e configuração do projeto","🚀 Executar correção intensiva do Firebase"),s.fixSuggestions.length===0&&s.fixSuggestions.push("🔍 Execute o diagnóstico de regras do Firestore separadamente","🛠️ Tente a correção intensiva do Firebase","📞 Verifique os logs do console para mais detalhes")}static async autoFix(s){console.log("🔧 Aplicando correções automáticas...");try{return s.rulesIssue&&(console.log("🔒 Problema de regras detectado - sugerindo correção manual"),console.log("📋 Regras sugeridas:"),console.log(Jn.getDevelopmentRules()),alert(`🔒 PROBLEMA DE REGRAS DETECTADO!
        
Acesse: https://console.firebase.google.com/project/leirisonda-16f8b/firestore/rules

E substitua as regras por:

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}

Depois clique em "Publicar" e aguarde 2-3 minutos.`)),s.authIssue&&console.log("🔐 Tentando resolver problemas de autenticação..."),!0}catch(a){return console.error("❌ Falha na correção automática:",a),!1}}static generateReport(s){let a=`📊 RELATÓRIO DE DIAGNÓSTICO DO FIREBASE
`;return a+=`=====================================

`,a+=`🔍 STATUS GERAL:
`,a+=`   Firebase Inicializado: ${s.isFirebaseReady?"✅":"❌"}
`,a+=`   Firestore Conectado: ${s.isFirestoreConnected?"✅":"❌"}
`,a+=`   Pode Ler: ${s.canRead?"✅":"❌"}
`,a+=`   Pode Escrever: ${s.canWrite?"✅":"❌"}

`,a+=`🧪 TESTES REALIZADOS:
`,a+=`   Conexão: ${s.testResults.connectionTest?"✅":"❌"}
`,a+=`   Leitura: ${s.testResults.readTest?"✅":"❌"}
`,a+=`   Escrita: ${s.testResults.writeTest?"✅":"❌"}
`,a+=`   Deleção: ${s.testResults.deleteTest?"✅":"❌"}

`,s.errorDetails.length>0&&(a+=`❌ PROBLEMAS IDENTIFICADOS:
`,s.errorDetails.forEach(o=>{a+=`   • ${o}
`}),a+=`
`),s.fixSuggestions.length>0&&(a+=`🔧 SUGESTÕES DE CORREÇÃO:
`,s.fixSuggestions.forEach(o=>{a+=`   • ${o}
`})),a}}async function Lc(){console.log("🚀 Executando verificação rápida de escrita no Firebase...");const n=await Ua.runCompleteDiagnostic(),s=Ua.generateReport(n);console.log(s),n.canWrite||(console.log("🔧 Iniciando correção automática..."),await Ua.autoFix(n))}const Tc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(null),[r,i]=m.useState(!1),t=m.useCallback(async()=>{s(!0),console.log("🔍 Iniciando diagnóstico do Firebase...");try{const v=await Ua.runCompleteDiagnostic();o(v),i(!0);const g=Ua.generateReport(v);console.log(g)}catch(v){console.error("💥 Erro durante diagnóstico:",v)}finally{s(!1)}},[]),u=m.useCallback(async()=>{a&&(console.log("🔧 Aplicando correções automáticas..."),await Ua.autoFix(a),setTimeout(()=>{t()},2e3))},[a,t]),d=m.useCallback(async()=>{s(!0),await Lc(),s(!1)},[]),l=v=>v?e.jsxDEV(Z,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:61,columnNumber:7},void 0):e.jsxDEV(ba,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:63,columnNumber:7},void 0),f=v=>v?"text-green-600":"text-red-600";return e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsxDEV(ge,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:75,columnNumber:11},void 0),"Diagnóstico Firebase - Escrita de Dados"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:74,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:d,disabled:n,className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 disabled:opacity-50 flex items-center",children:[e.jsxDEV(Ts,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:85,columnNumber:13},void 0),"Check Rápido"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:80,columnNumber:11},void 0),e.jsxDEV("button",{onClick:t,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[n?e.jsxDEV(X,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:95,columnNumber:15},void 0):e.jsxDEV(me,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:97,columnNumber:15},void 0),n?"Executando...":"Executar Diagnóstico"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:79,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:73,columnNumber:7},void 0),n&&e.jsxDEV("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(X,{className:"w-4 h-4 mr-2 animate-spin text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV("span",{className:"text-blue-700",children:"Executando testes de conectividade e escrita..."},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:109,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:107,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:106,columnNumber:9},void 0),a&&r&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"Firebase"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:123,columnNumber:17},void 0),l(a.isFirebaseReady)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:122,columnNumber:15},void 0),e.jsxDEV("div",{className:`text-xs mt-1 ${f(a.isFirebaseReady)}`,children:a.isFirebaseReady?"Inicializado":"Não Conectado"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:128,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:121,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"Firestore"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:139,columnNumber:17},void 0),l(a.isFirestoreConnected)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:138,columnNumber:15},void 0),e.jsxDEV("div",{className:`text-xs mt-1 ${f(a.isFirestoreConnected)}`,children:a.isFirestoreConnected?"Conectado":"Desconectado"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:137,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"Leitura"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:155,columnNumber:17},void 0),l(a.canRead)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:154,columnNumber:15},void 0),e.jsxDEV("div",{className:`text-xs mt-1 ${f(a.canRead)}`,children:a.canRead?"Funcional":"Bloqueada"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:160,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:153,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"Escrita"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:169,columnNumber:17},void 0),l(a.canWrite)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:168,columnNumber:15},void 0),e.jsxDEV("div",{className:`text-xs mt-1 ${f(a.canWrite)}`,children:a.canWrite?"Funcional":"Bloqueada"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:174,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:167,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:120,columnNumber:11},void 0),e.jsxDEV("div",{className:"border border-gray-200 rounded-md p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-700 mb-3",children:"Testes Realizados"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:184,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxDEV("div",{className:"flex items-center",children:[l(a.testResults.connectionTest),e.jsxDEV("span",{className:"text-sm ml-2",children:"Conexão"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:190,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:188,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center",children:[l(a.testResults.readTest),e.jsxDEV("span",{className:"text-sm ml-2",children:"Leitura"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:194,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:192,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center",children:[l(a.testResults.writeTest),e.jsxDEV("span",{className:"text-sm ml-2",children:"Escrita"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:198,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:196,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center",children:[l(a.testResults.deleteTest),e.jsxDEV("span",{className:"text-sm ml-2",children:"Deleção"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:202,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:200,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:183,columnNumber:11},void 0),a.errorDetails.length>0&&e.jsxDEV("div",{className:"border border-red-200 rounded-md p-4 bg-red-50",children:[e.jsxDEV("h4",{className:"font-medium text-red-700 mb-3 flex items-center",children:[e.jsxDEV(ba,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:211,columnNumber:17},void 0),"Problemas Identificados"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:210,columnNumber:15},void 0),e.jsxDEV("ul",{className:"list-disc list-inside space-y-1",children:a.errorDetails.map((v,g)=>e.jsxDEV("li",{className:"text-sm text-red-600",children:v},g,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:216,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:214,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:209,columnNumber:13},void 0),(a.rulesIssue||a.networkIssue||a.authIssue)&&e.jsxDEV("div",{className:"border border-orange-200 rounded-md p-4 bg-orange-50",children:[e.jsxDEV("h4",{className:"font-medium text-orange-700 mb-3",children:"Tipos de Problema"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:229,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[a.rulesIssue&&e.jsxDEV("div",{className:"flex items-center text-sm text-orange-600",children:[e.jsxDEV(me,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:235,columnNumber:21},void 0),"Problema com regras de segurança do Firestore"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:234,columnNumber:19},void 0),a.authIssue&&e.jsxDEV("div",{className:"flex items-center text-sm text-orange-600",children:[e.jsxDEV(me,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:241,columnNumber:21},void 0),"Problema de autenticação"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:240,columnNumber:19},void 0),a.networkIssue&&e.jsxDEV("div",{className:"flex items-center text-sm text-orange-600",children:[e.jsxDEV(me,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:247,columnNumber:21},void 0),"Problema de conectividade de rede"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:246,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:232,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:228,columnNumber:13},void 0),a.fixSuggestions.length>0&&e.jsxDEV("div",{className:"border border-blue-200 rounded-md p-4 bg-blue-50",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h4",{className:"font-medium text-blue-700",children:"Sugestões de Correção"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:259,columnNumber:17},void 0),e.jsxDEV("button",{onClick:u,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Aplicar Correções"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:262,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:258,columnNumber:15},void 0),e.jsxDEV("ul",{className:"list-disc list-inside space-y-1",children:a.fixSuggestions.map((v,g)=>e.jsxDEV("li",{className:"text-sm text-blue-600",children:v},g,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:271,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:269,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:257,columnNumber:13},void 0),a.canWrite&&a.canRead&&e.jsxDEV("div",{className:"border border-green-200 rounded-md p-4 bg-green-50",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Z,{className:"w-5 h-5 text-green-600 mr-2"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:283,columnNumber:17},void 0),e.jsxDEV("span",{className:"font-medium text-green-700",children:"✅ Firebase está funcionando corretamente! Gravação de dados habilitada."},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:284,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:282,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:281,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:118,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-6 p-3 bg-gray-50 rounded-md",children:[e.jsxDEV("h5",{className:"font-medium text-gray-700 mb-2",children:"Como usar:"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:296,columnNumber:9},void 0),e.jsxDEV("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Check Rápido:"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:299,columnNumber:15},void 0)," Verificação rápida no console"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:298,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Diagnóstico Completo:"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:302,columnNumber:15},void 0)," Análise detalhada com interface visual"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:301,columnNumber:11},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Aplicar Correções:"},void 0,!1,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:306,columnNumber:15},void 0)," Tentativa automática de resolver problemas"]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:305,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:297,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:295,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/FirebaseWriteDiagnostic.tsx",lineNumber:72,columnNumber:5},void 0)},_r=({onLogout:n,currentUser:s})=>{var t;const[a,o]=m.useState("overview"),r=[{id:"complete-activation",title:"�� ATIVAÇÃO COMPLETA DO DISPOSITIVO",description:"ATIVA TUDO: Notificações, localização, sincronização, utilizadores, PWA - tudo num só botão!",icon:Ts,color:"bg-gradient-to-r from-green-600 to-blue-600"},{id:"data-persistence-diagnostic",title:"💾 Diagnóstico de Persistência",description:"CRÍTICO: Verificar e reparar problemas com guardado de dados - especial para app publicada",icon:pe,color:"bg-gradient-to-r from-red-600 to-orange-600"},{id:"firebase-write-diagnostic",title:"🔍 Diagnóstico Escrita Firebase",description:"RESOLVER: Firebase operacional mas não grava dados - diagnóstico completo",icon:pe,color:"bg-gradient-to-r from-orange-600 to-red-600"},{id:"user-diagnostic",title:"🔍 Diagnóstico de Utilizadores",description:"URGENTE: Verificar porque utilizadores guardados não aparecem",icon:oe,color:"bg-red-600"},{id:"user-management",title:"Gestão de Utilizadores",description:"Criar, editar e gerir utilizadores do sistema",icon:oe,color:"bg-indigo-600"},{id:"data-migration",title:"🔄 Migração de Dados",description:"Migrar dados do localStorage para Firestore e testar",icon:pe,color:"bg-purple-600"},{id:"work-assignment-fix",title:"🔧 Correção de Atribuição de Obras",description:"Corrigir problemas na atribuição de utilizadores às obras",icon:oe,color:"bg-orange-600"},{id:"works-data-diagnostic",title:"🏗️ Diagnóstico: 0 Obras",description:"URGENTE: Resolver problema de 0 obras aparecendo na app",icon:me,color:"bg-red-600"},{id:"nuclear-cleanup",title:"🚨 LIMPEZA NUCLEAR (MELHORADA)",description:"ELIMINA completamente Firebase Auth persistence - resolve utilizadores antigos",icon:me,color:"bg-red-800"},{id:"login-fix",title:"🔑 Correção de Login",description:"Resolver problemas de login (Alexandre, Yuri, tremor do ecrã)",icon:Xe,color:"bg-red-600"},{id:"auth-diagnostic",title:"Diagnóstico de Autenticação",description:"Teste e debug do sistema de autenticação",icon:Xe,color:"bg-blue-500"},{id:"sync-manager",title:"Gestor de Sincronização",description:"Sincronização completa de dados",icon:X,color:"bg-green-500"},{id:"firebase-status",title:"Estado do Firebase",description:"Monitorização da ligação Firebase",icon:ys,color:"bg-orange-500"},{id:"user-debugger",title:"Debug de Utilizadores",description:"Debug e teste de utilizadores",icon:oe,color:"bg-purple-500"},{id:"data-cleanup",title:"Limpeza de Dados",description:"Limpeza e manutenção da base de dados",icon:pe,color:"bg-red-500"},{id:"data-management",title:"Gestão de Dados",description:"Painel de gestão de dados do sistema",icon:ai,color:"bg-indigo-500"},{id:"firebase-config",title:"Configuração Firebase",description:"Configurações do Firebase",icon:ge,color:"bg-gray-500"},{id:"cross-device-users",title:"Acesso Multi-Dispositivo",description:"Gestão de utilizadores para acesso universal",icon:ys,color:"bg-cyan-500"},{id:"auto-sync-demo",title:"Sincronização Automática",description:"Sistema de sincronização em tempo real",icon:X,color:"bg-emerald-500"},{id:"data-sharing-status",title:"Diagnóstico de Partilha",description:"Verificar se todos os utilizadores veem os mesmos dados",icon:oe,color:"bg-blue-600"},{id:"phone-settings",title:"Telefone & Navegação",description:"Marcação autom��tica e redirecionamento para Maps",icon:ge,color:"bg-blue-500"},{id:"mobile-settings",title:"📱 Configurações Mobile",description:"Notificações, localização e configurações para dispositivos móveis",icon:ea,color:"bg-indigo-600"},{id:"data-recovery",title:"🚨 Recuperação de Dados",description:"EMERGÊNCIA: Restaurar obras e dados perdidos",icon:me,color:"bg-red-500"},{id:"data-backup",title:"💾 Backup de Dados e App",description:"Criar backups de segurança dos dados e da aplicação",icon:pe,color:"bg-indigo-600"},{id:"firebase-quota",title:"🚨 Gest��o de Quota Firebase",description:"CRÍTICO: Monitorizar e gerir quota do Firebase",icon:me,color:"bg-red-600"},{id:"user-deletion",title:"💀 ELIMINAR TODOS OS UTILIZADORES",description:"PERIGO: Eliminar todos os utilizadores exceto super admin",icon:oe,color:"bg-red-800"},{id:"notification-demo",title:"🔔 Demo de Notificações",description:"Testar sistema de notificações em tempo real",icon:me,color:"bg-blue-600"}],i=()=>{switch(a){case"complete-activation":return e.jsxDEV(kc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:288,columnNumber:16},void 0);case"data-persistence-diagnostic":return e.jsxDEV(Mc,{autoCheck:!0},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:290,columnNumber:16},void 0);case"firebase-write-diagnostic":return e.jsxDEV(Tc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:292,columnNumber:16},void 0);case"user-diagnostic":return e.jsxDEV(bc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:294,columnNumber:16},void 0);case"user-management":return e.jsxDEV(uc,{currentUser:s},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:296,columnNumber:16},void 0);case"data-migration":return e.jsxDEV(fc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:298,columnNumber:16},void 0);case"work-assignment-fix":return e.jsxDEV("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("h3",{className:"text-yellow-800 font-medium",children:"Componente não disponível"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:302,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-yellow-700",children:"WorkAssignmentFix não encontrado."},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:301,columnNumber:11},void 0);case"works-data-diagnostic":return e.jsxDEV(xc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:309,columnNumber:16},void 0);case"login-fix":return e.jsxDEV(Ec,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:311,columnNumber:16},void 0);case"auth-diagnostic":return e.jsxDEV(Rl,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:313,columnNumber:16},void 0);case"sync-manager":return e.jsxDEV($l,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:315,columnNumber:16},void 0);case"firebase-status":return e.jsxDEV(_l,{isConnected:!0},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:317,columnNumber:16},void 0);case"user-debugger":return e.jsxDEV("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("h3",{className:"text-yellow-800 font-medium",children:"Componente não disponível"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:321,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-yellow-700",children:"UserDebugger não encontrado."},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:324,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:320,columnNumber:11},void 0);case"data-cleanup":return e.jsxDEV(Kl,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:328,columnNumber:16},void 0);case"data-management":return e.jsxDEV(rc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:330,columnNumber:16},void 0);case"firebase-config":return e.jsxDEV(ti,{onConfigured:()=>{}},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:332,columnNumber:16},void 0);case"cross-device-users":return e.jsxDEV(nc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:334,columnNumber:16},void 0);case"auto-sync-demo":return e.jsxDEV(lc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:336,columnNumber:16},void 0);case"data-sharing-status":return e.jsxDEV(cc,{onFixApplied:()=>{console.log("✅ Partilha de dados corrigida no painel admin")}},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:339,columnNumber:11},void 0);case"phone-settings":return e.jsxDEV(dc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:346,columnNumber:16},void 0);case"mobile-settings":return e.jsxDEV("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("h3",{className:"text-yellow-800 font-medium",children:"Componente não disponível"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:350,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-yellow-700",children:"MobileSettings não encontrado."},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:353,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:349,columnNumber:11},void 0);case"data-recovery":return e.jsxDEV(mc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:357,columnNumber:16},void 0);case"data-backup":return e.jsxDEV(Ac,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:359,columnNumber:16},void 0);case"firebase-quota":return e.jsxDEV("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("h3",{className:"text-yellow-800 font-medium",children:"Componente não disponível"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:363,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-yellow-700",children:"FirebaseQuotaManager não encontrado."},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:366,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:362,columnNumber:11},void 0);case"user-deletion":return e.jsxDEV(Cc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:372,columnNumber:16},void 0);case"notification-demo":return e.jsxDEV(Pc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:374,columnNumber:16},void 0);case"nuclear-cleanup":return e.jsxDEV(Uc,{},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:376,columnNumber:16},void 0);case"overview":default:return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start",children:[e.jsxDEV(me,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:383,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-yellow-800",children:"Área Restrita de Administração"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:385,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-700 mt-1",children:"Esta área contém ferramentas de teste, debug e configuração do sistema. Use com cuidado em ambiente de produção."},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:388,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:384,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:382,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:381,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(u=>{const d=u.icon,l=u.id==="user-deletion";return u.id==="complete-activation"?e.jsxDEV("div",{className:"md:col-span-2 lg:col-span-3",children:e.jsxDEV("button",{onClick:()=>o(u.id),className:"w-full p-8 rounded-xl shadow-lg border-2 border-transparent bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white transition-all transform hover:scale-105",children:[e.jsxDEV("div",{className:"flex items-center justify-center mb-4",children:[e.jsxDEV("div",{className:"bg-white bg-opacity-20 p-3 rounded-full mr-4",children:e.jsxDEV(d,{className:"h-8 w-8 text-white"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:415,columnNumber:29},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:414,columnNumber:27},void 0),e.jsxDEV("h3",{className:"text-2xl font-bold",children:u.title},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:417,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:413,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-lg text-center text-green-100",children:u.description},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:421,columnNumber:25},void 0),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("span",{className:"bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium",children:"⚡ Clique para ativar tudo instantaneamente"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:425,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:424,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:409,columnNumber:23},void 0)},u.id,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:405,columnNumber:21},void 0):e.jsxDEV("button",{onClick:()=>o(u.id),className:`p-6 rounded-lg shadow-sm border transition-shadow text-left ${l?"bg-red-50 border-red-300 hover:bg-red-100 hover:shadow-lg":"bg-white border-gray-200 hover:shadow-md"}`,children:[e.jsxDEV("div",{className:"flex items-center mb-3",children:[e.jsxDEV("div",{className:`${u.color} p-2 rounded-lg mr-3 ${l?"animate-pulse":""}`,children:e.jsxDEV(d,{className:"h-6 w-6 text-white"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:450,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:445,columnNumber:23},void 0),e.jsxDEV("h3",{className:`text-lg font-semibold ${l?"text-red-900":"text-gray-900"}`,children:u.title},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:452,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:444,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-sm ${l?"text-red-700 font-medium":"text-gray-600"}`,children:u.description},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:460,columnNumber:21},void 0),l&&e.jsxDEV("div",{className:"mt-3 text-xs text-red-600 font-bold",children:"⚠️ OPERAÇÃO IRREVERSÍVEL"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:470,columnNumber:23},void 0)]},u.id,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:435,columnNumber:19},void 0)})},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:396,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:380,columnNumber:11},void 0)}};return e.jsxDEV("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden",children:[e.jsxDEV("div",{className:"bg-white shadow-sm border-b flex-shrink-0",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"flex justify-between items-center py-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[a!=="overview"&&e.jsxDEV("button",{onClick:()=>o("overview"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md",children:e.jsxDEV(xo,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:495,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:491,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-semibold text-gray-900",children:"Área de Administração"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:499,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:a==="overview"?"Ferramentas de teste e configuração":(t=r.find(u=>u.id===a))==null?void 0:t.title},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:502,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:498,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:489,columnNumber:13},void 0),e.jsxDEV("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md border border-gray-300",children:"Sair da Administração"},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:509,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:488,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:487,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:486,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i()},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:521,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:520,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/admin/AdminPage.tsx",lineNumber:484,columnNumber:5},void 0)},ua=class ua{constructor(){}static getInstance(){return ua.instance||(ua.instance=new ua),ua.instance}async saveLoginData(s){try{const a={email:s.email,rememberMe:s.rememberMe||!1,timestamp:new Date().toISOString(),loginAttempt:!0,userAgent:navigator.userAgent,ip:"unknown"},o=await ts("login_attempts",a);return o?(console.log("✅ Login data salva no Firestore via REST:",o),o):(console.warn("⚠️ Não foi possível salvar login data via REST"),null)}catch(a){return console.warn("⚠️ Erro ao salvar login data via REST:",a),null}}async testConnection(){try{const s=await is("system_tests");return console.log("✅ Conexão REST API Firestore funcionando"),!0}catch(s){return console.warn("⚠️ Teste de conexão REST API falhou:",s),!1}}};ae(ua,"instance");let en=ua;const Rc=en.getInstance(),Oc=n=>Rc.saveLoginData(n),Kn=({onLogin:n,loginError:s,isLoading:a=!1})=>{const[o,r]=m.useState(()=>({email:"",password:""})),[i,t]=m.useState(()=>!1),[u,d]=m.useState("checking"),[l,f]=m.useState(null);m.useEffect(()=>{try{console.log("🔄 Loading saved credentials...");const y=sessionStorage.getItem("savedLoginCredentials");if(y)try{const{email:S,password:E,rememberMe:N}=JSON.parse(y);console.log("📋 Found saved credentials:",{email:S,hasPassword:!!E,rememberMe:N}),N&&S&&E?(r({email:S||"",password:E||""}),t(!0),console.log("📋 Auto-filled login form from saved credentials"),console.log("ℹ️ Auto-login temporariamente desabilitado para evitar bloqueios"),console.log("📋 Credenciais preenchidas - login manual necessário")):console.log("⚠️ Incomplete saved credentials, skipping auto-login")}catch(S){console.error("❌ Error loading saved credentials:",S),sessionStorage.removeItem("savedLoginCredentials")}else console.log("📭 No saved credentials found")}catch(y){console.error("❌ Error in LoginPage useEffect:",y)}},[n]),m.useEffect(()=>{console.log("📱 LoginPage: Firestore desativado - só ativa após login"),d("error")},[]);const v=m.useCallback(async y=>{var S;try{if(y.preventDefault(),console.log("🚀 LoginPage: Form submitted"),console.log("📧 Email:",o.email),console.log("🔐 Password length:",((S=o.password)==null?void 0:S.length)||0),!o.email.trim()||!o.password.trim()){console.warn("❌ LoginPage: Empty fields detected");return}console.log("💾 Salvando dados de login no Firestore...");try{const E=await Oc({email:o.email.trim(),rememberMe:i});E?(f(E),console.log(`✅ Dados gravados no Firestore com ID: ${E}`)):console.warn("⚠️ Falha ao gravar no Firestore - continuando com login")}catch(E){console.error("❌ Erro ao gravar no Firestore:",E)}i?(console.log("💾 Saving credentials for auto-login"),sessionStorage.setItem("savedLoginCredentials",JSON.stringify({email:o.email.trim(),password:o.password,rememberMe:!0}))):sessionStorage.removeItem("savedLoginCredentials"),console.log("���� LoginPage: Calling onLogin function..."),await n(o.email.trim(),o.password,i),console.log("✅ LoginPage: onLogin completed")}catch(E){console.error("❌ LoginPage: Login form error:",E)}},[o.email,o.password,i,n]),g=m.useCallback(y=>{r(S=>({...S,email:y.target.value}))},[]),C=m.useCallback(y=>{r(S=>({...S,password:y.target.value}))},[]),h=m.useCallback(y=>{t(y.target.checked)},[]);return e.jsxDEV("div",{className:"min-h-screen bg-blue-200 flex items-center justify-center",children:e.jsxDEV("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsxDEV("div",{className:"text-center mb-8",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-4 mx-auto border border-gray-200 max-w-sm",children:e.jsxDEV("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fcc309d103d0b4ade88d90ee94cb2f741%2F9413eeead84d4fecb67b4e817e791c86?format=webp&width=800",alt:"Leirisonda - Furos e Captações de Água, Lda",className:"w-full h-auto object-contain",style:{maxHeight:"80px"}},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:176,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:175,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:174,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:v,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:188,columnNumber:13},void 0),e.jsxDEV("input",{type:"email",value:o.email,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",required:!0,disabled:a,autoComplete:"email",placeholder:"exemplo@email.com"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:191,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:187,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palavra-passe"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:204,columnNumber:13},void 0),e.jsxDEV("input",{type:"password",value:o.password,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",required:!0,disabled:a,autoComplete:"current-password",placeholder:"Digite sua senha"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:207,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:203,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:"remember-me",checked:i,onChange:h,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:a},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:221,columnNumber:13},void 0),e.jsxDEV("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Lembrar-me"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:229,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:220,columnNumber:11},void 0),s&&e.jsxDEV("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded border border-red-200",children:[e.jsxDEV("strong",{children:"Erro de Login:"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:240,columnNumber:15},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:241,columnNumber:15},void 0),s]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:239,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2 pt-2",children:e.jsxDEV("button",{type:"submit",disabled:a,className:"w-full bg-blue-300 text-white py-2 px-4 rounded-md hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"A entrar...":"Entrar"},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:248,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:247,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:186,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:172,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/pages/LoginPageFixed.tsx",lineNumber:171,columnNumber:5},void 0)},zc=()=>{const[n,s]=m.useState("default"),[a,o]=m.useState(!1),[r,i]=m.useState(null),[t,u]=m.useState(!1);m.useEffect(()=>{d(),l()},[]);const d=()=>{"Notification"in window&&s(Notification.permission)},l=()=>{const S=localStorage.getItem("notifications-enabled")==="true";u(S);const E=localStorage.getItem("fcm-device-token");E&&i(E.substring(0,20)+"...")},f=async()=>{o(!0);try{const{pushNotificationService:S}=await ie(async()=>{const{pushNotificationService:N}=await Promise.resolve().then(()=>fr);return{pushNotificationService:N}},void 0);if(await S.requestPermission()){const N=await S.getDeviceToken();if(N){i(N.substring(0,20)+"..."),localStorage.setItem("fcm-device-token",N);const D=JSON.parse(localStorage.getItem("currentUser")||"{}");(D.id||D.email)&&await S.saveDeviceToken(String(D.id)||D.email)}s("granted"),u(!0),localStorage.setItem("notifications-enabled","true")}else s("denied")}catch(S){console.error("Erro ao solicitar permissão:",S)}finally{o(!1)}},v=async()=>{if(!t&&n!=="granted")await f();else{const S=!t;u(S),localStorage.setItem("notifications-enabled",String(S))}},g=async()=>{try{if(console.log("🧪 Iniciando teste de notificação..."),console.log(`📋 Permissão atual: ${Notification.permission}`),console.log(`🌐 Suporte: ${"Notification"in window}`),Notification.permission!=="granted"){alert("❌ Permissões de notificação não estão ativas! Ative-as primeiro.");return}console.log("🔔 Criando notificação de teste simples...");const S=new Notification("🧪 Teste Leirisonda",{body:"Esta é uma notificação de teste. Se conseguir ver isto, as notificações estão a funcionar!",icon:"/icon.svg",requireInteraction:!0});S.onshow=()=>{console.log("✅ Notificação de teste mostrada com sucesso!")},S.onerror=D=>{console.error("❌ Erro na notificação de teste:",D)},S.onclick=()=>{console.log("👆 Notificação de teste clicada"),S.close()};const{pushNotificationService:E}=await ie(async()=>{const{pushNotificationService:D}=await Promise.resolve().then(()=>fr);return{pushNotificationService:D}},void 0),N=JSON.parse(localStorage.getItem("currentUser")||"{}");console.log("🔄 Testando através do serviço..."),await E.notifyObraAssignment({id:"test",workSheetNumber:"LS-TEST",client:"Cliente Teste"},String(N.id)||N.email),alert("✅ Teste de notificação executado! Verifique se recebeu a notificação.")}catch(S){console.error("❌ Erro no teste:",S),alert(`❌ Erro ao testar notificação: ${S.message}`)}},h=(()=>{switch(n){case"granted":return{icon:ka,text:"Concedida",color:"text-green-600",bgColor:"bg-green-100"};case"denied":return{icon:ve,text:"Negada",color:"text-red-600",bgColor:"bg-red-100"};default:return{icon:le,text:"Pendente",color:"text-yellow-600",bgColor:"bg-yellow-100"}}})(),y=h.icon;return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`p-2 rounded-lg ${h.bgColor}`,children:e.jsxDEV(y,{className:`h-5 w-5 ${h.color}`},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:183,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:182,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:"Estado da Permissão"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:186,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Permissão para notificações:"," ",e.jsxDEV("span",{className:`font-medium ${h.color}`,children:h.text},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:189,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:185,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:181,columnNumber:9},void 0),n!=="granted"&&e.jsxDEV("button",{onClick:f,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[a?e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:203,columnNumber:15},void 0):e.jsxDEV(ls,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:205,columnNumber:15},void 0),e.jsxDEV("span",{children:a?"A solicitar...":"Solicitar Permissão"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:207,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:197,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:180,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:`p-2 rounded-lg ${t?"bg-green-100":"bg-gray-100"}`,children:t?e.jsxDEV(ls,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:219,columnNumber:15},void 0):e.jsxDEV(jt,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:221,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:215,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-gray-900",children:"Notificações de Obras"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:225,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Receber notificações quando obras são atribuídas"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:226,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:224,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:214,columnNumber:9},void 0),e.jsxDEV("button",{onClick:v,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t?"bg-blue-600":"bg-gray-200"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:238,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:232,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:213,columnNumber:7},void 0),r&&e.jsxDEV("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"Dispositivo Registado"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:249,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-blue-700",children:["Token do dispositivo:"," ",e.jsxDEV("span",{className:"font-mono",children:r},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:254,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:252,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:248,columnNumber:9},void 0),n==="granted"&&t&&e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:g,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(ls,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:266,columnNumber:13},void 0),e.jsxDEV("span",{children:"Testar Notificação"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:267,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:262,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:261,columnNumber:9},void 0),n==="denied"&&e.jsxDEV("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium text-red-900 mb-2",children:"Permissão Negada"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:275,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-red-700 mb-3",children:"As notificações foram bloqueadas. Para ativar:"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:276,columnNumber:11},void 0),e.jsxDEV("ol",{className:"text-sm text-red-700 space-y-1 list-decimal list-inside",children:[e.jsxDEV("li",{children:"Clique no ícone de cadeado na barra de endereços"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:280,columnNumber:13},void 0),e.jsxDEV("li",{children:"Ative as notificações para este site"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:281,columnNumber:13},void 0),e.jsxDEV("li",{children:"Recarregue a página"},void 0,!1,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:282,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:279,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:274,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/NotificationPermissionsManager.tsx",lineNumber:178,columnNumber:5},void 0)},$c=()=>{const[n,s]=m.useState(null),[a,o]=m.useState(!1),[r,i]=m.useState(null),[t,u]=m.useState(null),[d,l]=m.useState(()=>{const b=localStorage.getItem("location-settings");return b?JSON.parse(b):{enabled:!1,highAccuracy:!0,timeout:1e4,maxAge:3e5,autoRefresh:!1,refreshInterval:6e4}}),[f,v]=m.useState(!1),g=async()=>{if("permissions"in navigator)try{const b=await navigator.permissions.query({name:"geolocation"});u(b.state),b.addEventListener("change",()=>{u(b.state)})}catch(b){console.warn("Erro ao verificar permissões:",b)}};m.useEffect(()=>{g();const b=()=>{document.visibilityState==="visible"&&g()};return document.addEventListener("visibilitychange",b),()=>{document.removeEventListener("visibilitychange",b)}},[]),m.useEffect(()=>{let b;return d.enabled&&d.autoRefresh&&t==="granted"&&(b=setInterval(()=>{C()},d.refreshInterval)),()=>{b&&clearInterval(b)}},[d.enabled,d.autoRefresh,d.refreshInterval,t]),m.useEffect(()=>{localStorage.setItem("location-settings",JSON.stringify(d))},[d]);const C=async()=>{if(!navigator.geolocation){i("Geolocalização não é suportada neste navegador");return}o(!0),i(null),d.highAccuracy,d.timeout,d.maxAge,navigator.geolocation.getCurrentPosition(async b=>{u("granted");const x={latitude:b.coords.latitude,longitude:b.coords.longitude,accuracy:b.coords.accuracy,timestamp:b.timestamp};try{const w=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${x.latitude}&lon=${x.longitude}&zoom=18&addressdetails=1`);if(w.ok){const U=await w.json();U.display_name&&(x.address=U.display_name)}}catch(w){console.warn("Não foi possível obter o endereço:",w),x.address=`Lat: ${x.latitude.toFixed(6)}, Lon: ${x.longitude.toFixed(6)}`}s(x),o(!1),localStorage.setItem("current-user-location",JSON.stringify(x))},b=>{let x="Erro desconhecido";switch(b.code){case b.PERMISSION_DENIED:x="Permissão de localização negada pelo utilizador";break;case b.POSITION_UNAVAILABLE:x="Informação de localização não disponível";break;case b.TIMEOUT:x="Tempo limite excedido para obter localização";break}i(x),o(!1)})},h=async()=>{try{await C(),await g(),l(b=>({...b,enabled:!0}))}catch(b){console.error("Erro ao solicitar permissão:",b),await g()}},y=()=>{if(!n)return;const{latitude:b,longitude:x}=n,w=`https://maps.google.com/maps?q=${b},${x}`;window.open(w,"_blank")},S=b=>new Date(b).toLocaleString("pt-PT"),E=()=>{switch(t){case"granted":return{text:"Concedida",color:"text-green-600",icon:ka};case"denied":return{text:"Negada",color:"text-red-600",icon:ve};case"prompt":return{text:"Aguarda aprovação",color:"text-yellow-600",icon:le};default:return{text:"Desconhecida",color:"text-gray-600",icon:le}}},N=()=>{const b=navigator.userAgent,x=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(b);return{type:x?"mobile":"desktop",icon:x?ea:ai,name:x?"Dispositivo Móvel":"Computador"}},D=E(),p=N();return e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"p-6",children:e.jsxDEV("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsxDEV(Es,{className:"h-5 w-5 text-orange-600 mt-0.5"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:250,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium text-orange-900 mb-2",children:"Minha Localização"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:252,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-orange-700 text-sm mb-4",children:"Configure e partilhe a sua localização com a equipa."},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:255,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(D.icon,{className:`h-4 w-4 ${D.color}`},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:264,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-gray-900",children:"Permissão"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:268,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-xs ${D.color}`,children:D.text},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:271,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:267,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:263,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:262,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(p.icon,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:281,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-gray-900",children:"Dispositivo"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:283,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-blue-600",children:p.name},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:286,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:282,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:280,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:279,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Es,{className:`h-4 w-4 ${n?"text-green-600":"text-gray-400"}`},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:294,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-gray-900",children:"Status"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:298,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-xs ${n?"text-green-600":"text-gray-400"}`,children:n?"Ativa":"Inativa"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:299,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:297,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:293,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:292,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:260,columnNumber:13},void 0),n&&e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsxDEV("h5",{className:"text-sm font-medium text-blue-900 mb-2",children:"Localização Atual"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:312,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Coordenadas:"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:317,columnNumber:21},void 0)," ",n.latitude.toFixed(6),", ",n.longitude.toFixed(6)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:316,columnNumber:19},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Precisão:"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:321,columnNumber:21},void 0)," ±",Math.round(n.accuracy),"m"]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:320,columnNumber:19},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Atualizada:"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:324,columnNumber:21},void 0)," ",S(n.timestamp)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:323,columnNumber:19},void 0),n.address&&e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Endereço:"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:329,columnNumber:23},void 0)," ",n.address.substring(0,100),"..."]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:328,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:315,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:311,columnNumber:15},void 0),r&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(le,{className:"h-4 w-4 text-red-400 mr-2"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:341,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xs text-red-700",children:r},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:342,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:340,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:339,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex space-x-2 mb-4",children:d.enabled?t!=="granted"?e.jsxDEV("button",{onClick:h,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Solicitar Permissão"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:359,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:C,disabled:a,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:bg-gray-400",children:a?"A obter...":"Atualizar"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:367,columnNumber:19},void 0),e.jsxDEV("button",{onClick:g,className:"px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Verificar Status"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:374,columnNumber:19},void 0),n&&e.jsxDEV("button",{onClick:y,className:"px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Ver no Maps"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:381,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:366,columnNumber:17},void 0):e.jsxDEV("button",{onClick:()=>l(b=>({...b,enabled:!0})),className:"px-3 py-2 bg-orange-600 text-white rounded text-sm hover:bg-orange-700",children:"Ativar Localização"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:350,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:348,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>v(!f),className:"flex items-center space-x-2 text-orange-700 hover:text-orange-800 text-sm",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:397,columnNumber:15},void 0),e.jsxDEV("span",{children:[f?"Ocultar":"Mostrar"," Configurações Avançadas"]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:398,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:393,columnNumber:13},void 0),f&&e.jsxDEV("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700",children:"Alta precisão"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:408,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Usa GPS para maior precisão"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:411,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:407,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>l(b=>({...b,highAccuracy:!b.highAccuracy})),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${d.highAccuracy?"bg-blue-600":"bg-gray-200"}`,children:e.jsxDEV("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${d.highAccuracy?"translate-x-5":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:426,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:415,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:406,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700",children:"Atualização automática"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:438,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Atualiza automaticamente"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:441,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:437,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>l(b=>({...b,autoRefresh:!b.autoRefresh})),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${d.autoRefresh?"bg-blue-600":"bg-gray-200"}`,children:e.jsxDEV("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${d.autoRefresh?"translate-x-5":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:456,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:445,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:436,columnNumber:17},void 0),d.autoRefresh&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (segundos)"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:466,columnNumber:21},void 0),e.jsxDEV("select",{value:d.refreshInterval/1e3,onChange:b=>l(x=>({...x,refreshInterval:parseInt(b.target.value)*1e3})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:30,children:"30 segundos"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:479,columnNumber:23},void 0),e.jsxDEV("option",{value:60,children:"1 minuto"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:480,columnNumber:23},void 0),e.jsxDEV("option",{value:300,children:"5 minutos"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:481,columnNumber:23},void 0),e.jsxDEV("option",{value:600,children:"10 minutos"},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:482,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:469,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:465,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:405,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:251,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:249,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:248,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/PersonalLocationSettings.tsx",lineNumber:247,columnNumber:5},void 0)};let wa=null,Ca=null;const Ci=async()=>{console.log("🚀 DIRECT FIREBASE INIT: Inicializando Firebase diretamente");try{const n=vo();if(console.log("🔧 Config obtida:",{projectId:n.projectId,hasApiKey:!!n.apiKey,authDomain:n.authDomain}),sa().length===0?(console.log("📱 Inicializando Firebase App..."),wa=Ma(n),console.log("✅ Firebase App inicializada:",wa.name)):(wa=Ta(),console.log("✅ Firebase App já existia:",wa.name)),!Ca){console.log("💾 Inicializando Firestore..."),Ca=br(wa),console.log("✅ Firestore inicializado:",typeof Ca);try{console.log("🧪 Testando Firestore...");const{doc:s}=await ie(async()=>{const{doc:o}=await import("./vendor-C-G65PT7.js").then(r=>r.U);return{doc:o}},__vite__mapDeps([0,1])),a=s(Ca,"test","connectivity");console.log("✅ Firestore test ref criada:",!!a)}catch(s){console.warn("⚠️ Teste Firestore falhou:",(s==null?void 0:s.message)||String(s)),console.warn("🔍 Detalhes do teste:",s)}}return{app:wa,db:Ca,ready:!0}}catch(n){return console.error("❌ Erro no Direct Firebase Init:",(n==null?void 0:n.message)||String(n)),console.error("🔍 Detalhes do erro:",{message:(n==null?void 0:n.message)||"Mensagem não disponível",code:(n==null?void 0:n.code)||"Código não disponível",name:(n==null?void 0:n.name)||"Nome não disponível",stack:(n==null?void 0:n.stack)||"Stack não disponível",toString:String(n)}),{app:null,db:null,ready:!1,error:n.message}}},Fi=()=>Ca;console.log("🚫 Direct Firebase Init: DESABILITADO - usando REST API");const _c=async(n=10,s=1e3)=>{console.log("⏳ Aguardando Firestore estar pronto...");for(let a=1;a<=n;a++)try{console.log(`🔍 Tentativa ${a}/${n} - verificando Firestore...`);const o=Fi();if(o)return console.log(`✅ Firestore direto encontrado na tentativa ${a}`),o;const r=await Ci();if(r.ready&&r.db)return console.log(`✅ Firestore inicializado na tentativa ${a}`),r.db;a<n&&(console.log(`⏳ Aguardando ${s}ms antes da próxima tentativa...`),await new Promise(i=>setTimeout(i,s)))}catch(o){console.error(`❌ Erro na tentativa ${a}:`,o.message),a<n&&await new Promise(r=>setTimeout(r,s))}return console.error(`❌ Firestore não ficou pronto após ${n} tentativas`),null};class Bc{constructor(){ae(this,"db",null)}async getDB(){if(!this.db)try{console.log("🔄 ForceFirestore: Tentando inicialização direta...");const s=Fi();if(s)return console.log("✅ ForceFirestore: Usando Firestore direto já inicializado"),this.db=s,this.db;console.log("🚀 ForceFirestore: Executando inicialização direta...");const a=await Ci();if(a.ready&&a.db)return console.log("✅ ForceFirestore: Inicialização direta bem-sucedida"),this.db=a.db,this.db;console.log("🔄 ForceFirestore: Fallback para método original..."),this.db=await Do(),this.db?console.log("✅ ForceFirestore: Firestore inicializado com sucesso (fallback)"):console.warn("⚠️ ForceFirestore: Firestore não está disponível")}catch(s){console.error("❌ ForceFirestore: Erro ao inicializar Firestore:",s.message),this.db=null}return this.db}async ensureDB(s=5){console.log(`🔄 EnsureDB: Garantindo Firestore está pronto (máx ${s} tentativas)`);let a=await this.getDB();if(a)return console.log("✅ EnsureDB: Firestore já estava pronto"),a;console.log("🔍 EnsureDB: Usando método robusto de espera...");try{if(a=await _c(s,2e3),a)return console.log("✅ EnsureDB: Firestore obtido via waitForFirestore"),this.db=a,a}catch(r){console.error("❌ EnsureDB: waitForFirestore falhou:",r.message)}console.log("🔄 EnsureDB: Última tentativa com método tradicional...");for(let r=0;r<s;r++)try{if(console.log(`🔍 Tentativa final ${r+1}/${s}...`),a=await this.getDB(),a)return console.log(`✅ EnsureDB: Firestore obtido na tentativa final ${r+1}`),a;if(r<s-1){const i=2e3*(r+1);console.log(`⏳ Aguardando ${i}ms antes da próxima tentativa final...`),await new Promise(t=>setTimeout(t,i))}}catch(i){console.error(`❌ EnsureDB: Erro na tentativa final ${r+1}:`,i.message)}const o=new Error("Firestore definitivamente não está disponível após todas as tentativas");throw console.error("❌ EnsureDB: FALHA FINAL:",o.message),console.error("📝 EnsureDB: Verifique:"),console.error("  1. Configuração do Firebase"),console.error("  2. Variáveis de ambiente VITE_FIREBASE_*"),console.error("  3. Firebase Console - Firestore habilitado?"),console.error("  4. Rede/conectividade"),o}async saveUser(s){console.log("👤 ForceFirestore: Tentando guardar utilizador:",(s==null?void 0:s.email)||"email n/d");try{if(!s)throw new Error("Utilizador é null ou undefined");s.email||console.warn("⚠️ Utilizador sem email:",s),console.log("🔄 Obtendo instância do Firestore...");const a=await this.ensureDB();console.log("✅ Firestore obtido com sucesso");const o=s.uid||s.id||`user-${Date.now()}`;console.log("🏷️ ID do utilizador:",o);const r={...s,uid:o,updatedAt:new Date().toISOString(),savedToFirestore:!0};console.log("💾 Dados a guardar:",{uid:r.uid,email:r.email,name:r.name,hasPassword:!!r.password}),console.log("📄 Criando referência do documento...");const i=be(a,"users",o);return console.log("💾 Guardando no Firestore..."),await Fs(i,r),console.log("✅ Utilizador guardado no Firestore com sucesso:",s.email||o),!0}catch(a){return console.error("❌ Erro detalhado ao guardar utilizador:",{message:a.message,code:a.code,stack:a.stack,userEmail:s==null?void 0:s.email,userId:(s==null?void 0:s.uid)||(s==null?void 0:s.id)}),!1}}async getUsers(){try{const s=await this.ensureDB();return(await gs(he(s,"users"))).docs.map(o=>({id:o.id,...o.data()}))}catch(s){return console.error("❌ Erro ao obter utilizadores do Firestore:",s),[]}}async savePool(s){try{const a=await this.ensureDB(),o=s.id||`pool-${Date.now()}-${Math.random()}`;return await Fs(be(a,"pools",o),{...s,id:o,updatedAt:new Date().toISOString(),savedToFirestore:!0}),console.log("✅ Piscina guardada no Firestore:",o),o}catch(a){throw console.error("❌ Erro ao guardar piscina no Firestore:",a),a}}async getPools(){try{const s=await this.ensureDB();return(await gs(he(s,"pools"))).docs.map(o=>({id:o.id,...o.data()}))}catch(s){return console.error("❌ Erro ao obter piscinas do Firestore:",s),[]}}async deletePool(s){try{const a=await this.ensureDB();return await ws(be(a,"pools",s)),console.log("✅ Piscina eliminada do Firestore:",s),!0}catch(a){throw console.error("❌ Erro ao eliminar piscina do Firestore:",a),a}}async saveWork(s){try{const a=await this.ensureDB(),o=s.id||`work-${Date.now()}-${Math.random()}`;return await Fs(be(a,"works",o),{...s,id:o,updatedAt:new Date().toISOString(),savedToFirestore:!0}),console.log("✅ Obra guardada no Firestore:",o),o}catch(a){throw console.error("❌ Erro ao guardar obra no Firestore:",a),a}}async getWorks(){try{const s=await this.ensureDB();return(await gs(he(s,"works"))).docs.map(o=>({id:o.id,...o.data()}))}catch(s){return console.error("❌ Erro ao obter obras do Firestore:",s),[]}}async deleteWork(s){try{const a=await this.ensureDB();return await ws(be(a,"works",s)),console.log("✅ Obra eliminada do Firestore:",s),!0}catch(a){throw console.error("❌ Erro ao eliminar obra do Firestore:",a),a}}async saveMaintenance(s){try{const a=await this.ensureDB(),o=s.id||`maintenance-${Date.now()}-${Math.random()}`;return await Fs(be(a,"maintenance",o),{...s,id:o,updatedAt:new Date().toISOString(),savedToFirestore:!0}),console.log("✅ Manutenção guardada no Firestore:",o),o}catch(a){throw console.error("❌ Erro ao guardar manutenção no Firestore:",a),a}}async getMaintenance(){try{const s=await this.ensureDB();return(await gs(he(s,"maintenance"))).docs.map(o=>({id:o.id,...o.data()}))}catch(s){return console.error("❌ Erro ao obter manutenções do Firestore:",s),[]}}async deleteMaintenance(s){try{const a=await this.ensureDB();return await ws(be(a,"maintenance",s)),console.log("✅ Manutenção eliminada do Firestore:",s),!0}catch(a){throw console.error("❌ Erro ao eliminar manutenção do Firestore:",a),a}}async saveClient(s){try{const a=await this.ensureDB(),o=s.id||`client-${Date.now()}-${Math.random()}`;return await Fs(be(a,"clients",o),{...s,id:o,updatedAt:new Date().toISOString(),savedToFirestore:!0}),console.log("✅ Cliente guardado no Firestore:",o),o}catch(a){throw console.error("❌ Erro ao guardar cliente no Firestore:",a),a}}async getClients(){try{const s=await this.ensureDB();return(await gs(he(s,"clients"))).docs.map(o=>({id:o.id,...o.data()}))}catch(s){return console.error("❌ Erro ao obter clientes do Firestore:",s),[]}}async deleteClient(s){try{const a=await this.ensureDB();return await ws(be(a,"clients",s)),console.log("✅ Cliente eliminado do Firestore:",s),!0}catch(a){throw console.error("❌ Erro ao eliminar cliente do Firestore:",a),a}}async saveData(s,a,o){try{const r=await this.ensureDB(),i=o||a.id||`${s}-${Date.now()}-${Math.random()}`;return await Fs(be(r,s,i),{...a,id:i,updatedAt:new Date().toISOString(),savedToFirestore:!0}),console.log(`✅ Dados guardados no Firestore (${s}):`,i),i}catch(r){throw console.error(`❌ Erro ao guardar dados no Firestore (${s}):`,r),r}}async getData(s){try{const a=await this.ensureDB();return(await gs(he(a,s))).docs.map(r=>({id:r.id,...r.data()}))}catch(a){return console.error(`❌ Erro ao obter dados do Firestore (${s}):`,a),[]}}async deleteData(s,a){try{const o=await this.ensureDB();return await ws(be(o,s,a)),console.log(`✅ Dados eliminados do Firestore (${s}):`,a),!0}catch(o){throw console.error(`❌ Erro ao eliminar dados do Firestore (${s}):`,o),o}}async saveBatch(s){try{const a=await this.ensureDB(),o=Jr(a),r=[];return s.forEach(({collection:i,data:t,id:u})=>{const d=u||t.id||`${i}-${Date.now()}-${Math.random()}`,l=be(a,i,d);o.set(l,{...t,id:d,updatedAt:new Date().toISOString(),savedToFirestore:!0}),r.push(d)}),await o.commit(),console.log("✅ Batch guardado no Firestore:",r.length,"documentos"),r}catch(a){throw console.error("❌ Erro ao guardar batch no Firestore:",a),a}}async migrateLocalStorageToFirestore(){console.log("🔄 MIGRAÇÃO: localStorage → Firestore (FORÇADA)");let s=0;const a=["pools","works","maintenance","clients","mock-users"];try{for(const o of a){const r=localStorage.getItem(o);if(r)try{const i=JSON.parse(r);if(Array.isArray(i)&&i.length>0){console.log(`📦 Migrando ${i.length} itens de ${o}`);const t=o==="mock-users"?"users":o;for(const u of i)await this.saveData(t,u),s++;localStorage.removeItem(o),console.log(`✅ ${o} migrado e limpo do localStorage`)}}catch(i){console.warn(`⚠️ Erro ao migrar ${o}:`,i)}}return console.log(`✅ Migração concluída: ${s} itens movidos para Firestore`),{success:!0,migrated:s}}catch(o){return console.error("❌ Erro na migração:",o),{success:!1,migrated:s}}}async getStatus(){try{const s=await this.getDB(),a=!!s,o={};if(a){const r=["users","pools","works","maintenance","clients"];for(const i of r)try{const t=await gs(he(s,i));o[i]=t.size}catch{o[i]=0}}return{firestoreReady:a,collections:o,lastCheck:new Date().toISOString()}}catch(s){return console.error("❌ Erro ao verificar status:",s),{firestoreReady:!1,collections:{},lastCheck:new Date().toISOString()}}}}const Br=new Bc,Hn={async getUtilizadores(){return JSON.parse(localStorage.getItem("app-users")||"[]")},async getWorks(){return JSON.parse(localStorage.getItem("works")||"[]")},async updateWork(n,s){const a=JSON.parse(localStorage.getItem("works")||"[]"),o=a.findIndex(r=>r.id===n);o>=0&&(a[o]={...a[o],...s},localStorage.setItem("works",JSON.stringify(a)))}},pa=class pa{static getInstance(){return pa.instance||(pa.instance=new pa),pa.instance}async cleanOrphanUsersFromWorks(){const s={success:!1,cleaned:0,errors:[],details:[]};try{console.log("🧹 Iniciando limpeza de utilizadores inexistentes das obras...");const a=await this.loadValidUsers(),o=new Set(a.map(t=>String(t.id))),r=new Set(a.map(t=>t.email));console.log(`📋 Encontrados ${a.length} utilizadores válidos no Firestore`);const i=await this.loadAllWorks();console.log(`📋 Encontradas ${i.length} obras para verificar`);for(const t of i){const u=await this.cleanWorkAssignments(t,o,r);u.hasChanges&&(s.cleaned++,s.details.push(u))}s.success=!0,console.log(`✅ Limpeza concluída: ${s.cleaned} obras atualizadas`)}catch(a){console.error("❌ Erro durante limpeza:",a),s.errors.push(`Erro geral: ${a.message}`)}return s}async loadValidUsers(){const s=[this.tryMethod("firestoreService.getUtilizadores",()=>Ne.getUtilizadores()),this.tryMethod("forceFirestoreService.getUsers",()=>Br.getUsers()),this.tryMethod("localStorage fallback",()=>Hn.getUtilizadores())];for(const a of s)try{const o=await a;if(o&&o.length>0)return o}catch(o){console.warn("Método falhou, tentando próximo...",o)}return console.warn("⚠️ Nenhum método conseguiu carregar utilizadores, retornando array vazio"),[]}async tryMethod(s,a){console.log(`🔄 Tentando carregar utilizadores via ${s}`);const o=await a();return console.log(`✅ ${s}: ${Array.isArray(o)?o.length:"dados"} carregados`),o}async loadAllWorks(){const s=[this.tryMethod("firestoreService.getWorks",()=>Ne.getWorks()),this.tryMethod("forceFirestoreService.getWorks",()=>Br.getWorks()),this.tryMethod("localStorage fallback",()=>Hn.getWorks())];for(const a of s)try{const o=await a;if(o&&o.length>0)return o}catch(o){console.warn("Método falhou, tentando próximo...",o)}return console.warn("⚠️ Nenhum método conseguiu carregar obras, retornando array vazio"),[]}async cleanWorkAssignments(s,a,o){const r={workId:s.id,workTitle:s.workSheetNumber||s.title||`Obra ${s.id}`,hasChanges:!1,removedUsers:[],updatedAssignedUsers:[],updatedAssignedUserIds:[]};try{let i=!1;if(s.assignedUsers&&Array.isArray(s.assignedUsers)){const t=s.assignedUsers.filter(u=>{const d=a.has(String(u.id))||o.has(u.email);return d||(r.removedUsers.push(`${u.name} (ID: ${u.id})`),i=!0),d});t.length!==s.assignedUsers.length&&(r.updatedAssignedUsers=t)}if(s.assignedUserIds&&Array.isArray(s.assignedUserIds)){const t=s.assignedUserIds.filter(u=>{const d=a.has(String(u));return d||(i=!0),d});t.length!==s.assignedUserIds.length&&(r.updatedAssignedUserIds=t)}if(i){const t={...s,assignedUsers:r.updatedAssignedUsers.length>0?r.updatedAssignedUsers:s.assignedUsers||[],assignedUserIds:r.updatedAssignedUserIds.length>0?r.updatedAssignedUserIds:s.assignedUserIds||[],updatedAt:new Date().toISOString()};t.assignedUsers.length===0?t.assignedTo="":t.assignedTo=t.assignedUsers.map(u=>u.name).join(", "),await this.saveUpdatedWork(t),console.log(`🧹 Obra "${r.workTitle}" atualizada: removidos ${r.removedUsers.length} utilizadores inexistentes`),r.hasChanges=!0}}catch(i){console.error(`❌ Erro ao limpar obra ${s.id}:`,i)}return r}async saveUpdatedWork(s){try{try{await Ne.updateWork(s.id,s),console.log(`✅ Obra ${s.id} atualizada no Firestore`)}catch(r){console.warn("⚠️ Erro ao salvar no firestoreService:",r);try{await Br.updateWork(s.id,s),console.log(`✅ Obra ${s.id} atualizada via forceFirestoreService`)}catch(i){console.warn("⚠️ Erro ao salvar no forceFirestoreService:",i)}}const a=JSON.parse(localStorage.getItem("works")||"[]"),o=a.findIndex(r=>r.id===s.id);o>=0?a[o]=s:a.push(s),localStorage.setItem("works",JSON.stringify(a)),console.log(`💾 Obra ${s.id} atualizada no localStorage`)}catch(a){throw console.error(`❌ Erro ao salvar obra ${s.id}:`,a),a}}async getOrphanUsersReport(){const s={totalWorks:0,worksWithOrphans:0,totalOrphanUsers:0,orphanDetails:[]};try{const a=await this.loadValidUsers(),o=new Set(a.map(t=>String(t.id))),r=new Set(a.map(t=>t.email)),i=await this.loadAllWorks();s.totalWorks=i.length;for(const t of i){const u=[];if(t.assignedUsers&&Array.isArray(t.assignedUsers))for(const d of t.assignedUsers)!o.has(String(d.id))&&!r.has(d.email)&&u.push(d);u.length>0&&(s.worksWithOrphans++,s.totalOrphanUsers+=u.length,s.orphanDetails.push({workId:t.id,workTitle:t.workSheetNumber||t.title||`Obra ${t.id}`,orphanUsers:u}))}}catch(a){console.error("❌ Erro ao gerar relatório:",a)}return s}};ae(pa,"instance");let sn=pa;const Qn=sn.getInstance(),Wc=()=>{const[n,s]=m.useState(!1),[a,o]=m.useState(null),[r,i]=m.useState(null),[t,u]=m.useState(!1),d=async()=>{s(!0),i(null);try{console.log("📊 Gerando relatório de utilizadores órfãos...");const f=await Qn.getOrphanUsersReport();o(f),console.log("✅ Relatório gerado:",f)}catch(f){console.error("❌ Erro ao gerar relatório:",f),alert("Erro ao gerar relatório. Verifique a consola para detalhes.")}finally{s(!1)}},l=async()=>{if(window.confirm(`Tem a certeza que quer eliminar todos os utilizadores inexistentes das obras atribuídas?

Esta ação é irreversível e irá remover permanentemente as atribuições de utilizadores que não existem no Firestore.`)){s(!0);try{console.log("🧹 Executando limpeza de utilizadores órfãos...");const f=await Qn.cleanOrphanUsersFromWorks();i(f),f.success&&await d(),console.log("✅ Limpeza concluída:",f)}catch(f){console.error("❌ Erro durante limpeza:",f),alert("Erro durante a limpeza. Verifique a consola para detalhes.")}finally{s(!1)}}};return e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsxDEV(Ce,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:91,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:90,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900",children:"Limpeza de Utilizadores Órfãos"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:94,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Remove utilizadores inexistentes das obras atribuídas"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:89,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex space-x-3 mb-6",children:[e.jsxDEV("button",{onClick:d,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:[n?e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:111,columnNumber:15},void 0):e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:113,columnNumber:15},void 0),e.jsxDEV("span",{children:"Gerar Relatório"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:105,columnNumber:11},void 0),a&&a.totalOrphanUsers>0&&e.jsxDEV("button",{onClick:l,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400",children:[n?e.jsxDEV(X,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:125,columnNumber:17},void 0):e.jsxDEV(No,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:127,columnNumber:17},void 0),e.jsxDEV("span",{children:"Executar Limpeza"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:129,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:104,columnNumber:9},void 0),a&&e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-3",children:"Relatório de Análise"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:137,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxDEV("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(oi,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:145,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-blue-600",children:"Total Obras"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:147,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-blue-900",children:a.totalWorks},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:150,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:146,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:144,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:143,columnNumber:15},void 0),e.jsxDEV("div",{className:`p-3 rounded-lg ${a.worksWithOrphans>0?"bg-yellow-50":"bg-green-50"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(me,{className:`h-4 w-4 ${a.worksWithOrphans>0?"text-yellow-600":"text-green-600"}`},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:161,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:`text-xs font-medium ${a.worksWithOrphans>0?"text-yellow-600":"text-green-600"}`,children:"Obras Afetadas"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:165,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-lg font-bold ${a.worksWithOrphans>0?"text-yellow-900":"text-green-900"}`,children:a.worksWithOrphans},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:170,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:164,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:160,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:157,columnNumber:15},void 0),e.jsxDEV("div",{className:`p-3 rounded-lg ${a.totalOrphanUsers>0?"bg-red-50":"bg-green-50"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(oe,{className:`h-4 w-4 ${a.totalOrphanUsers>0?"text-red-600":"text-green-600"}`},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:183,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:`text-xs font-medium ${a.totalOrphanUsers>0?"text-red-600":"text-green-600"}`,children:"Utilizadores Órfãos"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:187,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-lg font-bold ${a.totalOrphanUsers>0?"text-red-900":"text-green-900"}`,children:a.totalOrphanUsers},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:192,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:186,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:182,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:179,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-gray-600"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:203,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Estado"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:205,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-lg font-bold text-gray-900",children:a.totalOrphanUsers===0?"Limpo":"Necessário"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:206,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:204,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:202,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:142,columnNumber:13},void 0),a.totalOrphanUsers===0?e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(Z,{className:"h-5 w-5 text-green-400 mr-3"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:218,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"text-sm font-medium text-green-800",children:"Tudo Limpo!"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:220,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-green-700",children:"Não foram encontrados utilizadores órfãos nas obras atribuídas."},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:223,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:219,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:217,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:216,columnNumber:15},void 0):e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(me,{className:"h-5 w-5 text-yellow-400 mr-3"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:233,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h5",{className:"text-sm font-medium text-yellow-800",children:"Utilizadores Órfãos Encontrados"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:235,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-700",children:["Foram encontrados ",a.totalOrphanUsers," utilizadores órfãos em ",a.worksWithOrphans,' obras. Clique em "Executar Limpeza" para os remover.']},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:238,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:234,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:232,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:231,columnNumber:15},void 0),a.orphanDetails.length>0&&e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("button",{onClick:()=>u(!t),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:[t?"Ocultar":"Mostrar"," Detalhes (",a.orphanDetails.length," obras)"]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:251,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:250,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:136,columnNumber:11},void 0),t&&a&&a.orphanDetails.length>0&&e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h5",{className:"font-medium text-gray-900 mb-3",children:"Detalhes dos Utilizadores Órfãos"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:266,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.orphanDetails.map((f,v)=>e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:e.jsxDEV("div",{children:[e.jsxDEV("h6",{className:"font-medium text-gray-900",children:f.workTitle},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:274,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:["ID: ",f.workId]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:277,columnNumber:23},void 0),e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("p",{className:"text-sm text-red-700 font-medium",children:["Utilizadores órfãos (",f.orphanUsers.length,"):"]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:281,columnNumber:25},void 0),e.jsxDEV("ul",{className:"text-sm text-red-600 ml-4 list-disc",children:f.orphanUsers.map((g,C)=>e.jsxDEV("li",{children:[g.name," (ID: ",g.id,")"]},C,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:287,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:284,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:280,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:273,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:272,columnNumber:19},void 0)},v,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:271,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:269,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:265,columnNumber:11},void 0),r&&e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-3",children:"Resultado da Limpeza"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:305,columnNumber:13},void 0),r.success?e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center mb-2",children:[e.jsxDEV(Z,{className:"h-5 w-5 text-green-400 mr-3"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV("h5",{className:"text-sm font-medium text-green-800",children:"Limpeza Concluída com Sucesso!"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:313,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:311,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-green-700",children:[r.cleaned," obras foram atualizadas e utilizadores órfãos removidos."]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:317,columnNumber:17},void 0),r.details.length>0&&e.jsxDEV("div",{className:"mt-3",children:e.jsxDEV("details",{className:"text-sm text-green-700",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:["Ver detalhes da limpeza (",r.details.length," ","obras)"]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:325,columnNumber:23},void 0),e.jsxDEV("div",{className:"mt-2 space-y-2",children:r.details.map((f,v)=>e.jsxDEV("div",{className:"bg-white rounded p-2",children:[e.jsxDEV("p",{className:"font-medium",children:f.workTitle},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:332,columnNumber:29},void 0),f.removedUsers.length>0&&e.jsxDEV("p",{className:"text-xs",children:["Removidos: ",f.removedUsers.join(", ")]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:334,columnNumber:31},void 0)]},v,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:331,columnNumber:27},void 0))},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:329,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:324,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:323,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:310,columnNumber:15},void 0):e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center mb-2",children:[e.jsxDEV(ba,{className:"h-5 w-5 text-red-400 mr-3"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:348,columnNumber:19},void 0),e.jsxDEV("h5",{className:"text-sm font-medium text-red-800",children:"Erro Durante a Limpeza"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:349,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:347,columnNumber:17},void 0),r.errors.length>0&&e.jsxDEV("ul",{className:"text-sm text-red-700 list-disc ml-4",children:r.errors.map((f,v)=>e.jsxDEV("li",{children:f},v,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:356,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:354,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:346,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:304,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Como Funciona"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:367,columnNumber:11},void 0),e.jsxDEV("ol",{className:"text-sm text-blue-700 space-y-1 list-decimal list-inside",children:[e.jsxDEV("li",{children:'Clique em "Gerar Relatório" para verificar se há utilizadores órfãos'},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:371,columnNumber:13},void 0),e.jsxDEV("li",{children:"Revise os detalhes dos utilizadores que serão removidos"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:375,columnNumber:13},void 0),e.jsxDEV("li",{children:'Clique em "Executar Limpeza" para remover permanentemente as atribuições órfãs'},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:376,columnNumber:13},void 0),e.jsxDEV("li",{children:"A limpeza atualiza tanto o Firestore quanto o localStorage"},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:380,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:370,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:366,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:87,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/OrphanUserCleanup.tsx",lineNumber:86,columnNumber:5},void 0)},qc=({currentUser:n,onBack:s,pools:a,works:o,maintenance:r,clients:i,users:t,enablePhoneDialer:u,enableMapsRedirect:d,togglePhoneDialer:l,toggleMapsRedirect:f,handleDataCleanup:v,cleanupLoading:g,cleanupError:C,generateReport:h})=>{var M;const[y,S]=m.useState("configuracoes"),{users:E,updateUsers:N,isLoading:D}=Ai(),[p,b]=m.useState(null),[x,w]=m.useState({email:"",name:"",role:"technician",password:""}),[U,F]=m.useState(!1),[P,O]=m.useState(!1),[te,Q]=m.useState("");m.useEffect(()=>{!D&&E.length===0&&(console.log("⚠️ Inicializando utilizador padrão..."),N([{email:"gongonsilva@gmail.com",name:"Gonçalo Fonseca",role:"super_admin"}]))},[D,E.length,N]);const Ee=async()=>{if(Q(""),!x.email||!x.name||!x.password){Q("Todos os campos são obrigatórios");return}if(x.password.length<3){Q("A password deve ter pelo menos 3 caracteres");return}if(E.some(B=>B.email===x.email)){Q("Já existe um utilizador com este email");return}try{const B={email:x.email,name:x.name,role:x.role},K=[...E,B];await N(K);const xe=JSON.parse(q.getItem("app-users")||"[]"),Fe={id:Date.now(),email:x.email,name:x.name,password:x.password,role:x.role,active:!0,permissions:G(x.role),createdAt:new Date().toISOString()};xe.push(Fe),q.setItem("app-users",JSON.stringify(xe)),w({email:"",name:"",role:"technician",password:""}),F(!1),window.dispatchEvent(new CustomEvent("usersUpdated")),console.log("✅ Utilizador criado com sucesso:",B)}catch(B){console.error("❌ Erro ao criar utilizador:",B),Q("Erro ao criar utilizador. Tente novamente.")}},z=async k=>{if(k.email==="gongonsilva@gmail.com"){alert("Não é possível eliminar o super administrador principal");return}if(confirm(`Tem a certeza que deseja eliminar o utilizador ${k.name}?`))try{const B=E.filter(Fe=>Fe.email!==k.email);await N(B);const xe=JSON.parse(q.getItem("app-users")||"[]").filter(Fe=>Fe.email!==k.email);q.setItem("app-users",JSON.stringify(xe)),window.dispatchEvent(new CustomEvent("usersUpdated")),console.log("✅ Utilizador eliminado:",k.email)}catch(B){console.error("❌ Erro ao eliminar utilizador:",B),alert("Erro ao eliminar utilizador")}},fe=async k=>{try{const B=E.map(Fe=>Fe.email===k.email?k:Fe);await N(B);const xe=JSON.parse(q.getItem("app-users")||"[]").map(Fe=>Fe.email===k.email?{...Fe,name:k.name,email:k.email,role:k.role,permissions:k.permissions||{}}:Fe);q.setItem("app-users",JSON.stringify(xe)),window.dispatchEvent(new CustomEvent("usersUpdated")),b(null),console.log("✅ Utilizador atualizado:",k.email),alert(`Utilizador ${k.name} atualizado com sucesso!`)}catch(B){console.error("❌ Erro ao atualizar utilizador:",B),alert("Erro ao atualizar utilizador")}},G=k=>{const B={obras:{view:!1,create:!1,edit:!1,delete:!1},manutencoes:{view:!1,create:!1,edit:!1,delete:!1},piscinas:{view:!1,create:!1,edit:!1,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!1,create:!1,edit:!1,delete:!1},clientes:{view:!1,create:!1,edit:!1,delete:!1}};switch(k){case"super_admin":return Object.fromEntries(Object.entries(B).map(([K,xe])=>[K,{view:!0,create:!0,edit:!0,delete:!0}]));case"admin":return Object.fromEntries(Object.entries(B).map(([K,xe])=>[K,{view:!0,create:!0,edit:!0,delete:K!=="utilizadores"}]));case"manager":return{...B,obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!0,edit:!1,delete:!1},clientes:{view:!0,create:!0,edit:!1,delete:!1},relatorios:{view:!0,create:!1,edit:!1,delete:!1}};case"technician":return{...B,obras:{view:!0,create:!1,edit:!0,delete:!1},manutencoes:{view:!0,create:!0,edit:!0,delete:!1},piscinas:{view:!0,create:!1,edit:!1,delete:!1}};default:return B}},Ss=[{id:"configuracoes",name:"Configurações",icon:ge},{id:"utilizadores",name:"Utilizadores",icon:oe},{id:"relatorios",name:"Relatórios",icon:xs},{id:"sistema",name:"Sistema",icon:pe}];return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 pb-20",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6 max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(ge,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:316,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:315,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Administração & Configurações"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:319,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gestão completa do sistema, utilizadores e relatórios"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:322,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:318,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:314,columnNumber:13},void 0),e.jsxDEV("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:331,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:327,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:313,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:312,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm relative z-10",children:[e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("nav",{className:"flex px-6 overflow-x-auto",children:Ss.map(k=>{const B=k.icon;return e.jsxDEV("button",{onClick:()=>{console.log(`🔥 Tab clicado: ${k.id} -> ${k.name}`),S(k.id)},className:`relative py-4 px-6 mr-1 border-b-2 font-medium text-sm transition-all duration-200 min-w-0 flex-shrink-0 ${y===k.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2 relative",children:[e.jsxDEV(B,{className:"h-5 w-5 flex-shrink-0"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:356,columnNumber:23},void 0),e.jsxDEV("span",{className:"whitespace-nowrap",children:k.name},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:357,columnNumber:23},void 0),y===k.id&&e.jsxDEV("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-blue-500 rounded-full"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:359,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:355,columnNumber:21},void 0)},k.id,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:343,columnNumber:19},void 0)})},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:339,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:338,columnNumber:11},void 0),e.jsxDEV("div",{className:"p-6 min-h-[600px]",children:[y==="configuracoes"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Sistema"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:375,columnNumber:19},void 0),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Versão"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:380,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium",children:"1.0.0"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:381,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:379,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Utilizador Ativo"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:384,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium",children:n==null?void 0:n.name},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:385,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:383,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Perfil"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:388,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium capitalize",children:(M=n==null?void 0:n.role)==null?void 0:M.replace("_"," ")},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:389,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:387,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between py-2",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Modo de Dados"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:394,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium",children:"Armazenamento Local"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:395,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:393,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:378,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:374,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(ea,{className:"h-6 w-6 text-blue-600 mr-3"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:403,columnNumber:21},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Interação Mobile"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:404,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:402,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configure o comportamento de cliques em contactos e moradas"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:408,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:"📞"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:416,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900",children:"Marcação Automática"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:421,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>l(!u),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u?"bg-blue-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:434,columnNumber:31},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:424,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:420,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-blue-700 text-sm mb-3",children:"Quando ativado, clicar num número de telefone abrirá diretamente o marcador do telefone."},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:443,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-blue-600 text-xs",children:["Estado:"," ",u?"✅ Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:447,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:419,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:415,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:414,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"🗺️"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:458,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-green-900",children:"Navegação Maps"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:463,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>f(!d),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-green-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:476,columnNumber:31},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:466,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:462,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-green-700 text-sm mb-3",children:"Quando ativado, clicar numa morada abrirá o Google Maps para navegação."},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:485,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-green-600 text-xs",children:["Estado:"," ",d?"✅ Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:489,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:461,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:457,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:456,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:412,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:401,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsxDEV(ls,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:504,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:503,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900",children:"Permissões de Notificações"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:507,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Gerir permissões para receber notificações push no dispositivo"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:510,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:506,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:502,columnNumber:21},void 0),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV(zc,{},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:518,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:517,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:501,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:500,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsxDEV(Es,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:528,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:527,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-medium text-gray-900",children:"Permissões de Localização"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:531,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Gerir partilha de localização e configurações GPS do dispositivo"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:534,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:530,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:526,columnNumber:21},void 0),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV($c,{},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:542,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:541,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:525,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:524,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:372,columnNumber:15},void 0),y==="utilizadores"&&e.jsxDEV("div",{className:"space-y-6 relative",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Utilizadores"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:554,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Criar, editar e gerir utilizadores do sistema"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:557,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:553,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Gr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:565,columnNumber:21},void 0),e.jsxDEV("span",{children:"Novo Utilizador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:566,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:561,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:552,columnNumber:17},void 0),U&&e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-blue-900",children:"Adicionar Novo Utilizador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:574,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>{F(!1),w({email:"",name:"",role:"technician",password:""}),Q("")},className:"text-blue-600 hover:text-blue-800",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:590,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:577,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:573,columnNumber:21},void 0),te&&e.jsxDEV("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm",children:te},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:595,columnNumber:23},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Nome Completo"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:602,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:x.name,onChange:k=>w({...x,name:k.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"João Silva"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:605,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:601,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Email"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:616,columnNumber:25},void 0),e.jsxDEV("input",{type:"email",value:x.email,onChange:k=>w({...x,email:k.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"joao@exemplo.com"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:619,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:615,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Password"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:630,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:P?"text":"password",value:x.password,onChange:k=>w({...x,password:k.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Password"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:634,columnNumber:27},void 0),e.jsxDEV("button",{type:"button",onClick:()=>O(!P),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:P?e.jsxDEV(po,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:652,columnNumber:31},void 0):e.jsxDEV(qe,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:654,columnNumber:31},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:646,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:633,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:629,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Função"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:660,columnNumber:25},void 0),e.jsxDEV("select",{value:x.role,onChange:k=>w({...x,role:k.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsxDEV("option",{value:"technician",children:"Técnico"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:673,columnNumber:27},void 0),e.jsxDEV("option",{value:"manager",children:"Gestor"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:674,columnNumber:27},void 0),e.jsxDEV("option",{value:"admin",children:"Administrador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:675,columnNumber:27},void 0),(n==null?void 0:n.role)==="super_admin"&&e.jsxDEV("option",{value:"super_admin",children:"Super Administrador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:677,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:663,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:659,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:600,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3",children:[e.jsxDEV("button",{onClick:()=>{F(!1),w({email:"",name:"",role:"technician",password:""}),Q("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:686,columnNumber:23},void 0),e.jsxDEV("button",{onClick:Ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:705,columnNumber:25},void 0),e.jsxDEV("span",{children:"Criar Utilizador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:706,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:701,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:685,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:572,columnNumber:19},void 0),p&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:["Editar Utilizador: ",p.name]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:717,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(ve,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:724,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:720,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:716,columnNumber:23},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:732,columnNumber:29},void 0),e.jsxDEV("input",{type:"text",value:p.name,onChange:k=>b({...p,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:735,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:731,columnNumber:27},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:748,columnNumber:29},void 0),e.jsxDEV("input",{type:"email",value:p.email,onChange:k=>b({...p,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:751,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:747,columnNumber:27},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Função"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:764,columnNumber:29},void 0),e.jsxDEV("select",{value:p.role,onChange:k=>b({...p,role:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"technician",children:"Técnico"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:777,columnNumber:31},void 0),e.jsxDEV("option",{value:"manager",children:"Gestor"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:778,columnNumber:31},void 0),e.jsxDEV("option",{value:"admin",children:"Administrador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:779,columnNumber:31},void 0),(n==null?void 0:n.role)==="super_admin"&&e.jsxDEV("option",{value:"super_admin",children:"Super Administrador"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:781,columnNumber:33},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:767,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:763,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:730,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Permissões Detalhadas"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:791,columnNumber:27},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[{key:"obras",label:"Obras"},{key:"piscinas",label:"Piscinas"},{key:"manutencoes",label:"Manutenções"},{key:"utilizadores",label:"Utilizadores"},{key:"relatorios",label:"Relatórios"},{key:"clientes",label:"Clientes"}].map(({key:k,label:B})=>e.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h5",{className:"font-medium text-gray-900 mb-3",children:B},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:807,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:["view","create","edit","delete"].map(K=>{var xe,Fe;return e.jsxDEV("label",{className:"flex items-center space-x-2",children:[e.jsxDEV("input",{type:"checkbox",checked:((Fe=(xe=p.permissions)==null?void 0:xe[k])==null?void 0:Fe[K])||!1,onChange:Eo=>{const xa={...p.permissions||{}};xa[k]||(xa[k]={}),xa[k][K]=Eo.target.checked,b({...p,permissions:xa})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:817,columnNumber:41},void 0),e.jsxDEV("span",{className:"text-sm text-gray-700 capitalize",children:K==="view"?"Ver":K==="create"?"Criar":K==="edit"?"Editar":"Eliminar"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:840,columnNumber:41},void 0)]},K,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:813,columnNumber:39},void 0)})},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:810,columnNumber:33},void 0)]},k,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:803,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:794,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:790,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsxDEV("button",{onClick:()=>b(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:860,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>fe(p),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:870,columnNumber:29},void 0),e.jsxDEV("span",{children:"Guardar Alterações"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:871,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:866,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:859,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:728,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:715,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:714,columnNumber:19},void 0),(n==null?void 0:n.role)==="super_admin"&&e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(Ce,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:884,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-medium text-yellow-900",children:"Limpeza de Utilizadores Órfãos"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:886,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-700",children:"Remove utilizadores inexistentes das obras atribuídas"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:889,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:885,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:883,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>S("sistema"),className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",children:"Aceder"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:882,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:881,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm overflow-visible",children:[e.jsxDEV("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:["Utilizadores Registados (",E.length,")"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:908,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:907,columnNumber:19},void 0),e.jsxDEV("div",{className:"divide-y divide-gray-200 max-h-[500px] overflow-y-auto",children:E.map((k,B)=>e.jsxDEV("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between min-h-[60px]",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxDEV(Xs,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:921,columnNumber:31},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:920,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:k.name},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:924,columnNumber:31},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:k.email},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:927,columnNumber:31},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:923,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:919,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex items-center space-x-2 gap-1",children:[e.jsxDEV("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k.role==="super_admin"?"bg-red-100 text-red-800":k.role==="manager"?"bg-purple-100 text-purple-800":k.role==="technician"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:k.role==="super_admin"?"Super Admin":k.role==="manager"?"Gestor":(k.role==="technician","Técnico")},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:933,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>b(k),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-2 rounded-md transition-colors",title:"Editar utilizador",children:e.jsxDEV(ei,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:957,columnNumber:31},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:952,columnNumber:29},void 0),k.email!=="gongonsilva@gmail.com"&&e.jsxDEV("button",{onClick:()=>z(k),className:"text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded-md transition-colors",title:"Eliminar utilizador",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:965,columnNumber:33},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:960,columnNumber:31},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:932,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:918,columnNumber:25},void 0)},k.email,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:914,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:912,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:906,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:551,columnNumber:15},void 0),y==="relatorios"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Relatórios"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:981,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gere relatórios detalhados em PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:984,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:980,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(We,{className:"h-8 w-8 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:993,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold text-blue-900",children:a.length},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:995,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-blue-700",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:998,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:994,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:992,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:991,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(we,{className:"h-8 w-8 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1004,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold text-green-900",children:o.length},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1006,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-green-700",children:"Obras"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1009,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1005,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1003,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1002,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(bs,{className:"h-8 w-8 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1015,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold text-yellow-900",children:r.length},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1017,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-yellow-700",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1020,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1016,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1014,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1013,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(oe,{className:"h-8 w-8 text-purple-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1026,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold text-purple-900",children:i.length},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1028,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-purple-700",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1031,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1027,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1025,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1024,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:990,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(xs,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1043,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1042,columnNumber:23},void 0),e.jsxDEV("div",{children:e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório Geral"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1046,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1045,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1041,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h&&h("geral"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1055,columnNumber:23},void 0),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1056,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1051,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1040,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1064,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1063,columnNumber:23},void 0),e.jsxDEV("div",{children:e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Piscinas"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1067,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1066,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1062,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h&&h("piscinas"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1078,columnNumber:23},void 0),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1079,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1072,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1061,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1087,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1086,columnNumber:23},void 0),e.jsxDEV("div",{children:e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Obras"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1090,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1089,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1085,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h&&h("obras"),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1099,columnNumber:23},void 0),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1095,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1084,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-6 w-6 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1108,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1107,columnNumber:23},void 0),e.jsxDEV("div",{children:e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Manutenções"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1111,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1110,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1106,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h&&h("manutencoes"),className:"w-full px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1122,columnNumber:23},void 0),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1123,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1116,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1105,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-6 w-6 text-purple-600"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1131,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1130,columnNumber:23},void 0),e.jsxDEV("div",{children:e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Clientes"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1134,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1133,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1129,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h&&h("clientes"),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1145,columnNumber:23},void 0),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1146,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1139,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1128,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1038,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:979,columnNumber:15},void 0),y==="sistema"&&(n==null?void 0:n.role)==="super_admin"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Gestão de Sistema"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1157,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Ferramentas avançadas de administração do sistema"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1160,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1156,columnNumber:17},void 0),e.jsxDEV(Wc,{},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1166,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(Ce,{className:"h-6 w-6 text-red-600 mr-3"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1171,columnNumber:21},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestão de Dados"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1172,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1170,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Elimine todos os dados de obras, manutenções e piscinas para começar com uma aplicação limpa. Os utilizadores são mantidos."},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1176,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(le,{className:"h-5 w-5 text-red-600 mt-0.5"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1184,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium text-red-900 mb-2",children:"Limpar Dados do Sistema"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1186,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:"Esta ação eliminará permanentemente:"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1189,columnNumber:25},void 0),e.jsxDEV("ul",{className:"text-red-700 text-sm space-y-1 mb-4",children:[e.jsxDEV("li",{children:["• Todas as obras (",o.length," registos)"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1193,columnNumber:27},void 0),e.jsxDEV("li",{children:["• Todas as manutenções (",r.length," ","registos)"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1194,columnNumber:27},void 0),e.jsxDEV("li",{children:["• Todas as piscinas (",a.length," registos)"]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1198,columnNumber:27},void 0),e.jsxDEV("li",{children:"• Dados do Firebase e armazenamento local"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1199,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1192,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-red-700 text-sm font-medium mb-3",children:"⚠️ ATENÇÃO: Esta operação é irreversível!"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1201,columnNumber:25},void 0),e.jsxDEV("button",{onClick:v,disabled:g,className:"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1209,columnNumber:27},void 0),e.jsxDEV("span",{children:g?"A Eliminar...":"Eliminar Todos os Dados"},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1210,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1204,columnNumber:25},void 0),C&&e.jsxDEV("p",{className:"text-red-600 text-sm mt-2",children:C},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1217,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1185,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1183,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1182,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1169,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:1155,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:369,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:337,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:310,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/UnifiedAdminPageSimple.tsx",lineNumber:309,columnNumber:5},void 0)};let Gc=0,Wr=0;const sr=n=>{let s=Date.now();s<=Wr&&(s=Wr+1),Wr=s;const a=++Gc,o=Math.random().toString(36).substring(2,9),r=Math.random().toString(36).substring(2,5),i=`${n}-${s}-${a}-${o}-${r}`;return console.log(`🆔 ID único gerado: ${i}`),i};function Jc(){const[n,s]=m.useState(()=>({obras:[],manutencoes:[],piscinas:[],clientes:[],totalItems:0,lastSync:"",isGloballyShared:!1,isLoading:!1,error:null,syncStatus:"disconnected"})),a=m.useCallback((N,D="[]")=>{try{if(typeof window>"u"||!window.localStorage)return JSON.parse(D);const p=localStorage.getItem(N);if(!p)return JSON.parse(D);const b=JSON.parse(p);return Array.isArray(b)?b:JSON.parse(D)}catch(p){return console.warn(`⚠️ Error reading localStorage key "${N}":`,p),JSON.parse(D)}},[]),o=m.useCallback((N,D)=>{try{return typeof window>"u"||!window.localStorage?!1:(localStorage.setItem(N,JSON.stringify(D)),!0)}catch(p){return console.warn(`⚠️ Error writing localStorage key "${N}":`,p),!1}},[]);m.useEffect(()=>{if(typeof window>"u")return;const N=async()=>{s(p=>({...p,isLoading:!0,syncStatus:"connecting"}));try{console.log("��� Carregando dados do Firestore (desenvolvimento = produção)...");const[p,b,x,w]=await Promise.all([is("obras"),is("manutencoes"),is("piscinas"),is("clientes")]);let U=p,F=b,P=x,O=w;if(U.length>0||F.length>0||P.length>0||O.length>0){console.log("✅ Dados carregados do Firestore:",{obras:U.length,manutencoes:F.length,piscinas:P.length,clientes:O.length});const fe=(G,Ss)=>{if(!Array.isArray(G)||G.length===0)return G;const M=new Set,k=[],B=G.filter(K=>!K||!K.id?(console.warn(`⚠️ Item sem ID em ${Ss}, removendo:`,K),!1):M.has(K.id)?(k.push(K.id),console.warn(`🗑️ DUPLICATE ${Ss.toUpperCase()} REMOVED:`,K.id),!1):(M.add(K.id),!0));return k.length>0&&(console.warn(`⚠️ ${Ss.toUpperCase()} duplicados detectados (removidos apenas da memória local):`,k.join(",")),console.log(`📝 ${Ss} - Dados únicos carregados: ${B.length}/${G.length} (${k.length} duplicados ignorados)`),console.log("🔗 Para eliminar permanentemente, elimine manualmente no Firebase Console")),B};U=fe(U,"obra"),F=fe(F,"manutenção"),P=fe(P,"piscina"),O=fe(O,"cliente"),console.log("🎯 ALL DATA DEDUPLICATED - FINAL COUNTS:",{obras:U.length,manutencoes:F.length,piscinas:P.length,clientes:O.length}),o("works",U),o("maintenance",F),o("pools",P),o("clients",O),s({obras:U,manutencoes:F,piscinas:P,clientes:O,totalItems:U.length+F.length+P.length+O.length,lastSync:new Date().toISOString(),isGloballyShared:!0,isLoading:!1,error:null,syncStatus:"connected"});return}console.log("⚠️ Firestore vazio, carregando do localStorage como fallback...");const te=a("works"),Q=a("maintenance"),Ee=a("pools"),z=a("clients");s({obras:te,manutencoes:Q,piscinas:Ee,clientes:z,totalItems:te.length+Q.length+Ee.length+z.length,lastSync:new Date().toISOString(),isGloballyShared:!0,isLoading:!1,error:null,syncStatus:"connected"})}catch(p){console.error("❌ Erro ao carregar dados do Firestore:",p),console.log("⚠️ Usando localStorage como fallback devido a erro...");const b=a("works"),x=a("maintenance"),w=a("pools"),U=a("clients");s({obras:b,manutencoes:x,piscinas:w,clientes:U,totalItems:b.length+x.length+w.length+U.length,lastSync:new Date().toISOString(),isGloballyShared:!0,isLoading:!1,error:null,syncStatus:"connected"})}};N();const D=p=>{["works","maintenance","pools","clients"].includes(p.key||"")&&N()};if(typeof window<"u")return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[]);const r=m.useCallback(async N=>{try{const D=N.id||sr("obra"),p={...N,id:D,createdAt:N.createdAt||new Date().toISOString(),sharedGlobally:!0,visibleToAllUsers:!0},b=a("works"),x=b.some(P=>P.id===p.id),w=n.obras.some(P=>P.id===p.id);if(x||w)return console.warn("🚨 DUPLICADO DETECTADO - Obra já existe, ignorando:",p.id),p.id;try{if((await is("obras")).some(te=>te.id===p.id))return console.warn("🚨 DUPLICADO NO FIRESTORE - Obra já existe, ignorando:",p.id),p.id}catch(P){console.warn("⚠️ Não foi possível verificar duplicados no Firestore:",P)}console.log("🔥 Salvando obra no Firestore:",p.id),await ts("obras",p.id,p)?console.log("✅ Obra salva no Firestore com sucesso"):console.warn("⚠️ Falha ao salvar no Firestore, continuando com localStorage");const F=[...b,p];return o("works",F),s(P=>({...P,obras:F,totalItems:P.totalItems+1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("obrasUpdated",{detail:{data:F,collection:"obras"}})),p.id}catch(D){throw console.error("❌ Error adding obra:",D),D}},[a,o]),i=m.useCallback(async N=>{try{const D=N.id||sr("manutencao"),p={...N,id:D,createdAt:N.createdAt||new Date().toISOString(),sharedGlobally:!0,visibleToAllUsers:!0},b=a("maintenance"),x=b.some(w=>w.id===p.id);if(x)return console.warn("🚨 Manutenção com ID duplicado detectada, ignorando:",p.id),p.id;if(!x){console.log("🔥 Salvando manutenção no Firestore:",p.id),await ts("manutencoes",p.id,p)?console.log("✅ Manutenção salva no Firestore com sucesso"):console.warn("⚠️ Falha ao salvar manutenção no Firestore, continuando com localStorage");const U=[...b,p];o("maintenance",U),s(F=>({...F,manutencoes:U,totalItems:F.totalItems+1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("manutencoesUpdated",{detail:{data:U,collection:"manutencoes"}}))}return D}catch(D){throw console.error("❌ Error adding manutenção:",D),D}},[a,o]),t=m.useCallback(async N=>{try{const D=N.id||sr("piscina"),p={...N,id:D,createdAt:N.createdAt||new Date().toISOString(),sharedGlobally:!0,visibleToAllUsers:!0},b=a("pools");if(!b.some(w=>w.id===p.id)){console.log("🔥 Salvando piscina no Firestore:",p.id),await ts("piscinas",p.id,p)?console.log("✅ Piscina salva no Firestore com sucesso"):console.warn("⚠️ Falha ao salvar piscina no Firestore, continuando com localStorage");const U=[...b,p];o("pools",U),s(F=>({...F,piscinas:U,totalItems:F.totalItems+1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("piscinasUpdated",{detail:{data:U,collection:"piscinas"}}))}return D}catch(D){throw console.error("❌ Error adding piscina:",D),D}},[a,o]),u=m.useCallback(async N=>{try{const D=N.id||sr("cliente"),p={...N,id:D,createdAt:N.createdAt||new Date().toISOString(),sharedGlobally:!0,visibleToAllUsers:!0},b=a("clients");if(!b.some(w=>w.id===p.id)){console.log("🔥 Salvando cliente no Firestore:",p.id),await ts("clientes",p.id,p)?console.log("✅ Cliente salvo no Firestore com sucesso"):console.warn("⚠️ Falha ao salvar cliente no Firestore, continuando com localStorage");const U=[...b,p];o("clients",U),s(F=>({...F,clientes:U,totalItems:F.totalItems+1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("clientesUpdated",{detail:{data:U,collection:"clientes"}}))}return D}catch(D){throw console.error("❌ Error adding cliente:",D),D}},[a,o]),d=m.useCallback(async(N,D)=>{console.log("updateObra called:",N,D)},[]),l=m.useCallback(async N=>{try{console.log("🗑️ Eliminando obra:",N);try{const{deleteFromFirestoreRest:b}=await ie(async()=>{const{deleteFromFirestoreRest:w}=await Promise.resolve().then(()=>Ho);return{deleteFromFirestoreRest:w}},void 0);await b("obras",N)?console.log("✅ Obra eliminada do Firestore com sucesso"):console.warn("⚠️ Falha ao eliminar do Firestore, continuando com localStorage")}catch(b){console.warn("⚠️ Erro no Firestore, continuando com localStorage:",b)}const p=a("works").filter(b=>b.id!==N);o("works",p),s(b=>({...b,obras:p,totalItems:b.totalItems-1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("obrasUpdated",{detail:{data:p,collection:"obras"}})),console.log("✅ Obra eliminada com sucesso:",N)}catch(D){throw console.error("❌ Erro ao eliminar obra:",D),D}},[a,o]),f=m.useCallback(async(N,D)=>{console.log("updateManutencao called:",N,D)},[]),v=m.useCallback(async N=>{try{console.log("🗑️ Eliminando manutenção:",N);try{const{deleteFromFirestoreRest:b}=await ie(async()=>{const{deleteFromFirestoreRest:w}=await Promise.resolve().then(()=>Ho);return{deleteFromFirestoreRest:w}},void 0);await b("manutencoes",N)&&console.log("✅ Manutenção eliminada do Firestore com sucesso")}catch(b){console.warn("⚠️ Erro no Firestore:",b)}const p=a("maintenance").filter(b=>b.id!==N);o("maintenance",p),s(b=>({...b,manutencoes:p,totalItems:b.totalItems-1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("manutencoesUpdated",{detail:{data:p,collection:"manutencoes"}})),console.log("✅ Manutenção eliminada com sucesso:",N)}catch(D){throw console.error("❌ Erro ao eliminar manutenção:",D),D}},[a,o]),g=m.useCallback(async(N,D)=>{console.log("updatePiscina called:",N,D)},[]),C=m.useCallback(async N=>{try{console.log("🗑️ Eliminando piscina:",N);try{const{deleteFromFirestoreRest:b}=await ie(async()=>{const{deleteFromFirestoreRest:w}=await Promise.resolve().then(()=>Ho);return{deleteFromFirestoreRest:w}},void 0);await b("piscinas",N)&&console.log("✅ Piscina eliminada do Firestore com sucesso")}catch(b){console.warn("⚠️ Erro no Firestore:",b)}const p=a("pools").filter(b=>b.id!==N);o("pools",p),s(b=>({...b,piscinas:p,totalItems:b.totalItems-1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("piscinasUpdated",{detail:{data:p,collection:"piscinas"}})),console.log("✅ Piscina eliminada com sucesso:",N)}catch(D){throw console.error("❌ Erro ao eliminar piscina:",D),D}},[a,o]),h=m.useCallback(async(N,D)=>{console.log("updateCliente called:",N,D)},[]),y=m.useCallback(async N=>{try{console.log("🗑️ Eliminando cliente:",N);try{const{deleteFromFirestoreRest:b}=await ie(async()=>{const{deleteFromFirestoreRest:w}=await Promise.resolve().then(()=>Ho);return{deleteFromFirestoreRest:w}},void 0);await b("clientes",N)&&console.log("✅ Cliente eliminado do Firestore com sucesso")}catch(b){console.warn("⚠️ Erro no Firestore:",b)}const p=a("clients").filter(b=>b.id!==N);o("clients",p),s(b=>({...b,clientes:p,totalItems:b.totalItems-1})),typeof window<"u"&&window.dispatchEvent(new CustomEvent("clientesUpdated",{detail:{data:p,collection:"clientes"}})),console.log("✅ Cliente eliminado com sucesso:",N)}catch(D){throw console.error("❌ Erro ao eliminar cliente:",D),D}},[a,o]),S=m.useCallback(async()=>{console.log("🔄 forceSyncAll: Forçando sincronização com Firestore..."),s(N=>({...N,isLoading:!0,syncStatus:"syncing"}));try{const[N,D,p,b]=await Promise.all([is("obras"),is("manutencoes"),is("piscinas"),is("clientes")]);let x=N,w=D,U=p,F=b;console.log("✅ forceSyncAll: Dados atualizados do Firestore:",{obras:x.length,manutencoes:w.length,piscinas:U.length,clientes:F.length});const P=(O,te)=>{const Q=new Set,Ee=O.filter(z=>Q.has(z.id)?(console.warn(`🗑️ forceSyncAll: Removing duplicate ${te}:`,z.id),!1):(Q.add(z.id),!0));return Ee.length<O.length&&console.log(`✅ forceSyncAll: ${te} duplicates removed. Unique: ${Ee.length}/${O.length}`),Ee};x=P(x,"obra"),w=P(w,"manutenção"),U=P(U,"piscina"),F=P(F,"cliente"),o("works",x),o("maintenance",w),o("pools",U),o("clients",F),s({obras:x,manutencoes:w,piscinas:U,clientes:F,totalItems:x.length+w.length+U.length+F.length,lastSync:new Date().toISOString(),isGloballyShared:!0,isLoading:!1,error:null,syncStatus:"connected"})}catch(N){console.error("❌ forceSyncAll: Erro na sincronização:",N),s(D=>({...D,error:"Erro na sincronização",isLoading:!1,syncStatus:"error"}))}},[a,o]),E=m.useCallback(async()=>{console.log("🔄 resetSync called")},[]);return{...n,addObra:r,updateObra:d,deleteObra:l,addManutencao:i,updateManutencao:f,deleteManutencao:v,addPiscina:t,updatePiscina:g,deletePiscina:C,addCliente:u,updateCliente:h,deleteCliente:y,forceSyncAll:S,resetSync:E}}class Kc{constructor(){ae(this,"AUTHORIZED_EMAILS",["gongonsilva@gmail.com","goncalosfonseca@gmail.com"])}async login(s,a,o=!1){var r,i;console.log("�� DirectAuth: Attempting login for:",s);try{if(!s||!a)return{success:!1,error:"Email e palavra-passe são obrigatórios"};const t=s.toLowerCase().trim(),u=this.AUTHORIZED_EMAILS.includes(t);this.ensureDefaultUser();const d=q.getItem("app-users");let l=null;if(d)try{l=JSON.parse(d).find(C=>{var h;return((h=C.email)==null?void 0:h.toLowerCase().trim())===t&&C.active})}catch(g){console.warn("❌ Erro ao carregar utilizadores:",g)}if(!u&&!l)return console.warn("❌ Email não encontrado no sistema:",s),{success:!1,error:"Email não encontrado ou utilizador inativo"};let f=!1,v;if(u)f=a==="123456"||a==="123"||a==="19867gsf"||a.length>=3,v={uid:`direct_${Date.now()}`,email:t,name:"Gonçalo Fonseca",role:"super_admin",active:!0,createdAt:new Date().toISOString()};else if(l)f=l.password===a,v={uid:((r=l.id)==null?void 0:r.toString())||`user_${Date.now()}`,email:t,name:l.name,role:l.role||"technician",active:l.active,permissions:l.permissions,createdAt:l.createdAt||new Date().toISOString()};else return{success:!1,error:"Erro de autenticação"};if(!f)return console.warn("❌ Password incorreta para:",s),{success:!1,error:"Password incorreta"};try{q.setItem("currentUser",JSON.stringify(v)),q.setItem("isAuthenticated","true");try{await ts("users",((i=v.id)==null?void 0:i.toString())||s,v),console.log("✅ DirectAuth: Utilizador guardado no Firestore")}catch{console.warn("⚠️ DirectAuth: Erro Firestore, mas login continua")}return o&&(q.setItem("rememberMe","true"),co.setItem("savedLoginCredentials",JSON.stringify({email:s.trim(),password:a,rememberMe:!0})),console.log("💾 DirectAuth: Credenciais guardadas para auto-login")),console.log("✅ DirectAuth: Login successful for:",s),setTimeout(()=>{console.log("🔄 Disparando evento de login para ativar auto sync..."),window.dispatchEvent(new CustomEvent("userLoggedIn",{detail:{user:v,timestamp:Date.now()}}))},100),{success:!0,user:v}}catch(g){return console.error("❌ DirectAuth: Storage error:",g),{success:!1,error:"Erro ao guardar sessão"}}}catch(t){return console.error("❌ DirectAuth: Unexpected error:",t),{success:!1,error:"Erro inesperado. Tente novamente."}}}async logout(){try{console.log("🚪 DirectAuth: Logging out..."),q.removeItem("currentUser"),q.removeItem("isAuthenticated"),q.removeItem("rememberMe"),co.removeItem("savedLoginCredentials"),console.log("✅ DirectAuth: Logout successful")}catch(s){console.error("❌ DirectAuth: Logout error:",s)}}getCurrentUser(){try{const s=q.getItem("currentUser"),a=q.getItem("isAuthenticated");return s&&a==="true"?JSON.parse(s):null}catch(s){return console.error("❌ DirectAuth: Error getting current user:",s),null}}isAuthenticated(){return!!this.getCurrentUser()}getAuthorizedEmails(){return[...this.AUTHORIZED_EMAILS]}ensureDefaultUser(){try{const s=q.getItem("app-users");let a=[];if(s)try{a=JSON.parse(s)}catch(r){console.warn("❌ Erro ao carregar utilizadores existentes:",r),a=[]}if(a.some(r=>{var i;return((i=r.email)==null?void 0:i.toLowerCase().trim())==="gongonsilva@gmail.com"||r.name==="Gonçalo Fonseca"}))console.log("✅ Utilizador padrão já existe no sistema");else{console.log("🔧 Criando utilizador padrão Gonçalo Fonseca...");const r={id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",password:"19867gsf",role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:new Date().toISOString()};a.push(r),q.setItem("app-users",JSON.stringify(a)),console.log("✅ Utilizador padrão criado com sucesso")}}catch(s){console.error("❌ Erro ao garantir utilizador padrão:",s)}}}const ro=new Kc;class Hc{constructor(){console.log("🔐 Safe Auth Service Wrapper initialized - using DirectAuth only")}async login(s,a,o=!1){try{console.log("🔐 SafeAuthWrapper: Usando DirectAuth para login");const r=await ro.login(s,a,o);return r.success?console.log("✅ SafeAuthWrapper: Login successful via DirectAuth"):console.warn("❌ SafeAuthWrapper: Login failed via DirectAuth:",r.error),r}catch(r){return console.error("❌ SafeAuthWrapper: Unexpected error:",r),{success:!1,error:"Erro de autenticação. Tente novamente."}}}async logout(){try{console.log("🚪 SafeAuthWrapper: Logout using DirectAuth"),await ro.logout(),console.log("✅ SafeAuthWrapper: Logout completed")}catch(s){console.error("❌ SafeAuthWrapper: Logout error:",s)}}getCurrentUser(){try{return ro.getCurrentUser()}catch(s){return console.error("❌ SafeAuthWrapper: Error getting current user:",s),null}}isAuthenticated(){try{return ro.isAuthenticated()}catch(s){return console.error("❌ SafeAuthWrapper: Error checking auth status:",s),!1}}getAuthorizedEmails(){return ro.getAuthorizedEmails()}isEmailAuthorized(s){return this.getAuthorizedEmails().includes(s.toLowerCase().trim())}}const us=new Hc,Na=class Na{constructor(){ae(this,"messaging",null);ae(this,"vapidKey","BPqpFk8t8X3k4zC5r7K-8pL9mN0q1w2e3r4t5y6u7i8o9p0a1s2d3f4g5h6j7k8l");ae(this,"isSupported",!1)}static getInstance(){return Na.instance||(Na.instance=new Na),Na.instance}async initialize(){try{if(console.log("🚀 Inicializando Push Notification Service..."),console.log(`📋 Notification in window: ${"Notification"in window}`),console.log(`📋 ServiceWorker in navigator: ${"serviceWorker"in navigator}`),!("Notification"in window)||!("serviceWorker"in navigator))return console.warn("⚠️ Push notifications não são suportadas neste browser"),this.isSupported=!1,!1;const s=sa();if(console.log(`📋 Firebase apps encontradas: ${s.length}`),s.length===0)return console.warn("⚠️ Firebase App não está inicializada - continuando sem Firebase Messaging"),this.isSupported=!0,!0;try{const a=Ta(),o=a.options;if(!o.messagingSenderId||o.messagingSenderId==="your_sender_id"||o.messagingSenderId==="")return console.warn("⚠️ Firebase messaging não configurado corretamente - usando apenas notificações locais"),this.isSupported=!0,!0;this.messaging=zt(a),console.log("✅ Firebase Messaging inicializado")}catch(a){console.warn("⚠️ Erro ao inicializar Firebase Messaging - usando apenas notificações locais:",a),this.messaging=null}return this.isSupported=!0,console.log("✅ Push Notification Service inicializado com sucesso"),!0}catch(s){return console.error("❌ Erro ao inicializar Push Notification Service:",s),this.isSupported=!1,!1}}async requestPermission(){try{return this.isSupported?await Notification.requestPermission()==="granted"?(console.log("✅ Permissão para notificações concedida"),!0):(console.warn("⚠️ Permissão para notificações negada"),!1):(console.warn("⚠️ Push notifications não suportadas"),!1)}catch(s){return console.error("❌ Erro ao solicitar permissão:",s),!1}}async getDeviceToken(){try{if(!this.messaging||!this.isSupported)return console.warn("⚠️ Messaging não disponível"),null;if(!await this.requestPermission())return null;if(!this.vapidKey||this.vapidKey.includes("substitua")||this.vapidKey.length<60)return console.warn("⚠️ VAPID key não configurada corretamente"),null;const a=await $t(this.messaging,{vapidKey:this.vapidKey});return a?(console.log("✅ Token FCM obtido:",a.substring(0,20)+"..."),a):(console.warn("⚠️ Não foi possível obter token FCM"),null)}catch(s){return console.warn("⚠️ Erro ao obter token (handled gracefully):",s.message||s),null}}setupForegroundMessageListener(){if(!(!this.messaging||!this.isSupported))try{_t(this.messaging,s=>{console.log("📢 Mensagem recebida em foreground:",s);const{title:a,body:o}=s.notification||{};a&&o&&this.showLocalNotification(a,o,s.data)})}catch(s){console.warn("⚠️ Erro ao configurar listener de mensagens:",s)}}showLocalNotification(s,a,o){if(console.log(`🔔 Tentando mostrar notificação: "${s}" - "${a}"`),console.log(`📋 Permissão atual: ${Notification.permission}`),console.log(`🌐 Suporte a notificações: ${"Notification"in window}`),!("Notification"in window)){console.warn("⚠️ Este browser não suporta notificações");return}if(Notification.permission==="granted")try{const r=new Notification(s,{body:a,icon:"/icon.svg",badge:"/icon.svg",tag:"leirisonda-obra",data:o,requireInteraction:!0});console.log("✅ Notificação criada com sucesso"),r.onclick=()=>{console.log("👆 Notificação clicada"),window.focus(),r.close(),o!=null&&o.obraId&&console.log("📋 Navegando para obra:",o.obraId)},r.onshow=()=>{console.log("✅ Notificação mostrada")},r.onerror=i=>{console.error("❌ Erro na notificação:",i)}}catch(r){console.error("❌ Erro ao criar notificação:",r)}else console.warn(`⚠️ Permissão de notificação não concedida: ${Notification.permission}`)}async sendNotificationToUser(s,a){try{console.log("📤 Simulando envio de notificaç��o para usuário:",s),console.log("📋 Notificação:",a);const o=JSON.parse(localStorage.getItem("pending-notifications")||"[]"),r={...a,userId:s,timestamp:new Date().toISOString(),id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};o.push(r),localStorage.setItem("pending-notifications",JSON.stringify(o));const i=JSON.parse(localStorage.getItem("currentUser")||"{}");return(i.id===s||i.email===s)&&this.showLocalNotification(a.title,a.body,a.data),console.log('✅ Notificação "enviada" com sucesso'),!0}catch(o){return console.error("❌ Erro ao enviar notificação:",o),!1}}async checkPendingNotifications(){try{const s=JSON.parse(localStorage.getItem("pending-notifications")||"[]"),a=JSON.parse(localStorage.getItem("currentUser")||"{}");if(!a.id&&!a.email)return;const o=s.filter(r=>r.userId===a.id||r.userId===a.email);for(const r of o)r.seen||(this.showLocalNotification(r.title,r.body,r.data),r.seen=!0);localStorage.setItem("pending-notifications",JSON.stringify(s))}catch(s){console.error("❌ Erro ao verificar notificações pendentes:",s)}}async notifyObraAssignment(s,a){const o={title:"🏗️ Nova Obra Atribuída",body:`Obra "${s.workSheetNumber||s.title}" foi atribuída a você`,data:{type:"obra_assignment",obraId:s.id,workSheetNumber:s.workSheetNumber||"",client:s.client||""},userId:a,obraId:s.id};return await this.sendNotificationToUser(a,o)}async saveDeviceToken(s){try{const a=await this.getDeviceToken();if(!a)return!1;const o=JSON.parse(localStorage.getItem("device-tokens")||"{}");return o[s]={token:a,timestamp:new Date().toISOString(),userAgent:navigator.userAgent},localStorage.setItem("device-tokens",JSON.stringify(o)),console.log("✅ Token do dispositivo salvo para usuário:",s),!0}catch(a){return console.error("❌ Erro ao salvar token do dispositivo:",a),!1}}async startNotificationService(){if(console.log("🚀 Iniciando serviço de notificações..."),!await this.initialize()){console.warn("⚠️ Falha na inicialização - serviço não será iniciado");return}try{this.setupForegroundMessageListener(),console.log("✅ Listeners de mensagem configurados")}catch(a){console.warn("⚠️ Erro ao configurar listeners, continuando sem eles:",a)}setInterval(()=>{try{this.checkPendingNotifications()}catch(a){console.error("❌ Erro ao verificar notificações pendentes:",a)}},3e4),console.log("✅ Serviço de notificações ativo e funcionando"),console.log(`📋 Estado atual das permissões: ${Notification.permission}`)}};ae(Na,"instance");let Nr=Na;const mo=Nr.getInstance();typeof window<"u"&&setTimeout(async()=>{try{await mo.startNotificationService()}catch(n){console.warn("⚠️ Erro na inicialização automática do serviço de notificações:",n)}},2e3);const fr=Object.freeze(Object.defineProperty({__proto__:null,PushNotificationService:Nr,pushNotificationService:mo},Symbol.toStringTag,{value:"Module"})),Qc=()=>{const[n,s]=m.useState([]),[a,o]=m.useState(!1),r=v=>{s(g=>[...g,`${new Date().toLocaleTimeString()}: ${v}`])},i=()=>{s([])},t=async()=>{var v;o(!0),r("🔄 Testando login válido...");try{const g=await us.login("gongonsilva@gmail.com","123456",!1);g.success?(r("✅ Login válido funcionou!"),r(`👤 Usuário: ${(v=g.user)==null?void 0:v.email}`)):r(`❌ Login válido falhou: ${g.error}`)}catch(g){r(`❌ Erro no login válido: ${g.message}`)}finally{o(!1)}},u=async()=>{o(!0),r("🔄 Testando email inválido...");try{const v=await us.login("email_inexistente@gmail.com","123456",!1);v.success?r("❌ Email inválido deveria ter sido rejeitado"):(r("✅ Email inválido corretamente rejeitado"),r(`📝 Erro: ${v.error}`))}catch(v){r(`❌ Erro no teste de email inválido: ${v.message}`)}finally{o(!1)}},d=async()=>{o(!0),r("🔄 Testando senha fraca...");try{const v=await us.login("gongonsilva@gmail.com","12",!1);v.success?r("❌ Senha fraca deveria ter sido rejeitada"):(r("✅ Senha fraca corretamente rejeitada"),r(`📝 Erro: ${v.error}`))}catch(v){r(`❌ Erro no teste de senha fraca: ${v.message}`)}finally{o(!1)}},l=()=>{r("🔄 Verificando status de autenticação...");const v=us.isAuthenticated(),g=us.getCurrentUser();r(`🔐 Autenticado: ${v?"SIM":"NÃO"}`),r(`👤 Usuário atual: ${g?g.email:"Nenhum"}`);const C=us.getAuthorizedEmails();r(`📧 Emails autorizados: ${C.join(", ")}`)},f=async()=>{o(!0),r("🔄 Testando logout...");try{await us.logout(),r("✅ Logout realizado com sucesso");const v=us.isAuthenticated();r(`🔐 Status após logout: ${v?"AINDA AUTENTICADO":"DESCONECTADO"}`)}catch(v){r(`❌ Erro no logout: ${v.message}`)}finally{o(!1)}};return e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4 text-blue-600",children:"🧪 Teste de Autenticação"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:128,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:[e.jsxDEV("button",{onClick:t,disabled:a,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50",children:"✅ Login Válido"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:133,columnNumber:9},void 0),e.jsxDEV("button",{onClick:u,disabled:a,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 disabled:opacity-50",children:"❌ Email Inválido"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:141,columnNumber:9},void 0),e.jsxDEV("button",{onClick:d,disabled:a,className:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 disabled:opacity-50",children:"🔑 Senha Fraca"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:149,columnNumber:9},void 0),e.jsxDEV("button",{onClick:l,disabled:a,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50",children:"🔍 Status Auth"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:157,columnNumber:9},void 0),e.jsxDEV("button",{onClick:f,disabled:a,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 disabled:opacity-50",children:"🚪 Logout"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:165,columnNumber:9},void 0),e.jsxDEV("button",{onClick:i,disabled:a,className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 disabled:opacity-50",children:"🗑️ Limpar"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:173,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:132,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-gray-100 p-4 rounded-lg h-96 overflow-y-auto",children:[e.jsxDEV("h3",{className:"font-bold mb-2",children:"📋 Resultados dos Testes:"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:183,columnNumber:9},void 0),n.length===0?e.jsxDEV("p",{className:"text-gray-500 italic",children:"Clique nos botões acima para executar os testes..."},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:185,columnNumber:11},void 0):e.jsxDEV("div",{className:"space-y-1",children:n.map((v,g)=>e.jsxDEV("div",{className:"text-sm font-mono p-2 bg-white rounded border",children:v},g,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:191,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:189,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:182,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"📧 Emails válidos:"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:204,columnNumber:11},void 0)," gongonsilva@gmail.com, goncalosfonseca@gmail.com"]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:203,columnNumber:9},void 0),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"🔑 Senhas válidas:"},void 0,!1,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:208,columnNumber:11},void 0)," 123, 123456, 19867gsf (ou qualquer senha com 3+ caracteres)"]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:207,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:202,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/src/components/LoginTest.tsx",lineNumber:127,columnNumber:5},void 0)},Yc=()=>{const[n,s]=m.useState([]),[a,o]=m.useState(!1),r=(d,l)=>{s(f=>{const v=f.findIndex(C=>C.name===d),g={name:d,...l};if(v>=0){const C=[...f];return C[v]=g,C}else return[...f,g]})},i=async()=>{o(!0),s([]),r("localStorage",{status:"loading",message:"Verificando localStorage..."});try{localStorage.setItem("test","test"),localStorage.removeItem("test"),r("localStorage",{status:"success",message:"localStorage disponível e funcional"})}catch(d){r("localStorage",{status:"error",message:"localStorage não disponível",details:d.message})}r("sessionStorage",{status:"loading",message:"Verificando sessionStorage..."});try{sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),r("sessionStorage",{status:"success",message:"sessionStorage disponível e funcional"})}catch(d){r("sessionStorage",{status:"error",message:"sessionStorage não disponível",details:d.message})}r("privateMode",{status:"loading",message:"Verificando modo privado..."});try{const d=(()=>{try{return localStorage.setItem("__private_test__","test"),localStorage.removeItem("__private_test__"),!1}catch{return!0}})();r("privateMode",{status:d?"warning":"success",message:d?"Navegação privada detectada":"Navegação normal"})}catch(d){r("privateMode",{status:"error",message:"Erro ao verificar modo privado",details:d.message})}r("existingData",{status:"loading",message:"Verificando dados existentes..."});try{const d=localStorage.getItem("currentUser"),l=localStorage.getItem("isAuthenticated"),f=localStorage.getItem("app-users");r("existingData",{status:"success",message:`Dados encontrados: ${[d?"currentUser":null,l?"isAuthenticated":null,f?"app-users":null].filter(Boolean).join(", ")||"nenhum"}`})}catch(d){r("existingData",{status:"error",message:"Erro ao verificar dados existentes",details:d.message})}r("firebase",{status:"loading",message:"Verificando Firebase..."});try{const d=Al();r("firebase",{status:d?"success":"warning",message:d?"Firebase inicializado":"Firebase não inicializado (normal antes do login)"})}catch(d){r("firebase",{status:"error",message:"Erro ao verificar Firebase",details:d.message})}r("network",{status:"loading",message:"Verificando conectividade..."});try{const d=await fetch("https://httpbin.org/get",{method:"GET",mode:"cors"});d.ok?r("network",{status:"success",message:"Conectividade de rede OK"}):r("network",{status:"warning",message:`Rede disponível mas resposta: ${d.status}`})}catch(d){r("network",{status:"error",message:"Sem conectividade de rede ou CORS bloqueado",details:d.message})}o(!1)};m.useEffect(()=>{i()},[]);const t=d=>{switch(d){case"success":return e.jsxDEV(Z,{className:"w-5 h-5 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:201,columnNumber:16},void 0);case"error":return e.jsxDEV(ba,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:203,columnNumber:16},void 0);case"warning":return e.jsxDEV(le,{className:"w-5 h-5 text-yellow-500"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:205,columnNumber:16},void 0);case"loading":return e.jsxDEV(Ls,{className:"w-5 h-5 text-blue-500 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:207,columnNumber:16},void 0)}},u=d=>{switch(d){case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"loading":return"border-blue-200 bg-blue-50"}};return e.jsxDEV("div",{className:"min-h-screen bg-gray-100 p-4",children:e.jsxDEV("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxDEV("h1",{className:"text-3xl font-bold mb-4 text-blue-600",children:"🔍 Diagnóstico do Sistema"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:228,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("p",{className:"text-gray-600",children:"Verificação automática do estado da aplicação"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:233,columnNumber:13},void 0),e.jsxDEV("button",{onClick:i,disabled:a,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2",children:[a?e.jsxDEV(Ls,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:241,columnNumber:28},void 0):null,a?"Executando...":"Executar Novamente"]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:236,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:232,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid gap-3",children:n.map(d=>e.jsxDEV("div",{className:`border rounded-lg p-4 ${u(d.status)}`,children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[t(d.status),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"font-semibold",children:d.name},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:255,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm",children:d.message},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:256,columnNumber:21},void 0),d.details&&e.jsxDEV("details",{className:"mt-2",children:[e.jsxDEV("summary",{className:"cursor-pointer text-xs text-gray-600",children:"Ver detalhes"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:259,columnNumber:25},void 0),e.jsxDEV("pre",{className:"text-xs mt-1 p-2 bg-white rounded border overflow-x-auto",children:d.details},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:262,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:258,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:254,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:252,columnNumber:17},void 0)},d.name,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:248,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:246,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:227,columnNumber:9},void 0),e.jsxDEV(Qc,{},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:275,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4 text-blue-600",children:"ℹ️ Informações do Sistema"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:279,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"User Agent:"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:284,columnNumber:15},void 0),e.jsxDEV("div",{className:"font-mono text-xs mt-1 p-2 bg-gray-100 rounded break-all",children:navigator.userAgent},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"URL:"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:290,columnNumber:15},void 0),e.jsxDEV("div",{className:"font-mono text-xs mt-1 p-2 bg-gray-100 rounded break-all",children:window.location.href},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:291,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:289,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Timestamp:"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:296,columnNumber:15},void 0),e.jsxDEV("div",{className:"font-mono text-xs mt-1 p-2 bg-gray-100 rounded",children:new Date().toISOString()},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:297,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:295,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Viewport:"},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:302,columnNumber:15},void 0),e.jsxDEV("div",{className:"font-mono text-xs mt-1 p-2 bg-gray-100 rounded",children:[window.innerWidth," x ",window.innerHeight]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:303,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:301,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:282,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:278,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:226,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/DiagnosticPage.tsx",lineNumber:225,columnNumber:5},void 0)},Xc=()=>{const[n,s]=m.useState({isLoaded:!1,hasErrors:!1,authStatus:"checking",firebaseStatus:"not_ready",storageStatus:"available",errorMessages:[]}),[a,o]=m.useState(!1);m.useEffect(()=>{const t=async()=>{const d={isLoaded:!0,hasErrors:!1,authStatus:"checking",firebaseStatus:"not_ready",storageStatus:"available",errorMessages:[]};try{localStorage.setItem("__test__","test"),localStorage.removeItem("__test__"),d.storageStatus="available"}catch{d.storageStatus="unavailable",d.hasErrors=!0,d.errorMessages.push("localStorage não disponível")}try{const l=localStorage.getItem("currentUser"),f=localStorage.getItem("isAuthenticated");l&&f==="true"?d.authStatus="authenticated":d.authStatus="not_authenticated"}catch{d.authStatus="not_authenticated",d.errorMessages.push("Erro ao verificar autenticação")}try{const l=window.localStorage.getItem("firebase-ready")==="true";d.firebaseStatus=l?"ready":"not_ready"}catch{d.firebaseStatus="error"}s(d)};t();const u=setInterval(t,1e4);return()=>clearInterval(u)},[]);const r=()=>{window.location.reload()},i=()=>{window.location.href="?diagnostic=true"};return n.isLoaded?!n.hasErrors&&n.authStatus!=="checking"?null:e.jsxDEV("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-300 rounded-lg shadow-lg max-w-sm",children:e.jsxDEV("div",{className:"p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[n.hasErrors?e.jsxDEV(le,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:111,columnNumber:15},void 0):e.jsxDEV(Z,{className:"w-5 h-5 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:113,columnNumber:15},void 0),e.jsxDEV("span",{className:"font-medium text-sm",children:n.hasErrors?"Problemas detectados":"Sistema OK"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:109,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>o(!a),className:"text-gray-500 hover:text-gray-700",children:e.jsxDEV(ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:123,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:119,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:108,columnNumber:9},void 0),a&&e.jsxDEV("div",{className:"space-y-2 text-xs",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Autenticação:"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:130,columnNumber:15},void 0),e.jsxDEV("span",{className:n.authStatus==="authenticated"?"text-green-600":n.authStatus==="not_authenticated"?"text-orange-600":"text-blue-600",children:n.authStatus==="authenticated"?"✓ Logado":n.authStatus==="not_authenticated"?"⚠ Não logado":"⏳ Verificando"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:129,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Storage:"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:149,columnNumber:15},void 0),e.jsxDEV("span",{className:n.storageStatus==="available"?"text-green-600":n.storageStatus==="limited"?"text-orange-600":"text-red-600",children:n.storageStatus==="available"?"✓ OK":n.storageStatus==="limited"?"⚠ Limitado":"✗ Indisponível"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:150,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:148,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Firebase:"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:168,columnNumber:15},void 0),e.jsxDEV("span",{className:n.firebaseStatus==="ready"?"text-green-600":n.firebaseStatus==="not_ready"?"text-orange-600":"text-red-600",children:n.firebaseStatus==="ready"?"✓ Pronto":n.firebaseStatus==="not_ready"?"⚠ Não iniciado":"✗ Erro"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:169,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:167,columnNumber:13},void 0),n.errorMessages.length>0&&e.jsxDEV("div",{className:"mt-2 p-2 bg-red-50 rounded border border-red-200",children:[e.jsxDEV("div",{className:"text-red-700 font-medium",children:"Erros:"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:188,columnNumber:17},void 0),n.errorMessages.map((t,u)=>e.jsxDEV("div",{className:"text-red-600",children:["• ",t]},u,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:190,columnNumber:19},void 0))]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:187,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex gap-2 mt-3",children:[e.jsxDEV("button",{onClick:r,className:"flex-1 bg-blue-500 text-white text-xs py-1 px-2 rounded hover:bg-blue-600",children:"🔄 Recarregar"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:198,columnNumber:15},void 0),e.jsxDEV("button",{onClick:i,className:"flex-1 bg-gray-500 text-white text-xs py-1 px-2 rounded hover:bg-gray-600",children:"🔍 Diagnóstico"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:204,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:197,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:128,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:107,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:106,columnNumber:5},void 0):e.jsxDEV("div",{className:"fixed bottom-4 right-4 bg-blue-100 border border-blue-300 rounded-lg p-3 shadow-lg",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"w-4 h-4 animate-spin text-blue-600"},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:94,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-sm text-blue-700",children:"Carregando aplicação..."},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:93,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/src/components/AppStatusIndicator.tsx",lineNumber:92,columnNumber:7},void 0)},Zc=({name:n,data:s})=>{const a=m.useRef(0),o=m.useRef(Date.now());a.current+=1;const r=Date.now(),i=r-o.current;return o.current=r,m.useEffect(()=>{a.current>5&&console.warn(`🚨 ${n} rendered ${a.current} times!`),i<10&&console.warn(`🚨 ${n} rapid re-render! Time since last: ${i}ms`),console.log(`🔄 ${n} render #${a.current} (${i}ms since last)`,s?{dataLength:Array.isArray(s)?s.length:"not array"}:"")}),null};console.log("🔥 App.tsx: DESENVOLVIMENTO = PRODUÇÃO - mesma aplicação sempre");console.log("🌍 Environment:",{prod:!1,mode:"production",base:"/"});let ed=0;const Js=(n="item")=>{const s=Date.now(),a=++ed,o=Math.random().toString(36).substring(2,9);return`${n}-${s}-${a}-${o}`},ar=(n,s="id")=>{if(!Array.isArray(n))return;const a=n.map(r=>r[s]).filter(r=>r!==void 0),o=a.filter((r,i)=>a.indexOf(r)!==i);o.length>0&&(console.warn(`🚨 Duplicate keys detected in ${s}:`,o),console.warn("🚨 Full array:",n))},sd=["1752604451507","1752602368414","1752578821484","1752582282132","1752574634617","1752517424794","1752582282133"],ad=console.error;console.error=(...n)=>{const s=n.join(" ");if(s.includes("same key")){const a=sd.find(o=>s.includes(o));a&&(console.warn(`🚨 FOUND PROBLEM TIMESTAMP: ${a}`),console.warn("🚨 Full message:",s),console.warn("🚨 Stack trace:",new Error().stack),console.warn("🚨 Found timestamp in React key error"))}return ad.apply(console,n)};const Yn=[{id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",password:"19867gsf",role:"super_admin",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},active:!0,createdAt:"2024-01-01"}],no=(n,s,a="info")=>{console.log(`${a.toUpperCase()}: ${n} - ${s}`)};function od(){const n=Date.now();console.log("🚀 App component rendering at:",n);const[s,a]=m.useState(!1);if(m.useEffect(()=>{console.log("📱 Verificando estado da aplicação...");try{if(!Sa||!m.useState||!m.useEffect)throw new Error("React hooks não disponíveis");console.log("✅ React e hooks verificados OK")}catch(A){console.error("❌ Erro nos imports básicos:",A),a(!0)}},[]),s)return e.jsxDEV("div",{style:{minHeight:"100vh",background:"#0891b2",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"2rem"},children:e.jsxDEV("div",{children:[e.jsxDEV("h1",{children:"🔧 Leirisonda"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:370,columnNumber:11},this),e.jsxDEV("p",{children:"A aplicação está a carregar..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:371,columnNumber:11},this),e.jsxDEV("p",{children:"Se este problema persistir, recarregue a página."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:372,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"white",color:"#0891b2",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Recarregar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:373,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:369,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:356,columnNumber:7},this);window.lastAppRenderTime===n&&(console.error("🚨 DUPLICATE APP RENDER DETECTED!",n),console.trace("Stack trace for duplicate render:")),window.lastAppRenderTime=n;const[o,r]=m.useState(!0),[i,t]=m.useState(!0),[u,d]=m.useState(!1),[l,f]=m.useState(null),[v,g]=m.useState(!1),C=!0,h="REST API ativa (desenvolvimento = produção)",[y,S]=m.useState("aguardando");m.useEffect(()=>{setTimeout(()=>{window.firestoreRestApi?(S("ativo"),console.log("✅ REST API verificado e ativo no desenvolvimento!")):(S("aguardando"),console.log("⏳ REST API ainda não verificado..."))},1e3)},[]),m.useEffect(()=>{console.log("🔥 ForceFirestore inicializado - todos os dados vão para Firestore:",h)},[C,h]),m.useEffect(()=>{if((async()=>{await wl()})(),!q.getItem("app-users")){console.log("🔧 Criando utilizador padrão no localStorage");const I={id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",active:!0,role:"super_admin",password:"19867gsf",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},createdAt:new Date().toISOString()};Ye.setJson("app-users",[I])}},[]),m.useEffect(()=>((async()=>{try{await new Promise(V=>setTimeout(V,3e3)),console.log("���� Data persistence monitoring temporarily disabled")}catch(V){console.error("❌ Erro na monitorização de persist��ncia:",V)}})(),()=>{}),[]),m.useEffect(()=>{console.log("🔍 Verificando e recuperando quota Firebase...")},[]),m.useEffect(()=>{console.log("��� Firebase handles auth state automatically");const A=()=>{if(!/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))return;const I=document.querySelectorAll('iframe[src*="firebaseapp.com"]'),R=I.length>1,H=Array.from(I).some(re=>(re.getAttribute("src")||"").includes("leiria-1cfc9")&&document.querySelector('iframe[src*="leiria-1cfc9"]')),Y=q.getItem("firebase-quota-exceeded")==="true";(R||H||Y)&&(console.log("��� Firebase conflict detected on mobile device"),setTimeout(()=>g(!0),2e3))};if(document.readyState==="complete")A();else return window.addEventListener("load",A),()=>window.removeEventListener("load",A)},[]);const[E,N]=m.useState(!1),[D,p]=m.useState("dashboard"),[b,x]=m.useState("relatorios"),[w,U]=m.useState(!0),[F,P]=m.useState(!1),[O,te]=m.useState({name:"",email:"",phone:"",address:""}),[Q,Ee]=m.useState("all"),[z,fe]=m.useState(""),G=A=>{p(A),A!=="futuras-manutencoes"?window.history.replaceState(null,"",`#${A}`):window.history.replaceState(null,"",window.location.pathname)},[Ss,M]=m.useState(!1),[k,B]=m.useState(null),[K,xe]=m.useState(!1),[Fe,Eo]=m.useState(!1),[xa,dn]=m.useState(!1),[mn,gr]=m.useState(""),[un,hr]=m.useState(""),[Pi,ga]=m.useState(!1),[Ra,pn]=m.useState(""),[Nn,vr]=m.useState(""),Ui=()=>{try{return Cs()?"Firebase/Firestore":"Armazenamento Local"}catch{return"Armazenamento Local"}},[Ii,Oa]=m.useState(!1),[nd,Dr]=m.useState(!1),[fn,aa]=m.useState(!1),[yo,jo]=m.useState(!1),[id,td]=m.useState(!1),[ld,cd]=m.useState(!1),za=Jc(),ss=cn(),ki=m.useCallback(async()=>{var A;try{console.log("🔄 Iniciando refresh do Dashboard..."),window.dispatchEvent(new CustomEvent("forceRefreshWorks")),await((A=za.forceSyncAll)==null?void 0:A.call(za)),console.log("�� Dashboard atualizado com sucesso!")}catch(V){throw console.error("������ Erro durante refresh do Dashboard:",V),V}},[za]);let $a={isRefreshing:!1,pullDistance:0,showIndicator:!1,canRefresh:!1};try{$a=Gt({onRefresh:ki,threshold:60,disabled:D!=="dashboard"})}catch(A){console.error("❌ Erro no pull-to-refresh:",A)}const Mi={checkOnUserAction:async()=>{console.log("Firebase auto-fix disabled")}};m.useEffect(()=>{console.log("🛡️ Data protection initialized (checks disabled for performance)")},[]),m.useEffect(()=>{const A=I=>{kr(I.detail.enabled),q.setItem("enablePhoneDialer",I.detail.enabled.toString()),console.log("📞 Phone dialer synchronized:",I.detail.enabled)},V=I=>{Mr(I.detail.enabled),q.setItem("enableMapsRedirect",I.detail.enabled.toString()),console.log("🗺📞 Maps redirect synchronized:",I.detail.enabled)};return window.addEventListener("phoneDialerToggled",A),window.addEventListener("mapsRedirectToggled",V),()=>{window.removeEventListener("phoneDialerToggled",A),window.removeEventListener("mapsRedirectToggled",V)}},[]);const{obras:ha,manutencoes:va,piscinas:Vo,clientes:Ao,isLoading:dd,lastSync:Li,error:md,addObra:Ti,addManutencao:Er,addPiscina:bn,addCliente:yr,updateObra:ud,updateManutencao:pd,updatePiscina:Nd,updateCliente:fd,deleteObra:xn,deleteManutencao:bd,deletePiscina:xd,deleteCliente:gd,forceSyncAll:jr,syncStatus:hd}=za;m.useEffect(()=>{console.log("🔍 Verificando dados carregados:",{obras:ha.length,manutencoes:va.length,piscinas:Vo.length,clientes:Ao.length}),ar(ha,"id"),ar(va,"id"),ar(Vo,"id"),ar(Ao,"id"),ha.forEach(A=>{A.id&&A.id.toString().match(/^\d{13}$/)&&console.warn("🚨 Obra com ID timestamp detectada:",A.id,A)})},[ha,va,Vo,Ao]);const ye=Vo,Ie=va,de=ha,ze=Ao,oa=m.useMemo(()=>{const A=new Date;return va.filter(V=>V.scheduledDate&&new Date(V.scheduledDate)>=A)},[va]),wo=m.useMemo(()=>{const A=de.filter(H=>H.status==="pendente"||H.status==="pending").length,V=de.filter(H=>H.status==="em_progresso"||H.status==="in_progress").length,I=de.filter(H=>H.status==="concluida"||H.status==="completed").length,R=de.filter(H=>!H.sheetGenerated&&H.status!=="concluida"&&H.status!=="completed").length;return{pending:A,inProgress:V,completed:I,noSheet:R}},[de]),Ri=m.useMemo(()=>ze.filter(A=>A.status==="Ativo").length,[ze]),Oi=async A=>{try{console.log("🏊 addPool iniciado com Firestore ativo");const V=await Yo.createPool(A);return V&&console.log("✅ Piscina criada:",V),await bn(A)}catch(V){return console.error("❌ Erro no sistema de piscinas:",V),await bn(A)}},zi=async A=>{try{console.log("🔧 addWork iniciado com Firestore ativo");const V=await Yo.createWork(A);return V?(console.log("✅ Obra criada no Firestore:",V),V):(console.warn("🎉 Firestore não disponível, usando sistema atual"),await Ti(A))}catch(V){console.error("❌ Erro no sistema de obras:",V);const I=JSON.parse(q.getItem("works")||"[]"),R={...A,id:A.id||Js("work"),createdAt:A.createdAt||new Date().toISOString()};return I.some(Y=>Y.id===R.id)||(I.push(R),q.setItem("works",JSON.stringify(I)),console.log("€ Obra guardada no localStorage como fallback")),R.id}},Vr=async A=>{try{console.log("🔧 addMaintenance iniciado com Firestore ativo");const V=await Yo.createMaintenance(A);if(V){console.log("🔥 Manutenção criada no Firestore:",V);try{await Er(A)}catch(I){console.warn("⚠️ Erro na sincronizaç��o universal:",I)}return V}else return await Er(A)}catch(V){return console.error("❌ Erro no sistema de manutenções:",V),await Er(A)}},$i=async A=>{try{console.log("🔥 addClient iniciado com Firestore ativo");const V=await Yo.createClient(A);if(V){console.log("✅ Cliente criado no Firestore:",V);try{await yr(A)}catch(I){console.warn("⚠️ Erro na sincronização universal:",I)}return V}else return await yr(A)}catch(V){return console.error("❌ Erro no sistema de clientes:",V),await yr(A)}},_i=()=>jr(),Bi=A=>{console.log("Sync is always enabled in Universal Sync mode:",A)},Wi=()=>Promise.resolve({success:!0}),Ar=!1,wr=null,_a=A=>l?!!(l.role==="super_admin"||l.email==="gongonsilva@gmail.com"||A.assignedTo&&(A.assignedTo===l.name||A.assignedTo.toLowerCase().includes(l.name.toLowerCase())||l.name.toLowerCase().includes(A.assignedTo.toLowerCase()))||A.assignedUsers&&A.assignedUsers.some(V=>V.name===l.name||V.id===l.id||V.id===String(l.id))||A.assignedUserIds&&A.assignedUserIds.includes(l.id)||!A.assignedTo&&(!A.assignedUsers||A.assignedUsers.length===0)&&(!A.assignedUserIds||A.assignedUserIds.length===0)&&(l.role==="super_admin"||l.email==="gongonsilva@gmail.com")):!1;Dl();const[ke,Rs]=m.useState(Yn),[gn,qi]=m.useState(!1);m.useEffect(()=>{(async()=>{console.log("🔄 Loading users from localStorage...");try{if(u&&Cs()){console.log("🔥 Carregando utilizadores do Firestore...");const R=await Ne.getUtilizadores();if(R.length>0){console.log("✅ Utilizadores carregados do Firestore:",R.length),Rs(R);return}}const I=q.getItem("app-users");if(I){const R=JSON.parse(I);if(console.log("✅ Users loaded from localStorage:",R.length),R.some(Y=>Y.email==="gongonsilva@gmail.com"||Y.name==="Gonçalo Fonseca")||(console.log("🔧 Adicionando Gonçalo Fonseca aos utilizadores"),R.push({id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",active:!0,role:"super_admin",password:"19867gsf",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},createdAt:new Date().toISOString()}),q.setItem("app-users",JSON.stringify(R))),Rs(R),Cs()){console.log("🔄 Sincronizando utilizadores locais para Firestore...");for(const Y of R)if(!Y.firestoreId){const re=await Ne.createUtilizador(Y);re&&(Y.firestoreId=re)}}}else{console.log("📝 No saved users found, initializing with default users");const R=[{id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",active:!0,role:"super_admin",password:"19867gsf",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},createdAt:new Date().toISOString()}];if(Rs(R),q.setItem("app-users",JSON.stringify(R)),Cs())for(const H of R){const Y=await Ne.createUtilizador(H);Y&&(H.firestoreId=Y)}}}catch(I){console.error("❌ Error loading users:",I),Rs(Yn)}finally{qi(!0)}})();const V=()=>{console.log("🎉 Users updated event received, reloading...");try{const I=q.getItem("app-users");if(I){const R=JSON.parse(I);console.log("✅ Users reloaded after update:",R.length,R),Rs(R)}}catch(I){console.error("❌ Error reloading users:",I)}};return window.addEventListener("usersUpdated",V),()=>window.removeEventListener("usersUpdated",V)},[u]);const[So,Sr]=m.useState(""),[Gi,Cr]=m.useState(!1),[vd,Fr]=m.useState(!1),[Dd,Ed]=m.useState([]),[as,ra]=m.useState([]),[Ji,Ki]=m.useState(!1),[hn,yd]=m.useState([]),[Da,Co]=m.useState([]),[Ea,Fo]=m.useState([]),[Po,Uo]=m.useState(""),[Io,ko]=m.useState(""),[Pr,Mo]=m.useState(""),[Ns,Lo]=m.useState([]),[jd,na]=m.useState(!1),[es,ya]=m.useState([]),[Ur,To]=m.useState(""),[Ro,Ir]=m.useState(!1),[T,Oo]=m.useState(null),[ee,ia]=m.useState(null),[se,zo]=m.useState(null),[L,ja]=m.useState(null),[Hi,Va]=m.useState(!1),[ne,Ba]=m.useState(null),[Qi,Wa]=m.useState(!1),[Vd,Yi]=m.useState(null),[Ad,Xi]=m.useState(!1),[Me,kr]=m.useState(!1),[Pe,Mr]=m.useState(!1),vn=A=>{kr(A),q.setItem("enablePhoneDialer",A.toString()),console.log("���� Configuração Phone Dialer atualizada:",A),window.dispatchEvent(new CustomEvent("phoneDialerToggled",{detail:{enabled:A}}))},Dn=A=>{Mr(A),q.setItem("enableMapsRedirect",A.toString()),console.log("����️ Configuração Maps Redirect atualizada:",A),window.dispatchEvent(new CustomEvent("mapsRedirectToggled",{detail:{enabled:A}}))};m.useEffect(()=>{(()=>{try{const V=q.getItem("enableMapsRedirect");V!==null&&(Mr(JSON.parse(V)),console.log("✅ Configuração Google Maps carregada:",JSON.parse(V)));const I=q.getItem("enablePhoneDialer");I!==null&&(kr(JSON.parse(I)),console.log("✅ Configuração Phone Dialer carregada:",JSON.parse(I)))}catch(V){console.error("❌ Erro ao carregar configurações:",V)}})()},[]);const[W,$e]=m.useState({poolId:"",date:new Date().toISOString().split("T")[0],startTime:"",endTime:"",technician:"",vehicle:"",pH:"",chlorine:"",alkalinity:"",temperature:"",workPerformed:"",otherWork:"",problems:"",observations:"",nextMaintenance:"",status:"completed"}),[Zi,wd]=m.useState(!0);m.useEffect(()=>{console.log("�� SECURITY: App initialization started"),(async()=>{try{const V=q.getItem("autoLoginEnabled"),I=q.getItem("rememberMe"),R=co.getItem("savedLoginCredentials"),H=q.getItem("currentUser"),Y=q.getItem("isAuthenticated");console.log("��� Auto-login desabilitado - utilizador deve fazer login"),console.log("����� No valid session found, starting fresh"),f(null),d(!1),q.removeItem("currentUser"),q.removeItem("isAuthenticated"),q.removeItem("mock-users"),q.removeItem("mock-current-user"),q.removeItem("test-data"),q.removeItem("sample-data"),console.log("✅ App initialization completed"),console.log("🗑🔥 Mock and test data cleared")}catch(V){console.error("❌ Erro na inicializaç���o:",V),f(null),d(!1)}})()},[]),m.useEffect(()=>{if(!u){console.log("📱 Firestore desativado - aguardando login");return}(async()=>{if(await new Promise(V=>setTimeout(V,2e3)),Cs()){console.log("🔥 Iniciando sincronização com Firebase Leiria APÓS LOGIN..."),console.log("✅ Firebase Leiria pronto para uso");try{console.log("🎉 Sincronizaç��o com Firebase Leiria completa!")}catch(V){console.error("❌ Erro na sincronizaç��o com Firebase Leiria:",V),console.log("�� Aplicação continua funcional em modo offline")}}else console.log("📱 Firebase Leiria não disponível - modo offline ativo"),console.log("�� Dados serão salvos apenas no localStorage")})()},[u]),m.useEffect(()=>{if(!u){console.log("🔄 AutoSync desativado - aguardando login");return}return(async()=>{if(await new Promise(V=>setTimeout(V,3e3)),Cs()){console.log("���� Iniciando sincronização automática APÓS LOGIN...");try{await Ps.startAutoSync(),console.log("✅ Sincronização automática TOTALMENTE ATIVA!"),na(!0),window.dispatchEvent(new CustomEvent("autoSyncStarted")),console.log("�� FIRESTORE ATIVO PARA EDIÇÕES!")}catch(V){console.error("�� Erro ao iniciar sincronização automática:",V),setTimeout(async()=>{try{await Ps.startAutoSync(),na(!0),console.log("�� AutoSync ativado na segunda tentativa!")}catch(I){console.error("❌ Erro na segunda tentativa:",I)}},5e3)}}else console.log("�� Firestore não disponível, tentando novamente em 10 segundos..."),setTimeout(async()=>{if(Cs())try{await Ps.startAutoSync(),na(!0),console.log("✅ AutoSync ativado após aguardar Firestore!")}catch(V){console.error("❌ Erro ao ativar AutoSync:",V)}},1e4)})(),()=>{Ps.stopAutoSync()}},[u]),m.useEffect(()=>{const A=R=>{const{data:H,collection:Y}=R.detail;Y==="obras"?window.dispatchEvent(new CustomEvent("forceRefreshWorks")):Y==="utilizadores"&&(Rs(H),window.dispatchEvent(new CustomEvent("usersUpdated")))},V=async R=>{const{user:H,timestamp:Y}=R.detail;console.log("��� Utilizador fez login, verificando auto sync:",H.email);try{await new Promise(re=>setTimeout(re,1e3)),Cs()?await Ps.ensureAutoSyncAfterLogin()?(na(!0),console.log("✅ Auto sync garantido após login!")):(console.warn("⚠️ Falha ao garantir auto sync ap��s login"),na(!1)):(console.log("⏳ Firestore não pronto, tentando novamente..."),setTimeout(async()=>{if(Cs())try{const re=await Ps.ensureAutoSyncAfterLogin();na(re),console.log("✅ Auto sync garantido após aguardar Firestore!")}catch(re){console.error("❌ Erro ao garantir auto sync ap��s aguardar:",re),na(!1)}},2e3))}catch(re){console.error("❌ Erro ao processar login para auto sync:",re)}},I=["obras","piscinas","manutencoes","utilizadores","clientes","localizacoes","notificacoes"];return I.forEach(R=>{window.addEventListener(`${R}Updated`,A)}),window.addEventListener("userLoggedIn",V),()=>{I.forEach(R=>{window.removeEventListener(`${R}Updated`,A)}),window.removeEventListener("userLoggedIn",V)}},[]),m.useEffect(()=>{const A=R=>{R.reason&&R.reason.toString().includes("firebase")&&R.reason.toString().includes("messaging")&&(console.warn("��� Firebase messaging error caught and handled:",R.reason),R.preventDefault())};window.addEventListener("unhandledrejection",A);const V=()=>{window.removeEventListener("unhandledrejection",A)};"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then(R=>{R.forEach(H=>{H.scope.includes("firebase-messaging-sw")||H.unregister()})}),setTimeout(()=>{navigator.serviceWorker.register("/firebase-messaging-sw.js",{updateViaCache:"none"}).then(R=>{console.log("📞 Firebase Messaging Service Worker registered successfully:",R.scope),R.waiting&&R.waiting.postMessage({type:"SKIP_WAITING"})}).catch(R=>(console.error("❌ Firebase Messaging Service Worker registration failed:",R),navigator.serviceWorker.register("/sw.js",{updateViaCache:"none"}).then(H=>{console.log("📞 Fallback Service Worker registered:",H.scope)}).catch(H=>{console.error("❌ Fallback Service Worker registration also failed:",H)}))),setTimeout(async()=>{try{await mo.startNotificationService(),(l!=null&&l.id||l!=null&&l.email)&&await mo.saveDeviceToken(String(l.id)||l.email)}catch(R){console.warn("⚠️ Erro ao inicializar serviço de notificações:",R)}},3e3),navigator.serviceWorker.addEventListener("message",R=>{if(R.data.type==="NOTIFICATION_CLICK"){console.log("���� Notification clicked, navigating...",R.data);const{data:H}=R.data;H.workId&&(p("obras"),setTimeout(()=>{no("�� Notificação",`Navegando para obra: ${H.workTitle}`,"info")},500))}})},1e3));const I=()=>{const R=window.location.hash.substring(1);R==="administracao"?(aa(!0),window.history.replaceState(null,"",window.location.pathname)):R&&u&&p(R)};return I(),window.addEventListener("hashchange",I),()=>{window.removeEventListener("hashchange",I),V()}},[u]),m.useEffect(()=>{if(u){const A=window.location.hash.substring(1);A&&p(A)}},[u]);const[Sd,Lr]=m.useState({email:"",password:""}),[En,Os]=m.useState(""),[Cd,Fd]=m.useState({name:"",email:"",password:"",role:"technician",permissions:{obras:{view:!1,create:!1,edit:!1,delete:!1},manutencoes:{view:!1,create:!1,edit:!1,delete:!1},piscinas:{view:!1,create:!1,edit:!1,delete:!1},utilizadores:{view:!1,create:!1,edit:!1,delete:!1},relatorios:{view:!1,create:!1,edit:!1,delete:!1},clientes:{view:!1,create:!1,edit:!1,delete:!1}},active:!0}),et=A=>{A.preventDefault(),mn==="19867"?(Eo(!1),dn(!0),gr(""),hr("")):hr("Palavra-passe incorreta")},st=()=>{dn(!1),Eo(!1),gr(""),hr("")},at=()=>{if(!ce("manutencoes","create")){alert("Não tem permissão para criar manutenç€es. Contacte o administrador.");return}if(!W.poolId||!W.technician){alert("Por favor, preencha os campos obrigat€rios (Piscina e T��cnico).");return}const A=ye.find(re=>re.id===W.poolId),V=ke.find(re=>re.id===parseInt(W.technician)),I={id:Js("intervention"),poolId:W.poolId,poolName:A?A.name:"Piscina Desconhecida",client:A?A.client:"",date:W.date,startTime:W.startTime,endTime:W.endTime,technician:V?V.name:W.technician,vehicle:W.vehicle,waterValues:{pH:W.pH,chlorine:W.chlorine,alkalinity:W.alkalinity,temperature:W.temperature},workPerformed:W.workPerformed,otherWork:W.otherWork,problems:W.problems,observations:W.observations,nextMaintenance:W.nextMaintenance,status:W.status,photos:as,photoCount:as.length,createdAt:new Date().toISOString()},R=JSON.parse(q.getItem("interventions")||"[]");R.push(I),q.setItem("interventions",JSON.stringify(R));const H={poolId:I.poolId,poolName:I.poolName,type:"Manutenç€egular",scheduledDate:W.date,technician:I.technician,status:W.status,description:W.workPerformed||"Manutenção realizada",notes:W.observations};if(Vr(H),W.nextMaintenance&&new Date(W.nextMaintenance)>new Date){const je={poolId:I.poolId,poolName:I.poolName,type:"Manutenção Programada",scheduledDate:W.nextMaintenance,technician:I.technician,status:"scheduled",description:"Manutenção programada automaticamente",notes:"Agendada automaticamente após manutenç��o anterior",clientName:A?A.client:"",clientContact:"",location:A?A.location:""};Vr(je),console.log("Futura manutenção criada:",je)}console.log("Manutenção salva com sucesso:",I);let Y=`Manutenção salva com sucesso! Piscina: ${I.poolName}, Técnico: ${I.technician}`;if(W.nextMaintenance){const re=new Date(W.nextMaintenance).toLocaleDateString("pt-PT");Y+=`

Próxima manutenção agendada para: ${re}`}alert(Y),$e({poolId:"",date:new Date().toISOString().split("T")[0],startTime:"",endTime:"",technician:"",vehicle:"",pH:"",chlorine:"",alkalinity:"",temperature:"",workPerformed:"",otherWork:"",problems:"",observations:"",nextMaintenance:"",status:"completed"}),ra([]),p("manutencoes")},qa=A=>{console.log(`Sharing via ${A}`),Cr(!1),Fr(!1),p("piscinas")},ot=async()=>{try{console.log("🚪 Initiating logout process..."),N(!1),f(null),d(!1),co.removeItem("savedLoginCredentials"),Lr({email:"",password:""}),window.location.hash="",await us.logout(),console.log("✅ Logout completed successfully - redirected to login")}catch(A){console.error("❌ Error during logout:",A),N(!1),f(null),d(!1),co.removeItem("savedLoginCredentials"),Lr({email:"",password:""}),window.location.hash="",console.log("���Forced logout state clear completed - redirected to login")}},rt=A=>{A.preventDefault(),alert(`Debug: Password: "${Ra}" (comprimento: ${Ra.length})`),Ra==="19867"?(alert("✅ Palavra-passe correcta! A abrir configurações..."),vr(""),setTimeout(()=>{Oa(!0),alert("✅ Estado atualizado - Configurações devem abrir agora!")},100)):(alert(`❌ Palavra-passe incorrecta! Esperado: "19867", Recebido: "${Ra}"`),vr("Palavra-passe incorreta"))},nt=()=>{ga(!1),Oa(!1),pn(""),vr("")},yn=async()=>{if(window.confirm("ATENCAO: Esta acao vai eliminar permanentemente todas as obras, manutencoes e piscinas. Os utilizadores serao mantidos. Confirma?"))try{await Wi(),alert("Dados eliminados com sucesso! Aplicaç��o agora está limpa."),Dr(!1)}catch(A){console.error("Erro na limpeza:",A),alert("Erro ao eliminar dados. Tente novamente.")}},it=()=>{const V={"nova-obra":"obras","nova-manutencao":"manutencoes",utilizadores:"configuracoes",relatorios:"dashboard",configuracoes:"dashboard",clientes:"dashboard",localizacoes:"dashboard"}[D];V?G(V):D!=="dashboard"?G("dashboard"):window.history.length>1&&window.history.back()},$o=()=>{const A=`
LEIRISONDA - RELATÓRIO DE PISCINAS
Data: ${new Date().toLocaleDateString("pt-PT")}

RESUMO:
- Total de Piscinas: ${ye.length}

DETALHES:
${ye.map((V,I)=>`
${I+1}. ${V.name}
   Localizaç€: ${V.location}
   Cliente: ${V.client}
   Tipo: ${V.type}
   Estado: ${V.status}
   ${V.nextMaintenance?`Próxima Manutenção: ${new Date(V.nextMaintenance).toLocaleDateString("pt-PT")}`:""}
`).join(`
`)}

© ${new Date().getFullYear()} Leirisonda - Sistema de Gestão
    `;Ga(A,`Piscinas_${new Date().toISOString().split("T")[0]}.pdf`)},_o=()=>{const A=`
LEIRISONDA - RELATÓRIO DE MANUTEN��ÕES
Data: ${new Date().toLocaleDateString("pt-PT")}

RESUMO:
- Total de Manutenções: ${Ie.length}
- Futuras Manuten����ões: ${oa.length}

MANUTENÇÕES REALIZADAS:
${Ie.map((V,I)=>`
${I+1}. ${V.poolName}
   Tipo: ${V.type}
   Estado: ${V.status==="completed"?"Concluída":V.status==="pending"?"Pendente":"Em Progresso"}
   Data Agendada: ${new Date(V.scheduledDate).toLocaleDateString("pt-PT")}
   Técnico: ${V.technician}
   Descrição: ${V.description}
   ${V.notes?`Observa����🔥ões: ${V.notes}`:""}
`).join(`
`)}

© ${new Date().getFullYear()} Leirisonda - Sistema de Gestão
    `;Ga(A,`Manutencoes_${new Date().toISOString().split("T")[0]}.pdf`)},Bo=()=>{const A=`
LEIRISONDA - RELATÓRIO DE OBRAS
Data: ${new Date().toLocaleDateString("pt-PT")}

RESUMO:
- Total de Obras: ${de.length}

OBRAS REGISTADAS:
${de.map((V,I)=>`
${I+1}. ${V.title}
   Cliente: ${V.client}
   Localização: ${V.location}
   Tipo: ${V.type}
   Estado: ${V.status==="completed"?"Conclu���da":V.status==="pending"?"Pendente":"Em Progresso"}
   Data Início: ${new Date(V.startDate).toLocaleDateString("pt-PT")}
   ${V.endDate?`Data Fim: ${new Date(V.endDate).toLocaleDateString("pt-PT")}`:""}
   ${V.budget?`Orçamento: €${V.budget.toLocaleString("pt-PT")}`:""}
   ${V.actualCost?`Custo Real: €${V.actualCost.toLocaleString("pt-PT")}`:""}
   Respons��vel: ${V.assignedTo}
   Descrição: ${V.description}
`).join(`
`)}

© ${new Date().getFullYear()} Leirisonda - Sistema de Gestão
    `;Ga(A,`Obras_${new Date().toISOString().split("T")[0]}.pdf`)},jn=()=>{const A=`
LEIRISONDA - RELATÓRIO DE CLIENTES
Data: ${new Date().toLocaleDateString("pt-PT")}

RESUMO:
- Total de Clientes: ${ze.length}

CLIENTES REGISTADOS:
${ze.map((V,I)=>`
${I+1}. ${V.name}
   Email: ${V.email}
   Telefone: ${V.phone}
   Morada: ${V.address}
   Piscinas: ${V.pools.length} associadas
   Data Registo: ${new Date(V.createdAt).toLocaleDateString("pt-PT")}
`).join(`
`)}

© ${new Date().getFullYear()} Leirisonda - Sistema de Gestão
    `;Ga(A,`Clientes_${new Date().toISOString().split("T")[0]}.pdf`)},Vn=()=>{const A=`
LEIRISONDA - RELAT���RIO COMPLETO DO SISTEMA
Data: ${new Date().toLocaleDateString("pt-PT")}

RESUMO EXECUTIVO:
- Piscinas Registadas: ${ye.length}
- Manutenções Realizadas: ${Ie.length}
- Futuras Manutenções: ${oa.length}
- Obras em Curso: ${de.length}
- Clientes Ativos: ${ze.length}
- Utilizadores do Sistema: ${ke.length}

ESTAT📞STICAS:
- Piscinas Ativas: ${ye.filter(V=>V.status==="Ativa").length}
- Manutenç✅s Concluídas: ${Ie.filter(V=>V.status==="completed").length}
- Obras Pendentes: ${de.filter(V=>V.status==="pending"||V.status==="pendente").length}

PRÓXIMAS AÇÕES:
${oa.slice(0,5).map(V=>`- ${V.poolName}: ${V.type} em ${new Date(V.scheduledDate).toLocaleDateString("pt-PT")}`).join(`
`)}

DADOS DETALHADOS:

=== PISCINAS ===
${ye.map((V,I)=>`
${I+1}. ${V.name} (${V.client})
   Status: ${V.status} | Local: ${V.location}
`).join("")}

=== MANUTEN�����ES RECENTES ===
${Ie.slice(-5).map((V,I)=>`
${I+1}. ${V.poolName} - ${V.type}
   Data: ${new Date(V.scheduledDate).toLocaleDateString("pt-PT")} | Técnico: ${V.technician}
`).join("")}

© ${new Date().getFullYear()} Leirisonda - Sistema de Gestão
    `;Ga(A,`Relatorio_Completo_${new Date().toISOString().split("T")[0]}.pdf`)},tt=()=>{alert("Funcionalidade de relatório personalizado em desenvolvimento. Use os relatórios pré-definidos por agora.")},lt=A=>{switch(A){case"piscinas":$o();break;case"obras":Bo();break;case"manutencoes":_o();break;case"clientes":jn();break;case"geral":Vn();break;default:console.warn("Tipo de relatório não reconhecido:",A)}},An=A=>{const V=Array.from(A.target.files||[]);if(V.length+as.length>20){alert("Máximo de 20 fotografias permitidas");return}V.forEach(I=>{if(I.type.startsWith("image/")){const R=new FileReader;R.onload=H=>{var re;const Y={id:Js("photo"),name:I.name,size:I.size,type:I.type,data:(re=H.target)==null?void 0:re.result,timestamp:new Date().toISOString()};ra(Vs=>[...Vs,Y])},R.readAsDataURL(I)}})},wn=A=>{ra(V=>V.filter(I=>I.id!==A))},Sn=()=>{ra([])};m.useEffect(()=>{D!=="nova-obra"&&D!=="nova-manutencao"&&ra([]),D!=="nova-obra"&&(Sr(""),Co([]),Fo([]),Uo(""),ko(""),Lo([]),Mo(""))},[D]);const Cn=A=>{A.preventDefault()},Fn=A=>{A.preventDefault(),Array.from(A.dataTransfer.files).forEach(I=>{const R={id:Js("photo"),name:I.name,url:URL.createObjectURL(I),file:I};ra([...as,R])})},Ga=(A,V)=>{try{const I=new pt;I.setFontSize(12);const R=6,H=A.split(`
`);let Y=20;H.forEach(Vs=>{Y>270&&(I.addPage(),Y=20),I.splitTextToSize(Vs,180).forEach(j=>{Y>270&&(I.addPage(),Y=20),I.text(j,10,Y),Y+=R})});const re=V.replace(".txt",".pdf");I.save(re),alert(`Relatório "${re}" gerado com sucesso!`)}catch(I){console.error("Erro ao gerar PDF:",I),alert("Erro ao gerar o relatório PDF. Tente novamente.")}},Ja=(A,V)=>{window.confirm(A)&&V()},ce=(A,V)=>{var I;return l?l.role==="super_admin"?!0:l.permissions&&((I=l.permissions[A])==null?void 0:I[V])||!1:!1},Ka=A=>{if(Me&&A){const V=A.replace(/[\s\-\(\)]/g,"");window.location.href=`tel:${V}`}},ta=A=>{if(console.log("€dress clicked:",A),console.log("€ Maps redirect enabled:",Pe),Pe&&A){const I=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(A)}`;console.log("€pening Google Maps:",I);try{window.open(I,"_blank"),console.log("🎉 Google Maps opened successfully")}catch(R){console.error("📞 Error opening Google Maps:",R)}}else Pe||console.warn("⚠€ Maps redirect is disabled"),A||console.warn("⚠€ No address provided")},ct=()=>{var A,V,I,R,H;if(!l||!u)return e.jsxDEV(Kn,{onLogin:async(Y,re,Vs=!1)=>{if(Os(""),!(Y!=null&&Y.trim())||!(re!=null&&re.trim())){Os("Por favor, preencha todos os campos");return}try{console.log("🔐 Using robust auth service for login...");const je=await us.login(Y.trim(),re,Vs);if(!(je!=null&&je.success)){console.log("🔄 Tentando authService como fallback...");const c=await us.login(Y.trim(),re,Vs);c.success&&(console.log("🔥 AuthService fallback bem-sucedido"),je.success=!0,je.user=c.user)}if(je!=null&&je.success&&(je!=null&&je.user)){f(je.user),d(!0);const c=window.location.hash.substring(1);c&&c!=="login"?["dashboard","obras","piscinas","manutencoes","futuras-manutencoes","nova-obra","nova-piscina","nova-manutencao","clientes","novo-cliente","configuracoes","relatorios","utilizadores","localizacoes","register","editar-obra","editar-piscina","editar-manutencao","diagnostic"].includes(c)?setTimeout(()=>{p(c)},100):(window.location.hash="",G("dashboard")):G("dashboard")}else console.warn("🎉 Login failed:",je.error),Os("Login incorreto")}catch(je){console.error("❌ Login error:",je),Os("Login incorreto")}},loginError:En,isLoading:!1},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3102,columnNumber:9},this);try{switch(D){case"dashboard":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV(Jt,{isVisible:$a.showIndicator,isRefreshing:$a.isRefreshing,pullDistance:$a.pullDistance,canRefresh:$a.canRefresh,threshold:60},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3213,columnNumber:15},this),e.jsxDEV("div",{className:"px-4 py-4 space-y-4",children:[e.jsxDEV("div",{className:"rounded-lg p-4 shadow-sm relative overflow-hidden",style:{backgroundColor:"#0891b2",backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets%2Fcc309d103d0b4ade88d90ee94cb2f741%2F7d1ac6645d4249ecbd385606606de4a6?format=webp&width=800')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsxDEV("div",{className:"absolute inset-0 bg-white bg-opacity-60 rounded-lg"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3238,columnNumber:19},this),e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("div",{className:"w-32 h-12 bg-white rounded shadow-sm p-2",children:e.jsxDEV("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fcc309d103d0b4ade88d90ee94cb2f741%2F9413eeead84d4fecb67b4e817e791c86?format=webp&width=800",alt:"Leirisonda - Furos e Captações de Água, Lda",className:"w-full h-full object-contain"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3245,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3244,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-gray-800 font-medium",children:new Date().toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3251,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3243,columnNumber:21},this),e.jsxDEV("div",{className:"text-center mb-3",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Olá, ",(l==null?void 0:l.name)||"Gonçalo Fonseca"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3261,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-800 text-sm font-medium",children:new Date().toLocaleDateString("pt-PT",{weekday:"long",day:"2-digit",month:"long"})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3264,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3260,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3241,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3226,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("button",{onClick:()=>G("obras"),className:"w-full bg-white rounded-lg border-l-4 border-red-500 p-4 shadow-sm hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Pendentes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3284,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Obras necessitam atenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3287,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3283,columnNumber:23},this),e.jsxDEV("div",{className:"text-4xl font-bold text-gray-900",children:(()=>{const c=de.filter(j=>{const $=j.status==="pending"||j.status==="pendente",_=_a(j);return $&&_});return console.log("✅ Dashboard - DEBUG Contadores:",{totalObras:de.length,utilizadorAtual:l==null?void 0:l.name,obrasPendentesAtribuidas:c.length,todasObras:de.map(j=>({id:j.id,title:j.title,status:j.status,assignedTo:j.assignedTo,assignedUsers:j.assignedUsers,assignedUserIds:j.assignedUserIds}))}),console.log("📊 Dashboard - Obras Pendentes Atribuídas:",c.length,"Utilizador:",l==null?void 0:l.name,c.map(j=>({id:j.id,status:j.status,title:j.workSheetNumber,assignedTo:j.assignedTo,assignedUsers:j.assignedUsers}))),c.length})()},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3291,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3282,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3278,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("obras"),className:"w-full bg-white rounded-lg border-l-4 border-orange-500 p-4 shadow-sm hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Em Progresso"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3340,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Obras em andamento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3343,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3339,columnNumber:23},this),e.jsxDEV("div",{className:"text-4xl font-bold text-gray-900",children:de.filter(j=>{const $=j.status==="in_progress"||j.status==="em_progresso",_=_a(j);return $&&_}).length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3347,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3338,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3334,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("obras"),className:"w-full bg-white rounded-lg border-l-4 border-green-500 p-4 shadow-sm hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Concluídas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3371,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Obras finalizadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3374,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3370,columnNumber:23},this),e.jsxDEV("div",{className:"text-4xl font-bold text-gray-900",children:de.filter(j=>{const $=j.status==="completed"||j.status==="concluida",_=l&&(j.assignedTo&&(j.assignedTo===l.name||j.assignedTo.toLowerCase().includes(l.name.toLowerCase())||l.name.toLowerCase().includes(j.assignedTo.toLowerCase()))||j.assignedUsers&&j.assignedUsers.some(ue=>ue.name===l.name||ue.id===l.id)||j.assignedUserIds&&j.assignedUserIds.includes(l.id));return $&&_}).length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3378,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3369,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3365,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("obras"),className:"w-full bg-white rounded-lg border-l-4 border-blue-500 p-4 shadow-sm hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Falta de Folhas de Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3417,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Folhas não geradas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3420,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3416,columnNumber:23},this),e.jsxDEV("div",{className:"text-4xl font-bold text-gray-900",children:de.filter(j=>{const $=j.status!=="completed"&&j.status!=="concluida",_=!j.folhaGerada,ue=_a(j);return $&&_&&ue}).length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3424,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3415,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3411,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("obras"),className:"w-full bg-white rounded-lg border-l-4 border-purple-500 p-4 shadow-sm hover:bg-gray-50 transition-colors",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Obras Atribuídas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3454,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Atribuídas a mim"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3457,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3453,columnNumber:23},this),e.jsxDEV("div",{className:"text-4xl font-bold text-gray-900",children:de.filter(j=>{const $=j.status!=="completed"&&j.status!=="concluida";return _a(j)}).length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3461,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3452,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3448,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3276,columnNumber:17},this),(()=>{const c=de.filter(j=>{const $=j.status!=="completed"&&j.status!=="concluida";return l&&(j.assignedTo&&(j.assignedTo===l.name||j.assignedTo.toLowerCase().includes(l.name.toLowerCase())||l.name.toLowerCase().includes(j.assignedTo.toLowerCase()))||j.assignedUsers&&j.assignedUsers.some(ue=>ue.name===l.name||ue.id===l.id)||j.assignedUserIds&&j.assignedUserIds.includes(l.id))}).slice(0,3);return c.length>0?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center p-4 border-b border-gray-100",children:[e.jsxDEV(we,{className:"h-5 w-5 text-purple-600 mr-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3514,columnNumber:25},this),e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:"Obras Atribuídas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3515,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3513,columnNumber:23},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:c.map((j,$)=>e.jsxDEV("div",{className:"border-l-4 border-purple-500 bg-purple-50 rounded-r-lg p-4 hover:bg-purple-100 transition-colors",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"🔥 Morada:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3527,columnNumber:33},this),j.location?e.jsxDEV("button",{onClick:()=>ta(j.location),className:`text-sm cursor-pointer hover:opacity-80 ${Pe?"text-blue-600 hover:text-blue-800 underline":"text-gray-900 hover:text-blue-600"}`,children:j.location},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3531,columnNumber:35},this):e.jsxDEV("span",{className:"text-sm text-gray-500",children:"N🎉o especificada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3544,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3526,columnNumber:31},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"👤 Cliente:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3550,columnNumber:33},this),e.jsxDEV("span",{className:"text-sm text-gray-900",children:j.client||"N��o especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3553,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3549,columnNumber:31},this),j.contact&&e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"���� Contacto:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3559,columnNumber:35},this),e.jsxDEV("button",{onClick:_=>{_.stopPropagation(),Me&&(window.location.href=`tel:${j.contact}`)},className:`text-sm ${Me?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-900"}`,children:j.contact},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3562,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3558,columnNumber:33},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"Trabalho:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3580,columnNumber:33},this),e.jsxDEV("span",{className:"text-sm text-gray-900",children:j.workPerformed||j.type||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3583,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3579,columnNumber:31},this),e.jsxDEV("div",{className:"flex items-center justify-between pt-2 border-t border-purple-200",children:[e.jsxDEV("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${j.status==="pending"?"bg-red-100 text-red-700":j.status==="in_progress"?"bg-orange-100 text-orange-700":j.status==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:j.status==="pending"?"Pendente":j.status==="in_progress"?"Em Progresso":j.status==="completed"?"Conclu📞da":j.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3592,columnNumber:33},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{onClick:_=>{_.stopPropagation(),ja(j),Va(!0)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg transition-colors",title:"Visualizar detalhes",children:e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3623,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3614,columnNumber:35},this),j.status==="pending"&&e.jsxDEV("button",{onClick:_=>{_.stopPropagation(),ss.updateWork(j.id,{status:"in_progress"}),no("Obra Iniciada",`A obra "${j.client}" foi iniciada`,"success")},className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-lg transition-colors",title:"Iniciar obra",children:e.jsxDEV(No,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3643,columnNumber:39},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3628,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3612,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3591,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3525,columnNumber:29},this)},`assigned-work-${j.id}-${$}`,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3521,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3519,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3512,columnNumber:21},this):null})(),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center p-4 border-b border-gray-100",children:[e.jsxDEV("button",{onClick:()=>G("futuras-manutencoes"),className:"p-1 mr-3 hover:bg-gray-100 rounded",children:e.jsxDEV("span",{className:"text-gray-600 text-lg",children:"→"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3663,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3659,columnNumber:21},this),e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:"Próximas Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3665,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3658,columnNumber:19},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:oa.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsxDEV(We,{className:"h-6 w-6 text-cyan-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3674,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3673,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-500 text-sm font-medium",children:"Nenhuma manutenç✅endada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3676,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:"As futuras manutenções aparecer��o aqui"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3679,columnNumber:25},this),ce("manutencoes","create")&&e.jsxDEV("button",{onClick:()=>G("nova-manutencao"),className:"mt-3 px-3 py-1 bg-cyan-600 text-white text-xs rounded-lg hover:bg-cyan-700",children:"Agendar Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3683,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3672,columnNumber:23},this):oa.sort((c,j)=>new Date(c.scheduledDate).getTime()-new Date(j.scheduledDate).getTime()).slice(0,4).map(c=>{const j=new Date(c.scheduledDate),$=new Date,_=j.getTime()-$.getTime(),ue=Math.ceil(_/(1e3*60*60*24));let Ve="";return ue===0?Ve="Hoje":ue===1?Ve="Amanh🎉":ue>0?Ve=`Em ${ue} dias`:Ve="Atrasada",e.jsxDEV("div",{className:"border-l-4 border-cyan-500 bg-cyan-50 rounded-r-lg p-4",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-cyan-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-5 w-5 text-cyan-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3727,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3726,columnNumber:35},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:c.poolName},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3730,columnNumber:37},this),e.jsxDEV("div",{className:"flex items-center space-x-1 text-gray-600 text-sm",children:[e.jsxDEV("span",{children:"��"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3734,columnNumber:39},this),e.jsxDEV("span",{children:c.type},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3735,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3733,columnNumber:37},this),e.jsxDEV("div",{className:"flex items-center space-x-1 text-gray-500 text-sm",children:[e.jsxDEV("span",{children:"���"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3738,columnNumber:39},this),e.jsxDEV("span",{children:Ve},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3739,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3737,columnNumber:37},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:["Data:"," ",j.toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3741,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3729,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3725,columnNumber:33},this),e.jsxDEV("div",{className:"flex items-start space-x-2",children:[e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${ue<0?"bg-red-200 text-red-800":ue<=3?"bg-yellow-200 text-yellow-800":"bg-cyan-200 text-cyan-800"}`,children:ue<0?"Atrasada":"Agendada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3750,columnNumber:35},this),e.jsxDEV("button",{onClick:()=>G("futuras-manutencoes"),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3767,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3761,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3749,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3724,columnNumber:31},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3720,columnNumber:29},this)})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3670,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3657,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsxDEV("div",{className:"w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-blue-600",children:"����"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3782,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3781,columnNumber:21},this),e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:"Pesquisa Global"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3784,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3780,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:"text",value:z,onChange:c=>fe(c.target.value),placeholder:"Pesquisar por cliente, obra, piscina, data...",className:"w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-600 placeholder-gray-400 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3791,columnNumber:23},this),z&&e.jsxDEV("button",{onClick:()=>fe(""),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3803,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3799,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3790,columnNumber:21},this),z&&e.jsxDEV("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:de.length===0&&ye.length===0&&Ie.length===0&&ze.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 mb-2",children:"📊"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3817,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-500 text-sm font-medium",children:"Não há dados para pesquisar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3818,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:"Adicione obras, piscinas, manutenções ou clientes primeiro"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3821,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3816,columnNumber:27},this):e.jsxDEV(e.Fragment,{children:[de.filter(c=>c.title.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())||(c.assignedUsers&&c.assignedUsers.length>0?c.assignedUsers.some(j=>j.name.toLowerCase().includes(z.toLowerCase())):c.assignedTo.toLowerCase().includes(z.toLowerCase()))||c.description.toLowerCase().includes(z.toLowerCase())).length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3859,columnNumber:33},this),de.filter(c=>c.title.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())||c.assignedTo.toLowerCase().includes(z.toLowerCase())||c.description.toLowerCase().includes(z.toLowerCase())).slice(0,3).map((c,j)=>e.jsxDEV("button",{onClick:()=>{G("obras"),fe("")},className:"w-full text-left p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors mb-2",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3902,columnNumber:41},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:c.title},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3904,columnNumber:43},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:[c.client," • ",c.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3907,columnNumber:43},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3903,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3901,columnNumber:39},this)},`dashboard-work-${c.id}-${j}`,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3893,columnNumber:37},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3858,columnNumber:31},this),ye.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())).length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3931,columnNumber:33},this),ye.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())).slice(0,3).map(c=>e.jsxDEV("button",{onClick:()=>{G("piscinas"),fe("")},className:"w-full text-left p-3 bg-cyan-50 rounded-lg hover:bg-cyan-100 transition-colors mb-2",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(We,{className:"h-4 w-4 text-cyan-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3964,columnNumber:41},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3966,columnNumber:43},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:[c.client," €",c.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3969,columnNumber:43},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3965,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3963,columnNumber:39},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3955,columnNumber:37},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3930,columnNumber:31},this),Ie.filter(c=>c.poolName.toLowerCase().includes(z.toLowerCase())||c.type.toLowerCase().includes(z.toLowerCase())||c.technician.toLowerCase().includes(z.toLowerCase())||c.scheduledDate.includes(z)).length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3994,columnNumber:33},this),Ie.filter(c=>c.poolName.toLowerCase().includes(z.toLowerCase())||c.type.toLowerCase().includes(z.toLowerCase())||c.technician.toLowerCase().includes(z.toLowerCase())||c.scheduledDate.includes(z)).slice(0,3).map(c=>e.jsxDEV("button",{onClick:()=>{G("manutencoes"),fe("")},className:"w-full text-left p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors mb-2",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(bs,{className:"h-4 w-4 text-orange-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4030,columnNumber:41},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:c.type},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4032,columnNumber:43},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:[c.poolName," em"," ",new Date(c.scheduledDate).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4035,columnNumber:43},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4031,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4029,columnNumber:39},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4021,columnNumber:37},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3993,columnNumber:31},this),ze.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.email.toLowerCase().includes(z.toLowerCase())||c.phone.includes(z)||c.address.toLowerCase().includes(z.toLowerCase())).length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4063,columnNumber:33},this),ze.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.email.toLowerCase().includes(z.toLowerCase())||c.phone.includes(z)||c.address.toLowerCase().includes(z.toLowerCase())).slice(0,3).map(c=>e.jsxDEV("button",{onClick:()=>{G("clientes"),fe("")},className:"w-full text-left p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors mb-2",children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(oe,{className:"h-4 w-4 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4097,columnNumber:41},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4099,columnNumber:43},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:[c.email," • ",c.phone]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4102,columnNumber:43},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4098,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4096,columnNumber:39},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4088,columnNumber:37},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4062,columnNumber:31},this),de.filter(c=>c.title.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())||(c.assignedUsers&&c.assignedUsers.length>0?c.assignedUsers.some(j=>j.name.toLowerCase().includes(z.toLowerCase())):c.assignedTo.toLowerCase().includes(z.toLowerCase()))||c.description.toLowerCase().includes(z.toLowerCase())).length===0&&ye.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.client.toLowerCase().includes(z.toLowerCase())||c.location.toLowerCase().includes(z.toLowerCase())).length===0&&Ie.filter(c=>c.poolName.toLowerCase().includes(z.toLowerCase())||c.type.toLowerCase().includes(z.toLowerCase())||c.technician.toLowerCase().includes(z.toLowerCase())||c.scheduledDate.includes(z)).length===0&&ze.filter(c=>c.name.toLowerCase().includes(z.toLowerCase())||c.email.toLowerCase().includes(z.toLowerCase())||c.phone.includes(z)||c.address.toLowerCase().includes(z.toLowerCase())).length===0&&e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 mb-2",children:"€ "},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4183,columnNumber:35},this),e.jsxDEV("p",{className:"text-gray-500 text-sm",children:['Nenhum resultado encontrado para "',z,'"']},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4184,columnNumber:35},this),e.jsxDEV("p",{className:"text-gray-400 text-xs mt-1",children:"Tente pesquisar por cliente, obra, piscina, data ou técnico"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4188,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4182,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3827,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:3810,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3789,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3779,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3222,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:3211,columnNumber:13},this);case"piscinas":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4213,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4212,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4216,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gest🔥o de piscinas no sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4219,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4215,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4211,columnNumber:21},this),ce("piscinas","create")&&e.jsxDEV("button",{onClick:()=>{ia(null),p("nova-piscina")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4232,columnNumber:25},this),e.jsxDEV("span",{children:"Nova Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4233,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4225,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4210,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4209,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-1",children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxDEV("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-medium",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4242,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("manutencoes"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4245,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("futuras-manutencoes"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Futuras Manuten✅ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4251,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4241,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4240,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex space-x-3",children:[e.jsxDEV("input",{type:"text",placeholder:"Pesquisar piscinas...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4263,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{children:"Todos os estados"},"all",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4269,columnNumber:23},this),e.jsxDEV("option",{children:"Ativa"},"active",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4270,columnNumber:23},this),e.jsxDEV("option",{children:"Inativa"},"inactive",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4271,columnNumber:23},this),e.jsxDEV("option",{children:"Em Manutenção"},"maintenance",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4272,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4268,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4262,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4261,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:ye.length===0?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(We,{className:"h-8 w-8 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4282,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4281,columnNumber:23},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma piscina registada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4284,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-4",children:"Comece por adicionar a primeira piscina ao sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4287,columnNumber:23},this),ce("piscinas","create")&&e.jsxDEV("button",{onClick:()=>{ia(null),p("nova-piscina")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4298,columnNumber:27},this),e.jsxDEV("span",{children:"Adicionar Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4299,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4291,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4280,columnNumber:21},this):ye.map(c=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4311,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>{c!=null&&c.location&&ta(c.location)},className:`text-left cursor-pointer hover:opacity-80 ${Pe?"text-blue-600 hover:text-blue-800 underline":"text-gray-600 hover:text-blue-600"}`,children:["📞 ",c.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4314,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxDEV("span",{className:"text-sm text-gray-500",children:["Cliente: ",c.client]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4329,columnNumber:31},this),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["Tipo: ",c.type]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4332,columnNumber:31},this),e.jsxDEV("span",{className:`text-sm px-2 py-1 rounded-full ${c.status==="Ativa"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4335,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4328,columnNumber:29},this),c.nextMaintenance&&e.jsxDEV("p",{className:"text-sm text-blue-600 mt-1",children:["Pr🔥xima manuten��ão:"," ",new Date(c.nextMaintenance).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4346,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4310,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{onClick:()=>{Ba(c),Wa(!0)},className:"p-2 text-gray-400 hover:text-blue-600",title:"Visualizar detalhes",children:e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4363,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4355,columnNumber:29},this),ce("piscinas","edit")&&e.jsxDEV("button",{onClick:()=>{ia(c),p("editar-piscina")},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsxDEV(so,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4373,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4366,columnNumber:31},this),ce("piscinas","delete")&&e.jsxDEV("button",{onClick:()=>Ja(`Tem a certeza que deseja apagar a piscina "${c.name}"?`,()=>ss.deletePool(c.id)),className:"p-2 text-gray-400 hover:text-red-600",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4386,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4377,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4354,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4309,columnNumber:25},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4305,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4278,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4207,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4206,columnNumber:13},this);case"manutencoes":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4408,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4407,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Manuten✅ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4411,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Histórico de manutenções realizadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4414,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4410,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4406,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("nova-manutencao"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4423,columnNumber:23},this),e.jsxDEV("span",{children:"Nova Manuten��ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4424,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4419,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4405,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4404,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-1",children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxDEV("button",{onClick:()=>p("piscinas"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4432,columnNumber:21},this),e.jsxDEV("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-medium",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4438,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("futuras-manutencoes"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Futuras Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4441,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4431,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4430,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxDEV("input",{type:"text",placeholder:"Pesquisar manutenções...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4453,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsxDEV("option",{children:"Todas as piscinas"},"all-pools",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4459,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4458,columnNumber:21},this),e.jsxDEV("input",{type:"month",defaultValue:"2025-01",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4461,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4452,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4451,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:Ie.length===0?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(bs,{className:"h-8 w-8 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4474,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4473,columnNumber:23},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma manutenç��o registada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4476,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"As manutenções aparecerão aqui quando forem criadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4479,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4472,columnNumber:21},this):Ie.map(c=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:[c.poolName," - ",c.type]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4492,columnNumber:31},this),e.jsxDEV("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.status==="scheduled"?"bg-blue-100 text-blue-700":c.status==="in_progress"?"bg-orange-100 text-orange-700":c.status==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:c.status==="scheduled"?"Agendado":c.status==="in_progress"?"Em Progresso":c.status==="completed"?"Conclu🎉do":c.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4495,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4491,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Data:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4517,columnNumber:33},this)," ",new Date(c.scheduledDate).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4516,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Técnico:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4523,columnNumber:33},this)," ",c.technician]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4522,columnNumber:31},this),c.clientName&&e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Cliente:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4528,columnNumber:35},this)," ",c.clientName,c.clientContact&&e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("button",{onClick:()=>Ka(c.clientContact),className:`text-xs ${Me?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-500"}`,disabled:!Me,children:["🎉 ",c.clientContact]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4532,columnNumber:39},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4531,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4527,columnNumber:33},this),c.location&&e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Local:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4551,columnNumber:35},this)," ",e.jsxDEV("button",{onClick:()=>{c!=null&&c.location&&ta(c.location)},className:`text-xs ${Pe?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-500"}`,disabled:!Pe,children:["������� ",c.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4552,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4550,columnNumber:33},this),c.observations&&e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("span",{className:"font-medium",children:"Observações:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4571,columnNumber:35},this)," ",c.observations]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4570,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4515,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4490,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("button",{onClick:()=>{Yi(c),Xi(!0)},className:"p-2 text-gray-400 hover:text-blue-600",title:"Visualizar detalhes",children:e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4588,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4580,columnNumber:29},this),ce("manutencoes","edit")&&e.jsxDEV("button",{onClick:()=>{zo(c),p("editar-manutencao")},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsxDEV(so,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4598,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4591,columnNumber:31},this),ce("manutencoes","delete")&&e.jsxDEV("button",{onClick:()=>Ja(`Tem a certeza que deseja apagar a manutenç��o "${c.type}" da ${c.poolName}?`,()=>ss.deleteMaintenance(c.id)),className:"p-2 text-gray-400 hover:text-red-600",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4611,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4602,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4579,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4489,columnNumber:25},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4485,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4470,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4402,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4401,columnNumber:13},this);case"futuras-manutencoes":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(xs,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4633,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4632,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Futuras Manuten����es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4636,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Manutenç€es agendadas e programadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4639,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4635,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4631,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("nova-manutencao"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4648,columnNumber:23},this),e.jsxDEV("span",{children:"Agendar Manutenç🎉"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4649,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4644,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4630,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4629,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-1",children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxDEV("button",{onClick:()=>p("piscinas"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4657,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("manutencoes"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4663,columnNumber:21},this),e.jsxDEV("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-medium",children:"Futuras Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4669,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4656,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4655,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:oa.length===0?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(xs,{className:"h-8 w-8 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4680,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4679,columnNumber:23},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma manutenção agendada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4682,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-4",children:"As futuras manuten��ões aparecerão aqui quando forem agendadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4685,columnNumber:23},this),e.jsxDEV("button",{onClick:()=>p("nova-manutencao"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4693,columnNumber:25},this),e.jsxDEV("span",{children:"Agendar Manuten✅ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4694,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4689,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4678,columnNumber:21},this):oa.map(c=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:c.poolName},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4706,columnNumber:31},this),e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full ${c.status==="pending"?"bg-yellow-100 text-yellow-800":c.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:c.status==="pending"?"Agendado":c.status==="in_progress"?"Em Progresso":"Conclu✅do"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4709,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4705,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 mb-1",children:c.type},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4725,columnNumber:29},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mb-2",children:c.description},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4726,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxDEV("span",{className:"text-blue-600",children:["€"," ",new Date(c.scheduledDate).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4730,columnNumber:31},this),e.jsxDEV("span",{className:"text-gray-500",children:c.technician},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4736,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4729,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4704,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[ce("manutencoes","edit")&&e.jsxDEV("button",{onClick:()=>{zo(c),p("editar-manutencao")},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsxDEV(so,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4750,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4743,columnNumber:31},this),ce("manutencoes","delete")&&e.jsxDEV("button",{onClick:()=>Ja(`Tem a certeza que deseja apagar a manutenç��o "${c.type}" da ${c.poolName}?`,()=>ss.deleteMaintenance(c.id)),className:"p-2 text-gray-400 hover:text-red-600",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4763,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4754,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4741,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4703,columnNumber:25},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4699,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4676,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4627,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4626,columnNumber:13},this);case"nova-obra":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4784,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4783,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Nova Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4787,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Criar uma nova obra no sistema Leirisonda"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4790,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4786,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4782,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4781,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4804,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4803,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Informações Básicas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4806,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4802,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folha de Obra *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4813,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LS-2025-163",defaultValue:`LS-${new Date().getFullYear()}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`,required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4816,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4812,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Trabalho *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4830,columnNumber:27},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:c=>Sr(c.target.value),value:So,children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},"select-type",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4840,columnNumber:29},this),e.jsxDEV("option",{value:"piscina",children:"Piscina"},"piscina",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4843,columnNumber:29},this),e.jsxDEV("option",{value:"manutencao",children:"Manutenção"},"manutencao",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4846,columnNumber:29},this),e.jsxDEV("option",{value:"instalacao",children:"Instalaç€"},"instalacao",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4849,columnNumber:29},this),e.jsxDEV("option",{value:"reparacao",children:"Reparação"},"reparacao",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4852,columnNumber:29},this),e.jsxDEV("option",{value:"limpeza",children:"Limpeza"},"limpeza",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4855,columnNumber:29},this),e.jsxDEV("option",{value:"furo",children:"Furo de Água"},"furo",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4858,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4833,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4829,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4865,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: João Silva",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4868,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4864,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contacto *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4877,columnNumber:27},this),e.jsxDEV("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 244 123 456",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4880,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4876,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morada *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4889,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Rua das Flores, 123, Leiria",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4892,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4888,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Entrada *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4902,columnNumber:29},this),e.jsxDEV("input",{type:"datetime-local",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:new Date().toISOString().slice(0,16),required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4905,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4901,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Saída"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4915,columnNumber:29},this),e.jsxDEV("input",{type:"datetime-local",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Deixe vazio se ainda não terminou"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4918,columnNumber:29},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe vazio se ainda não terminou"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4923,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4914,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4900,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado da Obra *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4930,columnNumber:27},this),e.jsxDEV("select",{name:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"pending",children:"Pendente"},"pending",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4937,columnNumber:29},this),e.jsxDEV("option",{value:"in_progress",children:"Em Progresso"},"in_progress",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4940,columnNumber:29},this),e.jsxDEV("option",{value:"completed",children:"Concluída"},"completed",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4943,columnNumber:29},this),e.jsxDEV("option",{value:"cancelled",children:"Cancelada"},"cancelled",!1,{fileName:"/app/code/src/App.tsx",lineNumber:4946,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4933,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4929,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:"folha-preenchida",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4953,columnNumber:27},this),e.jsxDEV("label",{htmlFor:"folha-preenchida",className:"ml-2 text-sm text-gray-700",children:"Folha de obra preenchida/feita"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4958,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4952,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4811,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4801,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4972,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4971,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Viaturas e Técnicos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4974,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4970,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Viaturas Utilizadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4981,columnNumber:27},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("input",{type:"text",value:Po,onChange:c=>Uo(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Carrinha Leirisonda 1"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4985,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:()=>{Po.trim()&&!Da.includes(Po.trim())&&(Co([...Da,Po.trim()]),Uo(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Adicionar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4994,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4984,columnNumber:27},this),Da.length>0&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:Da.map((c,j)=>e.jsxDEV("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md",children:[e.jsxDEV("span",{className:"text-sm text-gray-700",children:c},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5020,columnNumber:35},this),e.jsxDEV("button",{type:"button",onClick:()=>Co(Da.filter(($,_)=>_!==j)),className:"text-red-600 hover:text-red-800",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5034,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5023,columnNumber:35},this)]},`vehicle-${c}-${j}`,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5016,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5014,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4980,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Técnicos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5043,columnNumber:27},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("input",{type:"text",value:Io,onChange:c=>ko(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Jo📞o Santos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5047,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:()=>{Io.trim()&&!Ea.includes(Io.trim())&&(Fo([...Ea,Io.trim()]),ko(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Adicionar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5056,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5046,columnNumber:27},this),Ea.length>0&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:Ea.map((c,j)=>e.jsxDEV("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md",children:[e.jsxDEV("span",{className:"text-sm text-gray-700",children:c},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5084,columnNumber:35},this),e.jsxDEV("button",{type:"button",onClick:()=>Fo(Ea.filter(($,_)=>_!==j)),className:"text-red-600 hover:text-red-800",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5098,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5087,columnNumber:35},this)]},`technician-${c}-${j}`,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5080,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5078,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5042,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Usuarios Atribuidos (",ke.length," utilizadores disponiveis)"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5107,columnNumber:27},this),(()=>{console.log("✅ TOTAL UTILIZADORES CARREGADOS:",ke.length,ke);const c=q.getItem("app-users");if(console.log("🎉 USERS NO LOCALSTORAGE (app-users):",c),c)try{const j=JSON.parse(c);console.log("�� PARSED USERS:",j.length,j)}catch(j){console.error("❌ ERRO AO FAZER PARSE DOS USERS:",j)}return null})(),e.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:'Selecione os usuarios responsaveis por esta obra. Utilizadores inativos sao marcados como "(Inativo)".'},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5144,columnNumber:27},this),ke.length===0&&gn&&e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3",children:[e.jsxDEV("p",{className:"text-sm text-yellow-800",children:"⚠�� Nenhum utilizador encontrado."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5150,columnNumber:31},this),e.jsxDEV("p",{className:"text-xs text-yellow-700 mt-1",children:["Debug: localStorage tem"," ",q.getItem("app-users")?"dados":"sem dados"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5153,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5149,columnNumber:29},this),!gn&&e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxDEV("p",{className:"text-sm text-blue-800",children:"🔄 Carregando utilizadores..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5164,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5163,columnNumber:29},this),ke.length===0&&e.jsxDEV("div",{className:"mb-3",children:e.jsxDEV("button",{type:"button",onClick:()=>{console.log("🔄 Recarregando utilizadores...");const c=q.getItem("app-users");if(c)try{const j=JSON.parse(c);Rs(j),alert(`🎉 ${j.length} utilizadores carregados!`)}catch(j){console.error("Erro:",j),alert("❌ Erro ao carregar utilizadores")}else{const j={id:1,name:"Gonçalo Fonseca",email:"gongonsilva@gmail.com",active:!0,role:"super_admin",password:"19867gsf",permissions:{obras:{view:!0,create:!0,edit:!0,delete:!0},manutencoes:{view:!0,create:!0,edit:!0,delete:!0},piscinas:{view:!0,create:!0,edit:!0,delete:!0},utilizadores:{view:!0,create:!0,edit:!0,delete:!0},relatorios:{view:!0,create:!0,edit:!0,delete:!0},clientes:{view:!0,create:!0,edit:!0,delete:!0}},createdAt:new Date().toISOString()};Rs([j]),q.setItem("app-users",JSON.stringify([j])),alert("✅ Utilizador padrão criado!")}},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"🔄 Recarregar Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5173,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5172,columnNumber:29},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("select",{value:Pr,onChange:c=>Mo(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"",children:ke.length>0?"Selecionar usuário...":"Nenhum utilizador disponível"},"select-user",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5264,columnNumber:31},this),ke.filter(c=>{const j=Ns.some($=>$.id===String(c.id));return console.log("🔥ILTRO UTILIZADOR:",c.name,"| Role:",c.role,"| Ativo:",c.active,"| Já atribu��do:",j,"| PASSA FILTRO:",!j),!j}).map(c=>e.jsxDEV("option",{value:c.id,children:[c.name," ",c.active===!1?"(Inativo)":""]},c.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5293,columnNumber:35},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5257,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:()=>{if(Pr){const c=ke.find(j=>String(j.id)===Pr);if(c){const j=String(c.id),$=Ns.some(_=>_.id===j);console.log("Nova obra - Attempting to assign user:",c.name,"ID:",j,"Already assigned:",$),$?console.log("Nova obra - User already assigned, skipping"):(Lo([...Ns,{id:j,name:c.name}]),Mo(""),console.log("Nova obra - User assigned successfully!"))}}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Atribuir"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5299,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5256,columnNumber:27},this),Ns.length>0&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:Ns.map((c,j)=>e.jsxDEV("div",{className:"flex items-center justify-between bg-blue-50 px-3 py-2 rounded-md",children:[e.jsxDEV("span",{className:"text-sm text-blue-700 font-medium",children:["👤 ",c.name]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5355,columnNumber:35},this),e.jsxDEV("button",{type:"button",onClick:()=>Lo(Ns.filter(($,_)=>_!==j)),className:"text-red-600 hover:text-red-800",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5369,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5358,columnNumber:35},this)]},`assigned-${c.id}-${j}`,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5351,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5349,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5106,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4979,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4969,columnNumber:21},this),So==="furo"&&e.jsxDEV("div",{id:"furo-details",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-cyan-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-4 w-4 text-cyan-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5384,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5383,columnNumber:27},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Detalhes do Furo de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5386,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5382,columnNumber:25},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Medições do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5394,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade do Furo (m) *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5399,columnNumber:33},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 120.5",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5402,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5398,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N���vel da Água (m) *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5412,columnNumber:33},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 15.2",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5415,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5411,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade da Bomba (m) *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5425,columnNumber:33},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 80.0",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5428,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5424,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5397,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5393,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Capacidade e Coluna"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5442,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caudal do Furo (m³/h) *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5447,columnNumber:33},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 5.5",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5450,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5446,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Coluna *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5460,columnNumber:33},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},"select-pipe-type",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5467,columnNumber:35},this),e.jsxDEV("option",{value:"PEAD",children:"PEAD"},"pead",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5470,columnNumber:35},this),e.jsxDEV("option",{value:"HIDROROSCADO",children:"HIDROROSCADO"},"hidroroscado",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5473,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5463,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5459,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diâmetro da Coluna *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5482,columnNumber:33},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,children:[e.jsxDEV("option",{value:"",children:"Selecionar diâmetro"},"select-diameter",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5489,columnNumber:35},this),e.jsxDEV("option",{value:"1",children:"1 polegada"},"1",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5492,columnNumber:35},this),e.jsxDEV("option",{value:"1.25",children:"1¼ polegadas"},"1.25",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5495,columnNumber:35},this),e.jsxDEV("option",{value:"1.5",children:"1½ polegadas"},"1.5",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5498,columnNumber:35},this),e.jsxDEV("option",{value:"2",children:"2 polegadas"},"2",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5501,columnNumber:35},this),e.jsxDEV("option",{value:"2.5",children:"2½ polegadas"},"2.5",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5504,columnNumber:35},this),e.jsxDEV("option",{value:"3",children:"3 polegadas"},"3",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5507,columnNumber:35},this),e.jsxDEV("option",{value:"4",children:"4 polegadas"},"4",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5510,columnNumber:35},this),e.jsxDEV("option",{value:"5",children:"5 polegadas"},"5",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5513,columnNumber:35},this),e.jsxDEV("option",{value:"6",children:"6 polegadas"},"6",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5516,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5485,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5481,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5445,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5441,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Detalhes da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5526,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modelo da Bomba Instalada *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5531,columnNumber:33},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: Grundfos SQ3-105",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5534,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5530,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potência do Motor (HP) *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5542,columnNumber:33},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,children:[e.jsxDEV("option",{value:"",children:"Selecionar potência"},"select-power",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5549,columnNumber:35},this),e.jsxDEV("option",{value:"0.5",children:"0.5 HP"},"0.5hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5552,columnNumber:35},this),e.jsxDEV("option",{value:"0.75",children:"0.75 HP"},"0.75hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5555,columnNumber:35},this),e.jsxDEV("option",{value:"1",children:"1 HP"},"1hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5558,columnNumber:35},this),e.jsxDEV("option",{value:"1.5",children:"1.5 HP"},"1.5hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5561,columnNumber:35},this),e.jsxDEV("option",{value:"2",children:"2 HP"},"2hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5564,columnNumber:35},this),e.jsxDEV("option",{value:"3",children:"3 HP"},"3hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5567,columnNumber:35},this),e.jsxDEV("option",{value:"5",children:"5 HP"},"5hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5570,columnNumber:35},this),e.jsxDEV("option",{value:"7.5",children:"7.5 HP"},"7.5hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5573,columnNumber:35},this),e.jsxDEV("option",{value:"10",children:"10 HP"},"10hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5576,columnNumber:35},this),e.jsxDEV("option",{value:"15",children:"15 HP"},"15hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5579,columnNumber:35},this),e.jsxDEV("option",{value:"20",children:"20 HP"},"20hp",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5582,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5545,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5541,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voltagem da Bomba *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5588,columnNumber:33},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,children:[e.jsxDEV("option",{value:"",children:"Selecionar voltagem"},"select-voltage",!1,{fileName:"/app/code/src/App.tsx",lineNumber:5595,columnNumber:35},this),e.jsxDEV("option",{value:"230V",children:"230V (monof����sico)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5598,columnNumber:35},this),e.jsxDEV("option",{value:"400V",children:"400V (trifásico)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5601,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5591,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5587,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5529,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5525,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações Específicas do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5609,columnNumber:29},this),e.jsxDEV("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Condições do terreno, qualidade da água, dificuldades encontradas, etc..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5612,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5608,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5391,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5381,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5626,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5625,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Observa����es e Trabalho"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5628,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5624,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5635,columnNumber:27},this),e.jsxDEV("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Observaç��es sobre a obra..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5638,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5634,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trabalho Realizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5646,columnNumber:27},this),e.jsxDEV("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descri��ão do trabalho realizado..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5649,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5645,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5633,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5623,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(qe,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5662,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5661,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Fotografias da Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5664,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5660,columnNumber:23},this),e.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",onDragOver:Cn,onDrop:Fn,children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(Le,{className:"h-6 w-6 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5676,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5675,columnNumber:25},this),e.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Carregar Fotografias"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5678,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-4",children:"Arraste e solte ou clique para selecionar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5681,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-500 text-xs mb-4",children:[as.length,"/20 fotografias"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5684,columnNumber:25},this),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:An,className:"hidden",id:"photo-upload"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5687,columnNumber:25},this),e.jsxDEV("label",{htmlFor:"photo-upload",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2 mx-auto cursor-pointer",children:[e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5699,columnNumber:27},this),e.jsxDEV("span",{children:"Escolher Fotografias"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5700,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5695,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5670,columnNumber:23},this),as.length>0&&e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:["Fotografias Carregadas (",as.length,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5708,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:Sn,className:"text-red-600 hover:text-red-800 text-sm",children:"Limpar Todas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5711,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5707,columnNumber:27},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:as.map(c=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:c.data,alt:c.name,className:"w-full h-24 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5722,columnNumber:33},this),e.jsxDEV("button",{type:"button",onClick:()=>wn(c.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(ve,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5732,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5727,columnNumber:33},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5734,columnNumber:33},this)]},c.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5721,columnNumber:31},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5719,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5706,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5659,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>p("dashboard"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:5746,columnNumber:23},this),e.jsxDEV("button",{type:"submit",onClick:async c=>{var zs,$s,_s,Bs,Ws,qs,As,Ha,Qa,Ya,Xa,De,Za,eo,Aa,Wo,Pn,Un,In,kn,Mn;if(c.preventDefault(),Ro)return;if(Ir(!0),!ce("obras","create")){alert("Não tem permiss✅o para criar obras. Contacte o administrador.");return}const j=c.target.closest("form"),$=((zs=j.querySelector('input[placeholder*="LS-"]'))==null?void 0:zs.value)||"Nova Obra",_=(($s=j.querySelector('select[name="workType"]'))==null?void 0:$s.value)||So,ue=((_s=j.querySelector('input[placeholder*="João Silva"]'))==null?void 0:_s.value)||"",Ve=((Bs=j.querySelector('input[placeholder*="244 123 456"]'))==null?void 0:Bs.value)||"",os=((Ws=j.querySelector('input[placeholder*="Rua das Flores"]'))==null?void 0:Ws.value)||"",cs=((qs=j.querySelector('input[placeholder*="Entrada"]'))==null?void 0:qs.value)||"",ds=((As=j.querySelector('input[placeholder*="Saída"]'))==null?void 0:As.value)||"",rs=((Ha=j.querySelector('select[name="status"]'))==null?void 0:Ha.value)||"pending",_e=((Qa=j.querySelector('textarea[placeholder*="Descrição"]'))==null?void 0:Qa.value)||"",ns=((Ya=j.querySelector('textarea[placeholder*="Observa��ões sobre a obra"]'))==null?void 0:Ya.value)||"",ms=((Xa=j.querySelector('input[placeholder*="Or��amento"]'))==null?void 0:Xa.value)||"";let fs={};So==="furo"&&(fs={boreDepth:((De=j.querySelector('input[placeholder*="Profundidade do Furo"]'))==null?void 0:De.value)||"",waterLevel:((Za=j.querySelector('input[placeholder*="Nível da Água"]'))==null?void 0:Za.value)||"",pumpDepth:((eo=j.querySelector('input[placeholder*="Profundidade da Bomba"]'))==null?void 0:eo.value)||"",flowRate:((Aa=j.querySelector('input[placeholder*="Caudal do Furo"]'))==null?void 0:Aa.value)||"",columnType:((Wo=j.querySelector("select"))==null?void 0:Wo.value)||"",columnDiameter:((Pn=j.querySelectorAll("select")[1])==null?void 0:Pn.value)||"",pumpModel:((Un=j.querySelector('input[placeholder*="Modelo da Bomba"]'))==null?void 0:Un.value)||"",motorPower:((In=j.querySelectorAll("select")[2])==null?void 0:In.value)||"",pumpVoltage:((kn=j.querySelectorAll("select")[3])==null?void 0:kn.value)||"",boreObservations:((Mn=j.querySelector('textarea[placeholder*="Condiç✅es do terreno"]'))==null?void 0:Mn.value)||""});const Be={id:Js("work"),workSheetNumber:$.startsWith("LS-")?$:`LS-${Js("sheet").split("-")[1]}`,type:(()=>{const He=["piscina","manutencao","avaria","montagem"];return _==="instalacao"?"montagem":_==="reparacao"?"avaria":_==="limpeza"?"manutencao":_==="furo"?"montagem":He.includes(_)?_:"piscina"})(),clientName:ue||"",contact:Ve||"",address:os||"",entryTime:cs||new Date().toISOString(),exitTime:ds||void 0,status:(()=>{switch(rs){case"pending":return"pendente";case"in_progress":return"em_progresso";case"completed":return"concluida";default:return"pendente"}})(),...fs,assignedTo:Ns.length>0?Ns.map(He=>He.name).join(", "):"",assignedUsers:Ns||[],assignedUserIds:Ns?Ns.map(He=>He.id):[],vehicles:Da||[],technicians:Ea||[],photos:as.map(He=>({id:He.id,url:He.data,filename:He.name,uploadedAt:new Date().toISOString()}))||[],observations:ns||"",workPerformed:_e||"",workSheetCompleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{const He=await zi(Be);if(jr&&await jr(),window.dispatchEvent(new CustomEvent("forceRefreshWorks")),console.log("✅ Obra criada com sucesso:",He),Be.assignedUsers&&Be.assignedUsers.length>0)try{const{pushNotificationService:Tr}=await ie(async()=>{const{pushNotificationService:Gs}=await Promise.resolve().then(()=>fr);return{pushNotificationService:Gs}},void 0);for(const Gs of Be.assignedUsers)await Tr.notifyObraAssignment(Be,typeof Gs=="string"?Gs:Gs.id),console.log("📢 Notificação enviada para utilizador:",typeof Gs=="string"?Gs:Gs.id)}catch(Tr){console.warn("⚠️ Erro ao enviar notificações:",Tr)}}catch(He){console.error("❌ Error creating work:",He),alert(`Erro ao criar obra: ${He.message||He}`),Ir(!1);return}finally{Ir(!1)}Sr(""),ra([]),Co([]),Fo([]),Uo(""),ko(""),Lo([]),Mo(""),p("dashboard")},disabled:Ro,className:`px-6 py-2 ${Ro?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"} text-white rounded-md transition-colors flex items-center space-x-2`,children:[e.jsxDEV(we,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6048,columnNumber:25},this),e.jsxDEV("span",{children:Ro?"Criando...":"Criar Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6049,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5753,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:5745,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4799,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4798,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:4779,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:4778,columnNumber:13},this);case"nova-piscina":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6067,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6066,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Nova Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6070,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Registar uma nova piscina no sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6073,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6069,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6065,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6064,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Piscina *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6086,columnNumber:25},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Piscina Villa Marina",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6089,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6085,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente Proprietário *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6097,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:c=>{if(console.log("��� Select cliente onChange:",c.target.value),c.target.value==="novo"){if(console.log("🔍 Tentando mostrar formulário de novo cliente..."),console.log("🔍 Current User:",l),console.log("��� hasPermission clientes create:",ce("clientes","create")),!ce("clientes","create")){alert("❌ Não tem permiss✅o para criar clientes. Contacte o administrador.");return}console.log("✅ Mostrando formul✅rio de novo cliente"),P(!0)}},children:[e.jsxDEV("option",{value:"",children:"Selecionar cliente"},"select-client",!1,{fileName:"/app/code/src/App.tsx",lineNumber:6131,columnNumber:27},this),ze.map(c=>e.jsxDEV("option",{value:c.id,children:c.name},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6135,columnNumber:29},this)),e.jsxDEV("option",{value:"novo",children:"+ Adicionar Novo Cliente"},"add-client",!1,{fileName:"/app/code/src/App.tsx",lineNumber:6139,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6100,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6096,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6084,columnNumber:21},this),F&&e.jsxDEV("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Novo Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6150,columnNumber:27},this),e.jsxDEV("button",{type:"button",onClick:()=>{P(!1),te({name:"",email:"",phone:"",address:""})},className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6166,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6153,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6149,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6172,columnNumber:29},this),e.jsxDEV("input",{type:"text",value:O.name,onChange:c=>te({...O,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do cliente",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6175,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6171,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6190,columnNumber:29},this),e.jsxDEV("input",{type:"email",value:O.email,onChange:c=>te({...O,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6193,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6189,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6207,columnNumber:29},this),e.jsxDEV("input",{type:"tel",value:O.phone,onChange:c=>te({...O,phone:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+351 XXX XXX XXX"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6210,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6206,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6224,columnNumber:29},this),e.jsxDEV("input",{type:"text",value:O.address,onChange:c=>te({...O,address:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Morada completa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6227,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6223,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6170,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center justify-end space-x-3 mt-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>{P(!1),te({name:"",email:"",phone:"",address:""})},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6243,columnNumber:27},this),e.jsxDEV("button",{type:"button",onClick:()=>{if(console.log("€DEBUG: Tentando adicionar cliente..."),console.log("🔍 Current User:",l),console.log("🎉 User Role:",l==null?void 0:l.role),console.log("🔍 User Permissions:",l==null?void 0:l.permissions),console.log("✅ hasPermission clientes create:",ce("clientes","create")),O.name.trim()){if(!ce("clientes","create")){alert("��� Não tem permissão para criar clientes. Contacte o administrador."),console.error("❌ PERMISS📞O NEGADA: clientes.create");return}console.log("✅ Permissão validada, criando cliente...");const c={name:O.name,email:O.email,phone:O.phone,address:O.address,pools:[]};try{ss.addClient(c),console.log("��� Cliente adicionado com sucesso:",c)}catch(j){console.error("€ Erro ao adicionar cliente:",j),alert("��� Erro ao adicionar cliente: "+j);return}te({name:"",email:"",phone:"",address:""}),P(!1),alert(`Cliente "${c.name}" adicionado com sucesso!`)}else alert("Por favor, preencha pelo menos o nome do cliente.")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6258,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6242,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6148,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localização Completa *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6345,columnNumber:23},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Cascais, Villa Marina Resort, Edifício A, Apartamento 205",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6348,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6344,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Piscina *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6359,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6363,columnNumber:27},this),e.jsxDEV("option",{value:"residencial",children:"Residencial"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6364,columnNumber:27},this),e.jsxDEV("option",{value:"comercial",children:"Comercial"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6365,columnNumber:27},this),e.jsxDEV("option",{value:"hotel",children:"Hotel/Resort"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6366,columnNumber:27},this),e.jsxDEV("option",{value:"condominio",children:"Condom✅nio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6367,columnNumber:27},this),e.jsxDEV("option",{value:"spa",children:"SPA/Wellness"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6368,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6362,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6358,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6372,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"retangular",children:"Retangular"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6376,columnNumber:27},this),e.jsxDEV("option",{value:"oval",children:"Oval"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6377,columnNumber:27},this),e.jsxDEV("option",{value:"redonda",children:"Redonda"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6378,columnNumber:27},this),e.jsxDEV("option",{value:"kidney",children:"Kidney"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6379,columnNumber:27},this),e.jsxDEV("option",{value:"irregular",children:"Irregular"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6380,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6375,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6371,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado Atual"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6384,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"ativa",children:"Ativa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6388,columnNumber:27},this),e.jsxDEV("option",{value:"inativa",children:"Inativa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6389,columnNumber:27},this),e.jsxDEV("option",{value:"manutencao",children:"Em Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6390,columnNumber:27},this),e.jsxDEV("option",{value:"construcao",children:"Em Construção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6391,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6387,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6383,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6357,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprimento (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6399,columnNumber:25},this),e.jsxDEV("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"8.0",min:"0",step:"0.1"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6402,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6398,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Largura (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6411,columnNumber:25},this),e.jsxDEV("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"4.0",min:"0",step:"0.1"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6414,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6410,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade Min (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6423,columnNumber:25},this),e.jsxDEV("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1.2",min:"0",step:"0.1"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6426,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6422,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade Max (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6435,columnNumber:25},this),e.jsxDEV("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2.0",min:"0",step:"0.1"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6438,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6434,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6397,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sistema de Filtração"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6451,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6455,columnNumber:27},this),e.jsxDEV("option",{value:"areia",children:"Filtro de Areia"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6456,columnNumber:27},this),e.jsxDEV("option",{value:"cartucho",children:"Filtro de Cartucho"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6457,columnNumber:27},this),e.jsxDEV("option",{value:"diatomaceas",children:"Terra Diatom✅ceas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6458,columnNumber:27},this),e.jsxDEV("option",{value:"uv",children:"Sistema UV"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6461,columnNumber:27},this),e.jsxDEV("option",{value:"sal",children:"Eletr✅lise de Sal"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6462,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6454,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6450,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aquecimento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6466,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"nao",children:"Sem Aquecimento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6470,columnNumber:27},this),e.jsxDEV("option",{value:"solar",children:"Aquecimento Solar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6471,columnNumber:27},this),e.jsxDEV("option",{value:"bomba-calor",children:"Bomba de Calor"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6472,columnNumber:27},this),e.jsxDEV("option",{value:"resistencia",children:"Resistência Elétrica"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6473,columnNumber:27},this),e.jsxDEV("option",{value:"gas",children:"Aquecimento a G🎉s"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6476,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6469,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6465,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6449,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequência de Manutenç✅o"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6484,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"semanal",children:"Semanal"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6488,columnNumber:27},this),e.jsxDEV("option",{value:"quinzenal",children:"Quinzenal"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6489,columnNumber:27},this),e.jsxDEV("option",{value:"mensal",children:"Mensal"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6490,columnNumber:27},this),e.jsxDEV("option",{value:"trimestral",children:"Trimestral"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6491,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6487,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6483,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Próxima Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6495,columnNumber:25},this),e.jsxDEV("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6498,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6494,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6482,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações e Características Especiais"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6507,columnNumber:23},this),e.jsxDEV("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Caracter✅sticas especiais, equipamentos adicionais, notas importantes..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6510,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6506,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>p("piscinas"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6519,columnNumber:23},this),e.jsxDEV("button",{type:"submit",onClick:async c=>{var ue,Ve,os,cs,ds,rs;if(c.preventDefault(),!ce("piscinas","create")){alert("Não tem permissão para criar piscinas. Contacte o administrador.");return}const j=c.target.closest("form"),$=new FormData(j),_={id:Js("pool"),name:((ue=j.querySelector('input[placeholder*="Nome"]'))==null?void 0:ue.value)||"Nova Piscina",client:((Ve=j.querySelector('input[placeholder*="Cliente"]'))==null?void 0:Ve.value)||"Cliente",location:((os=j.querySelector('input[placeholder*="Morada"]'))==null?void 0:os.value)||"",contact:((cs=j.querySelector('input[placeholder*="Contacto"]'))==null?void 0:cs.value)||"",type:((ds=j.querySelector("select"))==null?void 0:ds.value)||"residencial",status:"Ativa",createdAt:new Date().toISOString(),nextMaintenance:((rs=j.querySelector('input[type="date"]'))==null?void 0:rs.value)||null};try{await Oi(_),console.log("✅ Piscina criada com sucesso:",_)}catch(_e){console.error("❌ Erro ao criar piscina:",_e),alert(`Erro ao criar piscina: ${_e.message||_e}`);return}if(_.nextMaintenance&&new Date(_.nextMaintenance)>new Date){const ms={poolId:_.id.toString(),poolName:_.name,type:"Manuten🔥ão Programada",scheduledDate:_.nextMaintenance,technician:"A atribuir",status:"scheduled",description:"Manutennção programada durante criação da piscina",notes:"Agendada automaticamente na criação da piscina",clientName:_.client,clientContact:_.contact||"",location:_.location};Vr(ms),console.log("Futura manutenç€ara nova piscina:",ms)}j.reset(),alert(`Piscina "${_.name}" criada com sucesso!`),ia(null),p("piscinas")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6648,columnNumber:25},this),e.jsxDEV("span",{children:"Criar Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6649,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6526,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6518,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6082,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6081,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6062,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6061,columnNumber:13},this);case"nova-manutencao":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6666,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6665,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Nova Manuten✅ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6669,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Registar interven✅��o de manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6672,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6668,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6664,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6663,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-8",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Piscina *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6685,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.poolId,onChange:c=>$e({...W,poolId:c.target.value}),children:[e.jsxDEV("option",{value:"",children:"Selecionar piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6698,columnNumber:27},this),ye.map(c=>e.jsxDEV("option",{value:c.id,children:[c.name," - ",c.client]},c.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6700,columnNumber:29},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6688,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6684,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data da Intervenção *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6707,columnNumber:25},this),e.jsxDEV("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.date,onChange:c=>$e({...W,date:c.target.value}),required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6710,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6706,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6683,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora Início"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6728,columnNumber:25},this),e.jsxDEV("input",{type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.startTime,onChange:c=>$e({...W,startTime:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6731,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6727,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora Fim"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6744,columnNumber:25},this),e.jsxDEV("input",{type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.endTime,onChange:c=>$e({...W,endTime:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6747,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6743,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Técnico Respons🎉vel *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6760,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.technician,onChange:c=>$e({...W,technician:c.target.value}),children:[e.jsxDEV("option",{value:"",children:"Selecionar técnico"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6773,columnNumber:27},this),ke.filter(c=>c.role!=="super_admin").map(c=>e.jsxDEV("option",{value:c.id,children:c.name},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6777,columnNumber:31},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6763,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6759,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Viatura Utilizada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6784,columnNumber:25},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Furg��o 1, Carrinha 2",value:W.vehicle,onChange:c=>$e({...W,vehicle:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6787,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6783,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6726,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valores da Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6804,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"pH"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6809,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",max:"14",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"7.2",value:W.pH,onChange:c=>$e({...W,pH:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6812,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6808,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cloro (mg/l)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6829,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"1.0",value:W.chlorine,onChange:c=>$e({...W,chlorine:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6832,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6828,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alcalinidade"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6848,columnNumber:27},this),e.jsxDEV("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"120",value:W.alkalinity,onChange:c=>$e({...W,alkalinity:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6851,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6847,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperatura (°C)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6866,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"25.0",value:W.temperature,onChange:c=>$e({...W,temperature:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6869,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6865,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sal (g/l)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6884,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"4.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6887,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6883,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bromo (mg/l)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6896,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6899,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6895,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dureza"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6908,columnNumber:27},this),e.jsxDEV("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"200"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6911,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6907,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estabilizador"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6919,columnNumber:27},this),e.jsxDEV("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"30"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6922,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6918,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6807,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6803,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos Químicos Utilizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6934,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6940,columnNumber:29},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Cloro l��quido"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6943,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6939,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6950,columnNumber:29},this),e.jsxDEV("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"2.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6953,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6949,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6961,columnNumber:29},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsxDEV("option",{value:"l",children:"Litros (l)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6965,columnNumber:31},this),e.jsxDEV("option",{value:"kg",children:"Quilogramas (kg)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6966,columnNumber:31},this),e.jsxDEV("option",{value:"g",children:"Gramas (g)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6967,columnNumber:31},this),e.jsxDEV("option",{value:"ml",children:"Mililitros (ml)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6968,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6964,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6960,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6938,columnNumber:25},this),e.jsxDEV("button",{type:"button",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center space-x-1",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6976,columnNumber:27},this),e.jsxDEV("span",{children:"Adicionar Produto"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6977,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6972,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6937,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6933,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trabalho Realizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6984,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:["Limpeza de filtros","Limpeza de pré-filtro","Limpeza filtro areia/vidro","Verificação alimentação","Enchimento autom����tico","Limpeza linha de água","Limpeza do fundo","Limpeza das paredes","Limpeza skimmers","Verificação equipamentos"].map((c,j)=>e.jsxDEV("label",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",className:"mr-2 text-green-600 focus:ring-green-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7004,columnNumber:29},this),e.jsxDEV("span",{className:"text-sm text-gray-700",children:c},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7008,columnNumber:29},this)]},`task-${c}-${j}`,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7e3,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6987,columnNumber:23},this),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outros trabalhos realizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7015,columnNumber:25},this),e.jsxDEV("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Descreva outros trabalhos realizados...",value:W.otherWork,onChange:c=>$e({...W,otherWork:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7018,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7014,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6983,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Problemas Encontrados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7036,columnNumber:25},this),e.jsxDEV("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Descreva problemas encontrados, se houver...",value:W.problems,onChange:c=>$e({...W,problems:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7039,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7035,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa✅ões Gerais"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7053,columnNumber:25},this),e.jsxDEV("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Observaç����es, recomendações, próxima manutenção...",value:W.observations,onChange:c=>$e({...W,observations:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7056,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7052,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7034,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Próxima Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7074,columnNumber:25},this),e.jsxDEV("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.nextMaintenance,onChange:c=>$e({...W,nextMaintenance:c.target.value})},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7077,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7073,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado da Manutenç��o"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7090,columnNumber:25},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:W.status,onChange:c=>$e({...W,status:c.target.value}),children:[e.jsxDEV("option",{value:"completed",children:"Concluída"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7103,columnNumber:27},this),e.jsxDEV("option",{value:"pending",children:"Pendente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7104,columnNumber:27},this),e.jsxDEV("option",{value:"in_progress",children:"Em Progresso"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7105,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7093,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7089,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7072,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(qe,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7114,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7113,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Fotografias da Manutenç���o"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7116,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7112,columnNumber:23},this),e.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-green-400 transition-colors",onDragOver:Cn,onDrop:Fn,children:[e.jsxDEV("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(Le,{className:"h-6 w-6 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7128,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7127,columnNumber:25},this),e.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Carregar Fotografias"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7130,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-4",children:"Arraste e solte ou clique para selecionar fotos da manuten��€"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7133,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-500 text-xs mb-4",children:[as.length,"/20 fotografias"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7137,columnNumber:25},this),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:An,className:"hidden",id:"maintenance-photo-upload"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7140,columnNumber:25},this),e.jsxDEV("label",{htmlFor:"maintenance-photo-upload",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2 mx-auto cursor-pointer",children:[e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7152,columnNumber:27},this),e.jsxDEV("span",{children:"Escolher Fotografias"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7153,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7148,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7122,columnNumber:23},this),as.length>0&&e.jsxDEV("div",{className:"mt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h5",{className:"font-medium text-gray-900",children:["Fotografias Carregadas (",as.length,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7161,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:Sn,className:"text-red-600 hover:text-red-800 text-sm",children:"Limpar Todas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7164,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7160,columnNumber:27},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:as.map(c=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:c.data,alt:c.name,className:"w-full h-24 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7175,columnNumber:33},this),e.jsxDEV("button",{type:"button",onClick:()=>wn(c.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(ve,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7185,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7180,columnNumber:33},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7187,columnNumber:33},this)]},c.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7174,columnNumber:31},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7172,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7159,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7111,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>p("manutencoes"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7199,columnNumber:23},this),e.jsxDEV("button",{type:"submit",onClick:c=>{c.preventDefault(),at()},className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7214,columnNumber:25},this),e.jsxDEV("span",{children:"Guardar Intervenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7215,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7206,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7198,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6681,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6680,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:6661,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:6660,columnNumber:13},this);case"configuracoes_unused":const Y=b||"relatorios";return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(ge,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7235,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7234,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Configura������ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7238,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Configurações do sistema, relatórios e utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7241,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7237,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7233,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7232,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8 px-6",children:[e.jsxDEV("button",{onClick:()=>x("relatorios"),className:`py-4 px-1 border-b-2 font-medium text-sm ${Y==="relatorios"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7260,columnNumber:27},this),e.jsxDEV("span",{children:"Relatórios"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7261,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7259,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7251,columnNumber:23},this),e.jsxDEV("button",{onClick:()=>x("configuracoes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${Y==="configuracoes"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7273,columnNumber:27},this),e.jsxDEV("span",{children:"Configura🎉ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7274,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7272,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7264,columnNumber:23},this),((l==null?void 0:l.role)==="super_admin"||(l==null?void 0:l.role)==="admin")&&e.jsxDEV("button",{onClick:()=>x("utilizadores"),className:`py-4 px-1 border-b-2 font-medium text-sm ${Y==="utilizadores"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Gr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7288,columnNumber:29},this),e.jsxDEV("span",{children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7289,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7287,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7279,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7250,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7249,columnNumber:19},this),e.jsxDEV("div",{className:"p-6",children:[Y==="relatorios"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relat��������rios do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7301,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gere relatórios detalhados em PDF sobre piscinas, manutenções e obras."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7304,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7300,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7315,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7314,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7318,columnNumber:33},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista completa de piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7321,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7317,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7313,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:ye.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7328,columnNumber:33},this)," piscinas registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7327,columnNumber:31},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"✅ Estado e localiza��ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7332,columnNumber:33},this),e.jsxDEV("li",{children:"• Informações de clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7333,columnNumber:33},this),e.jsxDEV("li",{children:"• Histórico de manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7334,columnNumber:33},this),e.jsxDEV("li",{children:"• Pr��ximas intervenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7335,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7331,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7326,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>$o(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7342,columnNumber:31},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7343,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7338,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7312,columnNumber:27},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7351,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7350,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7354,columnNumber:33},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Hist📞rico de intervenç����es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7357,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7353,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7349,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:Ie.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7364,columnNumber:33},this)," ","manutenções registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7363,columnNumber:31},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"🔥 Trabalhos realizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7368,columnNumber:33},this),e.jsxDEV("li",{children:"🎉 Técnicos responsáveis"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7369,columnNumber:33},this),e.jsxDEV("li",{children:"• Datas e duraç✅es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7370,columnNumber:33},this),e.jsxDEV("li",{children:"• Estados e observações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7371,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7367,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7362,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>_o(),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7378,columnNumber:31},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7379,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7374,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7348,columnNumber:27},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-6 w-6 text-orange-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7387,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7386,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7390,columnNumber:33},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista de projetos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7393,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7389,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7385,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:de.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7400,columnNumber:33},this)," obras registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7399,columnNumber:31},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"����️ Estado dos projetos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7403,columnNumber:33},this),e.jsxDEV("li",{children:"�� Equipas atribuídas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7404,columnNumber:33},this),e.jsxDEV("li",{children:"• Prazos e or��amentos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7405,columnNumber:33},this),e.jsxDEV("li",{children:"• Clientes e localizações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7406,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7402,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7398,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>Bo(),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7413,columnNumber:31},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7414,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7409,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7384,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7310,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7299,columnNumber:23},this),Y==="configuracoes"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configurações do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7424,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gerir configurações da aplicação, notificações e prefer✅ncias."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7427,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7423,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Notificações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7436,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"Sincronização Autom🎉tica"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7441,columnNumber:33},this),e.jsxDEV("button",{onClick:()=>U(!w),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${w?"bg-red-600":"bg-gray-200"}`,children:e.jsxDEV("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${w?"translate-x-5":"translate-x-0"}`},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7454,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7444,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7440,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7439,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7435,columnNumber:27},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7467,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{onClick:()=>Dr(!0),className:"w-full text-left p-3 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7476,columnNumber:35},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-yellow-800",children:"Limpeza de Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7478,columnNumber:37},this),e.jsxDEV("p",{className:"text-sm text-yellow-600",children:"Eliminar dados de teste"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7481,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7477,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7475,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7471,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>ga(!0),className:"w-full text-left p-3 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200 transition-colors",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(ge,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7493,columnNumber:35},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-800",children:"Configura��ões Avançadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7495,columnNumber:37},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Firebase, APIs e desenvolvimento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7498,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7494,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7492,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7488,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7470,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7466,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7434,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7422,columnNumber:23},this),Y==="utilizadores"&&e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gestão de Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7512,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Adicionar, editar e gerir utilizadores do sistema."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7515,columnNumber:25},this),e.jsxDEV("div",{className:"text-center text-gray-500",children:[e.jsxDEV(oe,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7519,columnNumber:27},this),e.jsxDEV("p",{children:"Gestão de utilizadores em desenvolvimento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7520,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7518,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7511,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7297,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7248,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7230,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7229,columnNumber:13},this);case"utilizadores":return(l==null?void 0:l.role)!=="super_admin"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Xe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7536,columnNumber:19},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Acesso Restrito"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7537,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-500",children:"Apenas super administradores podem gerir utilizadores."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7540,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7535,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7534,columnNumber:15},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7549,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7548,columnNumber:13},this);case"configuracoes":return e.jsxDEV(qc,{currentUser:l,onBack:()=>G("dashboard"),pools:ye,works:de,maintenance:Ie,clients:ze,users:ke,enablePhoneDialer:Me,enableMapsRedirect:Pe,togglePhoneDialer:vn,toggleMapsRedirect:Dn,handleDataCleanup:yn,cleanupLoading:Ar,cleanupError:wr,generateReport:lt},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7557,columnNumber:13},this);case"configuracoes_old":const re=b||"configuracoes";return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(ge,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7587,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7586,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Configurações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7590,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Configurações do sistema, relatórios e utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7593,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7589,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7585,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7584,columnNumber:17},this),(l==null?void 0:l.role)==="super_admin"||(l==null?void 0:l.role)==="admin"?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8 px-6",children:[e.jsxDEV("button",{onClick:()=>x("configuracoes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${re==="configuracoes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7615,columnNumber:29},this),e.jsxDEV("span",{children:"Configurações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7616,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7614,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7606,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>x("relatorios"),className:`py-4 px-1 border-b-2 font-medium text-sm ${re==="relatorios"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7628,columnNumber:29},this),e.jsxDEV("span",{children:"Relatórios"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7629,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7627,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7619,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>x("utilizadores"),className:`py-4 px-1 border-b-2 font-medium text-sm ${re==="utilizadores"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Gr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7641,columnNumber:29},this),e.jsxDEV("span",{children:"Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7642,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7640,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7632,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7605,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7604,columnNumber:21},this),e.jsxDEV("div",{className:"p-6",children:[re==="configuracoes"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaç����es do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7655,columnNumber:29},this),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Versão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7660,columnNumber:33},this),e.jsxDEV("span",{className:"font-medium",children:"1.0.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7661,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7659,columnNumber:31},this),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Utilizador Ativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7664,columnNumber:33},this),e.jsxDEV("span",{className:"font-medium",children:l==null?void 0:l.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7667,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7663,columnNumber:31},this),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Perfil"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7672,columnNumber:33},this),e.jsxDEV("span",{className:"font-medium capitalize",children:(A=l==null?void 0:l.role)==null?void 0:A.replace("_"," ")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7673,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7671,columnNumber:31},this),e.jsxDEV("div",{className:"flex justify-between py-2",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Modo de Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7678,columnNumber:33},this),e.jsxDEV("span",{className:"font-medium",children:"Armazenamento Local"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7681,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7677,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7658,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7654,columnNumber:27},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(ge,{className:"h-6 w-6 text-blue-600 mr-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7691,columnNumber:31},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Interação Mobile"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7692,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7690,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configure o comportamento de cliques em contactos e moradas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7696,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:"🏊"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7705,columnNumber:35},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900",children:"Marcação Automática"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7710,columnNumber:39},this),e.jsxDEV("button",{onClick:()=>vn(!Me),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Me?"bg-blue-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Me?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7723,columnNumber:41},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7713,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7709,columnNumber:37},this),e.jsxDEV("p",{className:"text-blue-700 text-sm mb-3",children:"Quando ativado, clicar num número de telefone abrir€ diretamente o marcador do telefone."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7732,columnNumber:37},this),e.jsxDEV("p",{className:"text-blue-600 text-xs",children:["Estado:"," ",Me?"✅ Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7737,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7708,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7704,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7703,columnNumber:31},this),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"✅"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7750,columnNumber:35},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-green-900",children:"Navega✅ão Maps"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7755,columnNumber:39},this),e.jsxDEV("button",{onClick:()=>Dn(!Pe),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Pe?"bg-green-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Pe?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7770,columnNumber:41},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7758,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7754,columnNumber:37},this),e.jsxDEV("p",{className:"text-green-700 text-sm mb-3",children:"Quando ativado, clicar numa morada abrirá o Google Maps para navegação."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7779,columnNumber:37},this),e.jsxDEV("p",{className:"text-green-600 text-xs",children:["Estado:"," ",Pe?"🔥 Ativo":"⭕ Inativo"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7783,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7753,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7749,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7748,columnNumber:31},this),e.jsxDEV("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(le,{className:"h-5 w-5 text-gray-600 mt-0.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7796,columnNumber:35},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:"Instru�����es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7798,columnNumber:37},this),e.jsxDEV("ul",{className:"text-gray-700 text-sm space-y-1",children:[e.jsxDEV("li",{children:"• As definiç✅es são guardadas localmente no dispositivo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7802,columnNumber:39},this),e.jsxDEV("li",{children:"• A marcaç€ automática funciona melhor em dispositivos móveis"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7806,columnNumber:39},this),e.jsxDEV("li",{children:"€O Google Maps abre numa nova janela/tab"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7810,columnNumber:39},this),e.jsxDEV("li",{children:"• Pode ativar ou desativar cada funcionalidade independentemente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7813,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7801,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7797,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7795,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7794,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7701,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7689,columnNumber:27},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-yellow-200",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(Xe,{className:"h-6 w-6 text-yellow-600 mr-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7827,columnNumber:31},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações Avan��adas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7828,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7826,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Configura🔥es protegidas por palavra-passe para administradores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7832,columnNumber:29},this),xa?e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-purple-900 mb-3",children:"Configurações Avançadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7873,columnNumber:35},this),e.jsxDEV("p",{className:"text-purple-700 text-sm mb-3",children:"Acesso às configurações avançadas do sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7876,columnNumber:35},this),e.jsxDEV("button",{onClick:()=>{Oa(!0),ga(!0),setTimeout(()=>{Oa(!0)},10)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm mr-3",children:"Configuraç��es Avançadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7879,columnNumber:35},this),e.jsxDEV("button",{onClick:st,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"Fechar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7894,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7872,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7871,columnNumber:31},this):e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("form",{onSubmit:et,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-yellow-900 mb-2",children:"Palavra-passe de Administrador"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7844,columnNumber:37},this),e.jsxDEV("input",{type:"password",value:mn,onChange:c=>gr(c.target.value),className:"w-full px-3 py-2 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Introduza a palavra-passe..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7847,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7843,columnNumber:35},this),un&&e.jsxDEV("p",{className:"text-red-600 text-sm",children:un},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7858,columnNumber:37},this),e.jsxDEV("button",{type:"submit",className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Aceder às Configuraç��es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7862,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7839,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7838,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7825,columnNumber:27},this),(l==null?void 0:l.role)==="super_admin"&&e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(Ce,{className:"h-6 w-6 text-red-600 mr-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7909,columnNumber:33},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Gest✅o de Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7910,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7908,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Elimine todos os dados de obras, manutencoes e piscinas para comecar com uma aplicacao limpa. Os utilizadores sao mantidos."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7914,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(le,{className:"h-5 w-5 text-red-600 mt-0.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7923,columnNumber:37},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium text-red-900 mb-2",children:"Limpar Dados do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7925,columnNumber:39},this),e.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:"Esta ação eliminar�� permanentemente:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7928,columnNumber:39},this),e.jsxDEV("ul",{className:"text-red-700 text-sm space-y-1 mb-4",children:[e.jsxDEV("li",{children:["📞 Todas as obras (",de.length," ","registos)"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7932,columnNumber:41},this),e.jsxDEV("li",{children:["• Todas as manutenções (",Ie.length," registos)"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7936,columnNumber:41},this),e.jsxDEV("li",{children:["• Todas as piscinas (",ye.length," ","registos)"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7940,columnNumber:41},this),e.jsxDEV("li",{children:"🔥 Dados do Firebase e armazenamento local"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7944,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7931,columnNumber:39},this),e.jsxDEV("p",{className:"text-red-700 text-sm font-medium mb-3",children:"������ ATEN���ÃO: Esta opera✅ão é irreversível!"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7949,columnNumber:39},this),e.jsxDEV("button",{onClick:yn,disabled:Ar,className:"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7958,columnNumber:41},this),e.jsxDEV("span",{children:Ar?"A Eliminar...":"Eliminar Todos os Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7959,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7953,columnNumber:39},this),wr&&e.jsxDEV("p",{className:"text-red-600 text-sm mt-2",children:wr},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7966,columnNumber:41},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7924,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7922,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7921,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7920,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7907,columnNumber:29},this),(l==null?void 0:l.role)==="super_admin"&&e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7979,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("button",{onClick:()=>Dr(!0),className:"w-full text-left p-3 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7988,columnNumber:37},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-yellow-800",children:"Limpeza de Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7990,columnNumber:39},this),e.jsxDEV("p",{className:"text-sm text-yellow-600",children:"Eliminar dados de teste"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7993,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7989,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7987,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7983,columnNumber:33},this),e.jsxDEV("button",{onClick:()=>ga(!0),className:"w-full text-left p-3 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200 transition-colors",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(ge,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8005,columnNumber:37},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-800",children:"Configurações Avançadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8007,columnNumber:39},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Firebase, APIs e desenvolvimento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8010,columnNumber:39},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8006,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8004,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8e3,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7982,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7978,columnNumber:29},this),(l==null?void 0:l.role)==="super_admin"&&e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(ge,{className:"h-6 w-6 text-purple-600 mr-3"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8024,columnNumber:33},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Diagnósticos do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8025,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8023,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Ferramentas de diagn��stico e correção para problemas do sistema."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8029,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"text-purple-900 font-medium",children:"Sistema de Diagnóstico Ativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8040,columnNumber:35},this),e.jsxDEV("div",{className:"text-purple-700 text-sm mt-1",children:"Monitorização em tempo real"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8043,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8039,columnNumber:33},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:e.jsxDEV("h4",{className:"font-medium text-blue-900",children:"Correção Firebase"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8051,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8050,columnNumber:35},this),e.jsxDEV("p",{className:"text-blue-700 text-sm",children:"Use este botão se encontrar problemas de autentica🔥ão ou conexão."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8055,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8049,columnNumber:33},this),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h4",{className:"font-medium text-green-900",children:"Tutorial Interativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8064,columnNumber:37},this),e.jsxDEV("div",{className:"text-green-700 text-sm",children:"Tutorial disponível"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8067,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8063,columnNumber:35},this),e.jsxDEV("p",{className:"text-green-700 text-sm",children:"Tutorial passo-a-passo para inser��ão de dados."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8071,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8062,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8034,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8022,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7652,columnNumber:25},this),re==="relatorios"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relatórios do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8086,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Gere relatórios detalhados em PDF sobre piscinas, manutenções e obras."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8089,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8085,columnNumber:27},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8100,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8099,columnNumber:33},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relat��rio de Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8103,columnNumber:35},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista completa de piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8106,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8102,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8098,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:ye.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8113,columnNumber:35},this)," piscinas registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8112,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8111,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>$o(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8121,columnNumber:33},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8122,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8117,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8097,columnNumber:29},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8130,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8129,columnNumber:33},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8133,columnNumber:35},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Histórico de interven✅��es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8136,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8132,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8128,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:Ie.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8143,columnNumber:35},this)," ","manutenções registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8142,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8141,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>_o(),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8151,columnNumber:33},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8152,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8147,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8127,columnNumber:29},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-6 w-6 text-orange-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8160,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8159,columnNumber:33},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relat��rio de Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8163,columnNumber:35},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista de projetos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8166,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8162,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8158,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:de.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8173,columnNumber:35},this)," obras registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8172,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8171,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>Bo(),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8181,columnNumber:33},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8182,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8177,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8157,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8095,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8084,columnNumber:25},this),re==="utilizadores"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gest🔥o de Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8193,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Criar, editar e gerir utilizadores do sistema."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8196,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8192,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8191,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7649,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7603,columnNumber:19},this):e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8211,columnNumber:23},this),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Versão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8216,columnNumber:27},this),e.jsxDEV("span",{className:"font-medium",children:"1.0.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8217,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8215,columnNumber:25},this),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Utilizador Ativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8220,columnNumber:27},this),e.jsxDEV("span",{className:"font-medium",children:l==null?void 0:l.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8223,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8219,columnNumber:25},this),e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Perfil"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8228,columnNumber:27},this),e.jsxDEV("span",{className:"font-medium capitalize",children:(V=l==null?void 0:l.role)==null?void 0:V.replace("_"," ")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8229,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8227,columnNumber:25},this),e.jsxDEV("div",{className:"flex justify-between py-2",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Modo de Dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8234,columnNumber:27},this),e.jsxDEV("span",{className:"font-medium",children:Ui()},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8235,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8233,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8214,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8210,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8208,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:7582,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:7581,columnNumber:13},this);case"relatorios":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(xs,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8254,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8253,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Relat�����rios"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8257,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gere relatórios detalhados em PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8260,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8256,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8252,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8251,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8250,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8274,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8273,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8277,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Lista completa de piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8280,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8276,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8272,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:ye.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8287,columnNumber:25},this)," piscinas registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8286,columnNumber:23},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"🔍 Estado e localização"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8290,columnNumber:25},this),e.jsxDEV("li",{children:"������ Informa��ões de clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8291,columnNumber:25},this),e.jsxDEV("li",{children:"• Histórico de manuten��ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8292,columnNumber:25},this),e.jsxDEV("li",{children:"• Próximas interven��ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8293,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8289,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8285,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>$o(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8300,columnNumber:23},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8301,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8296,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8271,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8309,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8308,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8312,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Histórico de intervenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8315,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8311,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8307,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:Ie.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8322,columnNumber:25},this)," manuten�� registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8321,columnNumber:23},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"���� Trabalhos realizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8326,columnNumber:25},this),e.jsxDEV("li",{children:"�� Técnicos responsáveis"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8327,columnNumber:25},this),e.jsxDEV("li",{children:"������� Datas e dura🔥es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8328,columnNumber:25},this),e.jsxDEV("li",{children:"• Estados e observa��ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8329,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8325,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8320,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>_o(),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8336,columnNumber:23},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8337,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8332,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8306,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-6 w-6 text-orange-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8345,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8344,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relat📞rio de Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8348,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Projetos e construç��es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8351,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8347,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8343,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:de.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8358,columnNumber:25},this)," obras registadas"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8357,columnNumber:23},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"• Orçamentos e custos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8361,columnNumber:25},this),e.jsxDEV("li",{children:"• Prazos e cronogramas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8362,columnNumber:25},this),e.jsxDEV("li",{children:"📞 Equipas responsáveis"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8363,columnNumber:25},this),e.jsxDEV("li",{children:"€ Estados de progresso"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8364,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8360,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8356,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Bo(),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8371,columnNumber:23},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8372,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8367,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8342,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-6 w-6 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8380,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8379,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório de Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8383,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Base de dados de clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8386,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8382,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8378,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:ze.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8393,columnNumber:25},this)," clientes registados"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8392,columnNumber:23},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"• Dados de contacto"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8396,columnNumber:25},this),e.jsxDEV("li",{children:"✅ Piscinas associadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8397,columnNumber:25},this),e.jsxDEV("li",{children:"������ Hist✅rico de serviços"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8398,columnNumber:25},this),e.jsxDEV("li",{children:"����� Informações contratuais"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8399,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8395,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8391,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>jn(),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8406,columnNumber:23},this),e.jsxDEV("span",{children:"Gerar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8407,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8402,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8377,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(xs,{className:"h-6 w-6 text-gray-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8415,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8414,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório Completo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8418,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Todas as informações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8421,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8417,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8413,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Relatório consolidado de todo o sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8427,columnNumber:23},this),e.jsxDEV("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxDEV("li",{children:"����� Resumo executivo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8431,columnNumber:25},this),e.jsxDEV("li",{children:"• Estatísticas gerais"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8432,columnNumber:25},this),e.jsxDEV("li",{children:"🎉 Dados consolidados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8433,columnNumber:25},this),e.jsxDEV("li",{children:"• An���lise de performance"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8434,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8430,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8426,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Vn(),className:"w-full bg-gray-800 text-white py-2 px-4 rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(Se,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8441,columnNumber:23},this),e.jsxDEV("span",{children:"Gerar PDF Completo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8442,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8437,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8412,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(ge,{className:"h-6 w-6 text-indigo-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8450,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8449,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatório Personalizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8453,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Configure os dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8456,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8452,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8448,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3 mb-4",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Crie relat📞rios com filtros específicos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8462,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",className:"mr-2",defaultChecked:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8467,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8472,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8466,columnNumber:25},this),e.jsxDEV("label",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",className:"mr-2",defaultChecked:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8475,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8480,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8474,columnNumber:25},this),e.jsxDEV("label",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",className:"mr-2"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8483,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs",children:"Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8484,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8482,columnNumber:25},this),e.jsxDEV("label",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",className:"mr-2"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8487,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8488,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8486,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8465,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8461,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>tt(),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8496,columnNumber:23},this),e.jsxDEV("span",{children:"Configurar PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8497,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8492,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8447,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8269,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estat📞sticas Rápidas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8504,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-blue-600",children:ye.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8509,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8512,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8508,columnNumber:21},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:Ie.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8515,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8518,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8514,columnNumber:21},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:de.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8521,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8524,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8520,columnNumber:21},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-purple-600",children:ze.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8527,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8530,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8526,columnNumber:21},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-cyan-600",children:JSON.parse(q.getItem("waterBores")||"[]").length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8533,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Furos de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8541,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8532,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8507,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8503,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8248,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8247,columnNumber:13},this);case"clientes":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-4 w-4 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8558,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8557,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8561,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gest€o da base de dados de clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8564,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8560,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8556,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>p("novo-cliente"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8573,columnNumber:23},this),e.jsxDEV("span",{children:"Novo Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8574,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8569,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8555,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8554,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex space-x-3",children:[e.jsxDEV("input",{type:"text",placeholder:"Pesquisar clientes...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8582,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsxDEV("option",{children:"Todos os tipos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8588,columnNumber:23},this),e.jsxDEV("option",{children:"Particular"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8589,columnNumber:23},this),e.jsxDEV("option",{children:"Empresa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8590,columnNumber:23},this),e.jsxDEV("option",{children:"Condomínio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8591,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8587,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsxDEV("option",{children:"Todos os estados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8594,columnNumber:23},this),e.jsxDEV("option",{children:"Ativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8595,columnNumber:23},this),e.jsxDEV("option",{children:"Inativo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8596,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8593,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8581,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8580,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-4 w-4 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8606,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8605,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Total Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8609,columnNumber:25},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-900",children:ze.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8612,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8608,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8604,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8603,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(ka,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8621,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8620,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8624,columnNumber:25},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-900",children:Ri},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8627,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8623,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8619,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8618,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8636,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8635,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Com Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8639,columnNumber:25},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-900",children:ye.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8642,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8638,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8634,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8633,columnNumber:19},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-orange-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8651,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8650,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-600",children:"Com Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8654,columnNumber:25},this),e.jsxDEV("p",{className:"text-2xl font-bold text-gray-900",children:de.length},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8657,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8653,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8649,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8648,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8602,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:ze.length===0?e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(oe,{className:"h-8 w-8 text-gray-400"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8670,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8669,columnNumber:23},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum cliente registado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8672,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-4",children:"Comece por adicionar o primeiro cliente ao sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8675,columnNumber:23},this),e.jsxDEV("button",{onClick:()=>p("novo-cliente"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2 mx-auto",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8682,columnNumber:25},this),e.jsxDEV("span",{children:"Adicionar Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8683,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8678,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8668,columnNumber:21},this):ze.map(c=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:c.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8695,columnNumber:31},this),e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${c.status==="Ativo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8698,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8694,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Contactos:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8710,columnNumber:33},this),e.jsxDEV("p",{children:c.email},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8711,columnNumber:33},this),e.jsxDEV("button",{onClick:()=>Ka(c.phone),className:`text-left ${Me?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-600"}`,disabled:!Me,children:["📞 ",c.phone]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8712,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8709,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Morada:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8725,columnNumber:33},this),e.jsxDEV("button",{onClick:()=>{c!=null&&c.address&&ta(c.address)},className:`text-left ${Pe?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-600"}`,disabled:!Pe||!(c!=null&&c.address),children:["🎉"," ",(c==null?void 0:c.address)||"Endere��o não disponível"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8726,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8724,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Informações:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8747,columnNumber:33},this),e.jsxDEV("p",{children:["Tipo: ",c.type]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8748,columnNumber:33},this),e.jsxDEV("p",{children:["Cliente desde:"," ",new Date(c.createdAt).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8749,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8746,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8708,columnNumber:29},this),c.notes&&e.jsxDEV("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:[e.jsxDEV("strong",{children:"Notas:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8760,columnNumber:35},this)," ",c.notes]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8759,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8758,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8693,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[ce("clientes","edit")&&e.jsxDEV("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsxDEV(so,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8768,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8767,columnNumber:31},this),ce("clientes","delete")&&e.jsxDEV("button",{onClick:()=>Ja(`Tem a certeza que deseja apagar o cliente "${c.name}"?`,()=>ss.deleteClient(c.id)),className:"p-2 text-gray-400 hover:text-red-600",children:e.jsxDEV(Ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8781,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8772,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8765,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8692,columnNumber:25},this)},c.id,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8688,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8666,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8552,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8551,columnNumber:13},this);case"novo-cliente":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-4 w-4 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8802,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8801,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Novo Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8805,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Adicionar cliente à base de dados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8808,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8804,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8800,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8799,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Básicas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8820,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome / Razão Social *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8825,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Nome completo ou razão social",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8828,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8824,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Cliente *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8836,columnNumber:27},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8840,columnNumber:29},this),e.jsxDEV("option",{value:"particular",children:"Particular"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8841,columnNumber:29},this),e.jsxDEV("option",{value:"empresa",children:"Empresa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8842,columnNumber:29},this),e.jsxDEV("option",{value:"condominio",children:"Condomínio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8843,columnNumber:29},this),e.jsxDEV("option",{value:"hotel",children:"Hotel / Turismo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8844,columnNumber:29},this),e.jsxDEV("option",{value:"publico",children:"Entidade P📞blica"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8845,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8839,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8835,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8823,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8819,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contactos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8853,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Principal *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8858,columnNumber:27},this),e.jsxDEV("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"email@exemplo.com",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8861,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8857,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone Principal *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8869,columnNumber:27},this),e.jsxDEV("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"+351 XXX XXX XXX",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8872,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8868,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Secund✅rio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8880,columnNumber:27},this),e.jsxDEV("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"email2@exemplo.com"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8883,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8879,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone Secundário"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8890,columnNumber:27},this),e.jsxDEV("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"+351 XXX XXX XXX"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8893,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8889,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8856,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8852,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Morada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8904,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"md:col-span-2",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morada Completa *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8909,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Rua, número, andar, etc.",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8912,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8908,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C🎉digo Postal *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8920,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"XXXX-XXX",pattern:"[0-9]{4}-[0-9]{3}",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8923,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8919,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localidade *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8932,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Cidade/Vila",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8935,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8931,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8907,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8903,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Adicionais"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8947,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIF / NIPC"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8952,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"123456789",pattern:"[0-9]{9}"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8955,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8951,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pessoa de Contacto (se aplic���el)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8963,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Nome da pessoa responsável"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8966,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8962,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas e Observaç🔥🔥es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8973,columnNumber:27},this),e.jsxDEV("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Informações relevantes sobre o cliente, preferências, histórico, etc."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8976,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8972,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8950,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8946,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>p("clientes"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8987,columnNumber:23},this),e.jsxDEV("button",{type:"submit",onClick:async c=>{var rs,_e,ns,ms,fs,Be,zs,$s,_s,Bs,Ws,qs;c.preventDefault();const j=c.target.closest("form"),$=new FormData(j),_=(rs=j.querySelector('input[placeholder="Nome completo ou raz✅o social"]'))==null?void 0:rs.value,ue=(_e=j.querySelector('input[type="email"]'))==null?void 0:_e.value,Ve=(ns=j.querySelector('input[type="tel"]'))==null?void 0:ns.value,os=(ms=j.querySelector('input[placeholder="Rua, número, andar, etc."]'))==null?void 0:ms.value,cs=(fs=j.querySelector('input[pattern="[0-9]{4}-[0-9]{3}"]'))==null?void 0:fs.value,ds=(Be=j.querySelector('input[placeholder="Cidade/Vila"]'))==null?void 0:Be.value;if(!_||!ue||!Ve||!os){alert("Por favor, preencha os campos obrigatórios marcados com *");return}try{const As={id:Js("client"),name:_,email:ue,phone:Ve,address:`${os}, ${cs||""} ${ds||""}`.trim(),type:((zs=j.querySelector("select"))==null?void 0:zs.value)||"particular",secondaryEmail:(($s=j.querySelector('input[placeholder="email2@exemplo.com"]'))==null?void 0:$s.value)||"",secondaryPhone:((_s=j.querySelectorAll('input[type="tel"]')[1])==null?void 0:_s.value)||"",nif:((Bs=j.querySelector('input[placeholder="123456789"]'))==null?void 0:Bs.value)||"",contactPerson:((Ws=j.querySelector('input[placeholder="Nome da pessoa responsável"]'))==null?void 0:Ws.value)||"",notes:((qs=j.querySelector("textarea"))==null?void 0:qs.value)||"",pools:[],createdAt:new Date().toISOString(),active:!0};await $i(As),console.log("✅ Cliente criado com sucesso:",As),alert(`Cliente "${_}" criado com sucesso!`),j.reset(),p("clientes")}catch(As){console.error("❌ Erro ao criar cliente:",As),alert("Erro ao criar cliente. Tente novamente.")}},className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9110,columnNumber:25},this),e.jsxDEV("span",{children:"Criar Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9111,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8994,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8986,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8817,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8816,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:8797,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:8796,columnNumber:13},this);case"obras":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9129,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9128,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:["Obras (",de.length,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9132,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Gestão de obras e projetos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9135,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9131,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9127,columnNumber:21},this),ce("obras","create")&&e.jsxDEV("button",{onClick:()=>G("nova-obra"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9145,columnNumber:25},this),e.jsxDEV("span",{children:"Nova Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9146,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9141,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9126,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9125,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsxDEV("div",{className:"flex border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>Ee("all"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${Q==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Todas (",de.length,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9155,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Ee("pending"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${Q==="pending"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pendentes (",wo.pending,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9165,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Ee("in_progress"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${Q==="in_progress"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Em Progresso (",wo.inProgress,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9175,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Ee("completed"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${Q==="completed"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Concluídas (",wo.completed,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9185,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>Ee("no_sheet"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${Q==="no_sheet"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Sem Folha de Obra (",wo.noSheet,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9195,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9154,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9153,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[de.filter(c=>_a(c)?Q==="all"?!0:Q==="no_sheet"?!c.folhaGerada&&c.status!=="completed"&&c.status!=="concluida":Q==="pending"?c.status==="pendente"||c.status==="pending":Q==="in_progress"?c.status==="em_progresso"||c.status==="in_progress":Q==="completed"?c.status==="concluida"||c.status==="completed":c.status===Q:!1).map((c,j)=>e.jsxDEV("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxDEV("div",{className:"flex items-center space-x-2"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9250,columnNumber:31},this),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${c.status==="pendente"||c.status==="pending"?"bg-red-100 text-red-700 border border-red-200":c.status==="em_progresso"||c.status==="in_progress"?"bg-orange-100 text-orange-700 border border-orange-200":c.status==="concluida"||c.status==="completed"?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:c.status==="pendente"||c.status==="pending"?"Pendente":c.status==="em_progresso"||c.status==="in_progress"?"Em Progresso":c.status==="concluida"||c.status==="completed"?"Concluída":c.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9251,columnNumber:31},this),!c.folhaGerada&&e.jsxDEV("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 border border-blue-200",children:"Sem Folha de Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9277,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9249,columnNumber:29},this),c.description&&e.jsxDEV("p",{className:"text-gray-700 mb-3 bg-gray-50 p-3 rounded-md border-l-4 border-blue-200",children:c.description},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9284,columnNumber:31},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{className:"space-y-2",children:e.jsxDEV("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsxDEV("span",{className:"font-semibold text-gray-700 block mb-1",children:"📞 Cliente:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9293,columnNumber:35},this),e.jsxDEV("span",{className:"text-gray-900 font-medium",children:c.clientName||c.client},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9296,columnNumber:35},this),c.contact&&e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("button",{onClick:()=>Ka(c.contact),className:`text-xs ${Me?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-500"}`,disabled:!Me,children:["🔥 ",c.contact]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9301,columnNumber:39},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9300,columnNumber:37},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9292,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9290,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Local:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9319,columnNumber:33},this)," ",e.jsxDEV("button",{onClick:()=>{(c!=null&&c.address||c!=null&&c.location)&&ta(c.address||c.location)},className:`text-xs ${Pe?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-500"}`,disabled:!Pe,children:["�� ",c.address||c.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9320,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9318,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Início:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9339,columnNumber:33},this)," ",new Date(c.entryTime||c.startDate||c.createdAt).toLocaleDateString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9338,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Atribu✅:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9347,columnNumber:33},this)," ",c.assignedUsers&&c.assignedUsers.length>0?c.assignedUsers.map($=>$.name).join(", "):c.assignedTo||"Não atribuída"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9346,columnNumber:31},this),c.budget&&e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:"Orçamento:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9357,columnNumber:35},this)," ","€",c.budget]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9356,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9289,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9247,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center space-x-2 ml-4",children:[ce("obras","view")&&e.jsxDEV("button",{onClick:()=>{ja(c),Va(!0)},className:"p-3 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg border border-blue-200 transition-colors",title:"Ver todos os detalhes",children:e.jsxDEV(qe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9376,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9368,columnNumber:31},this),ce("obras","edit")&&e.jsxDEV("button",{onClick:()=>{Oo(c),ya(c.assignedUsers||[]),p("editar-obra")},className:"p-3 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors",title:"Editar obra",children:e.jsxDEV(so,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9391,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9380,columnNumber:31},this),(c.status==="pending"||c.status==="pendente")&&ce("obras","edit")&&e.jsxDEV("button",{onClick:()=>{const $={...c,status:"in_progress"},_=JSON.parse(q.getItem("works")||"[]"),ue=_.findIndex(Ve=>Ve.id===c.id);ue!==-1&&(_[ue]=$,q.setItem("works",JSON.stringify(_))),ss&&ss.updateWork&&ss.updateWork(c.id,{status:"in_progress"}),no("Obra Iniciada",`A obra "${c.title||c.client}" foi iniciada`,"success")},className:"p-3 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg border border-green-200 transition-colors",title:"Iniciar obra",children:e.jsxDEV(No,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9436,columnNumber:35},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9398,columnNumber:33},this),ce("obras","delete")&&e.jsxDEV("button",{onClick:()=>Ja(`Tem a certeza que deseja apagar a obra "${c.title}"?`,()=>xn(c.id)),className:"p-3 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg border border-red-200 transition-colors",title:"Eliminar obra",children:e.jsxDEV(Ce,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9450,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9440,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9366,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9246,columnNumber:25},this)},`work-item-${c.id}-${j}`,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9242,columnNumber:23},this)),de.filter(c=>Q==="all"?!0:Q==="no_sheet"?!c.folhaGerada&&c.status!=="completed"&&c.status!=="concluida":Q==="pending"?c.status==="pendente"||c.status==="pending":Q==="in_progress"?c.status==="em_progresso"||c.status==="in_progress":Q==="completed"?c.status==="concluida"||c.status==="completed":c.status===Q).length===0&&e.jsxDEV("div",{className:"bg-white rounded-lg p-8 shadow-sm text-center",children:[e.jsxDEV(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9483,columnNumber:23},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma obra encontrada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9484,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-500 mb-4",children:Q==="all"?"Não há obras registadas no sistema.":`Não há obras com o filtro "${Q==="pending"?"Pendentes":Q==="in_progress"?"Em Progresso":Q==="completed"?"Conclu🔥das":Q==="no_sheet"?"Sem Folha de Obra":Q}" aplicado.`},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9487,columnNumber:23},this),ce("obras","create")&&e.jsxDEV("button",{onClick:()=>G("nova-obra"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Criar Nova Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9503,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9482,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9209,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9123,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9122,columnNumber:13},this);case"editar-obra":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV(zr,{isEditing:!0,entityType:"obra",entityId:T==null?void 0:T.id},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9522,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9532,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9531,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9535,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:T==null?void 0:T.title},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9538,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9534,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9530,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9529,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9552,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9551,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Informa🔥ões B��sicas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9554,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9550,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folha de Obra *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9561,columnNumber:27},this),e.jsxDEV("input",{type:"text",defaultValue:(T==null?void 0:T.workSheetNumber)||(T==null?void 0:T.title),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"LS-2025-163",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9564,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9560,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Trabalho *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9576,columnNumber:27},this),e.jsxDEV("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:(T==null?void 0:T.type)||"",children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9583,columnNumber:29},this),e.jsxDEV("option",{value:"piscina",children:"Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9584,columnNumber:29},this),e.jsxDEV("option",{value:"manutencao",children:"Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9585,columnNumber:29},this),e.jsxDEV("option",{value:"instalacao",children:"Instalação"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9586,columnNumber:29},this),e.jsxDEV("option",{value:"reparacao",children:"Reparação"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9587,columnNumber:29},this),e.jsxDEV("option",{value:"limpeza",children:"Limpeza"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9588,columnNumber:29},this),e.jsxDEV("option",{value:"furo",children:"Furo de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9589,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9579,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9575,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9594,columnNumber:27},this),e.jsxDEV("input",{type:"text",defaultValue:T==null?void 0:T.client,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: João Silva",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9597,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9593,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contacto *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9607,columnNumber:27},this),e.jsxDEV("input",{type:"tel",defaultValue:T==null?void 0:T.contact,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 244 123 456",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9610,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9606,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morada *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9620,columnNumber:27},this),e.jsxDEV("input",{type:"text",defaultValue:T==null?void 0:T.location,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Rua das Flores, 123, Leiria",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9623,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9619,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Entrada *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9634,columnNumber:29},this),e.jsxDEV("input",{type:"datetime-local",defaultValue:T==null?void 0:T.startTime,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9637,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9633,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de Saída"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9645,columnNumber:29},this),e.jsxDEV("input",{type:"datetime-local",defaultValue:T==null?void 0:T.endTime,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Deixe vazio se ainda não terminou"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9648,columnNumber:29},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe vazio se ainda n€o terminou"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9654,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9644,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9632,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado da Obra *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9661,columnNumber:27},this),e.jsxDEV("select",{name:"status",defaultValue:T==null?void 0:T.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"pending",children:"Pendente"},"pending",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9669,columnNumber:29},this),e.jsxDEV("option",{value:"in_progress",children:"Em Progresso"},"in_progress",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9672,columnNumber:29},this),e.jsxDEV("option",{value:"completed",children:"Concluída"},"completed",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9675,columnNumber:29},this),e.jsxDEV("option",{value:"cancelled",children:"Cancelada"},"cancelled",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9678,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9664,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9660,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",id:"folha-preenchida-edit",defaultChecked:T==null?void 0:T.workSheetCompleted,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9685,columnNumber:27},this),e.jsxDEV("label",{htmlFor:"folha-preenchida-edit",className:"ml-2 text-sm text-gray-700",children:"Folha de obra preenchida/feita"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9691,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9684,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9559,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9549,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9705,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9704,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Técnicos Atribuídos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9707,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9703,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:["Selecione os usuarios responsaveis por esta obra (",ke.length,' utilizadores disponiveis). Utilizadores inativos sao marcados como "(Inativo)".']},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9714,columnNumber:27},this),ke.length===0&&e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3",children:e.jsxDEV("p",{className:"text-sm text-yellow-800",children:'€hum utilizador encontrado. Vá à Área de Administração → "🔧 Correção de Atribuiç✅o de Obras" para corrigir este problema.'},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9721,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9720,columnNumber:29},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("select",{value:Ur,onChange:c=>To(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"",children:ke.length>0?"Selecionar usuário...":"Nenhum utilizador disponível"},"select-user",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9736,columnNumber:31},this),ke.filter(c=>!es.some(j=>j.id===String(c.id))).map(c=>e.jsxDEV("option",{value:c.id,children:[c.name," ",c.active===!1?"(Inativo)":""]},c.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9749,columnNumber:35},this))]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9729,columnNumber:29},this),e.jsxDEV("button",{type:"button",onClick:()=>{if(Ur){const c=ke.find(j=>String(j.id)===Ur);if(c){const j=String(c.id);es.some(_=>_.id===j)||(ya([...es,{id:j,name:c.name}]),To(""))}}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Atribuir"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9755,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9728,columnNumber:27},this),es.length>0&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:es.map((c,j)=>e.jsxDEV("div",{className:"flex items-center justify-between bg-blue-50 px-3 py-2 rounded-md",children:[e.jsxDEV("span",{className:"text-sm text-blue-700 font-medium",children:["��",c.name]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9795,columnNumber:35},this),e.jsxDEV("button",{type:"button",onClick:()=>ya(es.filter(($,_)=>_!==j)),className:"text-red-600 hover:text-red-800",children:e.jsxDEV(ve,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9809,columnNumber:37},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9798,columnNumber:35},this)]},`edit-assigned-${c.id}-${j}`,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9791,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9789,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9713,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9712,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9702,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oi,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9823,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9822,columnNumber:25},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Observa��ões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9825,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9821,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trabalho Realizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9832,columnNumber:27},this),e.jsxDEV("textarea",{defaultValue:T==null?void 0:T.workPerformed,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descrição do trabalho realizado..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9835,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9831,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaç��es sobre a obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9843,columnNumber:27},this),e.jsxDEV("textarea",{defaultValue:T==null?void 0:T.observations,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Observações sobre a obra..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9846,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9842,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9830,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9820,columnNumber:21},this),e.jsxDEV("div",{className:"border border-cyan-200 rounded-lg p-6 bg-cyan-50",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-cyan-700 mb-4",children:"🎉etalhes do Furo de ��gua"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9858,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade do Furo (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9863,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",defaultValue:T==null?void 0:T.boreDepth,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 120.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9866,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9862,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nível da Água (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9875,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",defaultValue:T==null?void 0:T.waterLevel,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 15.2"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9878,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9874,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caudal do Furo (m³/h)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9887,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",defaultValue:T==null?void 0:T.flowRate,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 5.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9890,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9886,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profundidade da Bomba (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9899,columnNumber:27},this),e.jsxDEV("input",{type:"number",step:"0.1",defaultValue:T==null?void 0:T.pumpDepth,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: 80.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9902,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9898,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Coluna"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9911,columnNumber:27},this),e.jsxDEV("select",{defaultValue:T==null?void 0:T.columnType,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar tipo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9918,columnNumber:29},this),e.jsxDEV("option",{value:"PEAD",children:"PEAD"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9919,columnNumber:29},this),e.jsxDEV("option",{value:"HIDROROSCADO",children:"HIDROROSCADO"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9920,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9914,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9910,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diâmetro da Coluna"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9924,columnNumber:27},this),e.jsxDEV("select",{defaultValue:T==null?void 0:T.columnDiameter,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar diâmetro"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9931,columnNumber:29},this),e.jsxDEV("option",{value:"1",children:"1 polegada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9932,columnNumber:29},this),e.jsxDEV("option",{value:"1.25",children:"1¼ polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9933,columnNumber:29},this),e.jsxDEV("option",{value:"1.5",children:"1½ polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9934,columnNumber:29},this),e.jsxDEV("option",{value:"2",children:"2 polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9935,columnNumber:29},this),e.jsxDEV("option",{value:"2.5",children:"2½ polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9936,columnNumber:29},this),e.jsxDEV("option",{value:"3",children:"3 polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9937,columnNumber:29},this),e.jsxDEV("option",{value:"4",children:"4 polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9938,columnNumber:29},this),e.jsxDEV("option",{value:"5",children:"5 polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9939,columnNumber:29},this),e.jsxDEV("option",{value:"6",children:"6 polegadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9940,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9927,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9923,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modelo da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9944,columnNumber:27},this),e.jsxDEV("input",{type:"text",defaultValue:T==null?void 0:T.pumpModel,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Ex: Grundfos SQ3-105"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9947,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9943,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Potência do Motor (HP)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9955,columnNumber:27},this),e.jsxDEV("select",{defaultValue:T==null?void 0:T.motorPower,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar potência"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9962,columnNumber:29},this),e.jsxDEV("option",{value:"0.5",children:"0.5 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9963,columnNumber:29},this),e.jsxDEV("option",{value:"0.75",children:"0.75 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9964,columnNumber:29},this),e.jsxDEV("option",{value:"1",children:"1 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9965,columnNumber:29},this),e.jsxDEV("option",{value:"1.5",children:"1.5 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9966,columnNumber:29},this),e.jsxDEV("option",{value:"2",children:"2 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9967,columnNumber:29},this),e.jsxDEV("option",{value:"3",children:"3 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9968,columnNumber:29},this),e.jsxDEV("option",{value:"5",children:"5 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9969,columnNumber:29},this),e.jsxDEV("option",{value:"7.5",children:"7.5 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9970,columnNumber:29},this),e.jsxDEV("option",{value:"10",children:"10 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9971,columnNumber:29},this),e.jsxDEV("option",{value:"15",children:"15 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9972,columnNumber:29},this),e.jsxDEV("option",{value:"20",children:"20 HP"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9973,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9958,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9954,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voltagem da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9977,columnNumber:27},this),e.jsxDEV("select",{defaultValue:T==null?void 0:T.pumpVoltage,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsxDEV("option",{value:"",children:"Selecionar voltagem"},"select-voltage",!1,{fileName:"/app/code/src/App.tsx",lineNumber:9984,columnNumber:29},this),e.jsxDEV("option",{value:"230V",children:"230V (monofásico)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9987,columnNumber:29},this),e.jsxDEV("option",{value:"400V",children:"400V (trif����sico)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9988,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9980,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9976,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9861,columnNumber:23},this),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaç��es Espec��ficas do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9993,columnNumber:25},this),e.jsxDEV("textarea",{rows:3,defaultValue:T==null?void 0:T.boreObservations,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Condições do terreno, qualidade da 🔥gua, dificuldades encontradas, etc..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9996,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9992,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9857,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>{Oo(null),ya([]),To(""),p("obras")},className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10007,columnNumber:23},this),e.jsxDEV("button",{type:"submit",onClick:async c=>{var $s,_s,Bs,Ws,qs,As,Ha,Qa,Ya,Xa;c.preventDefault();const j=c.target.closest("form"),$=j.querySelectorAll("input, select, textarea"),_=$[0].value,ue=$[1].value,Ve=$[2].value,os=$[3].value,cs=$[4].value,ds=$[5].value,rs=$[6].value,_e=$[7].value,ns=$[8].checked,ms=$[9].value,fs=$[10].value;let Be={workSheetNumber:_,title:_,type:ue,client:Ve,contact:os,location:cs,startTime:ds,endTime:rs,..._e!==(T==null?void 0:T.status)&&{status:_e},workSheetCompleted:ns,workPerformed:ms,observations:fs,assignedTo:es.length>0?es.map(De=>De.name).join(", "):"",assignedUsers:es,assignedUserIds:es.map(De=>De.id)};const zs=j.querySelector(".border-cyan-200");if(zs){const De=zs.querySelectorAll("input, select, textarea");console.log("🔧 DEBUG boreInputs found:",De.length),Be={...Be,boreDepth:(($s=De[0])==null?void 0:$s.value)||"",waterLevel:((_s=De[1])==null?void 0:_s.value)||"",flowRate:((Bs=De[2])==null?void 0:Bs.value)||"",pumpDepth:((Ws=De[3])==null?void 0:Ws.value)||"",columnType:((qs=De[4])==null?void 0:qs.value)||"",columnDiameter:((As=De[5])==null?void 0:As.value)||"",pumpModel:((Ha=De[6])==null?void 0:Ha.value)||"",motorPower:((Qa=De[7])==null?void 0:Qa.value)||"",pumpVoltage:((Ya=De[8])==null?void 0:Ya.value)||"",boreObservations:((Xa=De[9])==null?void 0:Xa.value)||""},console.log("🔍 DEBUG updateData with bore:",Be)}if(ss.updateWork(T.id,Be),es&&es.length>0)try{const De=T.assignedUsers||[],Za=es.filter(Aa=>!De.some(Wo=>Wo.id===Aa.id)),eo=Za.length>0?es:[];for(const Aa of eo)await mo.notifyObraAssignment({...Be,id:T.id},String(Aa.id));Za.length>0&&console.log(`✅ Notificações enviadas para ${eo.length} utilizadores`)}catch(De){console.error("❌ Erro ao enviar notificações:",De)}alert("Obra atualizada com sucesso!"),Oo(null),ya([]),To(""),p("obras")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsxDEV(we,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10187,columnNumber:25},this),e.jsxDEV("span",{children:"Guardar Alterações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10188,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10019,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10006,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9547,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9546,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:9520,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:9519,columnNumber:13},this);case"editar-piscina":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV(zr,{isEditing:!0,entityType:"piscina",entityId:ee==null?void 0:ee.id},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10202,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10212,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10211,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10215,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:ee==null?void 0:ee.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10218,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10214,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10210,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10209,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Piscina *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10230,columnNumber:25},this),e.jsxDEV("input",{type:"text",defaultValue:ee==null?void 0:ee.name,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Piscina Villa Marina",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10233,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10229,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10242,columnNumber:25},this),e.jsxDEV("input",{type:"text",defaultValue:ee==null?void 0:ee.client,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do cliente",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10245,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10241,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Local *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10254,columnNumber:25},this),e.jsxDEV("input",{type:"text",defaultValue:ee==null?void 0:ee.location,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Localizaç��da piscina",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10257,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10253,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10266,columnNumber:25},this),e.jsxDEV("select",{defaultValue:ee==null?void 0:ee.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"Ativa",children:"Ativa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10273,columnNumber:27},this),e.jsxDEV("option",{value:"Inativa",children:"Inativa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10274,columnNumber:27},this),e.jsxDEV("option",{value:"Em Manutenção",children:"Em Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10275,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10269,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10265,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10279,columnNumber:25},this),e.jsxDEV("select",{defaultValue:(ee==null?void 0:ee.poolType)||"outdoor",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"outdoor",children:"Exterior"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10286,columnNumber:27},this),e.jsxDEV("option",{value:"indoor",children:"Interior"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10287,columnNumber:27},this),e.jsxDEV("option",{value:"semi_covered",children:"Semi-coberta"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10288,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10282,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10278,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensões (m)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10292,columnNumber:25},this),e.jsxDEV("input",{type:"text",defaultValue:ee==null?void 0:ee.dimensions,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 8x4x1.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10295,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10291,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volume (L)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10303,columnNumber:25},this),e.jsxDEV("input",{type:"number",defaultValue:ee==null?void 0:ee.volume,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"48000"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10306,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10302,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sistema de Filtra✅ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10314,columnNumber:25},this),e.jsxDEV("select",{defaultValue:(ee==null?void 0:ee.filtrationSystem)||"sand",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"sand",children:"Areia"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10321,columnNumber:27},this),e.jsxDEV("option",{value:"cartridge",children:"Cartucho"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10322,columnNumber:27},this),e.jsxDEV("option",{value:"diatomaceous",children:"Terra Diatomácea"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10323,columnNumber:27},this),e.jsxDEV("option",{value:"other",children:"Outro"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10324,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10317,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10313,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Instalação"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10328,columnNumber:25},this),e.jsxDEV("input",{type:"date",defaultValue:(I=ee==null?void 0:ee.installationDate)==null?void 0:I.split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10331,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10327,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone do Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10340,columnNumber:25},this),e.jsxDEV("input",{type:"tel",defaultValue:ee==null?void 0:ee.clientPhone,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+351 912 345 678"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10343,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10339,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10351,columnNumber:25},this),e.jsxDEV("input",{type:"email",defaultValue:ee==null?void 0:ee.clientEmail,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"cliente@email.com"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10354,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10350,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10228,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaç✅es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10363,columnNumber:23},this),e.jsxDEV("textarea",{defaultValue:ee==null?void 0:ee.observations,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observações sobre a piscina, equipamentos instalados, etc."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10366,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10362,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>{ia(null),p("piscinas")},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10375,columnNumber:23},this),e.jsxDEV("button",{type:"button",onClick:c=>{const $=c.target.closest("form").querySelectorAll("input, select, textarea"),_=$[0].value,ue=$[1].value,Ve=$[2].value,os=$[3].value,cs=$[4].value,ds=$[5].value,rs=$[6].value,_e=$[7].value,ns=$[8].value,ms=$[9].value,fs=$[10].value,Be=$[11].value;ss.updatePool(ee.id,{name:_,client:ue,location:Ve,status:os,poolType:cs,dimensions:ds,volume:rs||void 0,filtrationSystem:_e,installationDate:ns?new Date(ns).toISOString():void 0,clientPhone:ms,clientEmail:fs,observations:Be}),alert("Piscina atualizada com sucesso!"),ia(null),p("piscinas")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Guardar Alterações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10385,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10374,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10227,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10226,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10200,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10199,columnNumber:13},this);case"editar-manutencao":return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:[e.jsxDEV(zr,{isEditing:!0,entityType:"manutencao",entityId:se==null?void 0:se.id},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10455,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(bs,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10465,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10464,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Manutenç✅o"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10468,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:[se==null?void 0:se.poolName," -"," ",se==null?void 0:se.type]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10471,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10467,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10463,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10462,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:e.jsxDEV("form",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10484,columnNumber:25},this),e.jsxDEV("input",{type:"date",defaultValue:(R=se==null?void 0:se.scheduledDate)==null?void 0:R.split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10487,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10483,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T������cnico *"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10497,columnNumber:25},this),e.jsxDEV("input",{type:"text",defaultValue:se==null?void 0:se.technician,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do técnico",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10500,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10496,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10509,columnNumber:25},this),e.jsxDEV("select",{defaultValue:se==null?void 0:se.type,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"Limpeza",children:"Limpeza"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10516,columnNumber:27},this),e.jsxDEV("option",{value:"Tratamento",children:"Tratamento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10517,columnNumber:27},this),e.jsxDEV("option",{value:"Manutenç€o",children:"Manuten��ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10518,columnNumber:27},this),e.jsxDEV("option",{value:"Reparaç���",children:"Reparação"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10519,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10512,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10508,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10523,columnNumber:25},this),e.jsxDEV("select",{defaultValue:se==null?void 0:se.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"scheduled",children:"Agendado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10530,columnNumber:27},this),e.jsxDEV("option",{value:"in_progress",children:"Em Progresso"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10531,columnNumber:27},this),e.jsxDEV("option",{value:"completed",children:"Conclu��do"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10532,columnNumber:27},this),e.jsxDEV("option",{value:"cancelled",children:"Cancelado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10533,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10526,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10522,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duração Estimada (horas)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10537,columnNumber:25},this),e.jsxDEV("input",{type:"number",step:"0.5",defaultValue:se==null?void 0:se.estimatedDuration,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2.5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10540,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10536,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dura��ão Real (horas)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10549,columnNumber:25},this),e.jsxDEV("input",{type:"number",step:"0.5",defaultValue:se==null?void 0:se.actualDuration,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"3.0"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10552,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10548,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custo (€)"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10561,columnNumber:25},this),e.jsxDEV("input",{type:"number",step:"0.01",defaultValue:se==null?void 0:se.cost,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10564,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10560,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10573,columnNumber:25},this),e.jsxDEV("select",{defaultValue:(se==null?void 0:se.priority)||"medium",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"low",children:"Baixa"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10582,columnNumber:27},this),e.jsxDEV("option",{value:"medium",children:"Média"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10583,columnNumber:27},this),e.jsxDEV("option",{value:"high",children:"Alta"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10584,columnNumber:27},this),e.jsxDEV("option",{value:"urgent",children:"Urgente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10585,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10576,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10572,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Conclusão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10589,columnNumber:25},this),e.jsxDEV("input",{type:"date",defaultValue:(H=se==null?void 0:se.completedDate)==null?void 0:H.split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10592,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10588,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10482,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Materiais Utilizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10602,columnNumber:23},this),e.jsxDEV("textarea",{defaultValue:se==null?void 0:se.materialsUsed,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Lista de materiais e produtos utilizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10605,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10601,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaç��es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10614,columnNumber:23},this),e.jsxDEV("textarea",{defaultValue:se==null?void 0:se.observations,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Observações sobre a manuten��ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10617,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10613,columnNumber:21},this),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>{zo(null),p("manutencoes")},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10626,columnNumber:23},this),e.jsxDEV("button",{type:"button",onClick:c=>{const $=c.target.closest("form").querySelectorAll("input, select, textarea"),_=$[0].value,ue=$[1].value,Ve=$[2].value,os=$[3].value,cs=$[4].value,ds=$[5].value,rs=$[6].value,_e=$[7].value,ns=$[8].value,ms=$[9].value,fs=$[10].value;ss.updateMaintenance(se.id,{scheduledDate:_?new Date(_).toISOString():void 0,technician:ue,type:Ve,status:os,estimatedDuration:cs||void 0,actualDuration:ds||void 0,cost:rs||void 0,priority:_e,completedDate:ns?new Date(ns).toISOString():void 0,materialsUsed:ms,observations:fs}),alert("Manutenção atualizada com sucesso!"),zo(null),p("manutencoes")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Guardar Alteraç��es"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10636,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10625,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10481,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10480,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10453,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10452,columnNumber:13},this);case"register":return(l==null?void 0:l.role)!=="super_admin"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Xe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10711,columnNumber:19},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Acesso Restrito"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10712,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-500",children:"Apenas super administradores podem criar utilizadores."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10715,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("dashboard"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Voltar ao Dashboard"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10718,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10710,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10709,columnNumber:15},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4 space-y-6",children:e.jsxDEV("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxDEV("button",{onClick:()=>G("utilizadores"),className:"mb-4 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"�� Voltar aos Utilizadores"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10732,columnNumber:19},this),e.jsxDEV(Tl,{onRegisterSuccess:()=>{G("utilizadores")},onCancel:()=>{G("utilizadores")}},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10738,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10731,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10730,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10729,columnNumber:13},this);case"localizacoes":return(l==null?void 0:l.role)!=="super_admin"&&(l==null?void 0:l.role)!=="admin"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(le,{className:"h-12 w-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10760,columnNumber:19},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Restrito"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10761,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Apenas administradores podem aceder ��s funcionalidades de localização."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10764,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Voltar ao Dashboard"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10768,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10759,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10758,columnNumber:15},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"px-4 py-4",children:e.jsxDEV(el,{currentUser:l?{id:l.uid||"unknown",name:l.name||"Utilizador",email:l.email||"",role:l.role||"viewer"}:void 0,allUsers:ke},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10781,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10780,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10779,columnNumber:13},this);case"administracao":return(l==null?void 0:l.role)!=="super_admin"?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Xe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10804,columnNumber:19},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Acesso Restrito"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10805,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-500",children:"Apenas super administradores podem aceder ✅ área de administração."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10808,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>G("dashboard"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Voltar ao Dashboard"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10812,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10803,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10802,columnNumber:15},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV(_r,{currentUser:l,onLogout:()=>G("dashboard")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10824,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10823,columnNumber:13},this);case"diagnostic":return e.jsxDEV(ml,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10832,columnNumber:18},this);case"teste-firestore":return e.jsxDEV(xl,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10835,columnNumber:18},this);case"firestore-setup-guide":const Vs=Sa.lazy(()=>ie(()=>import("./FirestoreSetupGuide-D3sY9wps.js"),__vite__mapDeps([5,1,0])));return e.jsxDEV(Sa.Suspense,{fallback:e.jsxDEV("div",{children:"Carregando..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10842,columnNumber:39},this),children:e.jsxDEV(Vs,{projectId:"leiria-1cfc9",onClose:()=>p("dashboard")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10843,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10842,columnNumber:13},this);case"definitive-firestore-solution":const je=Sa.lazy(()=>ie(()=>import("./DefinitiveFirestoreSolution-5egWY3NK.js"),__vite__mapDeps([6,1,0,3])));return e.jsxDEV(Sa.Suspense,{fallback:e.jsxDEV("div",{children:"Carregando..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10855,columnNumber:39},this),children:e.jsxDEV(je,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10856,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10855,columnNumber:13},this);default:return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"P✅gina não encontrada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10864,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600",children:"A seç€ solicitada não foi encontrada."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10867,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10863,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10862,columnNumber:13},this)}}catch(Y){return console.error("Error rendering content:",Y),e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Erro de Sistema"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10879,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Ocorreu um erro ao carregar o conte🎉o. Por favor, tente novamente."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10882,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Recarregar Página"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10886,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10878,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10877,columnNumber:9},this)}};return Ji?e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden m-4",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:["Galeria de Fotografias (",hn.length," fotos)"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10904,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>Ki(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10911,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10907,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10903,columnNumber:11},this),e.jsxDEV("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:hn.map(A=>e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:A.data,alt:A.name,className:"w-full h-48 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10918,columnNumber:19},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 rounded-b-lg",children:[e.jsxDEV("p",{className:"text-sm truncate",children:A.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10924,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-gray-300",children:new Date(A.timestamp).toLocaleDateString("pt-PT")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10925,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10923,columnNumber:19},this)]},A.id,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10917,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10915,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10914,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10902,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10901,columnNumber:7},this):Gi?e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"p-6 border-b border-gray-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Partilhar Relat📞rio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10945,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{Cr(!1),Fr(!1)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10955,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10948,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10944,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10943,columnNumber:11},this),e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsxDEV(ka,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10963,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10962,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Manutenção guardada com sucesso!"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10966,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600",children:"Escolha como pretende partilhar o relat🎉rio"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10969,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10965,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10961,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxDEV("button",{onClick:()=>qa("whatsapp"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10981,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10980,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:"WhatsApp"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10984,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Enviar por WhatsApp"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10985,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10983,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10976,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>qa("email"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10994,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10993,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:"Email"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10997,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Enviar por email"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10998,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10996,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10989,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>qa("sms"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(xs,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11007,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11006,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:"SMS"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11010,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Enviar por SMS"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11011,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11009,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11002,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>qa("download"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(Ms,{className:"h-5 w-5 text-purple-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11020,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11019,columnNumber:17},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:"Download PDF"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11023,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Baixar arquivo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11024,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11022,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11015,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10975,columnNumber:13},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:"Conteúdo do Relatório:"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11030,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"�������"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11035,columnNumber:19},this),e.jsxDEV("span",{children:"Dados da intervenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11036,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11034,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"✅"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11039,columnNumber:19},this),e.jsxDEV("span",{children:"Valores da água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11040,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11038,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"✓"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11043,columnNumber:19},this),e.jsxDEV("span",{children:"Produtos químicos utilizados"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11044,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11042,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"📞"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11047,columnNumber:19},this),e.jsxDEV("span",{children:"Trabalho realizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11048,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11046,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"✓"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11051,columnNumber:19},this),e.jsxDEV("span",{children:"Fotografias"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11052,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11050,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV("span",{children:"����"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11055,columnNumber:19},this),e.jsxDEV("span",{children:"Observaç€s e pr✅xima manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11056,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11054,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11033,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11029,columnNumber:13},this),e.jsxDEV("div",{className:"flex space-x-3",children:[e.jsxDEV("button",{onClick:()=>{Cr(!1),Fr(!1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Agora Não"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11062,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>qa("preview"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Pré-visualizar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11071,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11061,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10960,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:10942,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:10941,columnNumber:7},this):u?(Pa.getSyncStatus(),Pa.getSafeInterval(),Zi?e.jsxDEV(gl,{enabled:!0,syncInterval:6e4,collections:["users","pools","maintenance","works","clients"],showNotifications:!1,children:[e.jsxDEV(Zc,{name:"App",data:ha},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11387,columnNumber:7},this),e.jsxDEV(vl,{children:[e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV("div",{className:`fixed inset-y-0 left-0 z-50 w-80 bg-white shadow-xl transform transition-transform duration-300 ease-in-out ${E?"translate-x-0":"-translate-x-full"}`,children:e.jsxDEV("div",{className:"flex flex-col h-full",children:[e.jsxDEV("div",{className:"px-6 py-6 border-b border-gray-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-20 h-10 bg-white rounded-lg shadow-md p-1",children:e.jsxDEV("img",{src:"https://cdn.builder.io/api/v1/image/assets%2Fcc309d103d0b4ade88d90ee94cb2f741%2F9413eeead84d4fecb67b4e817e791c86?format=webp&width=800",alt:"Leirisonda - Furos e Captações de Água, Lda",className:"w-full h-full object-contain"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11403,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11402,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1",children:e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Furos e Capta���ões de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11410,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11409,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11401,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>N(!1),className:"lg:hidden p-1 rounded-md hover:bg-gray-100",children:e.jsxDEV(ve,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11420,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11416,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11400,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11399,columnNumber:15},this),e.jsxDEV("nav",{className:"flex-1 px-4 py-6 space-y-2",children:[e.jsxDEV("button",{onClick:()=>{G("dashboard"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="dashboard"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(Vt,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11438,columnNumber:19},this),e.jsxDEV("span",{children:"Dashboard"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11439,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11427,columnNumber:17},this),ce("obras","view")&&e.jsxDEV("button",{onClick:()=>{G("obras"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="obras"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(we,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11454,columnNumber:21},this),e.jsxDEV("span",{children:"Obras"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11455,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11443,columnNumber:19},this),ce("obras","create")&&e.jsxDEV("button",{onClick:()=>{G("nova-obra"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="nova-obra"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(Le,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11471,columnNumber:21},this),e.jsxDEV("span",{children:"Nova Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11472,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11460,columnNumber:19},this),ce("manutencoes","view")&&e.jsxDEV("button",{onClick:()=>{G("manutencoes"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="manutencoes"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(bs,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11488,columnNumber:21},this),e.jsxDEV("span",{children:"Manutencoes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11489,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11477,columnNumber:19},this),ce("manutencoes","create")&&e.jsxDEV("button",{onClick:()=>{G("nova-manutencao"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="nova-manutencao"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(Le,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11505,columnNumber:21},this),e.jsxDEV("span",{children:"Nova Manutencao"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11506,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11494,columnNumber:19},this),ce("piscinas","view")&&e.jsxDEV("button",{onClick:()=>{G("piscinas"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="piscinas"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(We,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11522,columnNumber:21},this),e.jsxDEV("span",{children:"Piscinas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11523,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11511,columnNumber:19},this),ce("clientes","view")&&e.jsxDEV("button",{onClick:()=>{G("clientes"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="clientes"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(oe,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11541,columnNumber:21},this),e.jsxDEV("span",{children:"Clientes"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11542,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11530,columnNumber:19},this),((l==null?void 0:l.role)==="super_admin"||(l==null?void 0:l.role)==="admin")&&e.jsxDEV("button",{onClick:()=>{G("localizacoes"),N(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${D==="localizacoes"?"bg-red-50 text-red-700 border-l-4 border-red-500":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(Es,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11560,columnNumber:21},this),e.jsxDEV("span",{children:"Localizações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11561,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11549,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11426,columnNumber:15},this),e.jsxDEV("div",{className:"px-4 py-6 border-t border-gray-200",children:[e.jsxDEV("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsxDEV(uo,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11570,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11569,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:l==null?void 0:l.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11573,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-500",children:l==null?void 0:l.role},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11576,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11572,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11568,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(El,{currentUser:l,onNotificationClick:A=>{var V,I;((V=A.data)==null?void 0:V.type)==="obra_assignment"&&((I=A.data)!=null&&I.obraId)&&(G("obras"),N(!1))}},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11582,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>{const A=prompt("Digite a palavra-passe para aceder ��s configurações:");A==="19867"?(G("configuracoes"),N(!1)):A!==null&&alert("Palavra-passe incorreta!")},className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Configura��ões",children:e.jsxDEV(ge,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11611,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11596,columnNumber:19},this),e.jsxDEV("button",{onClick:ot,className:"flex-1 flex items-center space-x-3 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsxDEV(At,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11618,columnNumber:21},this),e.jsxDEV("span",{children:"Terminar Sessao"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11619,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11614,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11581,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("p",{className:"text-xs text-gray-400",children:"© 2025 Leirisonda"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11623,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11622,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11567,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11397,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11392,columnNumber:11},this),e.jsxDEV("div",{className:"lg:hidden fixed top-20 left-4 z-[70] flex flex-col space-y-2",children:[e.jsxDEV("button",{onClick:()=>N(!E),className:"bg-white p-2 rounded-md shadow-md",children:e.jsxDEV(wt,{className:"h-6 w-6 text-gray-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11635,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11631,columnNumber:13},this),D!=="dashboard"&&e.jsxDEV("button",{onClick:it,className:"bg-white p-2 rounded-md shadow-md",children:e.jsxDEV(xo,{className:"h-6 w-6 text-gray-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11642,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11638,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11630,columnNumber:11},this),E&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>N(!1)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11649,columnNumber:13},this),Hi&&L&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6 border-b border-gray-200 pb-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(we,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11664,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11663,columnNumber:23},this),e.jsxDEV("div",{children:e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Detalhes Completos da Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11667,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11666,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11662,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>{Va(!1),ja(null)},className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsxDEV(ve,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11679,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11672,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11661,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11686,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 capitalize",children:L.type||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11689,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11685,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"T📞tulo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11694,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.title},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11697,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11693,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11700,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.client||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11703,columnNumber:25},this),L.contact&&e.jsxDEV("button",{onClick:()=>Ka(L.contact),className:`text-sm mt-1 ${Me?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-500"}`,disabled:!Me,children:["���� ",L.contact]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11707,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11699,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Local"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11723,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>{L!=null&&L.location&&ta(L.location)},className:`text-left ${Pe?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-900"}`,disabled:!Pe,children:["📞 ",L.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11726,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11722,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Contacto"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11743,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.contact||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11746,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11742,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Hora de Entrada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11752,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.startTime?new Date(L.startTime).toLocaleString("pt-PT"):"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11755,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11751,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Hora de Saída"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11764,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.endTime?new Date(L.endTime).toLocaleString("pt-PT"):"N��o especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11767,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11763,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11776,columnNumber:25},this),e.jsxDEV("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L.status==="pending"?"bg-red-100 text-red-700":L.status==="in_progress"?"bg-orange-100 text-orange-700":L.status==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:L.status==="pending"?"Pendente":L.status==="in_progress"?"Em Progresso":L.status==="completed"?"Concluída":L.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11779,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11775,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Data de In€io"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11800,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:new Date(L.startDate).toLocaleDateString("pt-PT")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11803,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11799,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Horário"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11810,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.startTime&&L.endTime?`${L.startTime} - ${L.endTime}`:L.startTime?`Das ${L.startTime}`:"Não definido"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11813,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11809,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Atribuída a"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11822,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:L.assignedUsers&&L.assignedUsers.length>0?L.assignedUsers.map(A=>A.name).join(", "):L.assignedTo||"Não atribuída"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11825,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11821,columnNumber:23},this),L.technicians&&L.technicians.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Técnicos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11837,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-900",children:L.technicians.join(", ")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11840,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11836,columnNumber:27},this),L.vehicles&&L.vehicles.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Ve€culos"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11848,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-900",children:L.vehicles.join(", ")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11851,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11847,columnNumber:27},this),L.photos&&L.photos.length>0&&e.jsxDEV("div",{className:"md:col-span-2",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:["Fotografias (",L.photos.length,")"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11859,columnNumber:29},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2",children:L.photos.map((A,V)=>e.jsxDEV("div",{className:"relative",children:e.jsxDEV("img",{src:A.data||A.url,alt:A.name||`Foto ${V+1}`,className:"w-full h-20 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11868,columnNumber:35},this)},A.id||V,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11864,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11862,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11858,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11684,columnNumber:21},this),e.jsxDEV("div",{className:"mt-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Informaç€s Detalhadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11884,columnNumber:25},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Orçamento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11889,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-900",children:L.budget?`€${L.budget.toLocaleString("pt-PT")}`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11892,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11888,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Custo Real"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11899,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-900",children:L.actualCost?`€${L.actualCost.toLocaleString("pt-PT")}`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11902,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11898,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Conclusão Prevista"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11909,columnNumber:29},this),e.jsxDEV("p",{className:"text-gray-900",children:L.expectedEndDate?new Date(L.expectedEndDate).toLocaleDateString("pt-PT"):"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11912,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11908,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Folha de Obra"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11921,columnNumber:29},this),e.jsxDEV("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L.folhaGerada?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:L.folhaGerada?"��� Gerada":"✗ Não gerada"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11924,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11920,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11887,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11883,columnNumber:23},this),L.type==="furo"&&e.jsxDEV("div",{className:"border-l-4 border-cyan-500 pl-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-cyan-700 mb-4",children:"🚰 Detalhes do Furo de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11942,columnNumber:27},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Profundidade do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11947,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900 font-mono",children:L.boreDepth?`${L.boreDepth} m`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11950,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11946,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Nível da Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11957,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900 font-mono",children:L.waterLevel?`${L.waterLevel} m`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11960,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11956,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Caudal do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11967,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900 font-mono",children:L.flowRate?`${L.flowRate} m✅/h`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11970,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11966,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Profundidade da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11977,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900 font-mono",children:L.pumpDepth?`${L.pumpDepth} m`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11980,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11976,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Coluna"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11987,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900",children:L.columnType||"N��o especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11990,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11986,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Di�����metro da Coluna"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11995,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900",children:L.columnDiameter?`${L.columnDiameter}"`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11998,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11994,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Modelo da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12005,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900",children:L.pumpModel||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12008,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12004,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Potência do Motor"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12013,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900",children:L.motorPower?`${L.motorPower} HP`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12016,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12012,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Voltagem da Bomba"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12023,columnNumber:31},this),e.jsxDEV("p",{className:"text-gray-900",children:L.pumpVoltage||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12026,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12022,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11945,columnNumber:27},this),L.boreObservations&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaç��es Específicas do Furo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12033,columnNumber:31},this),e.jsxDEV("div",{className:"bg-cyan-50 border border-cyan-200 rounded-lg p-3",children:e.jsxDEV("p",{className:"text-gray-900",children:L.boreObservations},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12037,columnNumber:33},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12036,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12032,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11941,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11881,columnNumber:21},this),L.description&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12049,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-md",children:L.description},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12052,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12048,columnNumber:23},this),L.budget&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Orçamento"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12060,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900",children:["€",L.budget]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12063,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12059,columnNumber:23},this),L.workPerformed&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trabalho Realizado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12069,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-md",children:L.workPerformed},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12072,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12068,columnNumber:23},this),L.observations&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12080,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-md",children:L.observations},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12083,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12079,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Criação"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12091,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 text-sm",children:new Date(L.createdAt||L.startDate).toLocaleString("pt-PT")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12094,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12090,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12089,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11683,columnNumber:19},this),e.jsxDEV("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxDEV("button",{onClick:()=>{Va(!1),ja(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Fechar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12104,columnNumber:21},this),ce("obras","edit")&&e.jsxDEV("button",{onClick:()=>{Oo(L),ya(L.assignedUsers||[]),Va(!1),ja(null),p("editar-obra")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Editar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12114,columnNumber:23},this),ce("obras","delete")&&e.jsxDEV("button",{onClick:()=>{window.confirm(`Tem a certeza que deseja apagar a obra "${L.title||L.client}"?

Esta ação não pode ser desfeita.`)&&(xn(L.id),no("Obra Eliminada",`A obra "${L.title||L.client}" foi eliminada com sucesso`,"success"),Va(!1),ja(null))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Apagar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12131,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12103,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11659,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11658,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11657,columnNumber:13},this),Qi&&ne&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6 border-b border-gray-200 pb-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(We,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12168,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12167,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Detalhes Completos da Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12171,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-600",children:ne.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12174,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12170,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12166,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>{Wa(!1),Ba(null)},className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsxDEV(ve,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12184,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12177,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12165,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Informações B✅sicas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12191,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Piscina"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12196,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.name},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12199,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12195,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12202,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900 capitalize",children:ne.type},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12205,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12201,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12210,columnNumber:27},this),e.jsxDEV("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${ne.status==="Ativa"?"bg-green-100 text-green-700":ne.status==="Inativa"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:ne.status},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12213,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12209,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Localiza✅ão"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12226,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>{ne!=null&&ne.location&&ta(ne.location)},className:`text-left ${Pe?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-900"}`,disabled:!Pe,children:["🔥�� ",ne.location]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12229,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12225,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12194,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12190,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Informa��ões do Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12250,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Nome do Cliente"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12255,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.client},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12258,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12254,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Email"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12261,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.clientEmail||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12264,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12260,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12269,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>{ne!=null&&ne.clientPhone&&Ka(ne.clientPhone)},className:`${Me&&ne.clientPhone?"text-blue-600 hover:text-blue-800 underline cursor-pointer":"text-gray-900"}`,disabled:!Me||!ne.clientPhone,children:["📞 ",ne.clientPhone||"Não especificado"]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12272,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12268,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12253,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12249,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Especificações Técnicas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12295,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Volume de Água"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12300,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.waterVolume?`${ne.waterVolume} L`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12303,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12299,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Dimensões"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12310,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.dimensions||"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12313,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12309,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Profundidade"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12318,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.depth?`${ne.depth} m`:"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12321,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12317,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12298,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12294,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Manutenções"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12332,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Última Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12337,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.lastMaintenance?new Date(ne.lastMaintenance).toLocaleDateString("pt-PT"):"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12340,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12336,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Próxima Manutenção"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12349,columnNumber:27},this),e.jsxDEV("p",{className:"text-gray-900",children:ne.nextMaintenance?new Date(ne.nextMaintenance).toLocaleDateString("pt-PT"):"Não especificado"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12352,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12348,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12335,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12331,columnNumber:21},this),ne.observations&&e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Observações"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12366,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-md",children:ne.observations},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12369,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12365,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Registo"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12377,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-900",children:new Date(ne.createdAt||new Date).toLocaleString("pt-PT")},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12380,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12376,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12188,columnNumber:19},this),e.jsxDEV("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxDEV("button",{onClick:()=>{Wa(!1),Ba(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Fechar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12389,columnNumber:21},this),ce("piscinas","edit")&&e.jsxDEV("button",{onClick:()=>{ia(ne),Wa(!1),Ba(null),p("editar-piscina")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Editar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12399,columnNumber:23},this),ce("piscinas","delete")&&e.jsxDEV("button",{onClick:()=>{window.confirm(`Tem a certeza que deseja apagar a piscina "${ne.name}"?

Esta ação não pode ser desfeita.`)&&(ss.deletePool(ne.id),no("Piscina Eliminada",`A piscina "${ne.name}" foi eliminada com sucesso`,"success"),Wa(!1),Ba(null))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Apagar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12412,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12388,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:12163,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12162,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12161,columnNumber:13},this),e.jsxDEV("main",{className:"lg:ml-80 min-h-screen",children:e.jsxDEV("div",{className:"p-4 lg:p-6",children:ct()},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12442,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12441,columnNumber:11},this),e.jsxDEV(Yt,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12446,columnNumber:11},this),fn&&!yo&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:e.jsxDEV(qn,{onLogin:()=>{jo(!0),aa(!1)},onBack:()=>aa(!1)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12454,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12453,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12452,columnNumber:13},this),yo&&e.jsxDEV("div",{className:"fixed inset-0 bg-white z-50",children:e.jsxDEV(_r,{currentUser:l,onLogout:()=>{jo(!1),aa(!1)}},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12468,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12467,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11389,columnNumber:9},this),e.jsxDEV(Xc,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:12483,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11388,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11381,columnNumber:5},this):e.jsxDEV("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontFamily:"system-ui, -apple-system, sans-serif"},children:e.jsxDEV("div",{style:{textAlign:"center"},children:[e.jsxDEV("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"🏊‍♂️"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11370,columnNumber:11},this),e.jsxDEV("div",{style:{fontSize:"1.25rem",marginBottom:"1rem"},children:"Leirisonda"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11371,columnNumber:11},this),e.jsxDEV("div",{style:{opacity:.8},children:"A carregar aplicação..."},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11374,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11369,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11358,columnNumber:7},this)):(console.log("🛡🎉 SECURITY: Blocking access - isAuthenticated:",u,"currentUser:",!!l,"timestamp:",new Date().toISOString()),Pi?Ii?e.jsxDEV(Qt,{onBack:nt,currentUser:l,onNavigateToSection:V=>{console.log(`Navegando para seção: ${V}`),V==="utilizadores"&&console.log("✅ Access granted: User management via advanced settings"),G(V),ga(!1),Oa(!1)},dataSync:{pools:ye,maintenance:Ie,works:de,clients:ze,lastSync:Li,syncWithFirebase:_i,enableSync:Bi}},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11125,columnNumber:11},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(Xe,{className:"h-8 w-8 text-red-600"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11162,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11161,columnNumber:15},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Área Protegida"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11164,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-600",children:"Insira a palavra-passe para aceder às configura📞ções avançadas"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11167,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11160,columnNumber:13},this),e.jsxDEV("form",{onSubmit:rt,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palavra-passe"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11174,columnNumber:17},this),e.jsxDEV("input",{type:"password",value:Ra,onChange:V=>pn(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Insira a palavra-passe",required:!0},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11177,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11173,columnNumber:15},this),Nn&&e.jsxDEV("div",{className:"text-red-600 text-sm",children:Nn},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11188,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{type:"button",onClick:()=>ga(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Voltar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11194,columnNumber:17},this),e.jsxDEV("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Entrar"},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11201,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11193,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11172,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11159,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11158,columnNumber:9},this):new URLSearchParams(window.location.search).get("diagnostic")==="true"?e.jsxDEV(Yc,{},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11217,columnNumber:14},this):e.jsxDEV("div",{children:[e.jsxDEV(Kn,{onLogin:async(V,I,R=!1)=>{if(Os(""),!(V!=null&&V.trim())||!(I!=null&&I.trim())){Os("Por favor, preencha todos os campos");return}try{await Mi.checkOnUserAction();const H=await us.login(V.trim(),I,R);if(H.success&&H.user){f(H.user),d(!0),q.setItem("currentUser",JSON.stringify(H.user)),q.setItem("isAuthenticated","true"),Lr({email:"",password:""});const Y=window.location.hash.substring(1);Y&&Y!=="login"?["dashboard","obras","piscinas","manutencoes","futuras-manutencoes","nova-obra","nova-piscina","nova-manutencao","clientes","novo-cliente","configuracoes","relatorios","utilizadores","localizacoes","register","editar-obra","editar-piscina","editar-manutencao","diagnostic"].includes(Y)?setTimeout(()=>{p(Y)},100):(window.location.hash="",G("dashboard")):G("dashboard")}else console.warn("❌ Login failed:",H.error),Os("Login incorreto")}catch(H){console.error("✅ Login error:",H),Os("Login incorreto")}},loginError:En,isLoading:!1},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11222,columnNumber:9},this),fn&&!yo&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:e.jsxDEV(qn,{onLogin:()=>{jo(!0),aa(!1)},onBack:()=>aa(!1)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11324,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11323,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11322,columnNumber:11},this),yo&&e.jsxDEV("div",{className:"fixed inset-0 bg-white z-50",children:e.jsxDEV(_r,{currentUser:l,onLogout:()=>{jo(!1),aa(!1)}},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11338,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/src/App.tsx",lineNumber:11337,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/src/App.tsx",lineNumber:11221,columnNumber:7},this))}class rd extends m.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){var a,o;return console.error("🚨 Error Boundary caught error:",s),(o=(a=import.meta)==null?void 0:a.env)!=null&&o.PROD&&console.error("📱 PRODUÇÃO - Erro capturado:",{message:s.message,stack:s.stack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent}),{hasError:!0,error:s}}componentDidCatch(s,a){console.error("🚨 Error Boundary details:",{error:s.message,stack:s.stack,componentStack:a.componentStack,timestamp:new Date().toISOString()}),this.setState({error:s,errorInfo:a})}render(){return this.state.hasError?(console.error("🚨 ErrorBoundary activated:",this.state.error),e.jsxDEV("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",fontFamily:"system-ui"},children:e.jsxDEV("div",{style:{background:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",maxWidth:"600px",width:"100%"},children:[e.jsxDEV("h1",{style:{color:"#dc2626",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Leirisonda - Erro da Aplicação"},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV("p",{style:{marginBottom:"1rem",color:"#6b7280"},children:"A aplicação encontrou um erro e precisa ser recarregada:"},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:86,columnNumber:13},this),this.state.error&&e.jsxDEV("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.375rem",padding:"1rem",marginBottom:"1rem"},children:[e.jsxDEV("h3",{style:{color:"#dc2626",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Detalhes do Erro:"},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:105,columnNumber:17},this),e.jsxDEV("pre",{style:{color:"#dc2626",fontSize:"0.75rem",whiteSpace:"pre-wrap",margin:0,fontFamily:"monospace"},children:this.state.error.message},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:115,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:96,columnNumber:15},this),e.jsxDEV("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxDEV("button",{onClick:()=>window.location.reload(),style:{background:"#3b82f6",color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"Recarregar"},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:130,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},style:{background:"#dc2626",color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"Limpar Dados e Recarregar"},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:145,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:129,columnNumber:13},this),e.jsxDEV("p",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"1rem"},children:["Timestamp: ",new Date().toLocaleString("pt-PT")]},void 0,!0,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:165,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:65,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/src/components/ErrorBoundary.tsx",lineNumber:54,columnNumber:9},this)):this.props.children}}console.log("🚀 Inicializando aplicação...");window.addEventListener("error",n=>{var s;console.error("❌ Global error:",n.error),console.error("❌ Error details:",{message:n.message,filename:n.filename,lineno:n.lineno,colno:n.colno,stack:(s=n.error)==null?void 0:s.stack})});window.addEventListener("unhandledrejection",n=>{if(n.reason&&(n.reason.toString().includes("firebase")||n.reason.toString().includes("messaging")||n.reason.toString().includes("_FirebaseError"))){console.warn("⚠️ Firebase messaging error handled gracefully:",n.reason.message||n.reason),n.preventDefault();return}console.error("❌ Unhandled promise rejection:",n.reason),console.error("❌ Promise:",n.promise)});const ir=document.getElementById("root");if(!ir)throw new Error("Root element not found");try{console.log("🔄 Tentando renderizar aplicação..."),console.log("🔍 Root element:",ir),console.log("🔍 CSS imported:",!!document.querySelector('style, link[rel="stylesheet"]')),console.log("🚀 Loading application..."),console.log("🔍 Environment:","production",!1),console.log("🔍 Base URL:","/");const n=od;console.log("📱 PRODUÇÃO = DESENVOLVIMENTO: Usando App principal completo"),ut.createRoot(ir).render(e.jsxDEV(rd,{children:e.jsxDEV(n,{},void 0,!1,{fileName:"/app/code/src/main.tsx",lineNumber:110,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/main.tsx",lineNumber:109,columnNumber:5},void 0)),console.log("✅ Aplicação renderizada com sucesso!")}catch(n){console.error("❌ Erro ao renderizar App:",n),console.error("❌ Stack trace:",n.stack),ir.innerHTML=`
    <div style="min-height: 100vh; background: #f3f4f6; display: flex; align-items: center; justify-content: center; padding: 1rem; font-family: system-ui;">
      <div style="background: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); max-width: 500px;">
        <h1 style="color: #dc2626; font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Leirisonda - Erro de Carregamento</h1>
        <p style="margin-bottom: 1rem; color: #6b7280;">A aplicação encontrou um erro durante o carregamento:</p>
        <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 0.375rem; padding: 1rem; margin-bottom: 1rem;">
          <pre style="color: #dc2626; font-size: 0.875rem; white-space: pre-wrap;">${n.message}</pre>
        </div>
        <button onclick="location.reload()" style="background: #3b82f6; color: white; padding: 0.5rem 1rem; border: none; border-radius: 0.375rem; cursor: pointer; margin-right: 0.5rem;">
          Recarregar Página
        </button>
        <button onclick="console.clear(); localStorage.clear(); location.reload()" style="background: #dc2626; color: white; padding: 0.5rem 1rem; border: none; border-radius: 0.375rem; cursor: pointer;">
          Limpar Cache e Recarregar
        </button>
      </div>
    </div>
  `}export{mr as F,Xo as a,Td as r};
