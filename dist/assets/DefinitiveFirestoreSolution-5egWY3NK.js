const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-C-G65PT7.js","assets/react-vendor-rbdJLrTD.js"])))=>i.map(i=>d[i]);
import{r as m,a as e}from"./react-vendor-rbdJLrTD.js";import{_ as p}from"./pdf-vendor-BI33O7zM.js";import{g,i as E,a as v}from"./vendor-C-G65PT7.js";const D={apiKey:"AIzaSyBM6gvL9L6K0CEnM3s5ZzPGqHzut7idLQw",authDomain:"leiria-1cfc9.firebaseapp.com",databaseURL:"https://leiria-1cfc9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"leiria-1cfc9",storageBucket:"leiria-1cfc9.firebasestorage.app",messagingSenderId:"632599887141",appId:"1:632599887141:web:1290b471d41fc3ad64eecc",measurementId:"G-Q2QWQVH60L"};async function S(){var s;try{console.log("🔥 TESTE DEFINITIVO - Projeto leiria-1cfc9");let o;g().length===0?o=E(D):o=v(),console.log("✅ Firebase App inicializada:",o.options.projectId);try{const{getFirestore:t}=await p(async()=>{const{getFirestore:d}=await import("./vendor-C-G65PT7.js").then(u=>u.U);return{getFirestore:d}},__vite__mapDeps([0,1])),r=t(o);console.log("🎉 Firestore FUNCIONANDO!");const{doc:l,setDoc:n,getDoc:a,serverTimestamp:c}=await p(async()=>{const{doc:d,setDoc:u,getDoc:N,serverTimestamp:b}=await import("./vendor-C-G65PT7.js").then(x=>x.U);return{doc:d,setDoc:u,getDoc:N,serverTimestamp:b}},__vite__mapDeps([0,1])),i=l(r,"test-definitivo","sucesso");await n(i,{message:"FIRESTORE FUNCIONANDO!",timestamp:c(),project:o.options.projectId});const f=await a(i);return f.exists()?{success:!0,message:"🎉 FIRESTORE TOTALMENTE FUNCIONAL! Os dados estão a ser guardados corretamente.",action:"SUCCESS",data:{projectId:o.options.projectId,dataWritten:!0,dataRead:!0,document:f.data()}}:{success:!1,message:"Firestore inicializado mas não consegue ler dados",action:"CHECK_RULES"}}catch(t){return console.error("❌ Erro Firestore:",t),(s=t.stack)!=null&&s.includes("getImmediate")?{success:!1,message:"🚨 CONFIRMADO: Firestore NÃO está habilitado no projeto leiria-1cfc9",action:"ENABLE_FIRESTORE",data:{projectId:o.options.projectId,error:"getImmediate - serviço não existe",consoleUrl:`https://console.firebase.google.com/project/${o.options.projectId}/firestore`,authDomain:o.options.authDomain}}:{success:!1,message:`Erro diferente: ${t.message}`,action:"INVESTIGATE",data:{error:t.code,message:t.message}}}}catch(o){return{success:!1,message:`Erro geral: ${o.message}`,action:"CHECK_CONFIG",data:{error:o.message}}}}function h(s){return`
🔧 INSTRUÇÕES PARA HABILITAR FIRESTORE NO PROJETO ${s.toUpperCase()}:

1. Aceda a: https://console.firebase.google.com/project/${s}/firestore

2. Se vir "Cloud Firestore" mas sem base de dados:
   - Clique em "Create database"
   - Escolha "Start in test mode" 
   - Selecione localização: europe-west3 (Frankfurt)
   - Aguarde criação (1-2 minutos)

3. Se já existe uma base de dados mas com erro:
   - Verifique se está na aba "Data" (não "Rules")
   - Confirm que o status é "Active"

4. Verifique as regras de segurança:
   - Vá para aba "Rules"
   - Certifique-se que permite leitura/escrita:
   
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /{document=**} {
         allow read, write: if true;
       }
     }
   }

5. Após qualquer mudança, aguarde 1-2 minutos e teste novamente.

���️ IMPORTANTE: O projeto correto é "${s}" - certifique-se que está no projeto certo!
`}const O=()=>{var c;const[s,o]=m.useState(!1),[t,r]=m.useState(null),[l,n]=m.useState(!1),a=async()=>{o(!0),r(null),n(!1);try{const i=await S();r(i),i.action==="ENABLE_FIRESTORE"&&n(!0)}catch(i){r({success:!1,message:`Erro no teste: ${i.message}`,action:"ERROR"})}finally{o(!1)}};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[95vh] overflow-y-auto p-6",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-red-700 mb-2",children:"🚨 SOLUÇÃO DEFINITIVA FIRESTORE"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:39,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Teste final com configuração 100% correta do projeto leiria-1cfc9"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:42,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:38,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-center mb-6",children:e.jsxDEV("button",{onClick:a,disabled:s,className:`px-8 py-4 rounded-lg font-bold text-lg ${s?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-red-600 hover:bg-red-700 text-white"}`,children:s?"🔄 TESTANDO...":"🎯 EXECUTAR TESTE DEFINITIVO"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:48,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:47,columnNumber:9},void 0),t&&e.jsxDEV("div",{className:`mb-6 p-6 rounded-lg border-2 ${t.success?"bg-green-50 border-green-500":"bg-red-50 border-red-500"}`,children:[e.jsxDEV("h2",{className:`text-2xl font-bold mb-4 ${t.success?"text-green-700":"text-red-700"}`,children:t.success?"🎉 SUCESSO!":"❌ PROBLEMA IDENTIFICADO"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:70,columnNumber:13},void 0),e.jsxDEV("p",{className:`text-lg mb-4 ${t.success?"text-green-700":"text-red-700"}`,children:t.message},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:78,columnNumber:13},void 0),t.success&&e.jsxDEV("div",{className:"bg-green-100 p-4 rounded",children:[e.jsxDEV("h3",{className:"font-bold text-green-800 mb-2",children:"🎊 FIRESTORE FUNCIONANDO!"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:88,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-green-700",children:"Os dados estão a ser guardados e lidos corretamente. A aplicação pode agora funcionar normalmente com persistência na nuvem."},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:91,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:87,columnNumber:15},void 0),t.data&&e.jsxDEV("details",{className:"mt-4",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium",children:"📋 Detalhes Técnicos"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:101,columnNumber:17},void 0),e.jsxDEV("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-x-auto",children:JSON.stringify(t.data,null,2)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:104,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:100,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:63,columnNumber:11},void 0),l&&((c=t==null?void 0:t.data)==null?void 0:c.projectId)&&e.jsxDEV("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-yellow-800 mb-4",children:"🔧 AÇÃO NECESSÁRIA"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:115,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded border",children:e.jsxDEV("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:h(t.data.projectId)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:120,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:119,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-6 text-center",children:e.jsxDEV("a",{href:t.data.consoleUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold text-lg",children:"🚀 ABRIR FIREBASE CONSOLE"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:126,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:125,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{onClick:a,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-medium",children:"🔄 TESTAR NOVAMENTE"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:137,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:114,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"🔄 Recarregar Página"},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:148,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:147,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:37,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/DefinitiveFirestoreSolution.tsx",lineNumber:36,columnNumber:5},void 0)};export{O as DefinitiveFirestoreSolution,O as default};
