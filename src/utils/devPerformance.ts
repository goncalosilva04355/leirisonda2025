// UtilitÃ¡rio para melhorar performance durante desenvolvimento
// Desativa polling e intervals que causam refreshes no Builder.io

// FunÃ§Ã£o para criar interval que sÃ³ funciona em produÃ§Ã£o
export function createProductionInterval(
  callback: () => void,
  delay: number,
): NodeJS.Timeout | null {
  if (import.meta.env.DEV) {
    console.log(
      `ğŸš« Interval desativado em desenvolvimento (delay: ${delay}ms)`,
    );
    return null;
  }

  return setInterval(callback, delay);
}

// FunÃ§Ã£o para criar timeout que sÃ³ funciona em produÃ§Ã£o
export function createProductionTimeout(
  callback: () => void,
  delay: number,
): NodeJS.Timeout | null {
  if (import.meta.env.DEV) {
    console.log(`ğŸš« Timeout desativado em desenvolvimento (delay: ${delay}ms)`);
    return null;
  }

  return setTimeout(callback, delay);
}

// FunÃ§Ã£o para limpar interval de forma segura
export function safeClearInterval(interval: NodeJS.Timeout | null): void {
  if (interval) {
    clearInterval(interval);
  }
}

// Wrapper para useEffect que sÃ³ executa em produÃ§Ã£o
export function useProductionEffect(
  effect: () => void | (() => void),
  deps?: React.DependencyList,
): void {
  // React jÃ¡ estÃ¡ importado no escopo onde esta funÃ§Ã£o Ã© usada
  // Removendo o require desnecessÃ¡rio

  // React.useEffect(() => {
    if (import.meta.env.DEV) {
      console.log("ğŸš« Effect desativado em desenvolvimento");
      return;
    }

    return effect();
  }, deps);
}

// Log de performance melhorada
if (import.meta.env.DEV) {
  console.log("ğŸš€ Performance modo desenvolvimento ativo:");
  console.log("   âŒ Polling desativado");
  console.log("   âŒ Intervals desativados");
  console.log("   âŒ Auto-refresh desativado");
  console.log("   âœ… Builder.io estabilizado");
}